(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HS={exports:{}},zh={},WS={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=Symbol.for("react.element"),rO=Symbol.for("react.portal"),iO=Symbol.for("react.fragment"),sO=Symbol.for("react.strict_mode"),oO=Symbol.for("react.profiler"),aO=Symbol.for("react.provider"),lO=Symbol.for("react.context"),uO=Symbol.for("react.forward_ref"),cO=Symbol.for("react.suspense"),dO=Symbol.for("react.memo"),hO=Symbol.for("react.lazy"),T1=Symbol.iterator;function fO(t){return t===null||typeof t!="object"?null:(t=T1&&t[T1]||t["@@iterator"],typeof t=="function"?t:null)}var KS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qS=Object.assign,GS={};function Pa(t,e,n){this.props=t,this.context=e,this.refs=GS,this.updater=n||KS}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JS(){}JS.prototype=Pa.prototype;function jy(t,e,n){this.props=t,this.context=e,this.refs=GS,this.updater=n||KS}var $y=jy.prototype=new JS;$y.constructor=jy;qS($y,Pa.prototype);$y.isPureReactComponent=!0;var _1=Array.isArray,YS=Object.prototype.hasOwnProperty,zy={current:null},QS={key:!0,ref:!0,__self:!0,__source:!0};function XS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)YS.call(e,r)&&!QS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pu,type:t,key:s,ref:o,props:i,_owner:zy.current}}function pO(t,e){return{$$typeof:Pu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function By(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pu}function mO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A1=/\/+/g;function Mf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mO(""+t.key):e.toString(36)}function Nc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pu:case rO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Mf(o,0):r,_1(i)?(n="",t!=null&&(n=t.replace(A1,"$&/")+"/"),Nc(i,e,n,"",function(u){return u})):i!=null&&(By(i)&&(i=pO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(A1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Mf(s,a);o+=Nc(s,e,n,l,i)}else if(l=fO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Mf(s,a++),o+=Nc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],i=0;return Nc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Dc={transition:null},yO={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:zy};function ZS(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!By(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Pa;Fe.Fragment=iO;Fe.Profiler=oO;Fe.PureComponent=jy;Fe.StrictMode=sO;Fe.Suspense=cO;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yO;Fe.act=ZS;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)YS.call(e,l)&&!QS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pu,type:t.type,key:i,ref:s,props:r,_owner:o}};Fe.createContext=function(t){return t={$$typeof:lO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aO,_context:t},t.Consumer=t};Fe.createElement=XS;Fe.createFactory=function(t){var e=XS.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:uO,render:t}};Fe.isValidElement=By;Fe.lazy=function(t){return{$$typeof:hO,_payload:{_status:-1,_result:t},_init:gO}};Fe.memo=function(t,e){return{$$typeof:dO,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};Fe.unstable_act=ZS;Fe.useCallback=function(t,e){return xn.current.useCallback(t,e)};Fe.useContext=function(t){return xn.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return xn.current.useEffect(t,e)};Fe.useId=function(){return xn.current.useId()};Fe.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return xn.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Fe.useRef=function(t){return xn.current.useRef(t)};Fe.useState=function(t){return xn.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return xn.current.useTransition()};Fe.version="18.3.1";WS.exports=Fe;var P=WS.exports;const di=$h(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO=P,wO=Symbol.for("react.element"),xO=Symbol.for("react.fragment"),bO=Object.prototype.hasOwnProperty,kO=vO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SO={key:!0,ref:!0,__self:!0,__source:!0};function eE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bO.call(e,r)&&!SO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wO,type:t,key:s,ref:o,props:i,_owner:kO.current}}zh.Fragment=xO;zh.jsx=eE;zh.jsxs=eE;HS.exports=zh;var E=HS.exports,xm={},tE={exports:{}},Hn={},nE={exports:{}},rE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,j){var C=$.length;$.push(j);e:for(;0<C;){var q=C-1>>>1,G=$[q];if(0<i(G,j))$[q]=j,$[C]=G,C=q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var j=$[0],C=$.pop();if(C!==j){$[0]=C;e:for(var q=0,G=$.length,A=G>>>1;q<A;){var K=2*(q+1)-1,V=$[K],te=K+1,we=$[te];if(0>i(V,C))te<G&&0>i(we,V)?($[q]=we,$[te]=C,q=te):($[q]=V,$[K]=C,q=K);else if(te<G&&0>i(we,C))$[q]=we,$[te]=C,q=te;else break e}}return j}function i($,j){var C=$.sortIndex-j.sortIndex;return C!==0?C:$.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=$)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function S($){if(g=!1,v($),!p)if(n(l)!==null)p=!0,I(T);else{var j=n(u);j!==null&&_(S,j.startTime-$)}}function T($,j){p=!1,g&&(g=!1,m(b),b=-1),f=!0;var C=h;try{for(v(j),d=n(l);d!==null&&(!(d.expirationTime>j)||$&&!M());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var G=q(d.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),v(j)}else r(l);d=n(l)}if(d!==null)var A=!0;else{var K=n(u);K!==null&&_(S,K.startTime-j),A=!1}return A}finally{d=null,h=C,f=!1}}var x=!1,R=null,b=-1,k=5,O=-1;function M(){return!(t.unstable_now()-O<k)}function N(){if(R!==null){var $=t.unstable_now();O=$;var j=!0;try{j=R(!0,$)}finally{j?L():(x=!1,R=null)}}else x=!1}var L;if(typeof w=="function")L=function(){w(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=N,L=function(){z.postMessage(null)}}else L=function(){y(N,0)};function I($){R=$,x||(x=!0,L())}function _($,j){b=y(function(){$(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(T))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var C=h;h=j;try{return $()}finally{h=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,j){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var C=h;h=$;try{return j()}finally{h=C}},t.unstable_scheduleCallback=function($,j,C){var q=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?q+C:q):C=q,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=C+G,$={id:c++,callback:j,priorityLevel:$,startTime:C,expirationTime:G,sortIndex:-1},C>q?($.sortIndex=C,e(u,$),n(l)===null&&$===n(u)&&(g?(m(b),b=-1):g=!0,_(S,C-q))):($.sortIndex=G,e(l,$),p||f||(p=!0,I(T))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var j=h;return function(){var C=h;h=j;try{return $.apply(this,arguments)}finally{h=C}}}})(rE);nE.exports=rE;var EO=nE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO=P,Vn=EO;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iE=new Set,Fl={};function co(t,e){fa(t,e),fa(t+"Capture",e)}function fa(t,e){for(Fl[t]=e,t=0;t<e.length;t++)iE.add(e[t])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bm=Object.prototype.hasOwnProperty,TO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R1={},P1={};function _O(t){return bm.call(P1,t)?!0:bm.call(R1,t)?!1:TO.test(t)?P1[t]=!0:(R1[t]=!0,!1)}function AO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RO(t,e,n,r){if(e===null||typeof e>"u"||AO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function Uy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fy,Uy);nn[e]=new bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fy,Uy);nn[e]=new bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fy,Uy);nn[e]=new bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new bn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vy(t,e,n,r){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RO(e,n,i,r)&&(n=null),r||i===null?_O(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wi=CO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),No=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),Hy=Symbol.for("react.strict_mode"),km=Symbol.for("react.profiler"),sE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),Wy=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),Ky=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),aE=Symbol.for("react.offscreen"),O1=Symbol.iterator;function Ua(t){return t===null||typeof t!="object"?null:(t=O1&&t[O1]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,Nf;function rl(t){if(Nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nf=e&&e[1]||""}return`
`+Nf+t}var Df=!1;function Lf(t,e){if(!t||Df)return"";Df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Df=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function PO(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=Lf(t.type,!1),t;case 11:return t=Lf(t.type.render,!1),t;case 1:return t=Lf(t.type,!0),t;default:return""}}function Cm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case No:return"Portal";case km:return"Profiler";case Hy:return"StrictMode";case Sm:return"Suspense";case Em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oE:return(t.displayName||"Context")+".Consumer";case sE:return(t._context.displayName||"Context")+".Provider";case Wy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ky:return e=t.displayName||null,e!==null?e:Cm(t.type)||"Memo";case _i:e=t._payload,t=t._init;try{return Cm(t(e))}catch{}}return null}function OO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cm(e);case 8:return e===Hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IO(t){var e=lE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yu(t){t._valueTracker||(t._valueTracker=IO(t))}function uE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tm(t,e){var n=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cE(t,e){e=e.checked,e!=null&&Vy(t,"checked",e,!1)}function _m(t,e){cE(t,e);var n=rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Am(t,e.type,n):e.hasOwnProperty("defaultValue")&&Am(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function M1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Am(t,e,n){(e!=="number"||ud(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var il=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(il(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function dE(t,e){var n=rs(e.value),r=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function D1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qu,fE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qu=Qu||document.createElement("div"),Qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ul(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MO=["Webkit","ms","Moz","O"];Object.keys(fl).forEach(function(t){MO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fl[e]=fl[t]})});function pE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fl.hasOwnProperty(t)&&fl[t]?(""+e).trim():e+"px"}function mE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=pE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NO=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Om(t,e){if(e){if(NO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Im(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mm=null;function qy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,ta=null,na=null;function L1(t){if(t=Mu(t)){if(typeof Nm!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Hh(e),Nm(t.stateNode,t.type,e))}}function gE(t){ta?na?na.push(t):na=[t]:ta=t}function yE(){if(ta){var t=ta,e=na;if(na=ta=null,L1(t),e)for(t=0;t<e.length;t++)L1(e[t])}}function vE(t,e){return t(e)}function wE(){}var jf=!1;function xE(t,e,n){if(jf)return t(e,n);jf=!0;try{return vE(t,e,n)}finally{jf=!1,(ta!==null||na!==null)&&(wE(),yE())}}function Vl(t,e){var n=t.stateNode;if(n===null)return null;var r=Hh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Dm=!1;if(hi)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{Dm=!1}function DO(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var pl=!1,cd=null,dd=!1,Lm=null,LO={onError:function(t){pl=!0,cd=t}};function jO(t,e,n,r,i,s,o,a,l){pl=!1,cd=null,DO.apply(LO,arguments)}function $O(t,e,n,r,i,s,o,a,l){if(jO.apply(this,arguments),pl){if(pl){var u=cd;pl=!1,cd=null}else throw Error(oe(198));dd||(dd=!0,Lm=u)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j1(t){if(ho(t)!==t)throw Error(oe(188))}function zO(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return j1(i),t;if(s===r)return j1(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function kE(t){return t=zO(t),t!==null?SE(t):null}function SE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SE(t);if(e!==null)return e;t=t.sibling}return null}var EE=Vn.unstable_scheduleCallback,$1=Vn.unstable_cancelCallback,BO=Vn.unstable_shouldYield,FO=Vn.unstable_requestPaint,Tt=Vn.unstable_now,UO=Vn.unstable_getCurrentPriorityLevel,Gy=Vn.unstable_ImmediatePriority,CE=Vn.unstable_UserBlockingPriority,hd=Vn.unstable_NormalPriority,VO=Vn.unstable_LowPriority,TE=Vn.unstable_IdlePriority,Bh=null,Vr=null;function HO(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Bh,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:qO,WO=Math.log,KO=Math.LN2;function qO(t){return t>>>=0,t===0?32:31-(WO(t)/KO|0)|0}var Xu=64,Zu=4194304;function sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=sl(a):(s&=o,s!==0&&(r=sl(s)))}else o=n&~i,o!==0?r=sl(o):s!==0&&(r=sl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_r(e),i=1<<n,r|=t[n],e&=~i;return r}function GO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_r(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=GO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _E(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function $f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_r(e),t[e]=n}function YO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_r(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Jy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_r(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var tt=0;function AE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var RE,Yy,PE,OE,IE,$m=!1,ec=[],Hi=null,Wi=null,Ki=null,Hl=new Map,Wl=new Map,Mi=[],QO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z1(t,e){switch(t){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(e.pointerId)}}function Ha(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Mu(e),e!==null&&Yy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XO(t,e,n,r,i){switch(e){case"focusin":return Hi=Ha(Hi,t,e,n,r,i),!0;case"dragenter":return Wi=Ha(Wi,t,e,n,r,i),!0;case"mouseover":return Ki=Ha(Ki,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hl.set(s,Ha(Hl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wl.set(s,Ha(Wl.get(s)||null,t,e,n,r,i)),!0}return!1}function ME(t){var e=Ns(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=bE(n),e!==null){t.blockedOn=e,IE(t.priority,function(){PE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mm=r,n.target.dispatchEvent(r),Mm=null}else return e=Mu(n),e!==null&&Yy(e),t.blockedOn=n,!1;e.shift()}return!0}function B1(t,e,n){Lc(t)&&n.delete(e)}function ZO(){$m=!1,Hi!==null&&Lc(Hi)&&(Hi=null),Wi!==null&&Lc(Wi)&&(Wi=null),Ki!==null&&Lc(Ki)&&(Ki=null),Hl.forEach(B1),Wl.forEach(B1)}function Wa(t,e){t.blockedOn===e&&(t.blockedOn=null,$m||($m=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,ZO)))}function Kl(t){function e(i){return Wa(i,t)}if(0<ec.length){Wa(ec[0],t);for(var n=1;n<ec.length;n++){var r=ec[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hi!==null&&Wa(Hi,t),Wi!==null&&Wa(Wi,t),Ki!==null&&Wa(Ki,t),Hl.forEach(e),Wl.forEach(e),n=0;n<Mi.length;n++)r=Mi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)ME(n),n.blockedOn===null&&Mi.shift()}var ra=wi.ReactCurrentBatchConfig,pd=!0;function eI(t,e,n,r){var i=tt,s=ra.transition;ra.transition=null;try{tt=1,Qy(t,e,n,r)}finally{tt=i,ra.transition=s}}function tI(t,e,n,r){var i=tt,s=ra.transition;ra.transition=null;try{tt=4,Qy(t,e,n,r)}finally{tt=i,ra.transition=s}}function Qy(t,e,n,r){if(pd){var i=zm(t,e,n,r);if(i===null)Gf(t,e,r,md,n),z1(t,r);else if(XO(i,t,e,n,r))r.stopPropagation();else if(z1(t,r),e&4&&-1<QO.indexOf(t)){for(;i!==null;){var s=Mu(i);if(s!==null&&RE(s),s=zm(t,e,n,r),s===null&&Gf(t,e,r,md,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Gf(t,e,r,null,n)}}var md=null;function zm(t,e,n,r){if(md=null,t=qy(r),t=Ns(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return md=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UO()){case Gy:return 1;case CE:return 4;case hd:case VO:return 16;case TE:return 536870912;default:return 16}default:return 16}}var $i=null,Xy=null,jc=null;function DE(){if(jc)return jc;var t,e=Xy,n=e.length,r,i="value"in $i?$i.value:$i.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jc=i.slice(t,1<r?1-r:void 0)}function $c(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function F1(){return!1}function Wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tc:F1,this.isPropagationStopped=F1,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zy=Wn(Oa),Iu=wt({},Oa,{view:0,detail:0}),nI=Wn(Iu),zf,Bf,Ka,Fh=wt({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(zf=t.screenX-Ka.screenX,Bf=t.screenY-Ka.screenY):Bf=zf=0,Ka=t),zf)},movementY:function(t){return"movementY"in t?t.movementY:Bf}}),U1=Wn(Fh),rI=wt({},Fh,{dataTransfer:0}),iI=Wn(rI),sI=wt({},Iu,{relatedTarget:0}),Ff=Wn(sI),oI=wt({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),aI=Wn(oI),lI=wt({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uI=Wn(lI),cI=wt({},Oa,{data:0}),V1=Wn(cI),dI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fI[t])?!!e[t]:!1}function e0(){return pI}var mI=wt({},Iu,{key:function(t){if(t.key){var e=dI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e0,charCode:function(t){return t.type==="keypress"?$c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gI=Wn(mI),yI=wt({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=Wn(yI),vI=wt({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e0}),wI=Wn(vI),xI=wt({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=Wn(xI),kI=wt({},Fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SI=Wn(kI),EI=[9,13,27,32],t0=hi&&"CompositionEvent"in window,ml=null;hi&&"documentMode"in document&&(ml=document.documentMode);var CI=hi&&"TextEvent"in window&&!ml,LE=hi&&(!t0||ml&&8<ml&&11>=ml),W1=String.fromCharCode(32),K1=!1;function jE(t,e){switch(t){case"keyup":return EI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $E(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function TI(t,e){switch(t){case"compositionend":return $E(e);case"keypress":return e.which!==32?null:(K1=!0,W1);case"textInput":return t=e.data,t===W1&&K1?null:t;default:return null}}function _I(t,e){if(Lo)return t==="compositionend"||!t0&&jE(t,e)?(t=DE(),jc=Xy=$i=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LE&&e.locale!=="ko"?null:e.data;default:return null}}var AI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AI[t.type]:e==="textarea"}function zE(t,e,n,r){gE(r),e=gd(e,"onChange"),0<e.length&&(n=new Zy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gl=null,ql=null;function RI(t){YE(t,0)}function Uh(t){var e=zo(t);if(uE(e))return t}function PI(t,e){if(t==="change")return e}var BE=!1;if(hi){var Uf;if(hi){var Vf="oninput"in document;if(!Vf){var G1=document.createElement("div");G1.setAttribute("oninput","return;"),Vf=typeof G1.oninput=="function"}Uf=Vf}else Uf=!1;BE=Uf&&(!document.documentMode||9<document.documentMode)}function J1(){gl&&(gl.detachEvent("onpropertychange",FE),ql=gl=null)}function FE(t){if(t.propertyName==="value"&&Uh(ql)){var e=[];zE(e,ql,t,qy(t)),xE(RI,e)}}function OI(t,e,n){t==="focusin"?(J1(),gl=e,ql=n,gl.attachEvent("onpropertychange",FE)):t==="focusout"&&J1()}function II(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uh(ql)}function MI(t,e){if(t==="click")return Uh(e)}function NI(t,e){if(t==="input"||t==="change")return Uh(e)}function DI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:DI;function Gl(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bm.call(e,i)||!Pr(t[i],e[i]))return!1}return!0}function Y1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q1(t,e){var n=Y1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y1(n)}}function UE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?UE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VE(){for(var t=window,e=ud();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ud(t.document)}return e}function n0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LI(t){var e=VE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&UE(n.ownerDocument.documentElement,n)){if(r!==null&&n0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Q1(n,s);var o=Q1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jI=hi&&"documentMode"in document&&11>=document.documentMode,jo=null,Bm=null,yl=null,Fm=!1;function X1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fm||jo==null||jo!==ud(r)||(r=jo,"selectionStart"in r&&n0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yl&&Gl(yl,r)||(yl=r,r=gd(Bm,"onSelect"),0<r.length&&(e=new Zy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jo)))}function nc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Hf={},HE={};hi&&(HE=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Vh(t){if(Hf[t])return Hf[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HE)return Hf[t]=e[n];return t}var WE=Vh("animationend"),KE=Vh("animationiteration"),qE=Vh("animationstart"),GE=Vh("transitionend"),JE=new Map,Z1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(t,e){JE.set(t,e),co(e,[t])}for(var Wf=0;Wf<Z1.length;Wf++){var Kf=Z1[Wf],$I=Kf.toLowerCase(),zI=Kf[0].toUpperCase()+Kf.slice(1);ds($I,"on"+zI)}ds(WE,"onAnimationEnd");ds(KE,"onAnimationIteration");ds(qE,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(GE,"onTransitionEnd");fa("onMouseEnter",["mouseout","mouseover"]);fa("onMouseLeave",["mouseout","mouseover"]);fa("onPointerEnter",["pointerout","pointerover"]);fa("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function ew(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$O(r,e,void 0,t),t.currentTarget=null}function YE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ew(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ew(i,a,u),s=l}}}if(dd)throw t=Lm,dd=!1,Lm=null,t}function lt(t,e){var n=e[Km];n===void 0&&(n=e[Km]=new Set);var r=t+"__bubble";n.has(r)||(QE(e,t,2,!1),n.add(r))}function qf(t,e,n){var r=0;e&&(r|=4),QE(n,t,r,e)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Jl(t){if(!t[rc]){t[rc]=!0,iE.forEach(function(n){n!=="selectionchange"&&(BI.has(n)||qf(n,!1,t),qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rc]||(e[rc]=!0,qf("selectionchange",!1,e))}}function QE(t,e,n,r){switch(NE(e)){case 1:var i=eI;break;case 4:i=tI;break;default:i=Qy}n=i.bind(null,e,n,t),i=void 0,!Dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ns(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}xE(function(){var u=s,c=qy(n),d=[];e:{var h=JE.get(t);if(h!==void 0){var f=Zy,p=t;switch(t){case"keypress":if($c(n)===0)break e;case"keydown":case"keyup":f=gI;break;case"focusin":p="focus",f=Ff;break;case"focusout":p="blur",f=Ff;break;case"beforeblur":case"afterblur":f=Ff;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=U1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=iI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=wI;break;case WE:case KE:case qE:f=aI;break;case GE:f=bI;break;case"scroll":f=nI;break;case"wheel":f=SI;break;case"copy":case"cut":case"paste":f=uI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=H1}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var w=u,v;w!==null;){v=w;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,m!==null&&(S=Vl(w,m),S!=null&&g.push(Yl(w,S,v)))),y)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Mm&&(p=n.relatedTarget||n.fromElement)&&(Ns(p)||p[fi]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ns(p):null,p!==null&&(y=ho(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=U1,S="onMouseLeave",m="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=H1,S="onPointerLeave",m="onPointerEnter",w="pointer"),y=f==null?h:zo(f),v=p==null?h:zo(p),h=new g(S,w+"leave",f,n,c),h.target=y,h.relatedTarget=v,S=null,Ns(c)===u&&(g=new g(m,w+"enter",p,n,c),g.target=v,g.relatedTarget=y,S=g),y=S,f&&p)t:{for(g=f,m=p,w=0,v=g;v;v=yo(v))w++;for(v=0,S=m;S;S=yo(S))v++;for(;0<w-v;)g=yo(g),w--;for(;0<v-w;)m=yo(m),v--;for(;w--;){if(g===m||m!==null&&g===m.alternate)break t;g=yo(g),m=yo(m)}g=null}else g=null;f!==null&&tw(d,h,f,g,!1),p!==null&&y!==null&&tw(d,y,p,g,!0)}}e:{if(h=u?zo(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var T=PI;else if(q1(h))if(BE)T=NI;else{T=II;var x=OI}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=MI);if(T&&(T=T(t,u))){zE(d,T,n,c);break e}x&&x(t,h,u),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Am(h,"number",h.value)}switch(x=u?zo(u):window,t){case"focusin":(q1(x)||x.contentEditable==="true")&&(jo=x,Bm=u,yl=null);break;case"focusout":yl=Bm=jo=null;break;case"mousedown":Fm=!0;break;case"contextmenu":case"mouseup":case"dragend":Fm=!1,X1(d,n,c);break;case"selectionchange":if(jI)break;case"keydown":case"keyup":X1(d,n,c)}var R;if(t0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Lo?jE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(LE&&n.locale!=="ko"&&(Lo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Lo&&(R=DE()):($i=c,Xy="value"in $i?$i.value:$i.textContent,Lo=!0)),x=gd(u,b),0<x.length&&(b=new V1(b,t,null,n,c),d.push({event:b,listeners:x}),R?b.data=R:(R=$E(n),R!==null&&(b.data=R)))),(R=CI?TI(t,n):_I(t,n))&&(u=gd(u,"onBeforeInput"),0<u.length&&(c=new V1("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}YE(d,e)})}function Yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vl(t,n),s!=null&&r.unshift(Yl(t,s,i)),s=Vl(t,e),s!=null&&r.push(Yl(t,s,i))),t=t.return}return r}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Vl(n,s),l!=null&&o.unshift(Yl(n,l,a))):i||(l=Vl(n,s),l!=null&&o.push(Yl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FI=/\r\n?/g,UI=/\u0000|\uFFFD/g;function nw(t){return(typeof t=="string"?t:""+t).replace(FI,`
`).replace(UI,"")}function ic(t,e,n){if(e=nw(e),nw(t)!==e&&n)throw Error(oe(425))}function yd(){}var Um=null,Vm=null;function Hm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wm=typeof setTimeout=="function"?setTimeout:void 0,VI=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,HI=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(t){return rw.resolve(null).then(t).catch(WI)}:Wm;function WI(t){setTimeout(function(){throw t})}function Jf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kl(e)}function qi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Ia,Ql="__reactProps$"+Ia,fi="__reactContainer$"+Ia,Km="__reactEvents$"+Ia,KI="__reactListeners$"+Ia,qI="__reactHandles$"+Ia;function Ns(t){var e=t[Fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[Fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iw(t);t!==null;){if(n=t[Fr])return n;t=iw(t)}return e}t=n,n=t.parentNode}return null}function Mu(t){return t=t[Fr]||t[fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Hh(t){return t[Ql]||null}var qm=[],Bo=-1;function hs(t){return{current:t}}function ct(t){0>Bo||(t.current=qm[Bo],qm[Bo]=null,Bo--)}function ot(t,e){Bo++,qm[Bo]=t.current,t.current=e}var is={},cn=hs(is),An=hs(!1),eo=is;function pa(t,e){var n=t.type.contextTypes;if(!n)return is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rn(t){return t=t.childContextTypes,t!=null}function vd(){ct(An),ct(cn)}function sw(t,e,n){if(cn.current!==is)throw Error(oe(168));ot(cn,e),ot(An,n)}function XE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,OO(t)||"Unknown",i));return wt({},n,r)}function wd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,eo=cn.current,ot(cn,t),ot(An,An.current),!0}function ow(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=XE(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,ct(An),ct(cn),ot(cn,t)):ct(An),ot(An,n)}var ii=null,Wh=!1,Yf=!1;function ZE(t){ii===null?ii=[t]:ii.push(t)}function GI(t){Wh=!0,ZE(t)}function fs(){if(!Yf&&ii!==null){Yf=!0;var t=0,e=tt;try{var n=ii;for(tt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ii=null,Wh=!1}catch(i){throw ii!==null&&(ii=ii.slice(t+1)),EE(Gy,fs),i}finally{tt=e,Yf=!1}}return null}var Fo=[],Uo=0,xd=null,bd=0,Zn=[],er=0,to=null,si=1,oi="";function Ts(t,e){Fo[Uo++]=bd,Fo[Uo++]=xd,xd=t,bd=e}function eC(t,e,n){Zn[er++]=si,Zn[er++]=oi,Zn[er++]=to,to=t;var r=si;t=oi;var i=32-_r(r)-1;r&=~(1<<i),n+=1;var s=32-_r(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,si=1<<32-_r(e)+i|n<<i|r,oi=s+t}else si=1<<s|n<<i|r,oi=t}function r0(t){t.return!==null&&(Ts(t,1),eC(t,1,0))}function i0(t){for(;t===xd;)xd=Fo[--Uo],Fo[Uo]=null,bd=Fo[--Uo],Fo[Uo]=null;for(;t===to;)to=Zn[--er],Zn[er]=null,oi=Zn[--er],Zn[er]=null,si=Zn[--er],Zn[er]=null}var Un=null,Bn=null,dt=!1,Sr=null;function tC(t,e){var n=rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,Bn=qi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,Bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,Bn=null,!0):!1;default:return!1}}function Gm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jm(t){if(dt){var e=Bn;if(e){var n=e;if(!aw(t,e)){if(Gm(t))throw Error(oe(418));e=qi(n.nextSibling);var r=Un;e&&aw(t,e)?tC(r,n):(t.flags=t.flags&-4097|2,dt=!1,Un=t)}}else{if(Gm(t))throw Error(oe(418));t.flags=t.flags&-4097|2,dt=!1,Un=t}}}function lw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function sc(t){if(t!==Un)return!1;if(!dt)return lw(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hm(t.type,t.memoizedProps)),e&&(e=Bn)){if(Gm(t))throw nC(),Error(oe(418));for(;e;)tC(t,e),e=qi(e.nextSibling)}if(lw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bn=qi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bn=null}}else Bn=Un?qi(t.stateNode.nextSibling):null;return!0}function nC(){for(var t=Bn;t;)t=qi(t.nextSibling)}function ma(){Bn=Un=null,dt=!1}function s0(t){Sr===null?Sr=[t]:Sr.push(t)}var JI=wi.ReactCurrentBatchConfig;function qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function oc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uw(t){var e=t._init;return e(t._payload)}function rC(t){function e(m,w){if(t){var v=m.deletions;v===null?(m.deletions=[w],m.flags|=16):v.push(w)}}function n(m,w){if(!t)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function i(m,w){return m=Qi(m,w),m.index=0,m.sibling=null,m}function s(m,w,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<w?(m.flags|=2,w):v):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,w,v,S){return w===null||w.tag!==6?(w=rp(v,m.mode,S),w.return=m,w):(w=i(w,v),w.return=m,w)}function l(m,w,v,S){var T=v.type;return T===Do?c(m,w,v.props.children,S,v.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_i&&uw(T)===w.type)?(S=i(w,v.props),S.ref=qa(m,w,v),S.return=m,S):(S=Wc(v.type,v.key,v.props,null,m.mode,S),S.ref=qa(m,w,v),S.return=m,S)}function u(m,w,v,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=ip(v,m.mode,S),w.return=m,w):(w=i(w,v.children||[]),w.return=m,w)}function c(m,w,v,S,T){return w===null||w.tag!==7?(w=Ks(v,m.mode,S,T),w.return=m,w):(w=i(w,v),w.return=m,w)}function d(m,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=rp(""+w,m.mode,v),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ju:return v=Wc(w.type,w.key,w.props,null,m.mode,v),v.ref=qa(m,null,w),v.return=m,v;case No:return w=ip(w,m.mode,v),w.return=m,w;case _i:var S=w._init;return d(m,S(w._payload),v)}if(il(w)||Ua(w))return w=Ks(w,m.mode,v,null),w.return=m,w;oc(m,w)}return null}function h(m,w,v,S){var T=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(m,w,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ju:return v.key===T?l(m,w,v,S):null;case No:return v.key===T?u(m,w,v,S):null;case _i:return T=v._init,h(m,w,T(v._payload),S)}if(il(v)||Ua(v))return T!==null?null:c(m,w,v,S,null);oc(m,v)}return null}function f(m,w,v,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(v)||null,a(w,m,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ju:return m=m.get(S.key===null?v:S.key)||null,l(w,m,S,T);case No:return m=m.get(S.key===null?v:S.key)||null,u(w,m,S,T);case _i:var x=S._init;return f(m,w,v,x(S._payload),T)}if(il(S)||Ua(S))return m=m.get(v)||null,c(w,m,S,T,null);oc(w,S)}return null}function p(m,w,v,S){for(var T=null,x=null,R=w,b=w=0,k=null;R!==null&&b<v.length;b++){R.index>b?(k=R,R=null):k=R.sibling;var O=h(m,R,v[b],S);if(O===null){R===null&&(R=k);break}t&&R&&O.alternate===null&&e(m,R),w=s(O,w,b),x===null?T=O:x.sibling=O,x=O,R=k}if(b===v.length)return n(m,R),dt&&Ts(m,b),T;if(R===null){for(;b<v.length;b++)R=d(m,v[b],S),R!==null&&(w=s(R,w,b),x===null?T=R:x.sibling=R,x=R);return dt&&Ts(m,b),T}for(R=r(m,R);b<v.length;b++)k=f(R,m,b,v[b],S),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?b:k.key),w=s(k,w,b),x===null?T=k:x.sibling=k,x=k);return t&&R.forEach(function(M){return e(m,M)}),dt&&Ts(m,b),T}function g(m,w,v,S){var T=Ua(v);if(typeof T!="function")throw Error(oe(150));if(v=T.call(v),v==null)throw Error(oe(151));for(var x=T=null,R=w,b=w=0,k=null,O=v.next();R!==null&&!O.done;b++,O=v.next()){R.index>b?(k=R,R=null):k=R.sibling;var M=h(m,R,O.value,S);if(M===null){R===null&&(R=k);break}t&&R&&M.alternate===null&&e(m,R),w=s(M,w,b),x===null?T=M:x.sibling=M,x=M,R=k}if(O.done)return n(m,R),dt&&Ts(m,b),T;if(R===null){for(;!O.done;b++,O=v.next())O=d(m,O.value,S),O!==null&&(w=s(O,w,b),x===null?T=O:x.sibling=O,x=O);return dt&&Ts(m,b),T}for(R=r(m,R);!O.done;b++,O=v.next())O=f(R,m,b,O.value,S),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?b:O.key),w=s(O,w,b),x===null?T=O:x.sibling=O,x=O);return t&&R.forEach(function(N){return e(m,N)}),dt&&Ts(m,b),T}function y(m,w,v,S){if(typeof v=="object"&&v!==null&&v.type===Do&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ju:e:{for(var T=v.key,x=w;x!==null;){if(x.key===T){if(T=v.type,T===Do){if(x.tag===7){n(m,x.sibling),w=i(x,v.props.children),w.return=m,m=w;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_i&&uw(T)===x.type){n(m,x.sibling),w=i(x,v.props),w.ref=qa(m,x,v),w.return=m,m=w;break e}n(m,x);break}else e(m,x);x=x.sibling}v.type===Do?(w=Ks(v.props.children,m.mode,S,v.key),w.return=m,m=w):(S=Wc(v.type,v.key,v.props,null,m.mode,S),S.ref=qa(m,w,v),S.return=m,m=S)}return o(m);case No:e:{for(x=v.key;w!==null;){if(w.key===x)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(m,w.sibling),w=i(w,v.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else e(m,w);w=w.sibling}w=ip(v,m.mode,S),w.return=m,m=w}return o(m);case _i:return x=v._init,y(m,w,x(v._payload),S)}if(il(v))return p(m,w,v,S);if(Ua(v))return g(m,w,v,S);oc(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(m,w.sibling),w=i(w,v),w.return=m,m=w):(n(m,w),w=rp(v,m.mode,S),w.return=m,m=w),o(m)):n(m,w)}return y}var ga=rC(!0),iC=rC(!1),kd=hs(null),Sd=null,Vo=null,o0=null;function a0(){o0=Vo=Sd=null}function l0(t){var e=kd.current;ct(kd),t._currentValue=e}function Ym(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){Sd=t,o0=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(o0!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(Sd===null)throw Error(oe(308));Vo=t,Sd.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var Ds=null;function u0(t){Ds===null?Ds=[t]:Ds.push(t)}function sC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,u0(e)):(n.next=i.next,i.next=n),e.interleaved=n,pi(t,r)}function pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ai=!1;function c0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pi(t,n)}return i=r.interleaved,i===null?(e.next=e,u0(r)):(e.next=i.next,i.next=e),r.interleaved=e,pi(t,n)}function zc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jy(t,n)}}function cw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ed(t,e,n,r){var i=t.updateQueue;Ai=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=wt({},d,h);break e;case 2:Ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ro|=o,t.lanes=o,t.memoizedState=d}}function dw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var Nu={},Hr=hs(Nu),Xl=hs(Nu),Zl=hs(Nu);function Ls(t){if(t===Nu)throw Error(oe(174));return t}function d0(t,e){switch(ot(Zl,e),ot(Xl,t),ot(Hr,Nu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pm(e,t)}ct(Hr),ot(Hr,e)}function ya(){ct(Hr),ct(Xl),ct(Zl)}function aC(t){Ls(Zl.current);var e=Ls(Hr.current),n=Pm(e,t.type);e!==n&&(ot(Xl,t),ot(Hr,n))}function h0(t){Xl.current===t&&(ct(Hr),ct(Xl))}var mt=hs(0);function Cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qf=[];function f0(){for(var t=0;t<Qf.length;t++)Qf[t]._workInProgressVersionPrimary=null;Qf.length=0}var Bc=wi.ReactCurrentDispatcher,Xf=wi.ReactCurrentBatchConfig,no=0,vt=null,$t=null,Ut=null,Td=!1,vl=!1,eu=0,YI=0;function rn(){throw Error(oe(321))}function p0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function m0(t,e,n,r,i,s){if(no=s,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bc.current=t===null||t.memoizedState===null?eM:tM,t=n(r,i),vl){s=0;do{if(vl=!1,eu=0,25<=s)throw Error(oe(301));s+=1,Ut=$t=null,e.updateQueue=null,Bc.current=nM,t=n(r,i)}while(vl)}if(Bc.current=_d,e=$t!==null&&$t.next!==null,no=0,Ut=$t=vt=null,Td=!1,e)throw Error(oe(300));return t}function g0(){var t=eu!==0;return eu=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?vt.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function dr(){if($t===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=Ut===null?vt.memoizedState:Ut.next;if(e!==null)Ut=e,$t=t;else{if(t===null)throw Error(oe(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ut===null?vt.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function tu(t,e){return typeof e=="function"?e(t):e}function Zf(t){var e=dr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=$t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((no&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,vt.lanes|=c,ro|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Pr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,vt.lanes|=s,ro|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ep(t){var e=dr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lC(){}function uC(t,e){var n=vt,r=dr(),i=e(),s=!Pr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,y0(hC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,nu(9,dC.bind(null,n,r,i,e),void 0,null),Wt===null)throw Error(oe(349));no&30||cC(n,e,i)}return i}function cC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dC(t,e,n,r){e.value=n,e.getSnapshot=r,fC(e)&&pC(t)}function hC(t,e,n){return n(function(){fC(e)&&pC(t)})}function fC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function pC(t){var e=pi(t,1);e!==null&&Ar(e,t,1,-1)}function hw(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},e.queue=t,t=t.dispatch=ZI.bind(null,vt,t),[e.memoizedState,t]}function nu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mC(){return dr().memoizedState}function Fc(t,e,n,r){var i=Dr();vt.flags|=t,i.memoizedState=nu(1|e,n,void 0,r===void 0?null:r)}function Kh(t,e,n,r){var i=dr();r=r===void 0?null:r;var s=void 0;if($t!==null){var o=$t.memoizedState;if(s=o.destroy,r!==null&&p0(r,o.deps)){i.memoizedState=nu(e,n,s,r);return}}vt.flags|=t,i.memoizedState=nu(1|e,n,s,r)}function fw(t,e){return Fc(8390656,8,t,e)}function y0(t,e){return Kh(2048,8,t,e)}function gC(t,e){return Kh(4,2,t,e)}function yC(t,e){return Kh(4,4,t,e)}function vC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wC(t,e,n){return n=n!=null?n.concat([t]):null,Kh(4,4,vC.bind(null,e,t),n)}function v0(){}function xC(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bC(t,e){var n=dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kC(t,e,n){return no&21?(Pr(n,e)||(n=_E(),vt.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function QI(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var r=Xf.transition;Xf.transition={};try{t(!1),e()}finally{tt=n,Xf.transition=r}}function SC(){return dr().memoizedState}function XI(t,e,n){var r=Yi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},EC(t))CC(e,n);else if(n=sC(t,e,n,r),n!==null){var i=yn();Ar(n,t,r,i),TC(n,e,r)}}function ZI(t,e,n){var r=Yi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(EC(t))CC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(i.next=i,u0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sC(t,e,i,r),n!==null&&(i=yn(),Ar(n,t,r,i),TC(n,e,r))}}function EC(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function CC(t,e){vl=Td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function TC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jy(t,n)}}var _d={readContext:cr,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},eM={readContext:cr,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:fw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,vC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XI.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:hw,useDebugValue:v0,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=hw(!1),e=t[0];return t=QI.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,i=Dr();if(dt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Wt===null)throw Error(oe(349));no&30||cC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fw(hC.bind(null,r,s,t),[t]),r.flags|=2048,nu(9,dC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dr(),e=Wt.identifierPrefix;if(dt){var n=oi,r=si;n=(r&~(1<<32-_r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=eu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tM={readContext:cr,useCallback:xC,useContext:cr,useEffect:y0,useImperativeHandle:wC,useInsertionEffect:gC,useLayoutEffect:yC,useMemo:bC,useReducer:Zf,useRef:mC,useState:function(){return Zf(tu)},useDebugValue:v0,useDeferredValue:function(t){var e=dr();return kC(e,$t.memoizedState,t)},useTransition:function(){var t=Zf(tu)[0],e=dr().memoizedState;return[t,e]},useMutableSource:lC,useSyncExternalStore:uC,useId:SC,unstable_isNewReconciler:!1},nM={readContext:cr,useCallback:xC,useContext:cr,useEffect:y0,useImperativeHandle:wC,useInsertionEffect:gC,useLayoutEffect:yC,useMemo:bC,useReducer:ep,useRef:mC,useState:function(){return ep(tu)},useDebugValue:v0,useDeferredValue:function(t){var e=dr();return $t===null?e.memoizedState=t:kC(e,$t.memoizedState,t)},useTransition:function(){var t=ep(tu)[0],e=dr().memoizedState;return[t,e]},useMutableSource:lC,useSyncExternalStore:uC,useId:SC,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qh={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Yi(t),s=li(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(Ar(e,t,i,r),zc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Yi(t),s=li(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(Ar(e,t,i,r),zc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Yi(t),i=li(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gi(t,i,r),e!==null&&(Ar(e,t,r,n),zc(e,t,r))}};function pw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gl(n,r)||!Gl(i,s):!0}function _C(t,e,n){var r=!1,i=is,s=e.contextType;return typeof s=="object"&&s!==null?s=cr(s):(i=Rn(e)?eo:cn.current,r=e.contextTypes,s=(r=r!=null)?pa(t,i):is),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qh.enqueueReplaceState(e,e.state,null)}function Xm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},c0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cr(s):(s=Rn(e)?eo:cn.current,i.context=pa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qh.enqueueReplaceState(i,i.state,null),Ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e){try{var n="",r=e;do n+=PO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rM=typeof WeakMap=="function"?WeakMap:Map;function AC(t,e,n){n=li(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rd||(Rd=!0,ug=r),Zm(t,e)},n}function RC(t,e,n){n=li(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zm(t,e),typeof r!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yM.bind(null,t,e,n),e.then(t,t))}function yw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=li(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var iM=wi.ReactCurrentOwner,Tn=!1;function pn(t,e,n,r){e.child=t===null?iC(e,null,n,r):ga(e,t.child,n,r)}function ww(t,e,n,r,i){n=n.render;var s=e.ref;return ia(e,i),r=m0(t,e,n,r,s,i),n=g0(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mi(t,e,i)):(dt&&n&&r0(e),e.flags|=1,pn(t,e,r,i),e.child)}function xw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!T0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,PC(t,e,s,r,i)):(t=Wc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gl,n(o,r)&&t.ref===e.ref)return mi(t,e,i)}return e.flags|=1,t=Qi(s,r),t.ref=e.ref,t.return=e,e.child=t}function PC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gl(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,mi(t,e,i)}return eg(t,e,n,r,i)}function OC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Wo,Ln),Ln|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(Wo,Ln),Ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ot(Wo,Ln),Ln|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ot(Wo,Ln),Ln|=r;return pn(t,e,i,n),e.child}function IC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eg(t,e,n,r,i){var s=Rn(n)?eo:cn.current;return s=pa(e,s),ia(e,i),n=m0(t,e,n,r,s,i),r=g0(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mi(t,e,i)):(dt&&r&&r0(e),e.flags|=1,pn(t,e,n,i),e.child)}function bw(t,e,n,r,i){if(Rn(n)){var s=!0;wd(e)}else s=!1;if(ia(e,i),e.stateNode===null)Uc(t,e),_C(e,n,r),Xm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=cr(u):(u=Rn(n)?eo:cn.current,u=pa(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&mw(e,o,r,u),Ai=!1;var h=e.memoizedState;o.state=h,Ed(e,r,o,i),l=e.memoizedState,a!==r||h!==l||An.current||Ai?(typeof c=="function"&&(Qm(e,n,c,r),l=e.memoizedState),(a=Ai||pw(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:wr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=Rn(n)?eo:cn.current,l=pa(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&mw(e,o,r,l),Ai=!1,h=e.memoizedState,o.state=h,Ed(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||An.current||Ai?(typeof f=="function"&&(Qm(e,n,f,r),p=e.memoizedState),(u=Ai||pw(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return tg(t,e,n,r,s,i)}function tg(t,e,n,r,i,s){IC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ow(e,n,!1),mi(t,e,s);r=e.stateNode,iM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ga(e,t.child,null,s),e.child=ga(e,null,a,s)):pn(t,e,a,s),e.memoizedState=r.state,i&&ow(e,n,!0),e.child}function MC(t){var e=t.stateNode;e.pendingContext?sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sw(t,e.context,!1),d0(t,e.containerInfo)}function kw(t,e,n,r,i){return ma(),s0(i),e.flags|=256,pn(t,e,n,r),e.child}var ng={dehydrated:null,treeContext:null,retryLane:0};function rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function NC(t,e,n){var r=e.pendingProps,i=mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ot(mt,i&1),t===null)return Jm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yh(o,r,0,null),t=Ks(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rg(n),e.memoizedState=ng,t):w0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return sM(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qi(a,s):(s=Ks(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ng,r}return s=t.child,t=s.sibling,r=Qi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function w0(t,e){return e=Yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ac(t,e,n,r){return r!==null&&s0(r),ga(e,t.child,null,n),t=w0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sM(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tp(Error(oe(422))),ac(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yh({mode:"visible",children:r.children},i,0,null),s=Ks(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ga(e,t.child,null,o),e.child.memoizedState=rg(o),e.memoizedState=ng,s);if(!(e.mode&1))return ac(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=tp(s,r,void 0),ac(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=Wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pi(t,i),Ar(r,t,i,-1))}return C0(),r=tp(Error(oe(421))),ac(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Bn=qi(i.nextSibling),Un=e,dt=!0,Sr=null,t!==null&&(Zn[er++]=si,Zn[er++]=oi,Zn[er++]=to,si=t.id,oi=t.overflow,to=e),e=w0(e,r.children),e.flags|=4096,e)}function Sw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ym(t.return,e,n)}function np(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function DC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sw(t,n,e);else if(t.tag===19)Sw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ot(mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),np(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}np(e,!0,n,null,s);break;case"together":np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oM(t,e,n){switch(e.tag){case 3:MC(e),ma();break;case 5:aC(e);break;case 1:Rn(e.type)&&wd(e);break;case 4:d0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ot(kd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ot(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?NC(t,e,n):(ot(mt,mt.current&1),t=mi(t,e,n),t!==null?t.sibling:null);ot(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return DC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ot(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,OC(t,e,n)}return mi(t,e,n)}var LC,ig,jC,$C;LC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ig=function(){};jC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ls(Hr.current);var s=null;switch(n){case"input":i=Tm(t,i),r=Tm(t,r),s=[];break;case"select":i=wt({},i,{value:void 0}),r=wt({},r,{value:void 0}),s=[];break;case"textarea":i=Rm(t,i),r=Rm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yd)}Om(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&lt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};$C=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ga(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aM(t,e,n){var r=e.pendingProps;switch(i0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Rn(e.type)&&vd(),sn(e),null;case 3:return r=e.stateNode,ya(),ct(An),ct(cn),f0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(hg(Sr),Sr=null))),ig(t,e),sn(e),null;case 5:h0(e);var i=Ls(Zl.current);if(n=e.type,t!==null&&e.stateNode!=null)jC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return sn(e),null}if(t=Ls(Hr.current),sc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fr]=e,r[Ql]=s,t=(e.mode&1)!==0,n){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<ol.length;i++)lt(ol[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":I1(r,s),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},lt("invalid",r);break;case"textarea":N1(r,s),lt("invalid",r)}Om(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,a,t),i=["children",""+a]):Fl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&lt("scroll",r)}switch(n){case"input":Yu(r),M1(r,s,!0);break;case"textarea":Yu(r),D1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fr]=e,t[Ql]=r,LC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Im(n,r),n){case"dialog":lt("cancel",t),lt("close",t),i=r;break;case"iframe":case"object":case"embed":lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ol.length;i++)lt(ol[i],t);i=r;break;case"source":lt("error",t),i=r;break;case"img":case"image":case"link":lt("error",t),lt("load",t),i=r;break;case"details":lt("toggle",t),i=r;break;case"input":I1(t,r),i=Tm(t,r),lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wt({},r,{value:void 0}),lt("invalid",t);break;case"textarea":N1(t,r),i=Rm(t,r),lt("invalid",t);break;default:i=r}Om(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?mE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ul(t,l):typeof l=="number"&&Ul(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&lt("scroll",t):l!=null&&Vy(t,s,l,o))}switch(n){case"input":Yu(t),M1(t,r,!1);break;case"textarea":Yu(t),D1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ea(t,!!r.multiple,s,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)$C(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Ls(Zl.current),Ls(Hr.current),sc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fr]=e,(s=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:ic(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ic(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fr]=e,e.stateNode=r}return sn(e),null;case 13:if(ct(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&Bn!==null&&e.mode&1&&!(e.flags&128))nC(),ma(),e.flags|=98560,s=!1;else if(s=sc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Fr]=e}else ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),s=!1}else Sr!==null&&(hg(Sr),Sr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?zt===0&&(zt=3):C0())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return ya(),ig(t,e),t===null&&Jl(e.stateNode.containerInfo),sn(e),null;case 10:return l0(e.type._context),sn(e),null;case 17:return Rn(e.type)&&vd(),sn(e),null;case 19:if(ct(mt),s=e.memoizedState,s===null)return sn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ga(s,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cd(t),o!==null){for(e.flags|=128,Ga(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ot(mt,mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>wa&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ga(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!dt)return sn(e),null}else 2*Tt()-s.renderingStartTime>wa&&n!==1073741824&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=mt.current,ot(mt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return E0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ln&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function lM(t,e){switch(i0(e),e.tag){case 1:return Rn(e.type)&&vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ya(),ct(An),ct(cn),f0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return h0(e),null;case 13:if(ct(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(mt),null;case 4:return ya(),null;case 10:return l0(e.type._context),null;case 22:case 23:return E0(),null;case 24:return null;default:return null}}var lc=!1,ln=!1,uM=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function sg(t,e,n){try{n()}catch(r){Et(t,e,r)}}var Ew=!1;function cM(t,e){if(Um=pd,t=VE(),n0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vm={focusedElem:t,selectionRange:n},pd=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,w=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:wr(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(S){Et(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return p=Ew,Ew=!1,p}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sg(e,n,s)}i=i.next}while(i!==r)}}function Gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zC(t){var e=t.alternate;e!==null&&(t.alternate=null,zC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fr],delete e[Ql],delete e[Km],delete e[KI],delete e[qI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BC(t){return t.tag===5||t.tag===3||t.tag===4}function Cw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yd));else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var Yt=null,br=!1;function ki(t,e,n){for(n=n.child;n!==null;)FC(t,e,n),n=n.sibling}function FC(t,e,n){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Bh,n)}catch{}switch(n.tag){case 5:ln||Ho(n,e);case 6:var r=Yt,i=br;Yt=null,ki(t,e,n),Yt=r,br=i,Yt!==null&&(br?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(br?(t=Yt,n=n.stateNode,t.nodeType===8?Jf(t.parentNode,n):t.nodeType===1&&Jf(t,n),Kl(t)):Jf(Yt,n.stateNode));break;case 4:r=Yt,i=br,Yt=n.stateNode.containerInfo,br=!0,ki(t,e,n),Yt=r,br=i;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sg(n,e,o),i=i.next}while(i!==r)}ki(t,e,n);break;case 1:if(!ln&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Et(n,e,a)}ki(t,e,n);break;case 21:ki(t,e,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,ki(t,e,n),ln=r):ki(t,e,n);break;default:ki(t,e,n)}}function Tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uM),e.forEach(function(r){var i=wM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,br=!1;break e;case 3:Yt=a.stateNode.containerInfo,br=!0;break e;case 4:Yt=a.stateNode.containerInfo,br=!0;break e}a=a.return}if(Yt===null)throw Error(oe(160));FC(s,o,i),Yt=null,br=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Et(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UC(e,t),e=e.sibling}function UC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(e,t),Nr(t),r&4){try{wl(3,t,t.return),Gh(3,t)}catch(g){Et(t,t.return,g)}try{wl(5,t,t.return)}catch(g){Et(t,t.return,g)}}break;case 1:pr(e,t),Nr(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if(pr(e,t),Nr(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var i=t.stateNode;try{Ul(i,"")}catch(g){Et(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cE(i,s),Im(a,o);var u=Im(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?mE(i,d):c==="dangerouslySetInnerHTML"?fE(i,d):c==="children"?Ul(i,d):Vy(i,c,d,u)}switch(a){case"input":_m(i,s);break;case"textarea":dE(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ea(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?ea(i,!!s.multiple,s.defaultValue,!0):ea(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ql]=s}catch(g){Et(t,t.return,g)}}break;case 6:if(pr(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Et(t,t.return,g)}}break;case 3:if(pr(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(e.containerInfo)}catch(g){Et(t,t.return,g)}break;case 4:pr(e,t),Nr(t);break;case 13:pr(e,t),Nr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(k0=Tt())),r&4&&Tw(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ln=(u=ln)||c,pr(e,t),ln=u):pr(e,t),Nr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ge=t,c=t.child;c!==null;){for(d=ge=c;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:wl(4,h,h.return);break;case 1:Ho(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Et(r,n,g)}}break;case 5:Ho(h,h.return);break;case 22:if(h.memoizedState!==null){Aw(d);continue}}f!==null?(f.return=h,ge=f):Aw(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=pE("display",o))}catch(g){Et(t,t.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Et(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pr(e,t),Nr(t),r&4&&Tw(t);break;case 21:break;default:pr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BC(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ul(i,""),r.flags&=-33);var s=Cw(t);lg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Cw(t);ag(t,a,o);break;default:throw Error(oe(161))}}catch(l){Et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dM(t,e,n){ge=t,VC(t)}function VC(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ln;a=lc;var u=ln;if(lc=o,(ln=l)&&!u)for(ge=i;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?Rw(i):l!==null?(l.return=o,ge=l):Rw(i);for(;s!==null;)ge=s,VC(s),s=s.sibling;ge=i,lc=a,ln=u}_w(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ge=s):_w(t)}}function _w(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ln||Gh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Kl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}ln||e.flags&512&&og(e)}catch(h){Et(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Aw(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Rw(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gh(4,e)}catch(l){Et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Et(e,i,l)}}var s=e.return;try{og(e)}catch(l){Et(e,s,l)}break;case 5:var o=e.return;try{og(e)}catch(l){Et(e,o,l)}}}catch(l){Et(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var hM=Math.ceil,Ad=wi.ReactCurrentDispatcher,x0=wi.ReactCurrentOwner,sr=wi.ReactCurrentBatchConfig,Ke=0,Wt=null,It=null,tn=0,Ln=0,Wo=hs(0),zt=0,ru=null,ro=0,Jh=0,b0=0,xl=null,Sn=null,k0=0,wa=1/0,ti=null,Rd=!1,ug=null,Ji=null,uc=!1,zi=null,Pd=0,bl=0,cg=null,Vc=-1,Hc=0;function yn(){return Ke&6?Tt():Vc!==-1?Vc:Vc=Tt()}function Yi(t){return t.mode&1?Ke&2&&tn!==0?tn&-tn:JI.transition!==null?(Hc===0&&(Hc=_E()),Hc):(t=tt,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t):1}function Ar(t,e,n,r){if(50<bl)throw bl=0,cg=null,Error(oe(185));Ou(t,n,r),(!(Ke&2)||t!==Wt)&&(t===Wt&&(!(Ke&2)&&(Jh|=n),zt===4&&Ni(t,tn)),Pn(t,r),n===1&&Ke===0&&!(e.mode&1)&&(wa=Tt()+500,Wh&&fs()))}function Pn(t,e){var n=t.callbackNode;JO(t,e);var r=fd(t,t===Wt?tn:0);if(r===0)n!==null&&$1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$1(n),e===1)t.tag===0?GI(Pw.bind(null,t)):ZE(Pw.bind(null,t)),HI(function(){!(Ke&6)&&fs()}),n=null;else{switch(AE(r)){case 1:n=Gy;break;case 4:n=CE;break;case 16:n=hd;break;case 536870912:n=TE;break;default:n=hd}n=QC(n,HC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HC(t,e){if(Vc=-1,Hc=0,Ke&6)throw Error(oe(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=fd(t,t===Wt?tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Od(t,r);else{e=r;var i=Ke;Ke|=2;var s=KC();(Wt!==t||tn!==e)&&(ti=null,wa=Tt()+500,Ws(t,e));do try{mM();break}catch(a){WC(t,a)}while(1);a0(),Ad.current=s,Ke=i,It!==null?e=0:(Wt=null,tn=0,e=zt)}if(e!==0){if(e===2&&(i=jm(t),i!==0&&(r=i,e=dg(t,i))),e===1)throw n=ru,Ws(t,0),Ni(t,r),Pn(t,Tt()),n;if(e===6)Ni(t,r);else{if(i=t.current.alternate,!(r&30)&&!fM(i)&&(e=Od(t,r),e===2&&(s=jm(t),s!==0&&(r=s,e=dg(t,s))),e===1))throw n=ru,Ws(t,0),Ni(t,r),Pn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:_s(t,Sn,ti);break;case 3:if(Ni(t,r),(r&130023424)===r&&(e=k0+500-Tt(),10<e)){if(fd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wm(_s.bind(null,t,Sn,ti),e);break}_s(t,Sn,ti);break;case 4:if(Ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_r(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hM(r/1960))-r,10<r){t.timeoutHandle=Wm(_s.bind(null,t,Sn,ti),r);break}_s(t,Sn,ti);break;case 5:_s(t,Sn,ti);break;default:throw Error(oe(329))}}}return Pn(t,Tt()),t.callbackNode===n?HC.bind(null,t):null}function dg(t,e){var n=xl;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Od(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&hg(e)),t}function hg(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function fM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ni(t,e){for(e&=~b0,e&=~Jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_r(e),r=1<<n;t[n]=-1,e&=~r}}function Pw(t){if(Ke&6)throw Error(oe(327));sa();var e=fd(t,0);if(!(e&1))return Pn(t,Tt()),null;var n=Od(t,e);if(t.tag!==0&&n===2){var r=jm(t);r!==0&&(e=r,n=dg(t,r))}if(n===1)throw n=ru,Ws(t,0),Ni(t,e),Pn(t,Tt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,Sn,ti),Pn(t,Tt()),null}function S0(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(wa=Tt()+500,Wh&&fs())}}function io(t){zi!==null&&zi.tag===0&&!(Ke&6)&&sa();var e=Ke;Ke|=1;var n=sr.transition,r=tt;try{if(sr.transition=null,tt=1,t)return t()}finally{tt=r,sr.transition=n,Ke=e,!(Ke&6)&&fs()}}function E0(){Ln=Wo.current,ct(Wo)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VI(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch(i0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vd();break;case 3:ya(),ct(An),ct(cn),f0();break;case 5:h0(r);break;case 4:ya();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:l0(r.type._context);break;case 22:case 23:E0()}n=n.return}if(Wt=t,It=t=Qi(t.current,null),tn=Ln=e,zt=0,ru=null,b0=Jh=ro=0,Sn=xl=null,Ds!==null){for(e=0;e<Ds.length;e++)if(n=Ds[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return t}function WC(t,e){do{var n=It;try{if(a0(),Bc.current=_d,Td){for(var r=vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Td=!1}if(no=0,Ut=$t=vt=null,vl=!1,eu=0,x0.current=null,n===null||n.return===null){zt=1,ru=e,It=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=yw(o);if(f!==null){f.flags&=-257,vw(f,o,a,s,e),f.mode&1&&gw(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){gw(s,u,e),C0();break e}l=Error(oe(426))}}else if(dt&&a.mode&1){var y=yw(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),vw(y,o,a,s,e),s0(va(l,a));break e}}s=l=va(l,a),zt!==4&&(zt=2),xl===null?xl=[s]:xl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=AC(s,l,e);cw(s,m);break e;case 1:a=l;var w=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ji===null||!Ji.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=RC(s,a,e);cw(s,S);break e}}s=s.return}while(s!==null)}GC(n)}catch(T){e=T,It===n&&n!==null&&(It=n=n.return);continue}break}while(1)}function KC(){var t=Ad.current;return Ad.current=_d,t===null?_d:t}function C0(){(zt===0||zt===3||zt===2)&&(zt=4),Wt===null||!(ro&268435455)&&!(Jh&268435455)||Ni(Wt,tn)}function Od(t,e){var n=Ke;Ke|=2;var r=KC();(Wt!==t||tn!==e)&&(ti=null,Ws(t,e));do try{pM();break}catch(i){WC(t,i)}while(1);if(a0(),Ke=n,Ad.current=r,It!==null)throw Error(oe(261));return Wt=null,tn=0,zt}function pM(){for(;It!==null;)qC(It)}function mM(){for(;It!==null&&!BO();)qC(It)}function qC(t){var e=YC(t.alternate,t,Ln);t.memoizedProps=t.pendingProps,e===null?GC(t):It=e,x0.current=null}function GC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lM(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,It=null;return}}else if(n=aM(n,e,Ln),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);zt===0&&(zt=5)}function _s(t,e,n){var r=tt,i=sr.transition;try{sr.transition=null,tt=1,gM(t,e,n,r)}finally{sr.transition=i,tt=r}return null}function gM(t,e,n,r){do sa();while(zi!==null);if(Ke&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YO(t,s),t===Wt&&(It=Wt=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uc||(uc=!0,QC(hd,function(){return sa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sr.transition,sr.transition=null;var o=tt;tt=1;var a=Ke;Ke|=4,x0.current=null,cM(t,n),UC(n,t),LI(Vm),pd=!!Um,Vm=Um=null,t.current=n,dM(n),FO(),Ke=a,tt=o,sr.transition=s}else t.current=n;if(uc&&(uc=!1,zi=t,Pd=i),s=t.pendingLanes,s===0&&(Ji=null),HO(n.stateNode),Pn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rd)throw Rd=!1,t=ug,ug=null,t;return Pd&1&&t.tag!==0&&sa(),s=t.pendingLanes,s&1?t===cg?bl++:(bl=0,cg=t):bl=0,fs(),null}function sa(){if(zi!==null){var t=AE(Pd),e=sr.transition,n=tt;try{if(sr.transition=null,tt=16>t?16:t,zi===null)var r=!1;else{if(t=zi,zi=null,Pd=0,Ke&6)throw Error(oe(331));var i=Ke;for(Ke|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ge=u;ge!==null;){var c=ge;switch(c.tag){case 0:case 11:case 15:wl(8,c,s)}var d=c.child;if(d!==null)d.return=c,ge=d;else for(;ge!==null;){c=ge;var h=c.sibling,f=c.return;if(zC(c),c===u){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wl(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,ge=m;break e}ge=s.return}}var w=t.current;for(ge=w;ge!==null;){o=ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ge=v;else e:for(o=w;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gh(9,a)}}catch(T){Et(a,a.return,T)}if(a===o){ge=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ge=S;break e}ge=a.return}}if(Ke=i,fs(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Bh,t)}catch{}r=!0}return r}finally{tt=n,sr.transition=e}}return!1}function Ow(t,e,n){e=va(n,e),e=AC(t,e,1),t=Gi(t,e,1),e=yn(),t!==null&&(Ou(t,1,e),Pn(t,e))}function Et(t,e,n){if(t.tag===3)Ow(t,t,n);else for(;e!==null;){if(e.tag===3){Ow(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ji===null||!Ji.has(r))){t=va(n,t),t=RC(e,t,1),e=Gi(e,t,1),t=yn(),e!==null&&(Ou(e,1,t),Pn(e,t));break}}e=e.return}}function yM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(tn&n)===n&&(zt===4||zt===3&&(tn&130023424)===tn&&500>Tt()-k0?Ws(t,0):b0|=n),Pn(t,e)}function JC(t,e){e===0&&(t.mode&1?(e=Zu,Zu<<=1,!(Zu&130023424)&&(Zu=4194304)):e=1);var n=yn();t=pi(t,e),t!==null&&(Ou(t,e,n),Pn(t,n))}function vM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JC(t,n)}function wM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),JC(t,n)}var YC;YC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,oM(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,dt&&e.flags&1048576&&eC(e,bd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uc(t,e),t=e.pendingProps;var i=pa(e,cn.current);ia(e,n),i=m0(null,e,r,t,i,n);var s=g0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rn(r)?(s=!0,wd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,c0(e),i.updater=qh,e.stateNode=i,i._reactInternals=e,Xm(e,r,t,n),e=tg(null,e,r,!0,s,n)):(e.tag=0,dt&&s&&r0(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=bM(r),t=wr(r,t),i){case 0:e=eg(null,e,r,t,n);break e;case 1:e=bw(null,e,r,t,n);break e;case 11:e=ww(null,e,r,t,n);break e;case 14:e=xw(null,e,r,wr(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),eg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),bw(t,e,r,i,n);case 3:e:{if(MC(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,oC(t,e),Ed(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=va(Error(oe(423)),e),e=kw(t,e,r,n,i);break e}else if(r!==i){i=va(Error(oe(424)),e),e=kw(t,e,r,n,i);break e}else for(Bn=qi(e.stateNode.containerInfo.firstChild),Un=e,dt=!0,Sr=null,n=iC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),r===i){e=mi(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return aC(e),t===null&&Jm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Hm(r,i)?o=null:s!==null&&Hm(r,s)&&(e.flags|=32),IC(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&Jm(e),null;case 13:return NC(t,e,n);case 4:return d0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ga(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),ww(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ot(kd,r._currentValue),r._currentValue=o,s!==null)if(Pr(s.value,o)){if(s.children===i.children&&!An.current){e=mi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=li(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ym(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ym(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ia(e,n),i=cr(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=wr(r,e.pendingProps),i=wr(r.type,i),xw(t,e,r,i,n);case 15:return PC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),Uc(t,e),e.tag=1,Rn(r)?(t=!0,wd(e)):t=!1,ia(e,n),_C(e,r,i),Xm(e,r,i,n),tg(null,e,r,!0,t,n);case 19:return DC(t,e,n);case 22:return OC(t,e,n)}throw Error(oe(156,e.tag))};function QC(t,e){return EE(t,e)}function xM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(t,e,n,r){return new xM(t,e,n,r)}function T0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bM(t){if(typeof t=="function")return T0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wy)return 11;if(t===Ky)return 14}return 2}function Qi(t,e){var n=t.alternate;return n===null?(n=rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")T0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Do:return Ks(n.children,i,s,e);case Hy:o=8,i|=8;break;case km:return t=rr(12,n,e,i|2),t.elementType=km,t.lanes=s,t;case Sm:return t=rr(13,n,e,i),t.elementType=Sm,t.lanes=s,t;case Em:return t=rr(19,n,e,i),t.elementType=Em,t.lanes=s,t;case aE:return Yh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sE:o=10;break e;case oE:o=9;break e;case Wy:o=11;break e;case Ky:o=14;break e;case _i:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=rr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ks(t,e,n,r){return t=rr(7,t,r,e),t.lanes=n,t}function Yh(t,e,n,r){return t=rr(22,t,r,e),t.elementType=aE,t.lanes=n,t.stateNode={isHidden:!1},t}function rp(t,e,n){return t=rr(6,t,null,e),t.lanes=n,t}function ip(t,e,n){return e=rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _0(t,e,n,r,i,s,o,a,l){return t=new kM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},c0(s),t}function SM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XC(t){if(!t)return is;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Rn(n))return XE(t,n,e)}return e}function ZC(t,e,n,r,i,s,o,a,l){return t=_0(n,r,!0,t,i,s,o,a,l),t.context=XC(null),n=t.current,r=yn(),i=Yi(n),s=li(r,i),s.callback=e??null,Gi(n,s,i),t.current.lanes=i,Ou(t,i,r),Pn(t,r),t}function Qh(t,e,n,r){var i=e.current,s=yn(),o=Yi(i);return n=XC(n),e.context===null?e.context=n:e.pendingContext=n,e=li(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gi(i,e,o),t!==null&&(Ar(t,i,o,s),zc(t,i,o)),o}function Id(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A0(t,e){Iw(t,e),(t=t.alternate)&&Iw(t,e)}function EM(){return null}var eT=typeof reportError=="function"?reportError:function(t){console.error(t)};function R0(t){this._internalRoot=t}Xh.prototype.render=R0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Qh(t,e,null,null)};Xh.prototype.unmount=R0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){Qh(null,t,null,null)}),e[fi]=null}};function Xh(t){this._internalRoot=t}Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=OE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mi.length&&e!==0&&e<Mi[n].priority;n++);Mi.splice(n,0,t),n===0&&ME(t)}};function P0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mw(){}function CM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Id(o);s.call(u)}}var o=ZC(e,r,t,0,null,!1,!1,"",Mw);return t._reactRootContainer=o,t[fi]=o.current,Jl(t.nodeType===8?t.parentNode:t),io(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Id(l);a.call(u)}}var l=_0(t,0,!1,null,null,!1,!1,"",Mw);return t._reactRootContainer=l,t[fi]=l.current,Jl(t.nodeType===8?t.parentNode:t),io(function(){Qh(e,l,n,r)}),l}function ef(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Id(o);a.call(l)}}Qh(e,o,t,i)}else o=CM(n,e,t,i,r);return Id(o)}RE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sl(e.pendingLanes);n!==0&&(Jy(e,n|1),Pn(e,Tt()),!(Ke&6)&&(wa=Tt()+500,fs()))}break;case 13:io(function(){var r=pi(t,1);if(r!==null){var i=yn();Ar(r,t,1,i)}}),A0(t,1)}};Yy=function(t){if(t.tag===13){var e=pi(t,134217728);if(e!==null){var n=yn();Ar(e,t,134217728,n)}A0(t,134217728)}};PE=function(t){if(t.tag===13){var e=Yi(t),n=pi(t,e);if(n!==null){var r=yn();Ar(n,t,e,r)}A0(t,e)}};OE=function(){return tt};IE=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};Nm=function(t,e,n){switch(e){case"input":if(_m(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hh(r);if(!i)throw Error(oe(90));uE(r),_m(r,i)}}}break;case"textarea":dE(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};vE=S0;wE=io;var TM={usingClientEntryPoint:!1,Events:[Mu,zo,Hh,gE,yE,S0]},Ja={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_M={bundleType:Ja.bundleType,version:Ja.version,rendererPackageName:Ja.rendererPackageName,rendererConfig:Ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ja.findFiberByHostInstance||EM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Bh=cc.inject(_M),Vr=cc}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TM;Hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P0(e))throw Error(oe(200));return SM(t,e,null,n)};Hn.createRoot=function(t,e){if(!P0(t))throw Error(oe(299));var n=!1,r="",i=eT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_0(t,1,!1,null,null,n,!1,r,i),t[fi]=e.current,Jl(t.nodeType===8?t.parentNode:t),new R0(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=kE(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return io(t)};Hn.hydrate=function(t,e,n){if(!Zh(e))throw Error(oe(200));return ef(null,t,e,!0,n)};Hn.hydrateRoot=function(t,e,n){if(!P0(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=eT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ZC(e,null,t,1,n??null,i,!1,s,o),t[fi]=e.current,Jl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xh(e)};Hn.render=function(t,e,n){if(!Zh(e))throw Error(oe(200));return ef(null,t,e,!1,n)};Hn.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(oe(40));return t._reactRootContainer?(io(function(){ef(null,null,t,!1,function(){t._reactRootContainer=null,t[fi]=null})}),!0):!1};Hn.unstable_batchedUpdates=S0;Hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zh(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return ef(t,e,n,!1,r)};Hn.version="18.3.1-next-f1338f8080-20240426";function tT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tT)}catch(t){console.error(t)}}tT(),tE.exports=Hn;var nT=tE.exports;const AM=$h(nT);var Nw=nT;xm.createRoot=Nw.createRoot,xm.hydrateRoot=Nw.hydrateRoot;const RM="modulepreload",PM=function(t){return"/"+t},Dw={},OM=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=PM(s),s in Dw)return;Dw[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":RM,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Lw="popstate";function IM(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return fg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:iu(i)}return NM(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MM(){return Math.random().toString(36).substring(2,10)}function jw(t,e){return{usr:t.state,key:t.key,idx:e}}function fg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ma(e):e,state:n,key:e&&e.key||r||MM()}}function iu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ma(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function NM(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let y=c(),m=y==null?null:y-u;u=y,l&&l({action:a,location:g.location,delta:m})}function h(y,m){a="PUSH";let w=fg(g.location,y,m);n&&n(w,y),u=c()+1;let v=jw(w,u),S=g.createHref(w);try{o.pushState(v,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(S)}s&&l&&l({action:a,location:g.location,delta:1})}function f(y,m){a="REPLACE";let w=fg(g.location,y,m);n&&n(w,y),u=c();let v=jw(w,u),S=g.createHref(w);o.replaceState(v,"",S),s&&l&&l({action:a,location:g.location,delta:0})}function p(y){return DM(y)}let g={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Lw,d),l=y,()=>{i.removeEventListener(Lw,d),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}function DM(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:iu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function rT(t,e,n="/"){return LM(t,e,n,!1)}function LM(t,e,n,r){let i=typeof e=="string"?Ma(e):e,s=gi(i.pathname||"/",n);if(s==null)return null;let o=iT(t);jM(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=GM(s);a=KM(o[l],u,r)}return a}function iT(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;ft(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=ui([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),iT(o.children,e,h,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:HM(d,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of sT(o.path))s(o,a,!0,u)}),e}function sT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $M=/^:[\w-]+$/,zM=3,BM=2,FM=1,UM=10,VM=-2,$w=t=>t==="*";function HM(t,e){let n=t.split("/"),r=n.length;return n.some($w)&&(r+=VM),e&&(r+=BM),n.filter(i=>!$w(i)).reduce((i,s)=>i+($M.test(s)?zM:s===""?FM:UM),r)}function WM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KM(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Md({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ui([s,d.pathname]),pathnameBase:XM(ui([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=ui([s,d.pathnameBase]))}return o}function Md(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[h];return d&&!f?u[c]=void 0:u[c]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function qM(t,e=!1,n=!0){hr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function gi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JM=t=>oT.test(t);function YM(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ma(t):t,s;if(n)if(JM(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),hr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=zw(n.substring(1),"/"):s=zw(n,e)}else s=e;return{pathname:s,search:ZM(r),hash:eN(i)}}function zw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O0(t){let e=QM(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function I0(t,e,n,r=!1){let i;typeof t=="string"?i=Ma(t):(i={...t},ft(!i.pathname||!i.pathname.includes("?"),sp("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),sp("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),sp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=YM(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var ui=t=>t.join("/").replace(/\/\/+/g,"/"),XM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,tN=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function nN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function rN(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lT(t,e){let n=t;if(typeof n!="string"||!oT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(aT)try{let s=new URL(window.location.href),o=n.startsWith("//")?new URL(s.protocol+n):new URL(n),a=gi(o.pathname,e);o.origin===s.origin&&a!=null?n=a+o.search+o.hash:i=!0}catch{hr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uT=["POST","PUT","PATCH","DELETE"];new Set(uT);var iN=["GET",...uT];new Set(iN);var Na=P.createContext(null);Na.displayName="DataRouter";var tf=P.createContext(null);tf.displayName="DataRouterState";var sN=P.createContext(!1),cT=P.createContext({isTransitioning:!1});cT.displayName="ViewTransition";var oN=P.createContext(new Map);oN.displayName="Fetchers";var aN=P.createContext(null);aN.displayName="Await";var Kn=P.createContext(null);Kn.displayName="Navigation";var Du=P.createContext(null);Du.displayName="Location";var Yr=P.createContext({outlet:null,matches:[],isDataRoute:!1});Yr.displayName="Route";var M0=P.createContext(null);M0.displayName="RouteError";var dT="REACT_ROUTER_ERROR",lN="REDIRECT",uN="ROUTE_ERROR_RESPONSE";function cN(t){if(t.startsWith(`${dT}:${lN}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function dN(t){if(t.startsWith(`${dT}:${uN}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new tN(e.status,e.statusText,e.data)}catch{}}function hN(t,{relative:e}={}){ft(Da(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Kn),{hash:i,pathname:s,search:o}=Lu(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:ui([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Da(){return P.useContext(Du)!=null}function ps(){return ft(Da(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Du).location}var hT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fT(t){P.useContext(Kn).static||P.useLayoutEffect(t)}function pT(){let{isDataRoute:t}=P.useContext(Yr);return t?CN():fN()}function fN(){ft(Da(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Na),{basename:e,navigator:n}=P.useContext(Kn),{matches:r}=P.useContext(Yr),{pathname:i}=ps(),s=JSON.stringify(O0(r)),o=P.useRef(!1);return fT(()=>{o.current=!0}),P.useCallback((l,u={})=>{if(hr(o.current,hT),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=I0(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:ui([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}P.createContext(null);function Lu(t,{relative:e}={}){let{matches:n}=P.useContext(Yr),{pathname:r}=ps(),i=JSON.stringify(O0(n));return P.useMemo(()=>I0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function pN(t,e){return mT(t,e)}function mT(t,e,n,r,i){var w;ft(Da(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(Kn),{matches:o}=P.useContext(Yr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let v=d&&d.path||"";yT(u,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let h=ps(),f;if(e){let v=typeof e=="string"?Ma(e):e;ft(c==="/"||((w=v.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${v.pathname}" was given in the \`location\` prop.`),f=v}else f=h;let p=f.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=rT(t,{pathname:g});hr(d||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),hr(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=wN(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:ui([c,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ui([c,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,i);return e&&m?P.createElement(Du.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},m):m}function mN(){let t=EN(),e=nN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,o)}var gN=P.createElement(mN,null),gT=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=dN(t.digest);n&&(t=n)}let e=t!==void 0?P.createElement(Yr.Provider,{value:this.props.routeContext},P.createElement(M0.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?P.createElement(yN,{error:t},e):e}};gT.contextType=sN;var op=new WeakMap;function yN({children:t,error:e}){let{basename:n}=P.useContext(Kn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=cN(e.digest);if(r){let i=op.get(e);if(i)throw i;let s=lT(r.location,n);if(aT&&!op.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw op.set(e,o),o}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function vN({routeContext:t,match:e,children:n}){let r=P.useContext(Na);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Yr.Provider,{value:t},n)}function wN(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);ft(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&r?(c,d)=>{var h,f;r(c,{location:n.location,params:((f=(h=n.matches)==null?void 0:h[0])==null?void 0:f.params)??{},unstable_pattern:rN(n.matches),errorInfo:d})}:void 0;return s.reduceRight((c,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||gN,a&&(l<0&&h===0?(yT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,h+1)),w=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=P.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=c,P.createElement(vN,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(gT,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:u}):w()},null)}function N0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xN(t){let e=P.useContext(Na);return ft(e,N0(t)),e}function bN(t){let e=P.useContext(tf);return ft(e,N0(t)),e}function kN(t){let e=P.useContext(Yr);return ft(e,N0(t)),e}function D0(t){let e=kN(t),n=e.matches[e.matches.length-1];return ft(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function SN(){return D0("useRouteId")}function EN(){var r;let t=P.useContext(M0),e=bN("useRouteError"),n=D0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function CN(){let{router:t}=xN("useNavigate"),e=D0("useNavigate"),n=P.useRef(!1);return fT(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{hr(n.current,hT),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Bw={};function yT(t,e,n){!e&&!Bw[t]&&(Bw[t]=!0,hr(!1,n))}P.memo(TN);function TN({routes:t,future:e,state:n,onError:r}){return mT(t,void 0,n,r,e)}function Fw({to:t,replace:e,state:n,relative:r}){ft(Da(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Kn);hr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Yr),{pathname:o}=ps(),a=pT(),l=I0(t,O0(s),o,r==="path"),u=JSON.stringify(l);return P.useEffect(()=>{a(JSON.parse(u),{replace:e,state:n,relative:r})},[a,u,r,e,n]),null}function pg(t){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _N({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){ft(!Da(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof n=="string"&&(n=Ma(n));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=n,p=P.useMemo(()=>{let g=gi(u,a);return g==null?null:{location:{pathname:g,search:c,hash:d,state:h,key:f},navigationType:r}},[a,u,c,d,h,f,r]);return hr(p!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:P.createElement(Kn.Provider,{value:l},P.createElement(Du.Provider,{children:e,value:p}))}function AN({children:t,location:e}){return pN(mg(t),e)}function mg(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){n.push.apply(n,mg(r.props.children,s));return}ft(r.type===pg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mg(r.props.children,s)),n.push(o)}),n}var Kc="get",qc="application/x-www-form-urlencoded";function nf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function RN(t){return nf(t)&&t.tagName.toLowerCase()==="button"}function PN(t){return nf(t)&&t.tagName.toLowerCase()==="form"}function ON(t){return nf(t)&&t.tagName.toLowerCase()==="input"}function IN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MN(t,e){return t.button===0&&(!e||e==="_self")&&!IN(t)}var dc=null;function NN(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var DN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ap(t){return t!=null&&!DN.has(t)?(hr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qc}"`),null):t}function LN(t,e){let n,r,i,s,o;if(PN(t)){let a=t.getAttribute("action");r=a?gi(a,e):null,n=t.getAttribute("method")||Kc,i=ap(t.getAttribute("enctype"))||qc,s=new FormData(t)}else if(RN(t)||ON(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?gi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Kc,i=ap(t.getAttribute("formenctype"))||ap(a.getAttribute("enctype"))||qc,s=new FormData(a,t),!NN()){let{name:u,type:c,value:d}=t;if(c==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,d)}}else{if(nf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Kc,r=null,i=qc,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function L0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&gi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function $N(t,e){if(t.id in e)return e[t.id];try{let n=await OM(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zN(t){return t!=null&&typeof t.page=="string"}function BN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FN(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await $N(s,n);return o.links?o.links():[]}return[]}));return WN(r.flat(1).filter(BN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Uw(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function UN(t,e,{includeHydrateFallback:n}={}){return VN(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function VN(t){return[...new Set(t)]}function HN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function WN(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!zN(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(HN(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function vT(){let t=P.useContext(Na);return L0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function KN(){let t=P.useContext(tf);return L0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var j0=P.createContext(void 0);j0.displayName="FrameworkContext";function wT(){let t=P.useContext(j0);return L0(t,"You must render this element inside a <HydratedRouter> element"),t}function qN(t,e){let n=P.useContext(j0),[r,i]=P.useState(!1),[s,o]=P.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,h=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=m=>{m.forEach(w=>{o(w.isIntersecting)})},y=new IntersectionObserver(g,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),P.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Ya(a,f),onBlur:Ya(l,p),onMouseEnter:Ya(u,f),onMouseLeave:Ya(c,p),onTouchStart:Ya(d,f)}]:[!1,h,{}]}function Ya(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function GN({page:t,...e}){let{router:n}=vT(),r=P.useMemo(()=>rT(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(YN,{page:t,matches:r,...e}):null}function JN(t){let{manifest:e,routeModules:n}=wT(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return FN(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function YN({page:t,matches:e,...n}){let r=ps(),{manifest:i,routeModules:s}=wT(),{basename:o}=vT(),{loaderData:a,matches:l}=KN(),u=P.useMemo(()=>Uw(t,e,l,i,r,"data"),[t,e,l,i,r]),c=P.useMemo(()=>Uw(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(m=>{var v;let w=i.routes[m.route.id];!w||!w.hasLoader||(!u.some(S=>S.route.id===m.route.id)&&m.route.id in a&&((v=s[m.route.id])!=null&&v.shouldRevalidate)||w.hasClientLoader?g=!0:p.add(m.route.id))}),p.size===0)return[];let y=jN(t,o,"data");return g&&p.size>0&&y.searchParams.set("_routes",e.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[y.pathname+y.search]},[o,a,r,i,u,e,t,s]),h=P.useMemo(()=>UN(c,i),[c,i]),f=JN(c);return P.createElement(P.Fragment,null,d.map(p=>P.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>P.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:g})=>P.createElement("link",{key:p,nonce:n.nonce,...g})))}function QN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var XN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XN&&(window.__reactRouterVersion="7.11.0")}catch{}function ZN({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=P.useRef();i.current==null&&(i.current=IM({window:r,v5Compat:!0}));let s=i.current,[o,a]=P.useState({action:s.action,location:s.location}),l=P.useCallback(u=>{n===!1?a(u):P.startTransition(()=>a(u))},[n]);return P.useLayoutEffect(()=>s.listen(l),[s,l]),P.createElement(_N,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:n})}var xT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bT=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h,...f},p){let{basename:g,unstable_useTransitions:y}=P.useContext(Kn),m=typeof u=="string"&&xT.test(u),w=lT(u,g);u=w.to;let v=hN(u,{relative:i}),[S,T,x]=qN(r,f),R=rD(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:y});function b(O){e&&e(O),O.defaultPrevented||R(O)}let k=P.createElement("a",{...f,...x,href:w.absoluteURL||v,onClick:w.isExternal||s?e:b,ref:QN(p,T),target:l,"data-discover":!m&&n==="render"?"true":void 0});return S&&!m?P.createElement(P.Fragment,null,k,P.createElement(GN,{page:v})):k});bT.displayName="Link";var eD=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=Lu(o,{relative:u.relative}),h=ps(),f=P.useContext(tf),{navigator:p,basename:g}=P.useContext(Kn),y=f!=null&&lD(d)&&a===!0,m=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=h.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(w=w.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase()),v&&g&&(v=gi(v,g)||v);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let T=w===m||!i&&w.startsWith(m)&&w.charAt(S)==="/",x=v!=null&&(v===m||!i&&v.startsWith(m)&&v.charAt(m.length)==="/"),R={isActive:T,isPending:x,isTransitioning:y},b=T?e:void 0,k;typeof r=="function"?k=r(R):k=[r,T?"active":null,x?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(R):s;return P.createElement(bT,{...u,"aria-current":b,className:k,ref:c,style:O,to:o,viewTransition:a},typeof l=="function"?l(R):l)});eD.displayName="NavLink";var tD=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Kc,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h,...f},p)=>{let{unstable_useTransitions:g}=P.useContext(Kn),y=oD(),m=aD(a,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&xT.test(a),S=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let x=T.nativeEvent.submitter,R=(x==null?void 0:x.getAttribute("formmethod"))||o,b=()=>y(x||T.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h});g&&n!==!1?P.startTransition(()=>b()):b()};return P.createElement("form",{ref:p,method:w,action:m,onSubmit:r?l:S,...f,"data-discover":!v&&t==="render"?"true":void 0})});tD.displayName="Form";function nD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kT(t){let e=P.useContext(Na);return ft(e,nD(t)),e}function rD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let u=pT(),c=ps(),d=Lu(t,{relative:s});return P.useCallback(h=>{if(MN(h,e)){h.preventDefault();let f=n!==void 0?n:iu(c)===iu(d),p=()=>u(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:a});l?P.startTransition(()=>p()):p()}},[c,u,d,n,r,e,t,i,s,o,a,l])}var iD=0,sD=()=>`__${String(++iD)}__`;function oD(){let{router:t}=kT("useSubmit"),{basename:e}=P.useContext(Kn),n=SN(),r=t.fetch,i=t.navigate;return P.useCallback(async(s,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=LN(s,e);if(o.navigate===!1){let h=o.fetcherKey||sD();await r(h,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await i(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function aD(t,{relative:e}={}){let{basename:n}=P.useContext(Kn),r=P.useContext(Yr);ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Lu(t||".",{relative:e})},o=ps();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ui([n,s.pathname])),iu(s)}function lD(t,{relative:e}={}){let n=P.useContext(cT);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kT("useViewTransitionState"),i=Lu(t,{relative:e});if(!n.isTransitioning)return!1;let s=gi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=gi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Md(i.pathname,o)!=null||Md(i.pathname,s)!=null}function rf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function uD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const cD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class $0 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class dD extends $0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vw extends $0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hw extends $0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gg||(gg={}));class hD{constructor(e,{headers:n={},customFetch:r,region:i=gg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=cD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return uD(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=r;let h={},{region:f}=r;f||(f=this.region);const p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(h["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(h["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let y=c;d&&(o=new AbortController,s=setTimeout(()=>o.abort(),d),c?(y=o.signal,c.addEventListener("abort",()=>o.abort())):y=o.signal);const m=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:y}).catch(T=>{throw new dD(T)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new Vw(m);if(!m.ok)throw new Hw(m);let v=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield m.json():v==="application/octet-stream"||v==="application/pdf"?S=yield m.blob():v==="text/event-stream"?S=m:v==="multipart/form-data"?S=yield m.formData():S=yield m.text(),{data:S,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Hw||a instanceof Vw?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var fD=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},pD=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,u=s.status,c=s.statusText;if(s.ok){var d,h;if(n.method!=="HEAD"){var f;const m=await s.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}const g=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(h=s.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;const g=await s.text();try{o=JSON.parse(g),Array.isArray(o)&&s.status===404&&(a=[],o=null,u=200,c="OK")}catch{s.status===404&&g===""?(u=204,c="No Content"):o={message:g}}if(o&&n.isMaybeSingle&&(!(o==null||(p=o.details)===null||p===void 0)&&p.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new fD(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var u,c,d,h;const p=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",g=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(d=s==null?void 0:s.name)!==null&&d!==void 0?d:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${p}`,g&&(a+=` (${g})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=s==null?void 0:s.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},mD=class extends pD{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Ww=new RegExp("[,()]");var _o=class extends mD{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ww.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Ww.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},gD=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new _o({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new _o({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new _o({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new _o({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new _o({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},yD=class ST{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new gD(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ST(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",u=n);const c=new Headers(this.headers);return s&&c.set("Prefer",`count=${s}`),new _o({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class vD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wD="2.89.0",xD=`realtime-js/${wD}`,ET="1.0.0",bD="2.0.0",Kw=ET,yg=1e4,kD=1e3,SD=100;var Ri;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ri||(Ri={}));var Lt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Lt||(Lt={}));var kr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kr||(kr={}));var vg;(function(t){t.websocket="websocket"})(vg||(vg={}));var Ps;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ps||(Ps={}));class ED{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,l.length),p.setUint8(g++,a.length),p.setUint8(g++,o.length),p.setUint8(g++,u.length),p.setUint8(g++,d.length),p.setUint8(g++,n),Array.from(l,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(a,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(o,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(u,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(d,m=>p.setUint8(g++,m.charCodeAt(0)));var y=new Uint8Array(f.byteLength+r.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(r),f.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:c,payload:f};return o>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class CT{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const qw=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=CD(o,t,e,i),s),{}):{}},CD=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?TT(s,o):wg(o)},TT=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return RD(e,n)}switch(t){case it.bool:return TD(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return _D(e);case it.json:case it.jsonb:return AD(e);case it.timestamp:return PD(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return wg(e);default:return wg(e)}},wg=t=>t,TD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_D=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},AD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},RD=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>TT(e,a))}return t},PD=t=>typeof t=="string"?t.replace(" ","T"):t,_T=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class lp{constructor(e,n,r={},i=yg){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Gw||(Gw={}));class kl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kl.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=kl.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=kl.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const h=c.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=c.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[u]=p),g.length>0&&(l[u]=g)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(f=>f.presence_ref),h=c.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jw||(Jw={}));var Sl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Sl||(Sl={}));var ni;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ni||(ni={}));class Ko{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new lp(this,kr.join,this.params,this.timeout),this.rejoinTimer=new CT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new kl(this),this.broadcastEndpointURL=_T(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Sl.PRESENCE]&&this.bindings[Sl.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(ni.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(ni.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(ni.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,m=[];for(let w=0;w<y;w++){const v=g[w],{filter:{event:S,schema:T,table:x,filter:R}}=v,b=f&&f[w];if(b&&b.event===S&&Ko.isFilterValueEqual(b.schema,T)&&Ko.isFilterValueEqual(b.table,x)&&Ko.isFilterValueEqual(b.filter,R))m.push(Object.assign(Object.assign({},v),{id:b.id}));else{this.unsubscribe(),this.state=Lt.errored,e==null||e(ni.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ni.SUBSCRIBED);return}}).receive("error",f=>{this.state=Lt.errored,e==null||e(ni.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ni.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Lt.joined&&e===Sl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Lt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new lp(this,kr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new lp(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>SD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=kr;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,g,y,m,w,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const S=f.id,T=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(w=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:m,type:w,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:m,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ko.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kr.close,{},e)}_onError(e){this._on(kr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=qw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=qw(e.columns,e.old_record)),n}}const up=()=>{},hc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OD=[1e3,2e3,5e3,1e4],ID=1e4,MD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ND{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yg,this.transport=null,this.heartbeatIntervalMs=hc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=up,this.ref=0,this.reconnectTimer=null,this.vsn=Kw,this.logger=up,this.conn=null,this.sendBuffer=[],this.serializer=new ED,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vg.websocket}`,this.httpEndpoint=_T(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return Ps.Connecting;case Ri.open:return Ps.Open;case Ri.closing:return Ps.Closing;default:return Ps.Closed}}isConnected(){return this.connectionState()===Ps.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ko(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(kD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ri.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ri.open||this.conn.readyState===Ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([MD],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:xD};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(kr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new CT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,u,c,d,h,f;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:yg,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:hc.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:up,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Kw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:p=>OD[p-1]||ID,this.vsn){case ET:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(p,g)=>g(JSON.stringify(p)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(p,g)=>g(JSON.parse(p));break;case bD:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var su=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function DD(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function LD(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function jD(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=DD(t.baseUrl,r,i),l=await LD(t.auth),u=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const f=d?h:void 0,p=f==null?void 0:f.error;throw new su((p==null?void 0:p.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:f})}return{status:u.status,headers:u.headers,data:h}}}}function fc(t){return t.join("")}var $D=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:fc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fc(t.namespace)}`}),!0}catch(e){if(e instanceof su&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof su&&n.status===409)return;throw n}}};function vo(t){return t.join("")}var zD=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof su&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof su&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},BD=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=jD({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new $D(this.client,e),this.tableOps=new zD(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},sf=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function pt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var FD=class extends sf{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xg=class extends sf{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const z0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UD=()=>Response,bg=t=>{if(Array.isArray(t))return t.map(n=>bg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=bg(r)}),e},VD=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},HD=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ou(t){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(t)}function WD(t,e){if(ou(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KD(t){var e=WD(t,"string");return ou(e)=="symbol"?e:e+""}function qD(t,e,n){return(e=KD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(n),!0).forEach(function(r){qD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const cp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},GD=async(t,e,n)=>{t instanceof await UD()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new FD(cp(r),i,s))}).catch(r=>{e(new xg(cp(r),r))}):e(new xg(cp(t),t))},JD=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(VD(r)?(i.headers=Re({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Re(Re({},i),n))};async function ju(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,JD(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>GD(l,a,r))})}async function au(t,e,n,r){return ju(t,"GET",e,n,r)}async function xr(t,e,n,r,i){return ju(t,"POST",e,r,i,n)}async function kg(t,e,n,r,i){return ju(t,"PUT",e,r,i,n)}async function YD(t,e,n,r){return ju(t,"HEAD",e,Re(Re({},n),{},{noResolveJson:!0}),r)}async function B0(t,e,n,r,i){return ju(t,"DELETE",e,r,i,n)}var QD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}}};let AT;AT=Symbol.toStringTag;var XD=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[AT]="BlobDownloadBuilder",this.promise=null}asStream(){return new QD(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}}};const ZD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var eL=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=z0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Re(Re({},Qw),r);let a=Re(Re({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Re(Re({},a),r.headers));const u=i._removeEmptyFolders(e),c=i._getFinalPath(u),d=await(t=="PUT"?kg:xr)(i.fetch,`${i.url}/object/${c}`,s,Re({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=Re({upsert:Qw.upsert},r),c=Re(Re({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:s,fullPath:(await kg(i.fetch,a.toString(),l,{headers:c})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Re({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await xr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new sf("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await xr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await xr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await xr(r.fetch,`${r.url}/object/sign/${i}`,Re({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await xr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Re(Re({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>au(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new XD(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:bg(await au(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await YD(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(pt(r)&&r instanceof xg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await B0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Re(Re(Re({},ZD),e),{},{prefix:t||""});return{data:await xr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Re({},t);return{data:await xr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const RT="2.89.0",PT={"X-Client-Info":`storage-js/${RT}`};var tL=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Re(Re({},PT),e),this.fetch=z0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await au(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await au(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await xr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await kg(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await xr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await B0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},nL=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Re(Re({},PT),e),this.fetch=z0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await xr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await au(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await B0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!HD(t))throw new sf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new BD({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const F0={"X-Client-Info":`storage-js/${RT}`,"Content-Type":"application/json"};var OT=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var dp=class extends OT{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rL=class extends OT{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const U0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),iL=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sL=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new dp(Xw(s),r,o))}).catch(()=>{const s=r+"";e(new dp(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new dp(i.statusText||`HTTP ${r} error`,r,s))}}else e(new rL(Xw(t),t))},oL=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(iL(r)?(i.headers=Re({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Re(Re({},i),n))};async function aL(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,oL(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>sL(l,a,r))})}async function $n(t,e,n,r,i){return aL(t,"POST",e,r,i,n)}var lL=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Re(Re({},F0),e),this.fetch=U0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await $n(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await $n(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}}},uL=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Re(Re({},F0),e),this.fetch=U0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $n(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await $n(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $n(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}},cL=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Re(Re({},F0),e),this.fetch=U0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await $n(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}}},dL=class extends cL{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new hL(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},hL=class extends lL{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new fL(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},fL=class extends uL{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Re(Re({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},pL=class extends tL{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new eL(this.url,this.headers,t,this.fetch)}get vectors(){return new dL(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new nL(this.url+"/iceberg",this.headers,this.fetch)}};const IT="2.89.0",Ao=30*1e3,Sg=3,hp=Sg*Ao,mL="http://localhost:9999",gL="supabase.auth.token",yL={"X-Client-Info":`gotrue-js/${IT}`},Eg="X-Supabase-Api-Version",MT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wL=10*60*1e3;class lu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function be(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class xL extends lu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function bL(t){return be(t)&&t.name==="AuthApiError"}class Os extends lu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class xi extends lu{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Nn extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kL(t){return be(t)&&t.name==="AuthSessionMissingError"}class wo extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pc extends xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mc extends xi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SL(t){return be(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zw extends xi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class EL extends xi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cg extends xi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fp(t){return be(t)&&t.name==="AuthRetryableFetchError"}class ex extends xi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Tg extends xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tx=` 	
\r=`.split(""),CL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tx.length;e+=1)t[tx[e].charCodeAt(0)]=-2;for(let e=0;e<Nd.length;e+=1)t[Nd[e].charCodeAt(0)]=e;return t})();function nx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Nd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Nd[r]),e.queuedBits-=6}}function NT(t,e,n){const r=CL[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rx(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{AL(o,r,n)};for(let o=0;o<t.length;o+=1)NT(t.charCodeAt(o),i,s);return e.join("")}function TL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _L(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}TL(r,e)}}function AL(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function oa(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)NT(t.charCodeAt(i),n,r);return new Uint8Array(e)}function RL(t){const e=[];return _L(t,n=>e.push(n)),new Uint8Array(e)}function js(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>nx(i,n,r)),nx(null,n,r),e.join("")}function PL(t){return Math.round(Date.now()/1e3)+t}function OL(){return Symbol("auth-callback")}const Jt=()=>typeof window<"u"&&typeof document<"u",ks={tested:!1,writable:!1},DT=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ks.tested)return ks.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ks.tested=!0,ks.writable=!0}catch{ks.tested=!0,ks.writable=!1}return ks.writable};function IL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const LT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ML=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ro=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ss=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gt=async(t,e)=>{await t.removeItem(e)};class of{constructor(){this.promise=new of.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}of.promiseConstructor=Promise;function pp(t){const e=t.split(".");if(e.length!==3)throw new Tg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!vL.test(e[r]))throw new Tg("JWT not in base64url format");return{header:JSON.parse(rx(e[0])),payload:JSON.parse(rx(e[1])),signature:oa(e[2]),raw:{header:e[0],payload:e[1]}}}async function NL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function DL(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function LL(t){return("0"+t.toString(16)).substr(-2)}function jL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,LL).join("")}async function $L(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function zL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await $L(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xo(t,e,n=!1){const r=jL();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ro(t,`${e}-code-verifier`,i);const s=await zL(r);return[s,r===s?"plain":"s256"]}const BL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FL(t){const e=t.headers.get(Eg);if(!e||!e.match(BL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function UL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function VL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bo(t){if(!HL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WL(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function ix(t){return JSON.parse(JSON.stringify(t))}const As=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KL=[502,503,504];async function sx(t){var e;if(!ML(t))throw new Cg(As(t),0);if(KL.includes(t.status))throw new Cg(As(t),t.status);let n;try{n=await t.json()}catch(s){throw new Os(As(s),s)}let r;const i=FL(t);if(i&&i.getTime()>=MT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ex(As(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new ex(As(n),t.status,n.weak_password.reasons);throw new xL(As(n),t.status||500,r)}const qL=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ae(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Eg]||(s[Eg]=MT["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await GL(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function GL(t,e,n,r,i,s){const o=qL(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Cg(As(l),0)}if(a.ok||await sx(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await sx(l)}}function gr(t){var e;let n=null;QL(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=PL(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ox(t){const e=gr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Di(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function JL(t){return{data:t,error:null}}function YL(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=rf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ax(t){return t}function QL(t){return t.access_token&&t.refresh_token&&t.expires_in}const gp=["global","local","others"];class XL{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=LT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=gp[0]){if(gp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gp.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Di})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=rf(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:YL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Di})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ax});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){bo(e);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Di})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){bo(e);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Di})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){bo(e);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Di})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){bo(e.userId);try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteFactor(e){bo(e.userId),bo(e.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ax});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}}function lx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ko={debug:!!(globalThis&&DT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZL extends jT{}async function ej(t,e,n){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ZL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ko.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function tj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $T(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function nj(t){return parseInt(t,16)}function rj(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function ij(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=$T(t.address),p=c?`${c}://${r}`:r,g=t.statement?`${t.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`;let m=`URI: ${d}
Version: ${h}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);w+=`
- ${v}`}m+=w}return`${y}
${m}`}class Pt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Dd extends Pt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function sj({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(zT(o)){if(s.rp.id!==o)return new Pt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function oj({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(zT(r)){if(n.rpId!==r)return new Pt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class aj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const lj=new aj;function uj(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=rf(t,["challenge","user","excludeCredentials"]),s=oa(e).buffer,o=Object.assign(Object.assign({},n),{id:oa(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:oa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function cj(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=rf(t,["challenge","allowCredentials"]),i=oa(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:oa(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function dj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:js(new Uint8Array(t.response.attestationObject)),clientDataJSON:js(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:js(new Uint8Array(i.authenticatorData)),clientDataJSON:js(new Uint8Array(i.clientDataJSON)),signature:js(new Uint8Array(i.signature)),userHandle:i.userHandle?js(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ux(){var t,e;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function fj(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:sj({error:e,options:t})}}}async function pj(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:oj({error:e,options:t})}}}const mj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ld(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Ld(a,o):r[s]=Ld(o)}else r[s]=o}return r}function yj(t,e){return Ld(mj,t,e||{})}function vj(t,e){return Ld(gj,t,e||{})}class wj{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??lj.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=yj(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:d}=await fj({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=vj(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:d}=await pj(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Os("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn authentication")};try{if(!ux())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Os("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new lu("rpId is required for WebAuthn registration")};try{if(!ux())return{data:null,error:new Os("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Os("Unexpected error in register",o)}}}}tj();const xj={url:mL,storageKey:gL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cx(t,e,n){return await n()}const So={};class uu{get jwks(){var e,n;return(n=(e=So[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=So[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},xj),e);if(this.storageKey=s.storageKey,this.instanceID=(n=uu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,uu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Jt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new XL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=LT(s.fetch),this.lock=s.lock||cx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Jt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ej:this.lock=cx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:DT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=lx(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${IT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Jt()&&(n=IL(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Jt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),SL(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return be(n)?this._returnResult({error:n}):this._returnResult({error:new Os("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:gr}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:c,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await xo(this.storage,this.storageKey)),s=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:gr})}else if("phone"in e){const{phone:c,password:d,options:h}=e;s=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:gr})}else throw new pc("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Gt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ox})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ox})}else throw new pc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new wo;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(be(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,u,c,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:g,wallet:y,statement:m,options:w}=e;let v;if(Jt())if(typeof y=="object")v=y;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")v=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),T=await v.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=$T(T[0]);let R=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const k=await v.request({method:"eth_chainId"});R=nj(k)}const b={domain:S.host,address:x,statement:m,uri:S.href,version:"1",chainId:R,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.resources};f=ij(b),p=await v.request({method:"personal_sign",params:[rj(f),x]})}try{const{data:g,error:y}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:gr});if(y)throw y;if(!g||!g.session||!g.user){const m=new wo;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(be(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var n,r,i,s,o,a,l,u,c,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:m,statement:w,options:v}=e;let S;if(Jt())if(typeof m=="object")S=m;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))S=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=m}const T=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const x=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),w?{statement:w}:null));let R;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")R=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)R=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)p=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),g=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(c=v==null?void 0:v.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const x=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:y,error:m}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:js(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:gr});if(m)throw m;if(!y||!y.session||!y.user){const w=new wo;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:m})}catch(y){if(be(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await Ss(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new EL;const{data:s,error:o}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:gr});if(await Gt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new wo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:gr}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new wo;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(be(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await xo(this.storage,this.storageKey));const{error:d}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new pc("You must provide either an email or phone number.")}catch(a){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:gr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await xo(this.storage,this.storageKey));const u=await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:JL});return!((s=u.data)===null||s===void 0)&&s.url&&Jt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Nn;const{error:i}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(be(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new pc("You must provide either an email or phone number and a type")}catch(n){if(be(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ss(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=mp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=WL(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Di}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nn}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Di})})}catch(n){if(be(n))return kL(n)&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Nn;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await xo(this.storage,this.storageKey));const{data:u,error:c}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Di});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nn;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=pp(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Nn;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(be(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Jt())throw new mc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Zw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zw("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new mc("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;l&&(h=parseInt(l));const f=h-c;f*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:g,error:y}=await this._getUser(s);if(y)throw y;const m={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ss(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(bL(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=OL(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await xo(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(be(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,d=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gr}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new wo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(i){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await DL(async i=>(i>0&&await NL(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&fp(s)&&Date.now()+o-r<Ao})}catch(r){if(this._debug(n,"error",r),be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Jt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ss(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ro(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:mp()}else if(i&&!i.user&&!i.user){const o=await Ss(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Gt(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,i)):i.user=mp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<hp;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${hp}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),fp(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new of;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Nn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),be(s)){const o={data:null,error:s};return fp(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Gt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=ix(i);await Ro(this.storage,this.storageKey,s)}else{const i=ix(n);await Ro(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gt(this.storage,this.storageKey),await Gt(this.storage,this.storageKey+"-code-verifier"),await Gt(this.storage,this.storageKey+"-user"),this.userStorage&&await Gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ao}ms, refresh threshold is ${Sg} ticks`),i<=Sg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await xo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?dj(e.webauthn.credential_response):hj(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:uj(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:cj(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=pp(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Nn});const o=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Nn});const o=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(e){if(be(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nn})})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+wL>i)return r;const{data:s,error:o}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return this._returnResult({data:null,error:p});r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=pp(r);n!=null&&n.allowExpired||UL(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const c=VL(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,RL(`${a}.${l}`)))throw new Tg("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}}uu.nextInstanceID={};const bj=uu,kj="2.89.0";let al="";typeof Deno<"u"?al="deno":typeof document<"u"?al="web":typeof navigator<"u"&&navigator.product==="ReactNative"?al="react-native":al="node";const Sj={"X-Client-Info":`supabase-js-${al}/${kj}`},Ej={headers:Sj},Cj={schema:"public"},Tj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_j={};function cu(t){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(t)}function Aj(t,e){if(cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rj(t){var e=Aj(t,"string");return cu(e)=="symbol"?e:e+""}function Pj(t,e,n){return(e=Rj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dx(Object(n),!0).forEach(function(r){Pj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Oj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ij=()=>Headers,Mj=(t,e,n)=>{const r=Oj(n),i=Ij();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,kt(kt({},o),{},{headers:u}))}};function Nj(t){return t.endsWith("/")?t:t+"/"}function Dj(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:kt(kt({},l),i),auth:kt(kt({},u),s),realtime:kt(kt({},c),o),storage:{},global:kt(kt(kt({},d),a),{},{headers:kt(kt({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function Lj(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Nj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var jj=class extends bj{constructor(t){super(t)}},$j=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=Lj(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:Cj,realtime:_j,auth:kt(kt({},Tj),{},{storageKey:o}),global:Ej},l=Dj(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=Mj(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(kt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new yD(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new pL(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new hD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jj({url:this.authUrl.href,headers:kt(kt({},h),c),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ND(this.realtimeUrl.href,kt(kt({},t),{},{params:kt(kt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const zj=(t,e,n)=>new $j(t,e,n);function Bj(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Bj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BT="https://acrkclmderqewcwugsnl.supabase.co",Gc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjcmtjbG1kZXJxZXdjd3Vnc25sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNTc0MzAsImV4cCI6MjA4MTgzMzQzMH0.UT2vJTXpPO5tR9sUD8YU0gJ_47Zpe3yJiLzllUljPDw";console.log("Supabase Config:",{url:BT,keyLength:Gc==null?void 0:Gc.length});let FT=null;try{FT=zj(BT,Gc)}catch(t){console.error("Error creating Supabase client:",t)}const he=FT,Fj=(t,e)=>{const n=new Date,r=t.toLowerCase().trim();if(/^\d+$/.test(r)){const s=parseInt(r,10);let o=n.getMonth(),a=n.getFullYear();s<n.getDate()&&(o++,o>11&&(o=0,a++));const l=new Date(a,o,s);if(l.getMonth()===o)return l}if(["","today","td"].includes(r))return n;if(["","tmr","tm"].includes(r))return new Date(n.setDate(n.getDate()+1));if([""].includes(r))return new Date(n.setDate(n.getDate()+2));const i=r.match(/^\+(\d+)$/);return i?new Date(n.setDate(n.getDate()+parseInt(i[1]))):null},Uj=t=>t?new Date(t).toLocaleDateString("zh-TW",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",UT=t=>{if(!t)return"";const e=new Date(t),n=new Date;n.setHours(0,0,0,0);const r=new Date(e.getTime());r.setHours(0,0,0,0);const i=Math.floor((r.getTime()-n.getTime())/(1e3*60*60*24));return i===0?"":i===1?"":i===-1?"":i<0?`${Math.abs(i)} `:`${e.getMonth()+1}/${e.getDate()}`},Bi=(t,e)=>t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate(),Xi=t=>t?Bi(new Date(t),new Date):!1,du=t=>t?new Date(t).getTime()<new Date().setHours(0,0,0,0):!1,V0=(t,e,n)=>{if(!t)return!1;if(t===e)return!0;const r=n.find(i=>i.id===t);return r?V0(r.parent_id,e,n):!1},Vj="v1.5.0 (Modular Refactor)",_g=28,VT=new Image;VT.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";const Cr={blue:{text:"text-slate-700",accent:"text-blue-600",bg:"hover:bg-slate-50",border:"border-blue-500",ring:"focus-within:ring-blue-200",buttonRing:"focus:ring-blue-200 focus:border-blue-300",dot:"bg-blue-400",badge:"bg-blue-50 text-blue-700 border-blue-100",breadcrumb:"bg-blue-50 text-blue-600 hover:bg-blue-100",indicator:"bg-blue-500",ringColor:"ring-blue-400"},green:{text:"text-slate-700",accent:"text-emerald-600",bg:"hover:bg-slate-50",border:"border-emerald-500",ring:"focus-within:ring-emerald-200",buttonRing:"focus:ring-emerald-200 focus:border-emerald-300",dot:"bg-emerald-400",badge:"bg-emerald-50 text-emerald-700 border-emerald-100",breadcrumb:"bg-emerald-50 text-emerald-600 hover:bg-emerald-100",indicator:"bg-emerald-500",ringColor:"ring-emerald-400"},amber:{text:"text-slate-700",accent:"text-amber-600",bg:"hover:bg-slate-50",border:"border-amber-500",ring:"focus-within:ring-amber-200",buttonRing:"focus:ring-amber-200 focus:border-amber-300",dot:"bg-amber-400",badge:"bg-amber-50 text-amber-700 border-amber-100",breadcrumb:"bg-amber-50 text-amber-600 hover:bg-amber-100",indicator:"bg-amber-500",ringColor:"ring-amber-400"},purple:{text:"text-slate-700",accent:"text-purple-600",bg:"hover:bg-slate-50",border:"border-purple-500",ring:"focus-within:ring-purple-200",focusBorder:"border-l-purple-400",buttonRing:"focus:ring-purple-200 focus:border-purple-300",dot:"bg-purple-400",badge:"bg-purple-50 text-purple-700 border-purple-100",breadcrumb:"bg-purple-50 text-purple-600 hover:bg-purple-100",indicator:"bg-purple-500",ringColor:"ring-purple-400"}},fr=P.createContext({}),Hj=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState([]),[s,o]=P.useState([]),[a,l]=P.useState(!0),[u,c]=P.useState(null),[d,h]=P.useState("synced"),[f,p]=P.useState(null),[g,y]=P.useState([]),[m,w]=P.useState(null),[v,S]=P.useState(null),[T,x]=P.useState(null),[R,b]=P.useState([]),[k,O]=P.useState("inbox"),[M,N]=P.useState(null),[L,D]=P.useState({fontWeight:"thin",fontSize:"normal"}),[z,I]=P.useState(null),[_,$]=P.useState([]),[j,C]=P.useState([]),[q,G]=P.useState([]),A=P.useRef([]),[K,V]=P.useState({isDragging:!1,draggedId:null,originalDepth:0,dragOffsetX:0,dropIndex:null,dropDepth:0,indicatorTop:0,indicatorLeft:0,indicatorWidth:0,ghostPosition:{x:0,y:0}}),te=P.useRef({}),we=P.useRef(null),Q=P.useRef(null);P.useEffect(()=>{if(!he){c("Supabase client not initialized"),l(!1);return}(async()=>{try{let F=localStorage.getItem("gtd_user_id");if((!F||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(F))&&(console.warn("Invalid or missing User ID, resetting to default."),F="00000000-0000-0000-0000-000000000000",localStorage.setItem("gtd_user_id",F)),he){const{data:{session:U},error:W}=await he.auth.getSession();if(W)throw W;n((U==null?void 0:U.user)||{id:F})}else n({id:F})}catch(F){console.error("Initialization error:",F),c(F.message||"Failed to initialize app"),l(!1)}})()},[]),P.useEffect(()=>{A.current=r},[r]),P.useEffect(()=>{if(!e||!he)return;(async()=>{try{if(he){const{data:U}=await he.from("tasks").select("*").eq("user_id",e.id).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});let W=null,{data:Z,error:ne}=await he.from("tags").select("*").eq("user_id",e.id).order("order_index",{ascending:!0}).order("created_at",{ascending:!0});if(ne){console.warn("Failed to fetch tags with order_index, falling back to created_at",ne);const{data:fe,error:ke}=await he.from("tags").select("*").eq("user_id",e.id);ke?console.error("Failed to fetch tags even with fallback:",ke):W=fe==null?void 0:fe.sort((De,re)=>{var pe;return((pe=De.created_at)==null?void 0:pe.localeCompare(re.created_at||""))||0})}else W=Z;if(U){const fe=U.map(ke=>({...ke,tags:ke.tags||[],images:ke.images||[]}));i(fe),A.current=fe}W&&o(W)}}catch(U){console.error("Error fetching data:",U)}finally{l(!1)}})();const F=he.channel("tasks_changes").on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:`user_id=eq.${e.id}`},U=>{if(!(U.new&&te.current[U.new.id]&&Date.now()-te.current[U.new.id]<2e3))if(U.eventType==="INSERT"){const W={...U.new,tags:U.new.tags||[],images:U.new.images||[]};i(Z=>Z.some(ne=>ne.id===W.id)?Z:[W,...Z].sort((ne,fe)=>(ne.order_index||0)-(fe.order_index||0)||ne.created_at.localeCompare(fe.created_at)))}else if(U.eventType==="UPDATE"){const W={...U.new,tags:U.new.tags||[],images:U.new.images||[]};i(Z=>Z.map(ne=>ne.id===W.id?W:ne).sort((ne,fe)=>(ne.order_index||0)-(fe.order_index||0)||ne.created_at.localeCompare(fe.created_at)))}else U.eventType==="DELETE"&&i(W=>W.filter(Z=>Z.id!==U.old.id))}).subscribe(),J=he.channel("tags_changes").on("postgres_changes",{event:"*",schema:"public",table:"tags",filter:`user_id=eq.${e.id}`},U=>{U.eventType==="INSERT"?o(W=>W.some(Z=>Z.id===U.new.id)?W:[...W,U.new]):U.eventType==="DELETE"&&o(W=>W.filter(Z=>Z.id!==U.old.id))}).subscribe();return()=>{F.unsubscribe(),J.unsubscribe()}},[e]);const B=H=>{console.error(H),h("error"),p({msg:`Sync Failed: ${H.message||"Unknown error"}`,type:"error"})},ee=H=>{te.current[H]=Date.now()},ce=async H=>{const F=new Date,J=[];for(let ne=1;ne<=10;ne++){const fe=new Date(F);fe.setDate(F.getDate()+ne),fe.setHours(0,0,0,0);const ke=r.filter(De=>{if(!De.start_date)return!1;const re=new Date(De.start_date);return Bi(re,fe)&&!De.completed_at}).length;J.push({date:fe,count:ke})}const U=Math.min(...J.map(ne=>ne.count)),W=J.filter(ne=>ne.count===U),Z=W[Math.floor(Math.random()*W.length)];await Xe(H,{start_date:Z.date.toISOString()}),p({msg:` ${Z.date.getMonth()+1}/${Z.date.getDate()} (: ${Z.count})`,type:"info"})},ue=async()=>{const H=r.filter(J=>!!J.completed_at&&J.status!=="logged");if(H.length===0)return;const F=H.map(J=>J.id);if(i(J=>J.map(U=>F.includes(U.id)?{...U,status:"logged"}:U)),he){const{error:J}=await he.from("tasks").update({status:"logged"}).in("id",F);J&&B(J)}p({msg:` ${F.length} `,type:"info"})},ye=async()=>{const H=r.filter(F=>(F.start_date||F.due_date)&&F.status!=="deleted"&&F.status!=="logged").map(F=>({id:F.id,start_date:null,due_date:null}));if(H.length===0){p({msg:"",type:"info"});return}await _e(H),p({msg:` ${H.length} `,type:"info"})},Ge=()=>{const H={tasks:r,tags:s,user_id:e.id,version:1,exported_at:new Date().toISOString()},F=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),J=URL.createObjectURL(F),U=document.createElement("a");U.href=J,U.download=`things-clone-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(J),p({msg:"",type:"info"})},Ue=async H=>{if(!he)return;const F=new FileReader;F.onload=async J=>{var U;try{const W=(U=J.target)==null?void 0:U.result,Z=JSON.parse(W);if(!Z.tasks||!Z.tags)throw new Error("");if(h("syncing"),Z.tags.length>0){const{error:ne}=await he.from("tags").upsert(Z.tags.map(fe=>({...fe,user_id:e.id})));if(ne)throw ne}if(Z.tasks.length>0){const{error:ne}=await he.from("tasks").upsert(Z.tasks.map(fe=>({...fe,user_id:e.id})));if(ne)throw ne}p({msg:"...",type:"info"}),setTimeout(()=>window.location.reload(),1e3)}catch(W){B(W)}},F.readAsText(H)},Ve=H=>{$(F=>[...F,H]),C([])},Me=async()=>{if(_.length===0)return;const H=_[_.length-1];if($(_.slice(0,-1)),C(F=>[...F,H]),H.type==="ADD"){const F=H.payload.data.id;ee(F),i(J=>J.filter(U=>U.id!==F)),he&&await he.from("tasks").delete().eq("id",F)}else if(H.type==="DELETE"){const F=H.payload.data;ee(F.id),i(J=>[...J,F].sort((U,W)=>(U.order_index||0)-(W.order_index||0)||U.created_at.localeCompare(W.created_at))),he&&await he.from("tasks").insert([F])}else if(H.type==="UPDATE"){const{id:F,before:J}=H.payload;ee(F),i(U=>U.map(W=>W.id===F?{...W,...J}:W).sort((W,Z)=>(W.order_index||0)-(Z.order_index||0)||W.created_at.localeCompare(Z.created_at))),he&&await he.from("tasks").update(J).eq("id",F)}else if(H.type==="BATCH_UPDATE"){const F=H.payload,J=[...A.current];F.forEach(U=>{const W=J.findIndex(Z=>Z.id===U.id);W!==-1&&(J[W]={...J[W],...U.before},ee(U.id))}),J.sort((U,W)=>(U.order_index||0)-(W.order_index||0)||U.created_at.localeCompare(W.created_at)),i(J),he&&await Promise.all(F.map(U=>he.from("tasks").update(U.before).eq("id",U.id)))}else if(H.type==="ADD_TAG"){const F=H.payload.data.id;o(J=>J.filter(U=>U.id!==F)),he&&await he.from("tags").delete().eq("id",F)}else if(H.type==="DELETE_TAG"){const F=H.payload.data;o(J=>[...J,F].sort((U,W)=>(U.order_index||0)-(W.order_index||0))),he&&await he.from("tags").insert([F])}else if(H.type==="UPDATE_TAG"){const{id:F,before:J}=H.payload;o(U=>U.map(W=>W.id===F?{...W,...J}:W).sort((W,Z)=>(W.order_index||0)-(Z.order_index||0))),he&&await he.from("tags").update(J).eq("id",F)}p({msg:"",type:"info"})},je=async()=>{if(j.length===0)return;const H=j[j.length-1];if(C(j.slice(0,-1)),$(F=>[...F,H]),H.type==="ADD"){const F=H.payload.data;ee(F.id),i(J=>[...J,F].sort((U,W)=>(U.order_index||0)-(W.order_index||0)||U.created_at.localeCompare(W.created_at))),he&&await he.from("tasks").insert([F])}else if(H.type==="DELETE"){const F=H.payload.data.id;ee(F),i(J=>J.filter(U=>U.id!==F)),he&&await he.from("tasks").delete().eq("id",F)}else if(H.type==="UPDATE"){const{id:F,after:J}=H.payload;ee(F),i(U=>U.map(W=>W.id===F?{...W,...J}:W).sort((W,Z)=>(W.order_index||0)-(Z.order_index||0)||W.created_at.localeCompare(Z.created_at))),he&&await he.from("tasks").update(J).eq("id",F)}else if(H.type==="BATCH_UPDATE"){const F=H.payload,J=[...A.current];F.forEach(U=>{const W=J.findIndex(Z=>Z.id===U.id);W!==-1&&(J[W]={...J[W],...U.after},ee(U.id))}),J.sort((U,W)=>(U.order_index||0)-(W.order_index||0)||U.created_at.localeCompare(W.created_at)),i(J),he&&await Promise.all(F.map(U=>he.from("tasks").update(U.after).eq("id",U.id)))}else if(H.type==="ADD_TAG"){const F=H.payload.data;o(J=>[...J,F].sort((U,W)=>(U.order_index||0)-(W.order_index||0))),he&&await he.from("tags").insert([F])}else if(H.type==="DELETE_TAG"){const F=H.payload.data.id;o(J=>J.filter(U=>U.id!==F)),he&&await he.from("tags").delete().eq("id",F)}else if(H.type==="UPDATE_TAG"){const{id:F,after:J}=H.payload;o(U=>U.map(W=>W.id===F?{...W,...J}:W).sort((W,Z)=>(W.order_index||0)-(Z.order_index||0))),he&&await he.from("tags").update(J).eq("id",F)}p({msg:"",type:"info"})};P.useEffect(()=>{const H=F=>{(F.metaKey||F.ctrlKey)&&F.key==="z"&&(F.preventDefault(),F.shiftKey?je():Me())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[_,j,r]);const Ce=H=>{G(J=>[...J,{view:k,focusedId:v}]),O("all"),S(H);let F=r.find(J=>J.id===H);for(;F&&F.parent_id;)R.includes(F.parent_id)||qe(F.parent_id,!0),F=r.find(J=>J.id===(F==null?void 0:F.parent_id))},Je=()=>{if(q.length===0)return;const H=q[q.length-1];G(F=>F.slice(0,-1)),O(H.view),S(H.focusedId)},He=P.useCallback((H,F,J,U)=>{if(F==="schedule")return H.filter(re=>(!!re.due_date||!!re.start_date)&&re.status!=="deleted"&&re.status!=="logged").sort((re,pe)=>{const We=new Date(re.start_date||re.due_date||0).getTime(),Ft=new Date(pe.start_date||pe.due_date||0).getTime();return We-Ft}).map((re,pe)=>({data:re,depth:0,hasChildren:!1,isExpanded:!1,path:[],index:pe}));if(F==="next"){const re=H.filter(Ft=>(Ft.status==="inbox"||Ft.status==="active")&&!Ft.parent_id&&Ft.status!=="logged"&&Ft.status!=="deleted"),pe=[];let We=0;return re.forEach(Ft=>{let Gn=Ft;const Or=[];for(;;){const Ir=H.filter(Mr=>Mr.parent_id===Gn.id&&Mr.status!=="logged"&&Mr.status!=="deleted").sort((Mr,bs)=>(Mr.order_index||0)-(bs.order_index||0)||Mr.created_at.localeCompare(bs.created_at));if(Ir.length>0)Or.push(Gn),Gn=Ir[0];else{pe.push({data:Gn,depth:0,hasChildren:!1,isExpanded:!1,path:[],index:We++,breadcrumbs:Or.length>0?Or:void 0});break}}}),pe}const Z=(()=>{if(J)return re=>{var pe;return(pe=re.tags)==null?void 0:pe.includes(J)};switch(F){case"inbox":return re=>re.status==="inbox"&&!re.parent_id;case"today":return re=>{const pe=Xi(re.due_date)||Xi(re.start_date),We=(du(re.due_date)||du(re.start_date))&&!re.completed_at,Ft=re.completed_at&&Xi(re.completed_at);if(!(re.status!=="logged"&&re.status!=="deleted"&&(pe||We||Ft)))return!1;let Or=re;for(;Or.parent_id;){const Ir=H.find(bs=>bs.id===Or.parent_id);if(!Ir)break;if(!(Ir.status!=="logged"&&Ir.status!=="deleted"))return!1;Or=Ir}return!0};case"projects":return re=>(re.is_project||H.some(pe=>pe.parent_id===re.id))&&re.status!=="deleted"&&!re.parent_id&&re.status!=="logged";case"all":return re=>re.status!=="deleted"&&re.status!=="logged";case"waiting":return re=>re.status==="waiting"&&re.status!=="logged";case"log":return re=>re.status==="logged";case"trash":return re=>re.status==="deleted";default:return re=>re.status!=="deleted"&&re.status!=="logged"}})(),ne=H.filter(Z).sort((re,pe)=>(re.order_index||0)-(pe.order_index||0)||re.created_at.localeCompare(pe.created_at)),fe=new Set;let ke=0;const De=(re,pe=0,We=[])=>{let Ft=[];return re.forEach(Gn=>{if(fe.has(Gn.id))return;fe.add(Gn.id);const Or=H.filter(go=>go.parent_id===Gn.id&&go.status!=="logged"&&go.status!=="deleted").sort((go,C1)=>(go.order_index||0)-(C1.order_index||0)||go.created_at.localeCompare(C1.created_at)),Ir=Or.length>0,Mr=U.includes(Gn.id),bs=[...We,Gn.id];Ft.push({data:Gn,depth:pe,hasChildren:Ir,isExpanded:Mr,path:bs,index:ke++}),Ir&&Mr&&(Ft=[...Ft,...De(Or,pe+1,bs)])}),Ft};return De(ne)},[]),Ze=P.useMemo(()=>He(r,k,M,R),[r,k,M,R,He]),rt=(H,F)=>{S(F);const J=H.shiftKey||H.shiftKey,U=H.ctrlKey||H.metaKey;if(J){const W=m||v||F;w(W);const Z=Ze.findIndex(fe=>fe.data.id===W),ne=Ze.findIndex(fe=>fe.data.id===F);if(Z!==-1&&ne!==-1){const[fe,ke]=Z<ne?[Z,ne]:[ne,Z],De=Ze.slice(fe,ke+1).map(re=>re.data.id);y(De)}}else U?(w(F),y(W=>W.includes(F)?W.filter(Z=>Z!==F):[...W,F])):(w(F),y([F]))},Ye=P.useCallback((H,F)=>{V(J=>({...J,ghostPosition:{x:H,y:F}}))},[]);P.useEffect(()=>{Q.current=document.querySelector("main")},[]);const Dt=(H,F)=>{if(k==="schedule"){H.preventDefault();return}g.includes(F.data.id)||y([F.data.id]),H.dataTransfer.setData("text/plain",F.data.id),H.dataTransfer.effectAllowed="move",H.dataTransfer.setDragImage(VT,0,0);const J=H.currentTarget.getBoundingClientRect(),U=H.clientX-J.left;V(W=>({...W,isDragging:!0,draggedId:F.data.id,originalDepth:F.depth,dragOffsetX:U,ghostPosition:{x:H.clientX,y:H.clientY}}))},Y=H=>{V(F=>({...F,...H}))},le=async()=>{we.current&&(clearInterval(we.current),we.current=null);const{draggedId:H,dropIndex:F,dropDepth:J}=K;if(V(pe=>({...pe,isDragging:!1,draggedId:null,dropIndex:null})),!H||F===null)return;const U=g.includes(H)?g:[H],W=r.filter(pe=>U.includes(pe.id)).sort((pe,We)=>(pe.order_index||0)-(We.order_index||0));let Z=null;if(F>0){const pe=Ze[F-1];if(J>pe.depth)Z=pe.data.id,R.includes(Z)||qe(Z,!0);else if(J===pe.depth)Z=pe.data.parent_id;else{let We=F-1;for(;We>=0;){if(Ze[We].depth===J-1){Z=Ze[We].data.id;break}if(Ze[We].depth<J-1)break;We--}J===0&&(Z=null)}}else Z=null;for(const pe of W){if(V0(Z,pe.id,r)){p({msg:"",type:"error"});return}if(Z){const We=r.find(Ft=>Ft.id===Z);if(We&&!We.is_project&&pe.is_project){p({msg:"",type:"error"});return}}}let ne=-1e4,fe=999999999;for(let pe=F-1;pe>=0;pe--){const We=Ze[pe];if(!U.includes(We.data.id)){if(We.depth===J){ne=We.data.order_index;break}else if(We.depth<J)break}}for(let pe=F;pe<Ze.length;pe++){const We=Ze[pe];if(!U.includes(We.data.id)){if(We.depth===J){fe=We.data.order_index;break}else if(We.depth<J)break}}ne===-1e4&&fe===999999999?(ne=0,fe=2e4):ne===-1e4?ne=fe-2e4:fe===999999999&&(fe=ne+2e4);const ke=W.length,De=(fe-ne)/(ke+1),re=W.map((pe,We)=>({id:pe.id,parent_id:Z,order_index:ne+De*(We+1)}));_e(re)},ve=async(H,F)=>{const J=A.current,U=J.find(W=>W.id===H);if(U){if(ee(H),F==="up"||F==="down"){const W=J.filter(ne=>ne.parent_id===U.parent_id&&ne.status!=="deleted"&&ne.status!=="logged").sort((ne,fe)=>(ne.order_index||0)-(fe.order_index||0)),Z=W.findIndex(ne=>ne.id===H);if(Z===-1)return;if(F==="up"){if(Z===0)return;const ne=W[Z-1],fe=W[Z-2];let ke;fe?ke=(fe.order_index+ne.order_index)/2:ke=ne.order_index-1e4,_e([{id:U.id,order_index:ke}])}else{if(Z===W.length-1)return;const ne=W[Z+1],fe=W[Z+2];let ke;fe?ke=(ne.order_index+fe.order_index)/2:ke=ne.order_index+1e4,_e([{id:U.id,order_index:ke}])}}else if(F==="right"){const W=J.filter(re=>re.parent_id===U.parent_id&&re.status!=="deleted"&&re.status!=="logged").sort((re,pe)=>(re.order_index||0)-(pe.order_index||0)),Z=W.findIndex(re=>re.id===H);if(Z<=0)return;const ne=W[Z-1].id,fe=J.filter(re=>re.parent_id===ne&&re.status!=="deleted"&&re.status!=="logged").sort((re,pe)=>(re.order_index||0)-(pe.order_index||0)),ke=fe[fe.length-1],De=ke?ke.order_index+1e4:1e4;R.includes(ne)||qe(ne,!0),_e([{id:U.id,parent_id:ne,order_index:De}]),p({msg:"",type:"info"})}else if(F==="left"){if(!U.parent_id)return;const W=J.find(re=>re.id===U.parent_id);if(!W)return;const Z=W.parent_id,ne=J.filter(re=>re.parent_id===Z&&re.status!=="deleted"&&re.status!=="logged").sort((re,pe)=>(re.order_index||0)-(pe.order_index||0)),fe=ne.findIndex(re=>re.id===W.id),ke=ne[fe+1];let De;ke?De=(W.order_index+ke.order_index)/2:De=W.order_index+1e4,_e([{id:U.id,parent_id:Z,order_index:De}]),p({msg:"",type:"info"})}}},_e=async H=>{const F=H.map(U=>{const W=A.current.find(fe=>fe.id===U.id),Z={},ne={};return W&&Object.keys(U).forEach(fe=>{fe!=="id"&&(Z[fe]=W[fe],ne[fe]=U[fe])}),{id:U.id,before:Z,after:ne}});Ve({type:"BATCH_UPDATE",payload:F});const J=A.current.map(U=>{const W=H.find(Z=>Z.id===U.id);return W?{...U,...W}:U}).sort((U,W)=>(U.order_index||0)-(W.order_index||0)||U.created_at.localeCompare(W.created_at));if(A.current=J,i(J),he){const U=he;await Promise.all(H.map(W=>U.from("tasks").update(W).eq("id",W.id)))}},Oe=async(H,F=[],J)=>{if(!he)return"";h("syncing");const U=J||crypto.randomUUID(),W=r.length>0?Math.max(...r.map(ke=>ke.order_index||0)):0,Z=H.order_index!==void 0?H.order_index:W+1e4;ee(U);const ne={...H,id:U,user_id:e.id,created_at:new Date().toISOString(),tags:H.tags||[],images:H.images||[],order_index:Z};Ve({type:"ADD",payload:{data:ne}}),i(ke=>[...ke,ne].sort((De,re)=>(De.order_index||0)-(re.order_index||0)||De.created_at.localeCompare(re.created_at)));const{error:fe}=await he.from("tasks").insert([{...H,id:U,user_id:e.id,order_index:Z}]);return fe?(console.error("Task Insert Error:",fe),i(ke=>ke.filter(De=>De.id!==U)),B(fe),""):(F.length>0&&he&&(i(ke=>ke.map(De=>F.includes(De.id)?{...De,parent_id:U}:De)),await he.from("tasks").update({parent_id:U}).in("id",F)),h("synced"),U)},Xe=async(H,F,J=[])=>{if(!he)return;h("syncing"),ee(H);const U=r.find(Z=>Z.id===H);if(U){const Z={};Object.keys(F).forEach(ne=>Z[ne]=U[ne]),Ve({type:"UPDATE",payload:{id:H,before:Z,after:F}})}i(Z=>Z.map(ne=>ne.id===H?{...ne,...F}:ne));const{error:W}=await he.from("tasks").update(F).eq("id",H);if(W){U&&i(Z=>Z.map(ne=>ne.id===H?U:ne)),B(W);return}J.length>0&&await he.from("tasks").update({parent_id:H}).in("id",J),h("synced")},X=async H=>{h("syncing"),ee(H);const F=r.find(J=>J.id===H);if(F&&Ve({type:"DELETE",payload:{data:F}}),i(J=>J.filter(U=>U.id!==H)),he){const{error:J}=await he.from("tasks").delete().eq("id",H);if(J){B(J),F&&i(U=>[F,...U]);return}}h("synced"),p({msg:"",undo:()=>Me()}),setTimeout(()=>p(null),5e3)},de=async(H,F=null)=>{if(!he||!H.trim())return null;const J=crypto.randomUUID(),W=s.filter(ke=>ke.parent_id===F).reduce((ke,De)=>Math.max(ke,De.order_index||0),0)+1e4,Z={id:J,name:H,parent_id:F,user_id:e.id,color:"#4f46e5",order_index:W};Ve({type:"ADD_TAG",payload:{data:Z}}),o(ke=>[...ke,Z].sort((De,re)=>(De.order_index||0)-(re.order_index||0)));const{data:ne,error:fe}=await he.from("tags").insert([{name:H,parent_id:F,user_id:e.id,color:"#4f46e5",order_index:W}]).select();return fe?(o(ke=>ke.filter(De=>De.id!==J)),null):(o(ke=>{const De=ne[0];return ke.some(pe=>pe.id===De.id)?ke.filter(pe=>pe.id!==J):ke.map(pe=>pe.id===J?De:pe).sort((pe,We)=>(pe.order_index||0)-(We.order_index||0))}),ne[0].id)},xe=async(H,F)=>{if(!he)return;const J=s.find(U=>U.id===H);if(J){const U={};Object.keys(F).forEach(W=>U[W]=J[W]),Ve({type:"UPDATE_TAG",payload:{id:H,before:U,after:F}})}o(U=>U.map(W=>W.id===H?{...W,...F}:W).sort((W,Z)=>(W.order_index||0)-(Z.order_index||0))),await he.from("tags").update(F).eq("id",H)},Se=async H=>{if(!he)return;const F=s.find(J=>J.id===H);F&&Ve({type:"DELETE_TAG",payload:{data:F}}),o(J=>J.filter(U=>U.id!==H)),await he.from("tags").delete().eq("id",H)},qe=(H,F)=>{b(J=>{const U=J.includes(H);return F!==void 0?F?U?J:[...J,H]:J.filter(W=>W!==H):U?J.filter(W=>W!==H):[...J,H]})};return E.jsx(fr.Provider,{value:{user:e,tasks:r,tags:s,visibleTasks:Ze,loading:a,syncStatus:d,dragState:K,startDrag:Dt,updateDropState:Y,endDrag:le,updateGhostPosition:Ye,addTask:Oe,updateTask:Xe,deleteTask:X,addTag:de,updateTag:xe,deleteTag:Se,keyboardMove:ve,smartReschedule:ce,archiveCompletedTasks:ue,clearAllDates:ye,exportData:Ge,importData:Ue,undo:Me,redo:je,canUndo:_.length>0,canRedo:j.length>0,navigateToTask:Ce,navigateBack:Je,canNavigateBack:q.length>0,toast:f,setToast:p,selectedTaskIds:g,setSelectedTaskIds:y,handleSelection:rt,selectionAnchor:m,setSelectionAnchor:w,focusedTaskId:v,setFocusedTaskId:S,editingTaskId:T,setEditingTaskId:x,expandedTaskIds:R,toggleExpansion:qe,view:k,setView:O,tagFilter:M,setTagFilter:N,themeSettings:L,setThemeSettings:D,calculateVisibleTasks:He,pendingFocusTaskId:z,setPendingFocusTaskId:I,initError:u},children:t})};var Wj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qj=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>P.createElement("svg",{ref:u,...Wj,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${Kj(t)}`,...l},[...e.map(([c,d])=>P.createElement(c,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var Be=qj;const Gj=Be("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Jj=Be("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),Yj=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),hx=Be("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Qj=Be("CalendarX",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"10",x2:"14",y1:"14",y2:"18",key:"1g3qc0"}],["line",{x1:"14",x2:"10",y1:"14",y2:"18",key:"1az83m"}]]),af=Be("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),H0=Be("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),W0=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),HT=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),hu=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xj=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),WT=Be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Zj=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),e3=Be("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]),t3=Be("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),n3=Be("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]),r3=Be("CornerUpLeft",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]),KT=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),i3=Be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),s3=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),o3=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),a3=Be("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),l3=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),qT=Be("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),GT=Be("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),JT=Be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),u3=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),c3=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d3=Be("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),h3=Be("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),YT=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),f3=Be("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),p3=Be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),m3=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g3=Be("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),lf=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y3=Be("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),v3=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),xa=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fu(t,e){P.useEffect(()=>{const n=r=>{!t.current||t.current.contains(r.target)||e()};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}},[t,e])}const w3=["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#06b6d4","#3b82f6","#6366f1","#a855f7","#d946ef"],x3=({view:t,setView:e,tagFilter:n,setTagFilter:r})=>{const{tasks:i,tags:s,themeSettings:o,setThemeSettings:a,deleteTag:l,updateTag:u,clearAllDates:c,exportData:d,importData:h}=P.useContext(fr);console.log("Sidebar render - Tags count:",s.length);const[f,p]=P.useState(!1),[g,y]=P.useState([]),[m,w]=P.useState(null),[v,S]=P.useState(null),[T,x]=P.useState(null),[R,b]=P.useState(""),[k,O]=P.useState(null),M=P.useRef(null),N=P.useRef(null),L=P.useRef(null);fu(N,()=>p(!1)),fu(L,()=>O(null));const D={inbox:i.filter(B=>B.status==="inbox"&&!B.parent_id).length,todayOverdue:i.filter(B=>B.status!=="completed"&&B.status!=="deleted"&&B.status!=="logged"&&du(B.due_date||B.start_date)).length,todayScheduled:i.filter(B=>B.status!=="completed"&&B.status!=="deleted"&&B.status!=="logged"&&!du(B.due_date||B.start_date)&&(Xi(B.due_date)||Xi(B.start_date))).length},z={small:"text-xs",normal:"text-sm",large:"text-base"}[o.fontSize]||"text-sm",I=o.fontWeight==="thin"?"font-light":"",_=({id:B,label:ee,active:ce,overdueCount:ue,normalCount:ye})=>E.jsxs("button",{onClick:()=>{e(B),r(null)},className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg mb-0.5 transition-colors ${z} ${I} ${ce?"bg-gray-100 text-gray-900 font-bold":"text-gray-500 hover:bg-gray-50 hover:text-gray-900"}`,children:[" ",E.jsx("span",{children:ee})," ",E.jsxs("div",{className:"flex gap-1.5 items-center",children:[" ",ue>0&&E.jsx("span",{className:"text-[10px] font-bold text-red-500",children:ue})," ",ye>0&&E.jsx("span",{className:"text-[10px] text-gray-400",children:ye})," "]})," "]}),$=P.useMemo(()=>{const B=(ee,ce)=>s.filter(ue=>ue.parent_id===ee).sort((ue,ye)=>(ue.order_index||0)-(ye.order_index||0)).map(ue=>({id:ue.id,name:ue.name,depth:ce,parent_id:ue.parent_id,data:ue,isExpanded:g.includes(ue.id),children:B(ue.id,ce+1)}));return B(null,0)},[s,g]),j=(B,ee)=>{ee.stopPropagation(),y(ce=>ce.includes(B)?ce.filter(ue=>ue!==B):[...ce,B])},C=(B,ee)=>{B.dataTransfer.setData("tag_id",ee),w(ee)},q=(B,ee)=>{if(B.preventDefault(),m===ee)return;const ce=B.currentTarget.getBoundingClientRect(),ue=B.clientY-ce.top,ye=ce.height;let Ge="inside";ue<ye*.25?Ge="top":ue>ye*.75&&(Ge="bottom"),S({id:ee,position:Ge})},G=async(B,ee)=>{B.preventDefault();const ce=B.dataTransfer.getData("tag_id");if(!ce||ce===ee){S(null),w(null);return}const ue=s.find(Me=>Me.id===ce),ye=s.find(Me=>Me.id===ee);if(!ue||!ye)return;let Ge=ye;for(;Ge.parent_id;){if(Ge.parent_id===ce){S(null),w(null);return}const Me=s.find(je=>je.id===Ge.parent_id);if(!Me)break;Ge=Me}let Ue=ue.parent_id,Ve=ue.order_index||0;if((v==null?void 0:v.position)==="inside")Ue=ee,Ve=s.filter(Ce=>Ce.parent_id===ee).reduce((Ce,Je)=>Math.max(Ce,Je.order_index||0),0)+1e4,g.includes(ee)||y(Ce=>[...Ce,ee]);else{Ue=ye.parent_id;const Me=s.filter(Ce=>Ce.parent_id===ye.parent_id).sort((Ce,Je)=>(Ce.order_index||0)-(Je.order_index||0)),je=Me.findIndex(Ce=>Ce.id===ee);if((v==null?void 0:v.position)==="top"){const Ce=Me[je-1],Je=(Ce==null?void 0:Ce.order_index)||0,He=ye.order_index||0;Ve=Ce?(Je+He)/2:He-1e4}else{const Ce=Me[je+1],Je=(Ce==null?void 0:Ce.order_index)||0,He=ye.order_index||0;Ve=Ce?(He+Je)/2:He+1e4}}await u(ce,{parent_id:Ue,order_index:Ve}),S(null),w(null)},A=async B=>{n===B&&r(null),await l(B)},K=B=>{x(B.id),b(B.name),O(null)},V=async()=>{T&&R.trim()&&(await u(T,{name:R}),x(null))},te=B=>{B.target.files&&B.target.files[0]&&(h(B.target.files[0]),p(!1))},we=(B,ee)=>{if(T!==ee){if(B.key==="ArrowDown"||B.key==="ArrowUp"){B.preventDefault();const ce=Array.from(document.querySelectorAll("[data-tag-id]")),ue=ce.findIndex(Ge=>Ge.getAttribute("data-tag-id")===ee);if(ue===-1)return;const ye=B.key==="ArrowDown"?(ue+1)%ce.length:(ue-1+ce.length)%ce.length;ce[ye].focus()}(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),r(ee)),(B.key==="Delete"||B.key==="Backspace")&&(B.preventDefault(),B.stopPropagation(),A(ee))}},Q=B=>{const ee=(v==null?void 0:v.id)===B.id;let ce="border-transparent";ee&&((v==null?void 0:v.position)==="top"?ce="border-t-2 border-t-indigo-500":(v==null?void 0:v.position)==="bottom"?ce="border-b-2 border-b-indigo-500":ce="bg-indigo-50 ring-1 ring-indigo-500");const ue=T===B.id;return E.jsxs("div",{className:"relative",children:[E.jsxs("div",{draggable:!ue,onDragStart:ye=>C(ye,B.id),onDragOver:ye=>q(ye,B.id),onDrop:ye=>G(ye,B.id),onDragLeave:()=>S(null),className:`relative group flex items-center gap-1 py-1 rounded pr-2 transition-all ${z} ${I} ${n===B.id?"bg-gray-100 text-indigo-600 font-bold":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"} ${ce}`,style:{paddingLeft:`${B.depth*12+12}px`},onClick:()=>!ue&&r(B.id),tabIndex:0,onKeyDown:ye=>we(ye,B.id),children:[B.children.length>0?E.jsx("button",{onClick:ye=>j(B.id,ye),className:"p-0.5 hover:bg-gray-200 rounded text-gray-400",children:B.isExpanded?E.jsx(W0,{size:12}):E.jsx(hu,{size:12})}):E.jsx("div",{className:"w-[16px]"}),ue?E.jsxs("div",{className:"flex items-center flex-1 gap-1",children:[E.jsx("input",{autoFocus:!0,className:"flex-1 min-w-0 bg-white border border-indigo-300 rounded px-1 py-0.5 text-xs outline-none focus:ring-1 focus:ring-indigo-500",value:R,onChange:ye=>b(ye.target.value),onKeyDown:ye=>{ye.key==="Enter"?V():ye.key==="Escape"&&x(null)},onClick:ye=>ye.stopPropagation()}),E.jsx("button",{onClick:ye=>{ye.stopPropagation(),V()},className:"text-green-600 hover:bg-green-100 p-0.5 rounded",children:E.jsx(H0,{size:12})}),E.jsx("button",{onClick:ye=>{ye.stopPropagation(),x(null)},className:"text-red-500 hover:bg-red-100 p-0.5 rounded",children:E.jsx(xa,{size:12})})]}):E.jsxs(E.Fragment,{children:[E.jsx(s3,{size:12,style:{color:B.data.color}}),E.jsx("span",{className:"truncate flex-1 text-left",children:B.name}),E.jsx("div",{className:"opacity-0 group-hover:opacity-100 flex items-center gap-1 transition-opacity",children:E.jsx("button",{onClick:ye=>{ye.stopPropagation(),O(k===B.id?null:B.id)},className:"p-1 hover:bg-gray-200 rounded text-gray-400 hover:text-gray-600",children:E.jsx(d3,{size:12})})})]})]}),k===B.id&&E.jsxs("div",{ref:L,className:"absolute left-full top-0 ml-2 bg-white rounded-lg shadow-xl border border-gray-200 p-3 z-50 w-48 animate-in fade-in zoom-in duration-100",onClick:ye=>ye.stopPropagation(),children:[E.jsxs("div",{className:"mb-3",children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-400 mb-2 uppercase",children:"Color"}),E.jsx("div",{className:"grid grid-cols-5 gap-1",children:w3.map(ye=>E.jsx("button",{className:`w-6 h-6 rounded-full hover:scale-110 transition-transform ${B.data.color===ye?"ring-2 ring-offset-1 ring-indigo-500":""}`,style:{backgroundColor:ye},onClick:()=>u(B.id,{color:ye})},ye))})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsxs("button",{onClick:()=>K(B),className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded text-xs text-gray-600",children:[E.jsx(h3,{size:12})," Rename"]}),E.jsxs("button",{onClick:()=>A(B.id),className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-red-50 rounded text-xs text-red-600",children:[E.jsx(lf,{size:12})," Delete"]})]})]}),B.isExpanded&&B.children.map(ye=>Q(ye))]},B.id)};return E.jsxs("aside",{className:"w-full bg-[#fbfbfb] border-r border-gray-100 h-screen flex flex-col p-5 sticky top-0 overflow-hidden",children:[E.jsxs("div",{className:"mb-8 px-1 flex items-center gap-2 opacity-60",children:[E.jsx(GT,{size:18})," ",E.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:"Workspace"})]}),E.jsxs("nav",{className:"flex-1 space-y-6 overflow-y-auto no-scrollbar",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-300 mb-2 px-3",children:"COLLECT"}),E.jsx(_,{id:"inbox",label:"Inbox",normalCount:D.inbox,active:t==="inbox"&&!n})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-300 mb-2 px-3",children:"FOCUS"}),E.jsx(_,{id:"today",label:"Today",overdueCount:D.todayOverdue,normalCount:D.todayScheduled,active:t==="today"&&!n}),E.jsx(_,{id:"schedule",label:"Schedule",active:t==="schedule"&&!n}),E.jsx(_,{id:"calendar",label:"Calendar",active:t==="calendar"&&!n}),E.jsx(_,{id:"next",label:"Next Actions",active:t==="next"&&!n})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-300 mb-2 px-3",children:"ORGANIZE"}),E.jsx(_,{id:"projects",label:"Projects",active:t==="projects"&&!n}),E.jsx(_,{id:"all",label:"All Tasks",active:t==="all"&&!n}),E.jsx(_,{id:"waiting",label:"Waiting For",active:t==="waiting"&&!n}),E.jsx(_,{id:"journal",label:"Journal",active:t==="journal"&&!n})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] font-bold text-gray-300 mb-2 px-3",children:"TAGS"}),E.jsx("div",{className:"space-y-0.5",children:$.map(B=>Q(B))})]})]}),E.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200 relative",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[E.jsx(l3,{size:10})," ",Vj]}),E.jsx("button",{onClick:()=>p(!f),"aria-label":"Settings",className:"text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100 transition-colors",children:E.jsx(m3,{size:14})})]}),f&&E.jsxs("div",{ref:N,className:"absolute bottom-full left-0 mb-2 w-full bg-white rounded-lg shadow-xl border border-gray-200 p-3 z-50 animate-in fade-in zoom-in duration-100",children:[E.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-3 uppercase tracking-wider",children:"Appearance"}),E.jsxs("div",{className:"space-y-3 mb-4",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[" ",E.jsx("span",{className:"flex items-center gap-1",children:"Font Weight"})," "]}),E.jsxs("div",{className:"flex bg-gray-100 rounded p-0.5",children:[E.jsx("button",{onClick:()=>a(B=>({...B,fontWeight:"normal"})),className:`flex-1 text-[10px] py-1 rounded ${o.fontWeight==="normal"?"bg-white shadow-sm font-bold text-indigo-600":"text-gray-500"}`,children:"Normal"}),E.jsx("button",{onClick:()=>a(B=>({...B,fontWeight:"thin"})),className:`flex-1 text-[10px] py-1 rounded ${o.fontWeight==="thin"?"bg-white shadow-sm font-bold text-indigo-600":"text-gray-500"}`,children:"Thin"})]})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[" ",E.jsx("span",{className:"flex items-center gap-1",children:"Text Size"})," "]}),E.jsxs("div",{className:"flex bg-gray-100 rounded p-0.5",children:[E.jsx("button",{onClick:()=>a(B=>({...B,fontSize:"small"})),className:`flex-1 text-[10px] py-1 rounded ${o.fontSize==="small"?"bg-white shadow-sm font-bold text-indigo-600":"text-gray-500"}`,children:"Small"}),E.jsx("button",{onClick:()=>a(B=>({...B,fontSize:"normal"})),className:`flex-1 text-[10px] py-1 rounded ${o.fontSize==="normal"?"bg-white shadow-sm font-bold text-indigo-600":"text-gray-500"}`,children:"Normal"}),E.jsx("button",{onClick:()=>a(B=>({...B,fontSize:"large"})),className:`flex-1 text-[10px] py-1 rounded ${o.fontSize==="large"?"bg-white shadow-sm font-bold text-indigo-600":"text-gray-500"}`,children:"Large"})]})]})]}),E.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-3 uppercase tracking-wider border-t border-gray-100 pt-3",children:"Data"}),E.jsxs("div",{className:"space-y-1",children:[E.jsxs("button",{onClick:()=>{confirm(" Undo")&&c()},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded text-xs text-gray-600",children:[E.jsx(Qj,{size:12})," Clear Calendar"]}),E.jsxs("button",{onClick:d,className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded text-xs text-gray-600",children:[E.jsx(KT,{size:12})," Backup Data"]}),E.jsxs("button",{onClick:()=>{var B;return(B=M.current)==null?void 0:B.click()},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded text-xs text-gray-600",children:[E.jsx(v3,{size:12})," Import Data"]}),E.jsx("input",{type:"file",ref:M,className:"hidden",accept:".json",onChange:te})]})]})]})]})},QT=({checked:t,onChange:e,size:n=18,color:r="blue",isRoot:i=!1})=>{const s={blue:{root:"bg-blue-500 border-blue-500 text-white",sub:"bg-blue-100 border-blue-200 text-blue-500",hover:"hover:border-blue-400"},green:{root:"bg-emerald-500 border-emerald-500 text-white",sub:"bg-emerald-100 border-emerald-200 text-emerald-600",hover:"hover:border-emerald-400"},amber:{root:"bg-amber-500 border-amber-500 text-white",sub:"bg-amber-100 border-amber-200 text-amber-600",hover:"hover:border-amber-400"},purple:{root:"bg-purple-500 border-purple-500 text-white",sub:"bg-purple-100 border-purple-200 text-purple-600",hover:"hover:border-purple-400"}},o=s[r]||s.blue,a=i?o.root:o.sub,l=`bg-white border-slate-300 ${o.hover}`;return E.jsx("div",{onClick:e,className:`group relative cursor-pointer flex items-center justify-center transition-all duration-200 ease-out border shadow-sm ${t?a:l}`,style:{width:n,height:n,borderRadius:n*.25},children:E.jsx(H0,{size:n*.7,className:`transition-all duration-300 ease-back-out ${t?"scale-100 opacity-100":"scale-50 opacity-0"}`,strokeWidth:3})})},fx=({label:t,value:e,onChange:n,theme:r,tasks:i,innerRef:s,colorClass:o})=>{const{themeSettings:a}=P.useContext(fr),[l,u]=P.useState(""),[c,d]=P.useState(!1),[h,f]=P.useState(new Date),[p,g]=P.useState(null),[y,m]=P.useState(null),[w,v]=P.useState("09:00"),S=P.useRef(null),T=P.useRef(!1),x=P.useRef(!1),R=P.useRef(null),b=s||R;fu(S,()=>{d(!1),u(""),m(null)}),P.useEffect(()=>{if(e){const A=new Date(e);isNaN(A.getTime())||(f(A),v(`${String(A.getHours()).padStart(2,"0")}:${String(A.getMinutes()).padStart(2,"0")}`))}},[e]);const k=A=>{const K=A.target.value;u(K);const V=Fj(K);V?(f(V),m(V),g(V)):m(null)},O=()=>{var K;const A=y||p||h;if(A){const[V,te]=w.split(":").map(Number);A.setHours(V,te),n(A.toISOString()),d(!1),u(""),x.current=!0,(K=b.current)==null||K.focus(),setTimeout(()=>x.current=!1,200)}},M=A=>{var K;A.key==="Enter"?(A.preventDefault(),A.stopPropagation(),c?O():d(!0)):A.key==="Escape"?(A.preventDefault(),c&&(A.stopPropagation(),d(!1),u(""),x.current=!0,(K=b.current)==null||K.focus(),setTimeout(()=>x.current=!1,200))):A.key===" "&&(A.preventDefault(),A.stopPropagation(),d(!0))},N=A=>{S.current&&!S.current.contains(A.relatedTarget)&&d(!1)},L=A=>{T.current||x.current||d(!0)},D=A=>i.filter(K=>{if(K.status==="completed"||K.status==="deleted")return!1;const V=K.start_date?new Date(K.start_date):null,te=K.due_date?new Date(K.due_date):null;return V&&Bi(V,A)||te&&Bi(te,A)}),z=A=>{const K=new Date(h.getFullYear(),h.getMonth(),A);f(K),g(K),m(K)},I=()=>{const A=new Date(h.getFullYear(),h.getMonth()+1,0).getDate(),K=new Date(h.getFullYear(),h.getMonth(),1).getDay(),V=[];for(let te=0;te<K;te++)V.push(E.jsx("div",{className:"h-8 w-8"},`empty-${te}`));for(let te=1;te<=A;te++){const we=new Date(h.getFullYear(),h.getMonth(),te),Q=e&&Bi(new Date(e),we),B=y&&Bi(y,we),ce=D(we).length;let ue="bg-transparent";ce>=1&&ce<=3?ue="bg-green-400":ce>=4&&ce<=10?ue="bg-yellow-400":ce>10&&(ue="bg-red-500"),V.push(E.jsxs("button",{type:"button",onClick:()=>z(te),onMouseEnter:()=>g(we),className:`h-8 w-8 rounded-full flex items-center justify-center text-xs relative transition-all ${B?"bg-indigo-600/80 text-white font-bold shadow-md":Q?"bg-black text-white font-bold":"hover:bg-gray-100"} ${Xi(we.toISOString())&&!Q&&!B?"text-indigo-600 font-bold":""}`,children:[" ",te," ",!Q&&!B&&ce>0&&E.jsx("div",{className:`absolute bottom-1 w-1 h-1 rounded-full ${ue}`})," "]},te))}return V},_=y||p||(e?new Date(e):null),$=_?D(_):[],j=(r==null?void 0:r.buttonRing)||"focus:ring-indigo-300 focus:border-indigo-300",C=o||(r==null?void 0:r.text)||"text-gray-400",q={small:"text-[11px]",normal:"text-xs",large:"text-sm"}[a.fontSize]||"text-xs",G=a.fontWeight==="thin"?"font-light":"font-medium";return E.jsxs("div",{className:"relative",ref:S,onBlur:N,children:[E.jsxs("button",{ref:b,type:"button",onMouseDown:()=>{T.current=!0,setTimeout(()=>T.current=!1,200)},onClick:()=>d(!c),onKeyDown:M,onFocus:L,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${e?`${C} bg-white border-transparent shadow-sm ring-1 ring-gray-100`:"text-gray-400 border-transparent hover:bg-gray-100"} focus:outline-none focus:bg-white focus:ring-1 ${j} ${q} ${G}`,children:[E.jsx(af,{size:13})," ",E.jsx("span",{children:e?UT(e):t})," ",e&&E.jsx(xa,{size:12,className:"hover:text-red-500",onClick:A=>{A.stopPropagation(),n(null)}})]}),c&&E.jsxs("div",{className:"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-80 animate-in fade-in zoom-in duration-100",children:[" ",E.jsxs("div",{className:"mb-3 relative",children:[" ",E.jsx("input",{autoFocus:!0,type:"text",placeholder:": 5, , ...",className:"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8",value:l,onChange:k,onKeyDown:M})," ",y&&E.jsxs("div",{className:"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse",children:[": ",Uj(y.toISOString())]})," "]})," ",E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[" ",E.jsx("button",{type:"button",onClick:()=>f(new Date(h.getFullYear(),h.getMonth()-1,1)),className:"p-1 hover:bg-gray-100 rounded",children:E.jsx(HT,{size:16})})," ",E.jsx("span",{className:"font-bold text-sm text-gray-800",children:h.toLocaleString("default",{month:"long",year:"numeric"})})," ",E.jsx("button",{type:"button",onClick:()=>f(new Date(h.getFullYear(),h.getMonth()+1,1)),className:"p-1 hover:bg-gray-100 rounded",children:E.jsx(hu,{size:16})})," "]})," ",E.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400",children:[["","","","","","",""].map(A=>E.jsx("span",{children:A},A)),I()]})," ",E.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-3 mt-2",children:[" ",E.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[E.jsx(Zj,{size:12})," "]})," ",E.jsx("input",{type:"time",value:w,onChange:A=>v(A.target.value),className:"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none"})," "]})," ",E.jsxs("div",{className:"border-t border-gray-100 pt-3 mt-3",children:[" ",E.jsxs("div",{className:"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center",children:[" ",E.jsx("span",{children:_?`${_.getMonth()+1}/${_.getDate()} `:""})," ",E.jsx("span",{className:"bg-gray-100 px-1.5 rounded text-gray-500",children:$.length})," "]})," ",E.jsxs("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[" ",$.length>0?$.map(A=>E.jsx("div",{className:"text-[10px] bg-gray-50 p-1 rounded truncate border-l-2 border-indigo-400 pl-2 text-gray-600",children:A.title},A.id)):E.jsx("div",{className:"text-[10px] text-gray-300 italic text-center py-2",children:""})," "]})," "]})," ",E.jsx("button",{type:"button",onClick:O,className:"w-full mt-3 bg-indigo-600 text-white text-xs font-bold py-1.5 rounded hover:bg-indigo-700 transition-colors",children:""})," "]})]})},yp=({icon:t,label:e,items:n,selectedIds:r,onSelect:i,onSearch:s,placeholder:o,allowAdd:a,onDeleteItem:l,innerRef:u,multiSelect:c=!1,theme:d})=>{const{themeSettings:h}=P.useContext(fr),[f,p]=P.useState(!1),[g,y]=P.useState(""),[m,w]=P.useState(-1),v=P.useRef(null),S=P.useRef(!1),T=P.useRef(!1),x=P.useRef(null),R=P.useRef(null),b=u||R;fu(v,()=>p(!1));const k=P.useMemo(()=>!n||!Array.isArray(n)?[]:n.filter(q=>q?(q.title||q.name||"").toLowerCase().includes(g.toLowerCase()):!1),[n,g]),O=a&&g.trim()&&!k.some(q=>(q.title||q.name||"").toLowerCase()===g.trim().toLowerCase()),M=k.length+(O?1:0),N=P.useMemo(()=>r.length===0?null:n.find(q=>r.includes(q.id)),[n,r]),L=N&&(N.title||N.name)||e,D=(q,G)=>{var A;i(q,G),c?(y(""),w(-1),p(!0),setTimeout(()=>{var K;return(K=x.current)==null?void 0:K.focus()},0)):(y(""),p(!1),S.current=!0,(A=b.current)==null||A.focus(),setTimeout(()=>S.current=!1,200))},z=q=>{var G;q.key==="ArrowDown"?(q.preventDefault(),p(!0),w(A=>A===-1?0:(A+1)%M)):q.key==="ArrowUp"?(q.preventDefault(),p(!0),w(A=>A<=0?M-1:A-1)):q.key==="Enter"?(q.preventDefault(),q.stopPropagation(),f?m>=0&&m<k.length?D(k[m].id):O&&(m===k.length||m===-1)&&D(null,g):p(!0)):q.key==="Escape"&&(q.preventDefault(),f&&(q.stopPropagation(),p(!1),S.current=!0,(G=b.current)==null||G.focus(),setTimeout(()=>S.current=!1,200)))},I=q=>{v.current&&!v.current.contains(q.relatedTarget)&&p(!1)},_=q=>{T.current||S.current||p(!0)},$=(d==null?void 0:d.buttonRing)||"focus:ring-indigo-300 focus:border-indigo-300",j={small:"text-[11px]",normal:"text-xs",large:"text-sm"}[h.fontSize]||"text-xs",C=h.fontWeight==="thin"?"font-light":"font-medium";return E.jsxs("div",{className:"relative",ref:v,onBlur:I,children:[E.jsxs("button",{ref:b,type:"button",onMouseDown:()=>{T.current=!0,setTimeout(()=>T.current=!1,200)},onClick:()=>p(!f),onKeyDown:z,onFocus:_,className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${r.length>0?"text-indigo-600 bg-white shadow-sm ring-1 ring-indigo-50 border-transparent":"text-gray-400 border-transparent hover:bg-gray-100"} focus:outline-none focus:bg-white focus:ring-1 ${$} ${j} ${C}`,children:[E.jsx(t,{size:13})," ",E.jsx("span",{className:"truncate max-w-[80px]",children:L})]}),f&&E.jsxs("div",{className:"absolute top-full mt-2 left-0 bg-white rounded-lg shadow-xl border border-gray-100 z-50 w-60 p-2 animate-in fade-in zoom-in duration-100",children:[E.jsx("input",{ref:x,autoFocus:!0,type:"text",placeholder:o,className:"w-full text-xs bg-gray-50 border-none rounded p-2 mb-1 focus:ring-1 focus:ring-indigo-200 outline-none",value:g,onChange:q=>{y(q.target.value),w(-1),s&&s(q.target.value)},onKeyDown:z}),E.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-0.5",children:[k.map((q,G)=>E.jsxs("div",{onMouseDown:A=>{A.preventDefault(),D(q.id)},onMouseEnter:()=>w(G),className:`px-2 py-1.5 text-xs rounded cursor-pointer flex items-center justify-between group ${G===m?"bg-indigo-50 text-indigo-700":"text-gray-600 hover:bg-gray-50"}`,children:[E.jsx("span",{className:"truncate",children:q.title||q.name}),E.jsxs("div",{className:"flex items-center gap-2",children:[r.includes(q.id)&&E.jsx(H0,{size:12,className:"text-indigo-600"}),l&&E.jsx(lf,{size:12,className:"text-gray-300 opacity-0 group-hover:opacity-100 hover:text-red-500",onClick:A=>{A.stopPropagation(),l(q.id)}})]})]},q.id)),O&&E.jsxs("div",{onMouseEnter:()=>w(k.length),className:`px-2 py-1.5 text-xs cursor-pointer rounded flex items-center gap-1 ${m===k.length?"bg-indigo-50 text-indigo-700":"text-indigo-600 hover:bg-indigo-50"}`,onMouseDown:q=>{q.preventDefault(),D(null,g)},children:[E.jsx(YT,{size:12}),'  "',g,'"']})]})]})]})},b3=({tag:t,onRemove:e})=>{const{themeSettings:n}=P.useContext(fr),r={small:"text-[9px]",normal:"text-[10px]",large:"text-xs"}[n.fontSize],i=n.fontWeight==="thin"?"font-light":"font-normal";return E.jsxs("div",{className:`inline-flex items-center gap-1 bg-slate-50 text-slate-600 px-2 py-0.5 rounded-md border border-slate-200 ${r} ${i}`,children:[E.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:t.color}}),E.jsx("span",{children:t.name}),E.jsx("button",{type:"button",onClick:e,className:"hover:text-slate-900",children:E.jsx(xa,{size:10})})]})};function k3(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function XT(t,e){return new Promise(function(n,r){let i;return S3(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const S3=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const u=o+10;let c;switch(s.getUint16(u)){case 18761:c=!0;break;case 19789:c=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(u+2,c)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(u+4,c),h=u+d+2+12*s.getUint16(u+d,c);for(let f=u+d+2;f<h;f+=12)if(s.getUint16(f,c)==274){if(s.getUint16(f+2,c)!==3)return n("Orientation data type is invalid");if(s.getUint32(f+4,c)!==1)return n("Orientation data count is invalid");s.setUint16(f+8,1,c);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var jd={},E3={get exports(){return jd},set exports(t){jd=t}};(function(t){var e,n,r={};E3.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,u={},c=new Uint8Array(i),d=c.length-4;a(c,d)!=101010256;)d--;l=d,l+=4;var h=o(c,l+=4);o(c,l+=2);var f=a(c,l+=2),p=a(c,l+=4);l+=4,l=p;for(var g=0;g<h;g++){a(c,l),l+=4,l+=4,l+=4,a(c,l+=4),f=a(c,l+=4);var y=a(c,l+=4),m=o(c,l+=4),w=o(c,l+2),v=o(c,l+4);l+=6;var S=a(c,l+=8);l+=4,l+=m+w+v,r._readLocal(c,S,u,f,y,s)}return u},r._readLocal=function(i,s,o,a,l,u){var c=r.bin.readUshort,d=r.bin.readUint;d(i,s),c(i,s+=4),c(i,s+=2);var h=c(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var f=c(i,s+=8),p=c(i,s+=2);s+=2;var g=r.bin.readUTF8(i,s,f);if(s+=f,s+=p,u)o[g]={size:l,csize:a};else{var y=new Uint8Array(i.buffer,s);if(h==0)o[g]=new Uint8Array(y.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var m=new Uint8Array(l);r.inflateRaw(y,m),o[g]=m}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var c in i){var d=!r._noNeed(c)&&!s,h=i[c],f=r.crc.crc(h,0,h.length);u[c]={cpr:d,usize:h.length,crc:f,file:d?r.deflateRaw(h):h}}for(var c in u)o+=u[c].file.length+30+46+2*r.bin.sizeUTF8(c);o+=22;var p=new Uint8Array(o),g=0,y=[];for(var c in u){var m=u[c];y.push(g),g=r._writeHeader(p,g,c,m,0)}var w=0,v=g;for(var c in u)m=u[c],y.push(g),g=r._writeHeader(p,g,c,m,1,y[w++]);var S=g-v;return a(p,g,101010256),g+=4,l(p,g+=4,w),l(p,g+=2,w),a(p,g+=2,S),a(p,g+=4,v),g+=4,g+=2,p.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,u){var c=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return c(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),c(i,s+=2,0),c(i,s+=4,a.crc),c(i,s+=4,h.length),c(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,c(i,s+=6,u),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,u=s,c=s+o;u<c;){for(var d=Math.min(u+5552,c);u<d;)l+=a+=i[u++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",u=0;u<o;u++)l+="%"+r.bin.pad(i[s+u].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,u=0;u<a;u++){var c=o.charCodeAt(u);if(!(4294967168&c))i[s+l]=c,l++;else if(!(4294965248&c))i[s+l]=192|c>>6,i[s+l+1]=128|c>>0&63,l+=2;else if(!(4294901760&c))i[s+l]=224|c>>12,i[s+l+1]=128|c>>6&63,i[s+l+2]=128|c>>0&63,l+=3;else{if(4292870144&c)throw"e";i[s+l]=240|c>>18,i[s+l+1]=128|c>>12&63,i[s+l+2]=128|c>>6&63,i[s+l+3]=128|c>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,c=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,f=o<<3,p=0,g=i.length;if(a==0){for(;h<g;)d(s,f,h+(M=Math.min(65535,g-h))==g?1:0),f=r.F._copyExact(i,h,M,s,f+8),h+=M;return f>>>3}var y=u.lits,m=u.strt,w=u.prev,v=0,S=0,T=0,x=0,R=0,b=0;for(g>2&&(m[b=r.F._hash(i,0)]=0),h=0;h<g;h++){if(R=b,h+1<g-2){b=r.F._hash(i,h+1);var k=h+1&32767;w[k]=m[b],m[b]=k}if(p<=h){(v>14e3||S>26697)&&g-h>100&&(p<h&&(y[v]=h-p,v+=2,p=h),f=r.F._writeBlock(h==g-1||p==g?1:0,y,v,x,i,T,h-T,s,f),v=S=x=0,T=h);var O=0;h<g-2&&(O=r.F._bestMatch(i,h,w,R,Math.min(l[2],g-h),l[3]));var M=O>>>16,N=65535&O;if(O!=0){N=65535&O;var L=c(M=O>>>16,u.of0);u.lhst[257+L]++;var D=c(N,u.df0);u.dhst[D]++,x+=u.exb[L]+u.dxb[D],y[v]=M<<23|h-p,y[v+1]=N<<16|L<<8|D,v+=2,p=h+M}else u.lhst[i[h]]++;S++}}for(T==h&&i.length!=0||(p<h&&(y[v]=h-p,v+=2,p=h),f=r.F._writeBlock(1,y,v,x,i,T,h-T,s,f),v=0,S=0,v=S=x=0,T=h);7&f;)f++;return f>>>3},r.F._bestMatch=function(i,s,o,a,l,u){var c=32767&s,d=o[c],h=c-d+32768&32767;if(d==c||a!=r.F._hash(i,s-h))return 0;for(var f=0,p=0,g=Math.min(32767,s);h<=g&&--u!=0&&d!=c;){if(f==0||i[s+f]==i[s+f-h]){var y=r.F._howLong(i,s,h);if(y>f){if(p=h,(f=y)>=l)break;h+2<y&&(y=h+2);for(var m=0,w=0;w<y-2;w++){var v=s-h+w+32768&32767,S=v-o[v]+32768&32767;S>m&&(m=S,d=v)}}}h+=(c=d)-(d=o[c])+32768&32767}return f<<16|p},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,u,c,d,h){var f,p,g,y,m,w,v,S,T,x=r.F.U,R=r.F._putsF,b=r.F._putsE;x.lhst[256]++,p=(f=r.F.getTrees())[0],g=f[1],y=f[2],m=f[3],w=f[4],v=f[5],S=f[6],T=f[7];var k=32+(h+3&7?8-(h+3&7):0)+(c<<3),O=a+r.F.contSize(x.fltree,x.lhst)+r.F.contSize(x.fdtree,x.dhst),M=a+r.F.contSize(x.ltree,x.lhst)+r.F.contSize(x.dtree,x.dhst);M+=14+3*v+r.F.contSize(x.itree,x.ihst)+(2*x.ihst[16]+3*x.ihst[17]+7*x.ihst[18]);for(var N=0;N<286;N++)x.lhst[N]=0;for(N=0;N<30;N++)x.dhst[N]=0;for(N=0;N<19;N++)x.ihst[N]=0;var L=k<O&&k<M?0:O<M?1:2;if(R(d,h,i),R(d,h+1,L),h+=3,L==0){for(;7&h;)h++;h=r.F._copyExact(l,u,c,d,h)}else{var D,z;if(L==1&&(D=x.fltree,z=x.fdtree),L==2){r.F.makeCodes(x.ltree,p),r.F.revCodes(x.ltree,p),r.F.makeCodes(x.dtree,g),r.F.revCodes(x.dtree,g),r.F.makeCodes(x.itree,y),r.F.revCodes(x.itree,y),D=x.ltree,z=x.dtree,b(d,h,m-257),b(d,h+=5,w-1),b(d,h+=5,v-4),h+=4;for(var I=0;I<v;I++)b(d,h+3*I,x.itree[1+(x.ordr[I]<<1)]);h+=3*v,h=r.F._codeTiny(S,x.itree,d,h),h=r.F._codeTiny(T,x.itree,d,h)}for(var _=u,$=0;$<o;$+=2){for(var j=s[$],C=j>>>23,q=_+(8388607&j);_<q;)h=r.F._writeLit(l[_++],D,d,h);if(C!=0){var G=s[$+1],A=G>>16,K=G>>8&255,V=255&G;b(d,h=r.F._writeLit(257+K,D,d,h),C-x.of0[K]),h+=x.exb[K],R(d,h=r.F._writeLit(V,z,d,h),A-x.df0[V]),h+=x.dxb[V],_+=C}}h=r.F._writeLit(256,D,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var u=l>>>3;return a[u]=o,a[u+1]=o>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(i.buffer,s,o),u),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),u=[],c=r.F._lenCodes(i.dtree,u),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<u.length;d+=2)i.ihst[u[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),f=19;f>4&&i.itree[1+(i.ordr[f-1]<<1)]==0;)f--;return[s,o,h,l,c,f,a,u]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var u=i[l],c=i[l+1];a=r.F._writeLit(u,s,o,a);var d=u==16?2:u==17?3:7;u>15&&(r.F._putsE(o,a,c,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],u=a+3<o?i[a+3]:-1,c=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&u==l&&c==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(f=Math.min(h+1-a>>>1,138))<11?s.push(17,f-3):s.push(18,f-11),a+=2*f-2}else if(l==d&&u==l&&c==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var f=Math.min(h+1-a>>>1,6);s.push(16,f-3),a+=2*f-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,u=s.length,c=0;for(c=0;c<u;c+=2)s[c]=0,s[c+1]=0;for(c=0;c<l;c++)i[c]!=0&&a.push({lit:c,f:i[c]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var f=a[0].lit;return h=f==0?1:0,s[1+(f<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(S,T){return S.f-T.f});var p=a[0],g=a[1],y=0,m=1,w=2;for(a[0]={lit:-1,f:p.f+g.f,l:p,r:g,d:0};m!=d-1;)p=y!=m&&(w==d||a[y].f<a[w].f)?a[y++]:a[w++],g=y!=m&&(w==d||a[y].f<a[w].f)?a[y++]:a[w++],a[m++]={lit:-1,f:p.f+g.f,l:p,r:g};var v=r.F.setDepth(a[m-1],0);for(v>o&&(r.F.restrictDepth(h,o,v),v=o),c=0;c<d;c++)s[1+(h[c].lit<<1)]=h[c].d;return v},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,u=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var c=i[a].d;i[a].d=s,u+=l-(1<<o-c)}for(u>>>=o-s;u>0;)(c=i[a].d)<s?(i[a].d++,u-=1<<s-c-1):a++;for(;a>=0;a--)i[a].d==s&&u<0&&(i[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,u=a._bitsE,c=a._decodeTiny,d=a.makeCodes,h=a.codes2map,f=a._get17,p=a.U,g=s==null;g&&(s=new o(i.length>>>2<<3));for(var y,m,w=0,v=0,S=0,T=0,x=0,R=0,b=0,k=0,O=0;w==0;)if(w=l(i,O,1),v=l(i,O+1,2),O+=3,v!=0){if(g&&(s=r.F._check(s,k+(1<<17))),v==1&&(y=p.flmap,m=p.fdmap,R=511,b=31),v==2){S=u(i,O,5)+257,T=u(i,O+5,5)+1,x=u(i,O+10,4)+4,O+=14;for(var M=0;M<38;M+=2)p.itree[M]=0,p.itree[M+1]=0;var N=1;for(M=0;M<x;M++){var L=u(i,O+3*M,3);p.itree[1+(p.ordr[M]<<1)]=L,L>N&&(N=L)}O+=3*x,d(p.itree,N),h(p.itree,N,p.imap),y=p.lmap,m=p.dmap,O=c(p.imap,(1<<N)-1,S+T,i,O,p.ttree);var D=a._copyOut(p.ttree,0,S,p.ltree);R=(1<<D)-1;var z=a._copyOut(p.ttree,S,T,p.dtree);b=(1<<z)-1,d(p.ltree,D),h(p.ltree,D,y),d(p.dtree,z),h(p.dtree,z,m)}for(;;){var I=y[f(i,O)&R];O+=15&I;var _=I>>>4;if(!(_>>>8))s[k++]=_;else{if(_==256)break;var $=k+_-254;if(_>264){var j=p.ldef[_-257];$=k+(j>>>3)+u(i,O,7&j),O+=7&j}var C=m[f(i,O)&b];O+=15&C;var q=C>>>4,G=p.ddef[q],A=(G>>>4)+l(i,O,15&G);for(O+=15&G,g&&(s=r.F._check(s,k+(1<<17)));k<$;)s[k]=s[k++-A],s[k]=s[k++-A],s[k]=s[k++-A],s[k]=s[k++-A];k=$}}}else{7&O&&(O+=8-(7&O));var K=4+(O>>>3),V=i[K-4]|i[K-3]<<8;g&&(s=r.F._check(s,k+V)),s.set(new o(i.buffer,i.byteOffset+K,V),k),O=K+V<<3,k+=V}return s.length==k?s:s.slice(0,k)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,u){for(var c=r.F._bitsE,d=r.F._get17,h=0;h<o;){var f=i[d(a,l)&s];l+=15&f;var p=f>>>4;if(p<=15)u[h]=p,h++;else{var g=0,y=0;p==16?(y=3+c(a,l,2),l+=2,g=u[h-1]):p==17?(y=3+c(a,l,3),l+=3):p==18&&(y=11+c(a,l,7),l+=7);for(var m=h+y;h<m;)u[h]=g,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,u=0,c=a.length>>>1;u<o;){var d=i[u+s];a[u<<1]=0,a[1+(u<<1)]=d,d>l&&(l=d),u++}for(;u<c;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,u,c=r.F.U,d=i.length,h=c.bl_count,f=0;f<=s;f++)h[f]=0;for(f=1;f<d;f+=2)h[i[f]]++;var p=c.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,p[a]=o;for(l=0;l<d;l+=2)(u=i[l+1])!=0&&(i[l]=p[u],p[u]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,u=0;u<a;u+=2)if(i[u+1]!=0)for(var c=u>>1,d=i[u+1],h=c<<4|d,f=s-d,p=i[u]<<f,g=p+(1<<f);p!=g;)o[l[p]>>>15-s]=h,p++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var u=i[l]<<s-i[l+1];i[l]=o[u]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,u,c){for(;u--!=0;)l.push(0,c)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var C3=k3({__proto__:null,default:jd},[jd]);const yr=function(){var t={nextZero(c,d){for(;c[d]!=0;)d++;return d},readUshort:(c,d)=>c[d]<<8|c[d+1],writeUshort(c,d,h){c[d]=h>>8&255,c[d+1]=255&h},readUint:(c,d)=>16777216*c[d]+(c[d+1]<<16|c[d+2]<<8|c[d+3]),writeUint(c,d,h){c[d]=h>>24&255,c[d+1]=h>>16&255,c[d+2]=h>>8&255,c[d+3]=255&h},readASCII(c,d,h){let f="";for(let p=0;p<h;p++)f+=String.fromCharCode(c[d+p]);return f},writeASCII(c,d,h){for(let f=0;f<h.length;f++)c[d+f]=h.charCodeAt(f)},readBytes(c,d,h){const f=[];for(let p=0;p<h;p++)f.push(c[d+p]);return f},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,d,h){let f,p="";for(let g=0;g<h;g++)p+=`%${t.pad(c[d+g].toString(16))}`;try{f=decodeURIComponent(p)}catch{return t.readASCII(c,d,h)}return f}};function e(c,d,h,f){const p=d*h,g=s(f),y=Math.ceil(d*g/8),m=new Uint8Array(4*p),w=new Uint32Array(m.buffer),{ctype:v}=f,{depth:S}=f,T=t.readUshort;if(v==6){const j=p<<2;if(S==8)for(var x=0;x<j;x+=4)m[x]=c[x],m[x+1]=c[x+1],m[x+2]=c[x+2],m[x+3]=c[x+3];if(S==16)for(x=0;x<j;x++)m[x]=c[x<<1]}else if(v==2){const j=f.tabs.tRNS;if(j==null){if(S==8)for(x=0;x<p;x++){var R=3*x;w[x]=255<<24|c[R+2]<<16|c[R+1]<<8|c[R]}if(S==16)for(x=0;x<p;x++)R=6*x,w[x]=255<<24|c[R+4]<<16|c[R+2]<<8|c[R]}else{var b=j[0];const C=j[1],q=j[2];if(S==8)for(x=0;x<p;x++){var k=x<<2;R=3*x,w[x]=255<<24|c[R+2]<<16|c[R+1]<<8|c[R],c[R]==b&&c[R+1]==C&&c[R+2]==q&&(m[k+3]=0)}if(S==16)for(x=0;x<p;x++)k=x<<2,R=6*x,w[x]=255<<24|c[R+4]<<16|c[R+2]<<8|c[R],T(c,R)==b&&T(c,R+2)==C&&T(c,R+4)==q&&(m[k+3]=0)}}else if(v==3){const j=f.tabs.PLTE,C=f.tabs.tRNS,q=C?C.length:0;if(S==1)for(var O=0;O<h;O++){var M=O*y,N=O*d;for(x=0;x<d;x++){k=N+x<<2;var L=3*(D=c[M+(x>>3)]>>7-((7&x)<<0)&1);m[k]=j[L],m[k+1]=j[L+1],m[k+2]=j[L+2],m[k+3]=D<q?C[D]:255}}if(S==2)for(O=0;O<h;O++)for(M=O*y,N=O*d,x=0;x<d;x++)k=N+x<<2,L=3*(D=c[M+(x>>2)]>>6-((3&x)<<1)&3),m[k]=j[L],m[k+1]=j[L+1],m[k+2]=j[L+2],m[k+3]=D<q?C[D]:255;if(S==4)for(O=0;O<h;O++)for(M=O*y,N=O*d,x=0;x<d;x++)k=N+x<<2,L=3*(D=c[M+(x>>1)]>>4-((1&x)<<2)&15),m[k]=j[L],m[k+1]=j[L+1],m[k+2]=j[L+2],m[k+3]=D<q?C[D]:255;if(S==8)for(x=0;x<p;x++){var D;k=x<<2,L=3*(D=c[x]),m[k]=j[L],m[k+1]=j[L+1],m[k+2]=j[L+2],m[k+3]=D<q?C[D]:255}}else if(v==4){if(S==8)for(x=0;x<p;x++){k=x<<2;var z=c[I=x<<1];m[k]=z,m[k+1]=z,m[k+2]=z,m[k+3]=c[I+1]}if(S==16)for(x=0;x<p;x++){var I;k=x<<2,z=c[I=x<<2],m[k]=z,m[k+1]=z,m[k+2]=z,m[k+3]=c[I+2]}}else if(v==0)for(b=f.tabs.tRNS?f.tabs.tRNS:-1,O=0;O<h;O++){const j=O*y,C=O*d;if(S==1)for(var _=0;_<d;_++){var $=(z=255*(c[j+(_>>>3)]>>>7-(7&_)&1))==255*b?0:255;w[C+_]=$<<24|z<<16|z<<8|z}else if(S==2)for(_=0;_<d;_++)$=(z=85*(c[j+(_>>>2)]>>>6-((3&_)<<1)&3))==85*b?0:255,w[C+_]=$<<24|z<<16|z<<8|z;else if(S==4)for(_=0;_<d;_++)$=(z=17*(c[j+(_>>>1)]>>>4-((1&_)<<2)&15))==17*b?0:255,w[C+_]=$<<24|z<<16|z<<8|z;else if(S==8)for(_=0;_<d;_++)$=(z=c[j+_])==b?0:255,w[C+_]=$<<24|z<<16|z<<8|z;else if(S==16)for(_=0;_<d;_++)z=c[j+(_<<1)],$=T(c,j+(_<<1))==b?0:255,w[C+_]=$<<24|z<<16|z<<8|z}return m}function n(c,d,h,f){const p=s(c),g=Math.ceil(h*p/8),y=new Uint8Array((g+1+c.interlace)*f);return d=c.tabs.CgBI?i(d,y):r(d,y),c.interlace==0?d=o(d,c,0,h,f):c.interlace==1&&(d=function(w,v){const S=v.width,T=v.height,x=s(v),R=x>>3,b=Math.ceil(S*x/8),k=new Uint8Array(T*b);let O=0;const M=[0,0,4,0,2,0,1],N=[0,4,0,2,0,1,0],L=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const _=L[z],$=D[z];let j=0,C=0,q=M[z];for(;q<T;)q+=_,C++;let G=N[z];for(;G<S;)G+=$,j++;const A=Math.ceil(j*x/8);o(w,v,O,j,C);let K=0,V=M[z];for(;V<T;){let te=N[z],we=O+K*A<<3;for(;te<S;){var I;if(x==1&&(I=(I=w[we>>3])>>7-(7&we)&1,k[V*b+(te>>3)]|=I<<7-((7&te)<<0)),x==2&&(I=(I=w[we>>3])>>6-(7&we)&3,k[V*b+(te>>2)]|=I<<6-((3&te)<<1)),x==4&&(I=(I=w[we>>3])>>4-(7&we)&15,k[V*b+(te>>1)]|=I<<4-((1&te)<<2)),x>=8){const Q=V*b+te*R;for(let B=0;B<R;B++)k[Q+B]=w[(we>>3)+B]}we+=x,te+=$}K++,V+=_}j*C!=0&&(O+=C*(1+A)),z+=1}return k}(d,c)),d}function r(c,d){return i(new Uint8Array(c.buffer,2,c.length-6),d)}var i=function(){const c={H:{}};return c.H.N=function(d,h){const f=Uint8Array;let p,g,y=0,m=0,w=0,v=0,S=0,T=0,x=0,R=0,b=0;if(d[0]==3&&d[1]==0)return h||new f(0);const k=c.H,O=k.b,M=k.e,N=k.R,L=k.n,D=k.A,z=k.Z,I=k.m,_=h==null;for(_&&(h=new f(d.length>>>2<<5));y==0;)if(y=O(d,b,1),m=O(d,b+1,2),b+=3,m!=0){if(_&&(h=c.H.W(h,R+(1<<17))),m==1&&(p=I.J,g=I.h,T=511,x=31),m==2){w=M(d,b,5)+257,v=M(d,b+5,5)+1,S=M(d,b+10,4)+4,b+=14;let j=1;for(var $=0;$<38;$+=2)I.Q[$]=0,I.Q[$+1]=0;for($=0;$<S;$++){const G=M(d,b+3*$,3);I.Q[1+(I.X[$]<<1)]=G,G>j&&(j=G)}b+=3*S,L(I.Q,j),D(I.Q,j,I.u),p=I.w,g=I.d,b=N(I.u,(1<<j)-1,w+v,d,b,I.v);const C=k.V(I.v,0,w,I.C);T=(1<<C)-1;const q=k.V(I.v,w,v,I.D);x=(1<<q)-1,L(I.C,C),D(I.C,C,p),L(I.D,q),D(I.D,q,g)}for(;;){const j=p[z(d,b)&T];b+=15&j;const C=j>>>4;if(!(C>>>8))h[R++]=C;else{if(C==256)break;{let q=R+C-254;if(C>264){const te=I.q[C-257];q=R+(te>>>3)+M(d,b,7&te),b+=7&te}const G=g[z(d,b)&x];b+=15&G;const A=G>>>4,K=I.c[A],V=(K>>>4)+O(d,b,15&K);for(b+=15&K;R<q;)h[R]=h[R++-V],h[R]=h[R++-V],h[R]=h[R++-V],h[R]=h[R++-V];R=q}}}}else{7&b&&(b+=8-(7&b));const j=4+(b>>>3),C=d[j-4]|d[j-3]<<8;_&&(h=c.H.W(h,R+C)),h.set(new f(d.buffer,d.byteOffset+j,C),R),b=j+C<<3,R+=C}return h.length==R?h:h.slice(0,R)},c.H.W=function(d,h){const f=d.length;if(h<=f)return d;const p=new Uint8Array(f<<1);return p.set(d,0),p},c.H.R=function(d,h,f,p,g,y){const m=c.H.e,w=c.H.Z;let v=0;for(;v<f;){const S=d[w(p,g)&h];g+=15&S;const T=S>>>4;if(T<=15)y[v]=T,v++;else{let x=0,R=0;T==16?(R=3+m(p,g,2),g+=2,x=y[v-1]):T==17?(R=3+m(p,g,3),g+=3):T==18&&(R=11+m(p,g,7),g+=7);const b=v+R;for(;v<b;)y[v]=x,v++}}return g},c.H.V=function(d,h,f,p){let g=0,y=0;const m=p.length>>>1;for(;y<f;){const w=d[y+h];p[y<<1]=0,p[1+(y<<1)]=w,w>g&&(g=w),y++}for(;y<m;)p[y<<1]=0,p[1+(y<<1)]=0,y++;return g},c.H.n=function(d,h){const f=c.H.m,p=d.length;let g,y,m,w;const v=f.j;for(var S=0;S<=h;S++)v[S]=0;for(S=1;S<p;S+=2)v[d[S]]++;const T=f.K;for(g=0,v[0]=0,y=1;y<=h;y++)g=g+v[y-1]<<1,T[y]=g;for(m=0;m<p;m+=2)w=d[m+1],w!=0&&(d[m]=T[w],T[w]++)},c.H.A=function(d,h,f){const p=d.length,g=c.H.m.r;for(let y=0;y<p;y+=2)if(d[y+1]!=0){const m=y>>1,w=d[y+1],v=m<<4|w,S=h-w;let T=d[y]<<S;const x=T+(1<<S);for(;T!=x;)f[g[T]>>>15-h]=v,T++}},c.H.l=function(d,h){const f=c.H.m.r,p=15-h;for(let g=0;g<d.length;g+=2){const y=d[g]<<h-d[g+1];d[g]=f[y]>>>p}},c.H.M=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8},c.H.I=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8,d[p+2]|=f>>>16},c.H.e=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<f)-1},c.H.b=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<f)-1},c.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},c.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},c.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=c.H.m;for(var h=0;h<32768;h++){let p=h;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,d.r[h]=(p>>>16|p<<16)>>>17}function f(p,g,y){for(;g--!=0;)p.push(0,y)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];f(d._,144,8),f(d._,112,9),f(d._,24,7),f(d._,8,8),c.H.n(d._,9),c.H.A(d._,9,d.J),c.H.l(d._,9),f(d.$,32,5),c.H.n(d.$,5),c.H.A(d.$,5,d.h),c.H.l(d.$,5),f(d.Q,19,0),f(d.C,286,0),f(d.D,30,0),f(d.v,320,0)}(),c.H.N}();function s(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function o(c,d,h,f,p){let g=s(d);const y=Math.ceil(f*g/8);let m,w;g=Math.ceil(g/8);let v=c[h],S=0;if(v>1&&(c[h]=[0,0,1][v-2]),v==3)for(S=g;S<y;S++)c[S+1]=c[S+1]+(c[S+1-g]>>>1)&255;for(let T=0;T<p;T++)if(m=h+T*y,w=m+T+1,v=c[w-1],S=0,v==0)for(;S<y;S++)c[m+S]=c[w+S];else if(v==1){for(;S<g;S++)c[m+S]=c[w+S];for(;S<y;S++)c[m+S]=c[w+S]+c[m+S-g]}else if(v==2)for(;S<y;S++)c[m+S]=c[w+S]+c[m+S-y];else if(v==3){for(;S<g;S++)c[m+S]=c[w+S]+(c[m+S-y]>>>1);for(;S<y;S++)c[m+S]=c[w+S]+(c[m+S-y]+c[m+S-g]>>>1)}else{for(;S<g;S++)c[m+S]=c[w+S]+a(0,c[m+S-y],0);for(;S<y;S++)c[m+S]=c[w+S]+a(c[m+S-g],c[m+S-y],c[m+S-g-y])}return c}function a(c,d,h){const f=c+d-h,p=f-c,g=f-d,y=f-h;return p*p<=g*g&&p*p<=y*y?c:g*g<=y*y?d:h}function l(c,d,h){h.width=t.readUint(c,d),d+=4,h.height=t.readUint(c,d),d+=4,h.depth=c[d],d++,h.ctype=c[d],d++,h.compress=c[d],d++,h.filter=c[d],d++,h.interlace=c[d],d++}function u(c,d,h,f,p,g,y,m,w){const v=Math.min(d,p),S=Math.min(h,g);let T=0,x=0;for(let z=0;z<S;z++)for(let I=0;I<v;I++)if(y>=0&&m>=0?(T=z*d+I<<2,x=(m+z)*p+y+I<<2):(T=(-m+z)*d-y+I<<2,x=z*p+I<<2),w==0)f[x]=c[T],f[x+1]=c[T+1],f[x+2]=c[T+2],f[x+3]=c[T+3];else if(w==1){var R=c[T+3]*.00392156862745098,b=c[T]*R,k=c[T+1]*R,O=c[T+2]*R,M=f[x+3]*(1/255),N=f[x]*M,L=f[x+1]*M,D=f[x+2]*M;const _=1-R,$=R+M*_,j=$==0?0:1/$;f[x+3]=255*$,f[x+0]=(b+N*_)*j,f[x+1]=(k+L*_)*j,f[x+2]=(O+D*_)*j}else if(w==2)R=c[T+3],b=c[T],k=c[T+1],O=c[T+2],M=f[x+3],N=f[x],L=f[x+1],D=f[x+2],R==M&&b==N&&k==L&&O==D?(f[x]=0,f[x+1]=0,f[x+2]=0,f[x+3]=0):(f[x]=b,f[x+1]=k,f[x+2]=O,f[x+3]=R);else if(w==3){if(R=c[T+3],b=c[T],k=c[T+1],O=c[T+2],M=f[x+3],N=f[x],L=f[x+1],D=f[x+2],R==M&&b==N&&k==L&&O==D)continue;if(R<220&&M>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let f=8;const p=t,g=p.readUshort,y=p.readUint,m={tabs:{},frames:[]},w=new Uint8Array(h.length);let v,S=0,T=0;const x=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(h[R]!=x[R])throw"The input is not a PNG file!";for(;f<h.length;){const z=p.readUint(h,f);f+=4;const I=p.readASCII(h,f,4);if(f+=4,I=="IHDR")l(h,f,m);else if(I=="iCCP"){for(var b=f;h[b]!=0;)b++;p.readASCII(h,f,b-f),h[b+1];const _=h.slice(b+2,f+z);let $=null;try{$=r(_)}catch{$=i(_)}m.tabs[I]=$}else if(I=="CgBI")m.tabs[I]=h.slice(f,f+4);else if(I=="IDAT"){for(R=0;R<z;R++)w[S+R]=h[f+R];S+=z}else if(I=="acTL")m.tabs[I]={num_frames:y(h,f),num_plays:y(h,f+4)},v=new Uint8Array(h.length);else if(I=="fcTL"){T!=0&&((D=m.frames[m.frames.length-1]).data=n(m,v.slice(0,T),D.rect.width,D.rect.height),T=0);const _={x:y(h,f+12),y:y(h,f+16),width:y(h,f+4),height:y(h,f+8)};let $=g(h,f+22);$=g(h,f+20)/($==0?100:$);const j={rect:_,delay:Math.round(1e3*$),dispose:h[f+24],blend:h[f+25]};m.frames.push(j)}else if(I=="fdAT"){for(R=0;R<z-4;R++)v[T+R]=h[f+R+4];T+=z-4}else if(I=="pHYs")m.tabs[I]=[p.readUint(h,f),p.readUint(h,f+4),h[f+8]];else if(I=="cHRM")for(m.tabs[I]=[],R=0;R<8;R++)m.tabs[I].push(p.readUint(h,f+4*R));else if(I=="tEXt"||I=="zTXt"){m.tabs[I]==null&&(m.tabs[I]={});var k=p.nextZero(h,f),O=p.readASCII(h,f,k-f),M=f+z-k-1;if(I=="tEXt")L=p.readASCII(h,k+1,M);else{var N=r(h.slice(k+2,k+2+M));L=p.readUTF8(N,0,N.length)}m.tabs[I][O]=L}else if(I=="iTXt"){m.tabs[I]==null&&(m.tabs[I]={}),k=0,b=f,k=p.nextZero(h,b),O=p.readASCII(h,b,k-b);const _=h[b=k+1];var L;h[b+1],b+=2,k=p.nextZero(h,b),p.readASCII(h,b,k-b),b=k+1,k=p.nextZero(h,b),p.readUTF8(h,b,k-b),M=z-((b=k+1)-f),_==0?L=p.readUTF8(h,b,M):(N=r(h.slice(b,b+M)),L=p.readUTF8(N,0,N.length)),m.tabs[I][O]=L}else if(I=="PLTE")m.tabs[I]=p.readBytes(h,f,z);else if(I=="hIST"){const _=m.tabs.PLTE.length/3;for(m.tabs[I]=[],R=0;R<_;R++)m.tabs[I].push(g(h,f+2*R))}else if(I=="tRNS")m.ctype==3?m.tabs[I]=p.readBytes(h,f,z):m.ctype==0?m.tabs[I]=g(h,f):m.ctype==2&&(m.tabs[I]=[g(h,f),g(h,f+2),g(h,f+4)]);else if(I=="gAMA")m.tabs[I]=p.readUint(h,f)/1e5;else if(I=="sRGB")m.tabs[I]=h[f];else if(I=="bKGD")m.ctype==0||m.ctype==4?m.tabs[I]=[g(h,f)]:m.ctype==2||m.ctype==6?m.tabs[I]=[g(h,f),g(h,f+2),g(h,f+4)]:m.ctype==3&&(m.tabs[I]=h[f]);else if(I=="IEND")break;f+=z,p.readUint(h,f),f+=4}var D;return T!=0&&((D=m.frames[m.frames.length-1]).data=n(m,v.slice(0,T),D.rect.width,D.rect.height)),m.data=n(m,w,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(d){const h=d.width,f=d.height;if(d.tabs.acTL==null)return[e(d.data,h,f,d).buffer];const p=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const g=h*f*4,y=new Uint8Array(g),m=new Uint8Array(g),w=new Uint8Array(g);for(let S=0;S<d.frames.length;S++){const T=d.frames[S],x=T.rect.x,R=T.rect.y,b=T.rect.width,k=T.rect.height,O=e(T.data,b,k,d);if(S!=0)for(var v=0;v<g;v++)w[v]=y[v];if(T.blend==0?u(O,b,k,y,h,f,x,R,0):T.blend==1&&u(O,b,k,y,h,f,x,R,1),p.push(y.buffer.slice(0)),T.dispose!=0){if(T.dispose==1)u(m,b,k,y,h,f,x,R,0);else if(T.dispose==2)for(v=0;v<g;v++)y[v]=w[v]}}return p},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=yr,{_bin:e}=yr,n=yr._paeth;var r={table:function(){const b=new Uint32Array(256);for(let k=0;k<256;k++){let O=k;for(let M=0;M<8;M++)1&O?O=3988292384^O>>>1:O>>>=1;b[k]=O}return b}(),update(b,k,O,M){for(let N=0;N<M;N++)b=r.table[255&(b^k[O+N])]^b>>>8;return b},crc:(b,k,O)=>4294967295^r.update(4294967295,b,k,O)};function i(b,k,O,M){k[O]+=b[0]*M>>4,k[O+1]+=b[1]*M>>4,k[O+2]+=b[2]*M>>4,k[O+3]+=b[3]*M>>4}function s(b){return Math.max(0,Math.min(255,b))}function o(b,k){const O=b[0]-k[0],M=b[1]-k[1],N=b[2]-k[2],L=b[3]-k[3];return O*O+M*M+N*N+L*L}function a(b,k,O,M,N,L,D){D==null&&(D=1);const z=M.length,I=[];for(var _=0;_<z;_++){const V=M[_];I.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(_=0;_<z;_++){let V=4294967295;for(var $=0,j=0;j<z;j++){var C=o(I[_],I[j]);j!=_&&C<V&&(V=C,$=j)}}const q=new Uint32Array(N.buffer),G=new Int16Array(k*O*4),A=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(_=0;_<A.length;_++)A[_]=255*((A[_]+.5)/16-.5);for(let V=0;V<O;V++)for(let te=0;te<k;te++){var K;_=4*(V*k+te),D!=2?K=[s(b[_]+G[_]),s(b[_+1]+G[_+1]),s(b[_+2]+G[_+2]),s(b[_+3]+G[_+3])]:(C=A[4*(3&V)+(3&te)],K=[s(b[_]+C),s(b[_+1]+C),s(b[_+2]+C),s(b[_+3]+C)]),$=0;let we=16777215;for(j=0;j<z;j++){const ee=o(K,I[j]);ee<we&&(we=ee,$=j)}const Q=I[$],B=[K[0]-Q[0],K[1]-Q[1],K[2]-Q[2],K[3]-Q[3]];D==1&&(te!=k-1&&i(B,G,_+4,7),V!=O-1&&(te!=0&&i(B,G,_+4*k-4,3),i(B,G,_+4*k,5),te!=k-1&&i(B,G,_+4*k+4,1))),L[_>>2]=$,q[_>>2]=M[$]}}function l(b,k,O,M,N){N==null&&(N={});const{crc:L}=r,D=e.writeUint,z=e.writeUshort,I=e.writeASCII;let _=8;const $=b.frames.length>1;let j,C=!1,q=33+($?20:0);if(N.sRGB!=null&&(q+=13),N.pHYs!=null&&(q+=21),N.iCCP!=null&&(j=pako.deflate(N.iCCP),q+=21+j.length+4),b.ctype==3){for(var G=b.plte.length,A=0;A<G;A++)b.plte[A]>>>24!=255&&(C=!0);q+=8+3*G+4+(C?8+1*G+4:0)}for(var K=0;K<b.frames.length;K++)$&&(q+=38),q+=(Q=b.frames[K]).cimg.length+12,K!=0&&(q+=4);q+=12;const V=new Uint8Array(q),te=[137,80,78,71,13,10,26,10];for(A=0;A<8;A++)V[A]=te[A];if(D(V,_,13),_+=4,I(V,_,"IHDR"),_+=4,D(V,_,k),_+=4,D(V,_,O),_+=4,V[_]=b.depth,_++,V[_]=b.ctype,_++,V[_]=0,_++,V[_]=0,_++,V[_]=0,_++,D(V,_,L(V,_-17,17)),_+=4,N.sRGB!=null&&(D(V,_,1),_+=4,I(V,_,"sRGB"),_+=4,V[_]=N.sRGB,_++,D(V,_,L(V,_-5,5)),_+=4),N.iCCP!=null){const B=13+j.length;D(V,_,B),_+=4,I(V,_,"iCCP"),_+=4,I(V,_,"ICC profile"),_+=11,_+=2,V.set(j,_),_+=j.length,D(V,_,L(V,_-(B+4),B+4)),_+=4}if(N.pHYs!=null&&(D(V,_,9),_+=4,I(V,_,"pHYs"),_+=4,D(V,_,N.pHYs[0]),_+=4,D(V,_,N.pHYs[1]),_+=4,V[_]=N.pHYs[2],_++,D(V,_,L(V,_-13,13)),_+=4),$&&(D(V,_,8),_+=4,I(V,_,"acTL"),_+=4,D(V,_,b.frames.length),_+=4,D(V,_,N.loop!=null?N.loop:0),_+=4,D(V,_,L(V,_-12,12)),_+=4),b.ctype==3){for(D(V,_,3*(G=b.plte.length)),_+=4,I(V,_,"PLTE"),_+=4,A=0;A<G;A++){const B=3*A,ee=b.plte[A],ce=255&ee,ue=ee>>>8&255,ye=ee>>>16&255;V[_+B+0]=ce,V[_+B+1]=ue,V[_+B+2]=ye}if(_+=3*G,D(V,_,L(V,_-3*G-4,3*G+4)),_+=4,C){for(D(V,_,G),_+=4,I(V,_,"tRNS"),_+=4,A=0;A<G;A++)V[_+A]=b.plte[A]>>>24&255;_+=G,D(V,_,L(V,_-G-4,G+4)),_+=4}}let we=0;for(K=0;K<b.frames.length;K++){var Q=b.frames[K];$&&(D(V,_,26),_+=4,I(V,_,"fcTL"),_+=4,D(V,_,we++),_+=4,D(V,_,Q.rect.width),_+=4,D(V,_,Q.rect.height),_+=4,D(V,_,Q.rect.x),_+=4,D(V,_,Q.rect.y),_+=4,z(V,_,M[K]),_+=2,z(V,_,1e3),_+=2,V[_]=Q.dispose,_++,V[_]=Q.blend,_++,D(V,_,L(V,_-30,30)),_+=4);const B=Q.cimg;D(V,_,(G=B.length)+(K==0?0:4)),_+=4;const ee=_;I(V,_,K==0?"IDAT":"fdAT"),_+=4,K!=0&&(D(V,_,we++),_+=4),V.set(B,_),_+=G,D(V,_,L(V,ee,_-ee)),_+=4}return D(V,_,0),_+=4,I(V,_,"IEND"),_+=4,D(V,_,L(V,_-4,4)),_+=4,V.buffer}function u(b,k,O){for(let M=0;M<b.frames.length;M++){const N=b.frames[M];N.rect.width;const L=N.rect.height,D=new Uint8Array(L*N.bpl+L);N.cimg=f(N.img,L,N.bpp,N.bpl,D,k,O)}}function c(b,k,O,M,N){const L=N[0],D=N[1],z=N[2],I=N[3],_=N[4],$=N[5];let j=6,C=8,q=255;for(var G=0;G<b.length;G++){const Ve=new Uint8Array(b[G]);for(var A=Ve.length,K=0;K<A;K+=4)q&=Ve[K+3]}const V=q!=255,te=function(Me,je,Ce,Je,He,Ze){const rt=[];for(var Ye=0;Ye<Me.length;Ye++){const Oe=new Uint8Array(Me[Ye]),Xe=new Uint32Array(Oe.buffer);var Dt;let X=0,de=0,xe=je,Se=Ce,qe=Je?1:0;if(Ye!=0){const H=Ze||Je||Ye==1||rt[Ye-2].dispose!=0?1:2;let F=0,J=1e9;for(let U=0;U<H;U++){var Y=new Uint8Array(Me[Ye-1-U]);const W=new Uint32Array(Me[Ye-1-U]);let Z=je,ne=Ce,fe=-1,ke=-1;for(let re=0;re<Ce;re++)for(let pe=0;pe<je;pe++)Xe[ve=re*je+pe]!=W[ve]&&(pe<Z&&(Z=pe),pe>fe&&(fe=pe),re<ne&&(ne=re),re>ke&&(ke=re));fe==-1&&(Z=ne=fe=ke=0),He&&((1&Z)==1&&Z--,(1&ne)==1&&ne--);const De=(fe-Z+1)*(ke-ne+1);De<J&&(J=De,F=U,X=Z,de=ne,xe=fe-Z+1,Se=ke-ne+1)}Y=new Uint8Array(Me[Ye-1-F]),F==1&&(rt[Ye-1].dispose=2),Dt=new Uint8Array(xe*Se*4),t(Y,je,Ce,Dt,xe,Se,-X,-de,0),qe=t(Oe,je,Ce,Dt,xe,Se,-X,-de,3)?1:0,qe==1?h(Oe,je,Ce,Dt,{x:X,y:de,width:xe,height:Se}):t(Oe,je,Ce,Dt,xe,Se,-X,-de,0)}else Dt=Oe.slice(0);rt.push({rect:{x:X,y:de,width:xe,height:Se},img:Dt,blend:qe,dispose:0})}if(Je)for(Ye=0;Ye<rt.length;Ye++){if((_e=rt[Ye]).blend==1)continue;const Oe=_e.rect,Xe=rt[Ye-1].rect,X=Math.min(Oe.x,Xe.x),de=Math.min(Oe.y,Xe.y),xe={x:X,y:de,width:Math.max(Oe.x+Oe.width,Xe.x+Xe.width)-X,height:Math.max(Oe.y+Oe.height,Xe.y+Xe.height)-de};rt[Ye-1].dispose=1,Ye-1!=0&&d(Me,je,Ce,rt,Ye-1,xe,He),d(Me,je,Ce,rt,Ye,xe,He)}let le=0;if(Me.length!=1)for(var ve=0;ve<rt.length;ve++){var _e;le+=(_e=rt[ve]).rect.width*_e.rect.height}return rt}(b,k,O,L,D,z),we={},Q=[],B=[];if(M!=0){const Ve=[];for(K=0;K<te.length;K++)Ve.push(te[K].img.buffer);const Me=function(He){let Ze=0;for(var rt=0;rt<He.length;rt++)Ze+=He[rt].byteLength;const Ye=new Uint8Array(Ze);let Dt=0;for(rt=0;rt<He.length;rt++){const Y=new Uint8Array(He[rt]),le=Y.length;for(let ve=0;ve<le;ve+=4){let _e=Y[ve],Oe=Y[ve+1],Xe=Y[ve+2];const X=Y[ve+3];X==0&&(_e=Oe=Xe=0),Ye[Dt+ve]=_e,Ye[Dt+ve+1]=Oe,Ye[Dt+ve+2]=Xe,Ye[Dt+ve+3]=X}Dt+=le}return Ye.buffer}(Ve),je=g(Me,M);for(K=0;K<je.plte.length;K++)Q.push(je.plte[K].est.rgba);let Ce=0;for(K=0;K<te.length;K++){const Je=(ce=te[K]).img.length;var ee=new Uint8Array(je.inds.buffer,Ce>>2,Je>>2);B.push(ee);const He=new Uint8Array(je.abuf,Ce,Je);$&&a(ce.img,ce.rect.width,ce.rect.height,Q,He,ee),ce.img.set(He),Ce+=Je}}else for(G=0;G<te.length;G++){var ce=te[G];const Ve=new Uint32Array(ce.img.buffer);var ue=ce.rect.width;for(A=Ve.length,ee=new Uint8Array(A),B.push(ee),K=0;K<A;K++){const Me=Ve[K];if(K!=0&&Me==Ve[K-1])ee[K]=ee[K-1];else if(K>ue&&Me==Ve[K-ue])ee[K]=ee[K-ue];else{let je=we[Me];if(je==null&&(we[Me]=je=Q.length,Q.push(Me),Q.length>=300))break;ee[K]=je}}}const ye=Q.length;for(ye<=256&&_==0&&(C=ye<=2?1:ye<=4?2:ye<=16?4:8,C=Math.max(C,I)),G=0;G<te.length;G++){(ce=te[G]).rect.x,ce.rect.y,ue=ce.rect.width;const Ve=ce.rect.height;let Me=ce.img;new Uint32Array(Me.buffer);let je=4*ue,Ce=4;if(ye<=256&&_==0){je=Math.ceil(C*ue/8);var Ge=new Uint8Array(je*Ve);const Je=B[G];for(let He=0;He<Ve;He++){K=He*je;const Ze=He*ue;if(C==8)for(var Ue=0;Ue<ue;Ue++)Ge[K+Ue]=Je[Ze+Ue];else if(C==4)for(Ue=0;Ue<ue;Ue++)Ge[K+(Ue>>1)]|=Je[Ze+Ue]<<4-4*(1&Ue);else if(C==2)for(Ue=0;Ue<ue;Ue++)Ge[K+(Ue>>2)]|=Je[Ze+Ue]<<6-2*(3&Ue);else if(C==1)for(Ue=0;Ue<ue;Ue++)Ge[K+(Ue>>3)]|=Je[Ze+Ue]<<7-1*(7&Ue)}Me=Ge,j=3,Ce=1}else if(V==0&&te.length==1){Ge=new Uint8Array(ue*Ve*3);const Je=ue*Ve;for(K=0;K<Je;K++){const He=3*K,Ze=4*K;Ge[He]=Me[Ze],Ge[He+1]=Me[Ze+1],Ge[He+2]=Me[Ze+2]}Me=Ge,j=2,Ce=3,je=3*ue}ce.img=Me,ce.bpl=je,ce.bpp=Ce}return{ctype:j,depth:C,plte:Q,frames:te}}function d(b,k,O,M,N,L,D){const z=Uint8Array,I=Uint32Array,_=new z(b[N-1]),$=new I(b[N-1]),j=N+1<b.length?new z(b[N+1]):null,C=new z(b[N]),q=new I(C.buffer);let G=k,A=O,K=-1,V=-1;for(let we=0;we<L.height;we++)for(let Q=0;Q<L.width;Q++){const B=L.x+Q,ee=L.y+we,ce=ee*k+B,ue=q[ce];ue==0||M[N-1].dispose==0&&$[ce]==ue&&(j==null||j[4*ce+3]!=0)||(B<G&&(G=B),B>K&&(K=B),ee<A&&(A=ee),ee>V&&(V=ee))}K==-1&&(G=A=K=V=0),D&&((1&G)==1&&G--,(1&A)==1&&A--),L={x:G,y:A,width:K-G+1,height:V-A+1};const te=M[N];te.rect=L,te.blend=1,te.img=new Uint8Array(L.width*L.height*4),M[N-1].dispose==0?(t(_,k,O,te.img,L.width,L.height,-L.x,-L.y,0),h(C,k,O,te.img,L)):t(C,k,O,te.img,L.width,L.height,-L.x,-L.y,0)}function h(b,k,O,M,N){t(b,k,O,M,N.width,N.height,-N.x,-N.y,2)}function f(b,k,O,M,N,L,D){const z=[];let I,_=[0,1,2,3,4];L!=-1?_=[L]:(k*M>5e5||O==1)&&(_=[0]),D&&(I={level:0});const $=C3;for(var j=0;j<_.length;j++){for(let G=0;G<k;G++)p(N,b,G,M,O,_[j]);z.push($.deflate(N,I))}let C,q=1e9;for(j=0;j<z.length;j++)z[j].length<q&&(C=j,q=z[j].length);return z[C]}function p(b,k,O,M,N,L){const D=O*M;let z=D+O;if(b[z]=L,z++,L==0)if(M<500)for(var I=0;I<M;I++)b[z+I]=k[D+I];else b.set(new Uint8Array(k.buffer,D,M),z);else if(L==1){for(I=0;I<N;I++)b[z+I]=k[D+I];for(I=N;I<M;I++)b[z+I]=k[D+I]-k[D+I-N]+256&255}else if(O==0){for(I=0;I<N;I++)b[z+I]=k[D+I];if(L==2)for(I=N;I<M;I++)b[z+I]=k[D+I];if(L==3)for(I=N;I<M;I++)b[z+I]=k[D+I]-(k[D+I-N]>>1)+256&255;if(L==4)for(I=N;I<M;I++)b[z+I]=k[D+I]-n(k[D+I-N],0,0)+256&255}else{if(L==2)for(I=0;I<M;I++)b[z+I]=k[D+I]+256-k[D+I-M]&255;if(L==3){for(I=0;I<N;I++)b[z+I]=k[D+I]+256-(k[D+I-M]>>1)&255;for(I=N;I<M;I++)b[z+I]=k[D+I]+256-(k[D+I-M]+k[D+I-N]>>1)&255}if(L==4){for(I=0;I<N;I++)b[z+I]=k[D+I]+256-n(0,k[D+I-M],0)&255;for(I=N;I<M;I++)b[z+I]=k[D+I]+256-n(k[D+I-N],k[D+I-M],k[D+I-N-M])&255}}}function g(b,k){const O=new Uint8Array(b),M=O.slice(0),N=new Uint32Array(M.buffer),L=y(M,k),D=L[0],z=L[1],I=O.length,_=new Uint8Array(I>>2);let $;if(O.length<2e7)for(var j=0;j<I;j+=4)$=m(D,C=O[j]*(1/255),q=O[j+1]*(1/255),G=O[j+2]*(1/255),A=O[j+3]*(1/255)),_[j>>2]=$.ind,N[j>>2]=$.est.rgba;else for(j=0;j<I;j+=4){var C=O[j]*.00392156862745098,q=O[j+1]*(1/255),G=O[j+2]*(1/255),A=O[j+3]*(1/255);for($=D;$.left;)$=w($.est,C,q,G,A)<=0?$.left:$.right;_[j>>2]=$.ind,N[j>>2]=$.est.rgba}return{abuf:M.buffer,inds:_,plte:z}}function y(b,k,O){O==null&&(O=1e-4);const M=new Uint32Array(b.buffer),N={i0:0,i1:b.length,bst:null,est:null,tdst:0,left:null,right:null};N.bst=T(b,N.i0,N.i1),N.est=x(N.bst);const L=[N];for(;L.length<k;){let z=0,I=0;for(var D=0;D<L.length;D++)L[D].est.L>z&&(z=L[D].est.L,I=D);if(z<O)break;const _=L[I],$=v(b,M,_.i0,_.i1,_.est.e,_.est.eMq255);if(_.i0>=$||_.i1<=$){_.est.L=0;continue}const j={i0:_.i0,i1:$,bst:null,est:null,tdst:0,left:null,right:null};j.bst=T(b,j.i0,j.i1),j.est=x(j.bst);const C={i0:$,i1:_.i1,bst:null,est:null,tdst:0,left:null,right:null};for(C.bst={R:[],m:[],N:_.bst.N-j.bst.N},D=0;D<16;D++)C.bst.R[D]=_.bst.R[D]-j.bst.R[D];for(D=0;D<4;D++)C.bst.m[D]=_.bst.m[D]-j.bst.m[D];C.est=x(C.bst),_.left=j,_.right=C,L[I]=j,L.push(C)}for(L.sort((z,I)=>I.bst.N-z.bst.N),D=0;D<L.length;D++)L[D].ind=D;return[N,L]}function m(b,k,O,M,N){if(b.left==null)return b.tdst=function(j,C,q,G,A){const K=C-j[0],V=q-j[1],te=G-j[2],we=A-j[3];return K*K+V*V+te*te+we*we}(b.est.q,k,O,M,N),b;const L=w(b.est,k,O,M,N);let D=b.left,z=b.right;L>0&&(D=b.right,z=b.left);const I=m(D,k,O,M,N);if(I.tdst<=L*L)return I;const _=m(z,k,O,M,N);return _.tdst<I.tdst?_:I}function w(b,k,O,M,N){const{e:L}=b;return L[0]*k+L[1]*O+L[2]*M+L[3]*N-b.eMq}function v(b,k,O,M,N,L){for(M-=4;O<M;){for(;S(b,O,N)<=L;)O+=4;for(;S(b,M,N)>L;)M-=4;if(O>=M)break;const D=k[O>>2];k[O>>2]=k[M>>2],k[M>>2]=D,O+=4,M-=4}for(;S(b,O,N)>L;)O-=4;return O+4}function S(b,k,O){return b[k]*O[0]+b[k+1]*O[1]+b[k+2]*O[2]+b[k+3]*O[3]}function T(b,k,O){const M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[0,0,0,0],L=O-k>>2;for(let D=k;D<O;D+=4){const z=b[D]*.00392156862745098,I=b[D+1]*(1/255),_=b[D+2]*(1/255),$=b[D+3]*(1/255);N[0]+=z,N[1]+=I,N[2]+=_,N[3]+=$,M[0]+=z*z,M[1]+=z*I,M[2]+=z*_,M[3]+=z*$,M[5]+=I*I,M[6]+=I*_,M[7]+=I*$,M[10]+=_*_,M[11]+=_*$,M[15]+=$*$}return M[4]=M[1],M[8]=M[2],M[9]=M[6],M[12]=M[3],M[13]=M[7],M[14]=M[11],{R:M,m:N,N:L}}function x(b){const{R:k}=b,{m:O}=b,{N:M}=b,N=O[0],L=O[1],D=O[2],z=O[3],I=M==0?0:1/M,_=[k[0]-N*N*I,k[1]-N*L*I,k[2]-N*D*I,k[3]-N*z*I,k[4]-L*N*I,k[5]-L*L*I,k[6]-L*D*I,k[7]-L*z*I,k[8]-D*N*I,k[9]-D*L*I,k[10]-D*D*I,k[11]-D*z*I,k[12]-z*N*I,k[13]-z*L*I,k[14]-z*D*I,k[15]-z*z*I],$=_,j=R;let C=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,G=0;if(M!=0)for(let K=0;K<16&&(C=j.multVec($,C),G=Math.sqrt(j.dot(C,C)),C=j.sml(1/G,C),!(K!=0&&Math.abs(G-q)<1e-9));K++)q=G;const A=[N*I,L*I,D*I,z*I];return{Cov:_,q:A,e:C,L:q,eMq255:j.dot(j.sml(255,A),C),eMq:j.dot(C,A),rgba:(Math.round(255*A[3])<<24|Math.round(255*A[2])<<16|Math.round(255*A[1])<<8|Math.round(255*A[0])<<0)>>>0}}var R={multVec:(b,k)=>[b[0]*k[0]+b[1]*k[1]+b[2]*k[2]+b[3]*k[3],b[4]*k[0]+b[5]*k[1]+b[6]*k[2]+b[7]*k[3],b[8]*k[0]+b[9]*k[1]+b[10]*k[2]+b[11]*k[3],b[12]*k[0]+b[13]*k[1]+b[14]*k[2]+b[15]*k[3]],dot:(b,k)=>b[0]*k[0]+b[1]*k[1]+b[2]*k[2]+b[3]*k[3],sml:(b,k)=>[b*k[0],b*k[1],b*k[2],b*k[3]]};yr.encode=function(k,O,M,N,L,D,z){N==null&&(N=0),z==null&&(z=!1);const I=c(k,O,M,N,[!1,!1,!1,0,z,!1]);return u(I,-1),l(I,O,M,L,D)},yr.encodeLL=function(k,O,M,N,L,D,z,I){const _={ctype:0+(N==1?0:2)+(L==0?0:4),depth:D,frames:[]},$=(N+L)*D,j=$*O;for(let C=0;C<k.length;C++)_.frames.push({rect:{x:0,y:0,width:O,height:M},img:new Uint8Array(k[C]),blend:0,dispose:1,bpp:Math.ceil($/8),bpl:Math.ceil(j/8)});return u(_,0,!0),l(_,O,M,z,I)},yr.encode.compress=c,yr.encode.dither=a,yr.quantize=g,yr.quantize.getKDtree=y,yr.quantize.getNearest=m})();const ZT={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,u=122+l,c=new ArrayBuffer(u),d=new DataView(c),h=1<<20;let f,p,g,y,m=h,w=0,v=0,S=0;function T(b){d.setUint16(v,b,!0),v+=2}function x(b){d.setUint32(v,b,!0),v+=4}function R(b){v+=b}T(19778),x(u),R(4),x(122),x(108),x(n),x(-r>>>0),T(1),T(32),x(3),x(l),x(2835),x(2835),R(8),x(16711680),x(65280),x(255),x(4278190080),x(1466527264),function b(){for(;w<r&&m>0;){for(y=122+w*a,f=0;f<i;)m--,p=o[S++],g=p>>>24,d.setUint32(y+f,p<<8|g),f+=4;w++}S<o.length?(m=h,setTimeout(b,ZT._dly)):e(c)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var En={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},T3={[En.CHROME]:16384,[En.FIREFOX]:11180,[En.DESKTOP_SAFARI]:16384,[En.IE]:8192,[En.IOS]:4096,[En.ETC]:8192};const K0=typeof window<"u",e_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,$d=K0&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),_3=(K0||e_)&&($d&&$d.getOriginalSymbol(window,"File")||typeof File<"u"&&File),t_=(K0||e_)&&($d&&$d.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function q0(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const u=new Blob([l],{type:s});u.name=e,u.lastModified=n,r(u)})}function n_(t){return new Promise((e,n)=>{const r=new t_;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function r_(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function $s(){if($s.cachedResult!==void 0)return $s.cachedResult;let t=En.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=En.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=En.IOS:/Safari/i.test(e)?t=En.DESKTOP_SAFARI:/Firefox/i.test(e)?t=En.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=En.IE),$s.cachedResult=t,$s.cachedResult}function i_(t,e){const n=$s(),r=T3[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,u=(r+s)/2;l<u?(s=u,i=u*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function uf(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function s_(t,e){const{width:n,height:r}=i_(t.width,t.height),[i,s]=uf(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Jc(){return Jc.cachedResult!==void 0||(Jc.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Jc.cachedResult}function zd(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=s_(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var u=function(c){try{throw c}catch(d){return r(d)}};try{let c;return n_(t).then(function(d){try{return c=d,r_(c).then(function(h){try{return i=h,function(){try{return o()}catch(f){return r(f)}}()}catch(f){return u(f)}},u)}catch(h){return u(h)}},u)}catch(c){u(c)}}catch(c){return r(c)}};try{if(Jc()||[En.DESKTOP_SAFARI,En.MOBILE_SAFARI].includes($s()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function Bd(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,h,f;return d=t.getContext("2d"),{data:h}=d.getImageData(0,0,t.width,t.height),f=yr.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var u=d;if(e==="image/bmp")return new Promise(h=>ZT.toBlob(t,h)).then((function(h){try{return a=h,a.name=n,a.lastModified=r,d.call(this)}catch(f){return o(f)}}).bind(this),o);{let h=function(){return d.call(this)};var c=h;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(p){return o(p)}}).bind(this),o);{let f;return f=t.toDataURL(e,i),q0(f,n,r).then((function(p){try{return a=p,h.call(this)}catch(g){return o(g)}}).bind(this),o)}}}function l(){return s(a)}})}function Br(t){t.width=0,t.height=0}function qo(){return new Promise(function(t,e){let n,r,i,s;return qo.cachedResult!==void 0?t(qo.cachedResult):q0("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,zd(n).then(function(a){try{return r=a[1],Bd(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Br(r),zd(i).then(function(u){try{return s=u[0],qo.cachedResult=s.width===1&&s.height===2,t(qo.cachedResult)}catch(c){return e(c)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function o_(t){return new Promise((e,n)=>{const r=new t_;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,u);const c=s.getUint16(a,u);a+=2;for(let d=0;d<c;d++)if(s.getUint16(a+12*d,u)==274)return e(s.getUint16(a+12*d+8,u))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function a_(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=uf(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Br(t)),o}function l_(t,e){const{width:n}=t,{height:r}=t,[i,s]=uf(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Br(t),i}function px(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,u,c,d,h,f,p,g,y,m,w,v,S,T,x,R,b;function k(M=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=M,e.onProgress(Math.min(s,100))}function O(M){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(M,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,k(),zd(t,e).then((function(M){try{return[,l]=M,k(),u=a_(l,e),k(),new Promise(function(N,L){var D;if(!(D=e.exifOrientation))return o_(t).then((function(I){try{return D=I,z.call(this)}catch(_){return L(_)}}).bind(this),L);function z(){return N(D)}return z.call(this)}).then((function(N){try{return c=N,k(),qo().then((function(L){try{return d=L?u:l_(u,c),k(),h=e.initialQuality||1,f=e.fileType||t.type,Bd(d,f,t.name,t.lastModified,h).then((function(D){try{{let $=function(){if(o--&&(v>a||v>m)){let C,q;return C=b?.95*R.width:R.width,q=b?.95*R.height:R.height,[T,x]=uf(C,q),x.drawImage(R,0,0,C,q),h*=f==="image/png"?.85:.95,Bd(T,f,t.name,t.lastModified,h).then(function(G){try{return S=G,Br(R),R=T,v=S.size,O(Math.min(99,Math.floor((w-v)/(w-a)*100))),$}catch(A){return i(A)}},i)}return[1]},j=function(){return Br(R),Br(T),Br(u),Br(d),Br(l),O(100),r(S)};var I=$,_=j;if(p=D,k(),g=p.size>a,y=p.size>t.size,!g&&!y)return O(100),r(p);var z;return m=t.size,w=p.size,v=w,R=d,b=!e.alwaysKeepResolution&&g,(z=(function(C){for(;C;){if(C.then)return void C.then(z,i);try{if(C.pop){if(C.length)return C.pop()?j.call(this):C;C=$}else C=C.call(this)}catch(q){return i(q)}}}).bind(this))($)}}catch($){return i($)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch(L){return i(L)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)})}const A3=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let vp;function R3(t,e){return new Promise((n,r)=>{vp||(vp=function(o){const a=[];return typeof o=="function"?a.push(`(${o})()`):a.push(o),URL.createObjectURL(new Blob(a))}(A3));const i=new Worker(vp);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function on(t,e){return new Promise(function(n,r){let i,s,o,a,l,u;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=f=>{o=f,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof _3))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return px(t,i).then((function(f){try{return s=f,h.call(this)}catch(p){return r(p)}}).bind(this),r);var c=(function(){try{return h.call(this)}catch(f){return r(f)}}).bind(this),d=function(f){try{return px(t,i).then(function(p){try{return s=p,c()}catch(g){return r(g)}},r)}catch(p){return r(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",R3(t,i).then(function(f){try{return s=f,c()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=XT(t,s))}catch{}return n(s)}})}on.getDataUrlFromFile=n_,on.getFilefromDataUrl=q0,on.loadImage=r_,on.drawImageInCanvas=s_,on.drawFileInCanvas=zd,on.canvasToFile=Bd,on.getExifOrientation=o_,on.handleMaxWidthOrHeight=a_,on.followExifOrientation=l_,on.cleanupCanvasMemory=Br,on.isAutoOrientationInBrowser=qo,on.approximateBelowMaximumCanvasSizeOfBrowser=i_,on.copyExifWithoutOrientation=XT,on.getBrowserName=$s,on.version="2.0.2";var u_={exports:{}},c_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=P;function P3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var O3=typeof Object.is=="function"?Object.is:P3,I3=ba.useState,M3=ba.useEffect,N3=ba.useLayoutEffect,D3=ba.useDebugValue;function L3(t,e){var n=e(),r=I3({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return N3(function(){i.value=n,i.getSnapshot=e,wp(i)&&s({inst:i})},[t,n,e]),M3(function(){return wp(i)&&s({inst:i}),t(function(){wp(i)&&s({inst:i})})},[t]),D3(n),n}function wp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!O3(t,n)}catch{return!0}}function j3(t,e){return e()}var $3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?j3:L3;c_.useSyncExternalStore=ba.useSyncExternalStore!==void 0?ba.useSyncExternalStore:$3;u_.exports=c_;var G0=u_.exports;function Qt(t){this.content=t}Qt.prototype={constructor:Qt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Qt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Qt(n)},addToStart:function(t,e){return new Qt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Qt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Qt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Qt.from(t),t.size?new Qt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Qt.from(t),t.size?new Qt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Qt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Qt.from=function(t){if(t instanceof Qt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Qt(e)};function d_(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=d_(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function h_(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let u=h_(o.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class ie{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,n-c),r,i+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ie(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ie(r,i)}cutByIndex(e,n){return e==n?ie.empty:e==0&&n==this.content.length?this:new ie(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ie(i,s)}addToStart(e){return new ie([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ie(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return d_(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return h_(this,e,n,r)}findIndex(e){if(e==0)return gc(0,e);if(e==this.size)return gc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?gc(n+1,s):gc(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ie.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ie(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ie.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ie(n||e,r)}static from(e){if(!e)return ie.empty;if(e instanceof ie)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ie([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ie.empty=new ie([],0);const xp={index:0,offset:0};function gc(t,e){return xp.index=t,xp.offset=e,xp}function Fd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Fd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Fd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let nt=class Ag{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ag.none;if(e instanceof Ag)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};nt.none=[];class Ud extends Error{}class me{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=p_(this.content,e+this.openStart,n);return r&&new me(r,this.openStart,this.openEnd)}removeBetween(e,n){return new me(f_(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return me.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(ie.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new me(e,r,i)}}me.empty=new me(ie.empty,0,0);function f_(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(f_(s.content,e-i-1,n-i-1)))}function p_(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=p_(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function z3(t,e,n){if(n.openStart>t.depth)throw new Ud("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ud("Inconsistent open depths");return m_(t,e,n,0)}function m_(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=m_(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Gs(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=B3(n,t);return Gs(s,y_(t,o,a,e,r))}else return Gs(s,Vd(t,e,r))}function g_(t,e){if(!e.type.compatibleContent(t.type))throw new Ud("Cannot join "+e.type.name+" onto "+t.type.name)}function Rg(t,e,n){let r=t.node(n);return g_(r,e.node(n)),r}function qs(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function El(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(qs(t.nodeAfter,r),s++));for(let a=s;a<o;a++)qs(i.child(a),r);e&&e.depth==n&&e.textOffset&&qs(e.nodeBefore,r)}function Gs(t,e){return t.type.checkContent(e),t.copy(e)}function y_(t,e,n,r,i){let s=t.depth>i&&Rg(t,e,i+1),o=r.depth>i&&Rg(n,r,i+1),a=[];return El(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(g_(s,o),qs(Gs(s,y_(t,e,n,r,i+1)),a)):(s&&qs(Gs(s,Vd(t,e,i+1)),a),El(e,n,i,a),o&&qs(Gs(o,Vd(n,r,i+1)),a)),El(r,null,i,a),new ie(a)}function Vd(t,e,n){let r=[];if(El(null,t,n,r),t.depth>n){let i=Rg(t,e,n+1);qs(Gs(i,Vd(t,e,n+1)),r)}return El(e,null,n,r),new ie(r)}function B3(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(ie.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class pu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return nt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),u=s-l;if(r.push(o,a,i+l),!u||(o=o.child(a),o.isText))break;s=u-1,i+=l+1}return new pu(n,r,s)}static resolveCached(e,n){let r=mx.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else mx.set(e,r=new F3);let i=r.elts[r.i]=pu.resolve(e,n);return r.i=(r.i+1)%U3,i}}class F3{constructor(){this.elts=[],this.i=0}}const U3=12,mx=new WeakMap;class Hd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const V3=Object.create(null);class Rr{constructor(e,n,r,i=nt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||ie.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Fd(this.attrs,n||e.defaultAttrs||V3)&&nt.sameSet(this.marks,r||nt.none)}copy(e=null){return e==this.content?this:new Rr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Rr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return me.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),u=i.node(o).content.cut(i.pos-a,s.pos-a);return new me(u,i.depth-o,s.depth-o)}replace(e,n,r){return z3(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return pu.resolveCached(this,e)}resolveNoCache(e){return pu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),v_(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ie.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=nt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=ie.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}Rr.prototype.text=void 0;class Wd extends Rr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):v_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Wd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Wd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function v_(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class so{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new H3(e,n);if(r.next==null)return so.empty;let i=w_(r);r.next&&r.err("Unexpected trailing text");let s=Q3(Y3(i));return X3(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return ie.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(c));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}so.empty=new so(!0);class H3{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function w_(t){let e=[];do e.push(W3(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function W3(t){let e=[];do e.push(K3(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function K3(t){let e=J3(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=q3(t,e);else break;return e}function gx(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function q3(t,e){let n=gx(t),r=n;return t.eat(",")&&(t.next!="}"?r=gx(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function G3(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function J3(t){if(t.eat("(")){let e=w_(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=G3(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Y3(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(s(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=s(o.exprs[l],a);if(l==o.exprs.length-1)return u;i(u,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function x_(t,e){return e-t}function yx(t,e){let n=[];return r(e),n.sort(x_);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Q3(t){let e=Object.create(null);return n(yx(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<i.length;c++)i[c][0]==a&&(u=i[c][1]);yx(t,l).forEach(c=>{u||i.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let s=e[r.join(",")]=new so(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(x_);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function X3(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:u}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function b_(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function k_(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function S_(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function E_(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new e5(t,r,e[r]);return n}let vx=class C_{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=E_(e,r.attrs),this.defaultAttrs=b_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==so.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:k_(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Rr(this,this.computeAttrs(e),ie.from(n),nt.setFrom(r))}createChecked(e=null,n,r){return n=ie.from(n),this.checkContent(n),new Rr(this,this.computeAttrs(e),n,nt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ie.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ie.empty,!0);return s?new Rr(this,e,n.append(s),nt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){S_(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:nt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new C_(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Z3(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class e5{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Z3(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class cf{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=E_(e,i.attrs),this.excluded=null;let s=b_(this.attrs);this.instance=s?new nt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new nt(this,k_(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new cf(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){S_(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let T_=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Qt.from(e.nodes),n.marks=Qt.from(e.marks||{}),this.nodes=vx.compile(this.spec.nodes,this),this.marks=cf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=so.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?wx(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:wx(this,o.split(" "))}this.nodeFromJSON=i=>Rr.fromJSON(this,i),this.markFromJSON=i=>nt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof vx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Wd(r,r.defaultAttrs,e,nt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function wx(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function t5(t){return t.tag!=null}function n5(t){return t.style!=null}class Zi{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(t5(i))this.tags.push(i);else if(n5(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new bx(this,n,!1);return r.addAll(e,nt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new bx(this,n,!0);return r.addAll(e,nt.none,n.from,n.to),me.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(s5(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=kx(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=kx(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zi(e,Zi.schemaRules(e)))}}const __={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},r5={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},A_={ol:!0,ul:!0},mu=1,Pg=2,Cl=4;function xx(t,e,n){return e!=null?(e?mu:0)|(e==="full"?Pg:0):t&&t.whitespace=="pre"?mu|Pg:n&~Cl}class yc{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=nt.none,this.match=s||(o&Cl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ie.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&mu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ie.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ie.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!__.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class bx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=xx(null,n.preserveWhitespace,0)|(r?Cl:0);i?s=new yc(i.type,i.attrs,nt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new yc(null,null,nt.none,!0,null,o):s=new yc(e.schema.topNodeType,null,nt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&Pg?"full":this.localPreserveWS||(i.options&mu)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;A_.hasOwnProperty(o)&&this.parser.normalizeLists&&i5(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:r5.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(__.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(s),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+a)&&(i=u,s=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=nt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):Sx(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=xx(e,s,o.options);o.options&Cl&&o.content.length==0&&(a|=Cl);let l=nt.none;return r=r.filter(u=>(o.type?o.type.allowsMarkType(u.type):Sx(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new yc(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=mu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function i5(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&A_.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function s5(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function kx(t){let e={};for(let n in t)e[n]=t[n];return e}function Sx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class fo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=bp(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,n);c&&(s.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Yc(bp(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Yc(bp(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Yc(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Ex(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Ex(e.marks)}}function Ex(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bp(t){return t.document||window.document}const Cx=new WeakMap;function o5(t){let e=Cx.get(t);return e===void 0&&Cx.set(t,e=a5(t)),e}function a5(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Yc(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=o5(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),u[d]):d=="style"&&l.style?l.style.cssText=u[d]:l.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Yc(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const R_=65535,P_=Math.pow(2,16);function l5(t,e){return t+e*P_}function Tx(t){return t&R_}function u5(t){return(t-(t&R_))/P_}const O_=1,I_=2,Qc=4,M_=8;class Og{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&M_)>0}get deletedBefore(){return(this.delInfo&(O_|Qc))>0}get deletedAfter(){return(this.delInfo&(I_|Qc))>0}get deletedAcross(){return(this.delInfo&Qc)>0}}class zn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&zn.empty)return zn.empty}recover(e){let n=0,r=Tx(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+u5(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[a+s],c=this.ranges[a+o],d=l+u;if(e<=d){let h=u?e==l?-1:e==d?1:n:n,f=l+i+(h<0?0:c);if(r)return f;let p=e==(n<0?l:d)?null:l5(a/3,e-l),g=e==l?I_:e==d?O_:Qc;return(n<0?e!=l:e!=d)&&(g|=M_),new Og(f,g,p)}i+=c-u}return r?e+i:new Og(e+i,0,null)}touches(e,n){let r=0,i=Tx(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+s],c=l+u;if(e<=c&&a==i*3)return!0;r+=this.ranges[a+o]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),u=this.ranges[i+n],c=this.ranges[i+r];e(a,a+u,l,l+c),s+=c-u}}invert(){return new zn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zn.empty:new zn(e<0?[0,-e,0]:[0,0,e])}}zn.empty=new zn([]);class gu{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new gu(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new gu;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Og(e,i,null)}}const kp=Object.create(null);class hn{getMap(){return zn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=kp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in kp)throw new RangeError("Duplicate use of step JSON ID "+e);return kp[e]=n,n.prototype.jsonID=e,n}}class Mt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Mt(e,null)}static fail(e){return new Mt(null,e)}static fromReplace(e,n,r,i){try{return Mt.ok(e.replace(n,r,i))}catch(s){if(s instanceof Ud)return Mt.fail(s.message);throw s}}}function J0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(J0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return ie.fromArray(r)}class Fi extends hn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new me(J0(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Mt.fromReplace(e,this.from,this.to,s)}invert(){return new Tr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Fi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Fi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fi(n.from,n.to,e.markFromJSON(n.mark))}}hn.jsonID("addMark",Fi);class Tr extends hn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new me(J0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Mt.fromReplace(e,this.from,this.to,r)}invert(){return new Fi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Tr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Tr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tr(n.from,n.to,e.markFromJSON(n.mark))}}hn.jsonID("removeMark",Tr);class Ui extends hn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ui(this.pos,n.marks[i]);return new Ui(this.pos,this.mark)}}return new oo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ui(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ui(n.pos,e.markFromJSON(n.mark))}}hn.jsonID("addNodeMark",Ui);class oo extends hn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ui(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new oo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new oo(n.pos,e.markFromJSON(n.mark))}}hn.jsonID("removeNodeMark",oo);class Vt extends hn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Ig(e,this.from,this.to)?Mt.fail("Structure replace would overwrite content"):Mt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Vt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Vt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Vt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Vt(n.from,n.to,me.fromJSON(e,n.slice),!!n.structure)}}hn.jsonID("replace",Vt);class Kt extends hn{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Ig(e,this.from,this.gapFrom)||Ig(e,this.gapTo,this.to)))return Mt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Mt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Mt.fromReplace(e,this.from,this.to,r):Mt.fail("Content does not fit in gap")}getMap(){return new zn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Kt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Kt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Kt(n.from,n.to,n.gapFrom,n.gapTo,me.fromJSON(e,n.slice),n.insert,!!n.structure)}}hn.jsonID("replaceAround",Kt);function Ig(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function c5(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,u,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let h=Math.max(u,e),f=Math.min(u+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(o&&o.to==h&&o.mark.eq(d[g])?o.to=f:i.push(o=new Tr(h,f,d[g])));a&&a.to==h?a.to=f:s.push(a=new Fi(h,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function d5(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof cf){let u=o.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=u,h.step=s):i.push({style:d,from:Math.max(a,e),to:u,step:s})}}}),i.forEach(o=>t.step(new Tr(o.from,o.to,o.style)))}function Y0(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),c=a+u.nodeSize,d=r.matchType(u.type);if(!d)o.push(new Vt(a,c,me.empty));else{r=d;for(let h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||t.step(new Tr(a,c,u.marks[h]));if(i&&u.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(u.text);)p||(p=new me(ie.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),o.push(new Vt(a+h.index,a+h.index+h[0].length,p))}}a=c}if(!r.validEnd){let l=r.fillBefore(ie.empty,!0);t.replace(a,a,new me(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function h5(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function La(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!h5(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function f5(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,u=a,c=ie.empty,d=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,c=ie.from(r.node(p).copy(c)),d++):l--;let h=ie.empty,f=0;for(let p=s,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,h=ie.from(i.node(p).copy(h)),f++):u++;t.step(new Kt(l,u,o,a,new me(c.append(h),d,f),c.size-d,!0))}function Q0(t,e,n=null,r=t){let i=p5(t,e),s=i&&m5(r,e);return s?i.map(_x).concat({type:e,attrs:n}).concat(s.map(_x)):null}function _x(t){return{type:t,attrs:null}}function p5(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function m5(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:o}function g5(t,e,n){let r=ie.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ie.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Kt(i,s,i,s,new me(r,0,0),n.length,!0))}function y5(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&v5(t.doc,t.mapping.slice(s).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?u=!1:!f&&p&&(u=!0)}u===!1&&D_(t,o,a,s),Y0(t,t.mapping.slice(s).map(a,1),r,void 0,u===null);let c=t.mapping.slice(s),d=c.map(a,1),h=c.map(a+o.nodeSize,1);return t.step(new Kt(d,h,d+1,h-1,new me(ie.from(r.create(l,null,o.marks)),0,0),1,!0)),u===!0&&N_(t,o,a,s),!1}})}function N_(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function D_(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function v5(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function w5(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Kt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new me(ie.from(o),0,0),1,!0))}function aa(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>s;u--,c--){let d=i.node(u),h=i.index(u);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[c+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[c]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function x5(t,e,n=1,r){let i=t.doc.resolve(e),s=ie.empty,o=ie.empty;for(let a=i.depth,l=i.depth-n,u=n-1;a>l;a--,u--){s=ie.from(i.node(a).copy(s));let c=r&&r[u];o=ie.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}t.step(new Vt(e,e,new me(s.append(o),n,n),!0))}function ms(t,e){let n=t.resolve(e),r=n.index();return L_(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function b5(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function L_(t,e){return!!(t&&e&&!t.isLeaf&&b5(t,e))}function df(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&L_(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function k5(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);D_(t,c.node(),c.before(),a)}o.inlineContent&&Y0(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),u=l.map(e-n);if(t.step(new Vt(u,l.map(e+n,-1),me.empty,!0)),r===!0){let c=t.doc.resolve(u);N_(t,c.node(),c.before(),t.steps.length)}return t}function S5(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function j_(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),u=r.node(o),c=!1;if(s==1)c=u.canReplace(l,l,i);else{let d=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function hf(t,e,n=e,r=me.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return $_(i,s,r)?new Vt(e,n,r):new E5(i,s,r).fit()}function $_(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class E5{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ie.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ie.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new me(s,o,a);return e>-1?new Kt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Vt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Sp(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,d=null;if(n==1&&(o?u.matchType(o.type)||(d=u.fillBefore(ie.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Sp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new me(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Sp(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new me(ll(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new me(ll(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,u=0,c=[],{match:d,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));d=d.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let g=a.child(u),y=d.matchType(g.type);if(!y)break;u++,(u>1||l==0||g.content.size)&&(d=y,c.push(z_(g.mark(h.allowedMarks(g.marks)),u==1?l:0,u==a.childCount?f:-1)))}let p=u==a.childCount;p||(f=-1),this.placed=ul(this.placed,n,ie.from(c)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<f;g++){let m=y.lastChild;this.frontier.push({type:m.type,match:m.contentMatchAt(m.childCount)}),y=m.content}this.unplaced=p?e==0?me.empty:new me(ll(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new me(ll(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Ep(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Ep(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Ep(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ul(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ul(this.placed,this.depth,ie.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ie.empty,!0);n.childCount&&(this.placed=ul(this.placed,this.frontier.length,n))}}function ll(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ll(t.firstChild.content,e-1,n)))}function ul(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ul(t.lastChild.content,e-1,n)))}function Sp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function z_(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,z_(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ie.empty,!0)))),t.copy(r)}function Ep(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!C5(n,s.content,o)?a:null}function C5(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function T5(t){return t.spec.defining||t.spec.definingForContent}function _5(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if($_(i,s,r))return t.step(new Vt(e,n,r));let o=F_(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),u=[],c=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(u.push(p),f==r.openStart)break;h=p.content}for(let h=c-1;h>=0;h--){let f=u[h],p=T5(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))c=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+c+1)%(r.openStart+1),p=u[f];if(p)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],m=!0;y<0&&(m=!1,y=-y);let w=i.node(y-1),v=i.index(y-1);if(w.canReplaceWith(v,v,p.type,p.marks))return t.replace(i.before(y),m?s.after(y):n,new me(B_(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=o[h];f<0||(e=i.before(f),n=s.after(f))}}function B_(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(B_(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(ie.empty,!0))}return t}function A5(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=S5(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new me(ie.from(r),0,0))}function R5(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=F_(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function F_(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class la extends hn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Mt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(i),0,n.isLeaf?0:1))}getMap(){return zn.empty}invert(e){return new la(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new la(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new la(n.pos,n.attr,n.value)}}hn.jsonID("attr",la);class yu extends hn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Mt.ok(r)}getMap(){return zn.empty}invert(e){return new yu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new yu(n.attr,n.value)}}hn.jsonID("docAttr",yu);let ka=class extends Error{};ka=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ka.prototype=Object.create(Error.prototype);ka.prototype.constructor=ka;ka.prototype.name="TransformError";class U_{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ka(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=me.empty){let i=hf(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new me(ie.from(r),0,0))}delete(e,n){return this.replace(e,n,me.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return _5(this,e,n,r),this}replaceRangeWith(e,n,r){return A5(this,e,n,r),this}deleteRange(e,n){return R5(this,e,n),this}lift(e,n){return f5(this,e,n),this}join(e,n=1){return k5(this,e,n),this}wrap(e,n){return g5(this,e,n),this}setBlockType(e,n=e,r,i=null){return y5(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return w5(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new la(e,n,r)),this}setDocAttribute(e,n){return this.step(new yu(e,n)),this}addNodeMark(e,n){return this.step(new Ui(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof nt)n.isInSet(r.marks)&&this.step(new oo(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new oo(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return x5(this,e,n,r),this}addMark(e,n,r){return c5(this,e,n,r),this}removeMark(e,n,r){return d5(this,e,n,r),this}clearIncompatible(e,n,r){return Y0(this,e,n,r),this}}const Cp=Object.create(null);class ze{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new P5(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=me.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(s);e.replaceRange(c.map(l.pos),c.map(u.pos),a?me.empty:n),a==0&&Px(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),u=l.map(o.pos),c=l.map(a.pos);s?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Px(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ne(e):Po(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Po(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Po(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new or(e.node(0))}static atStart(e){return Po(e,e,0,0,1)||new or(e)}static atEnd(e){return Po(e,e,e.content.size,e.childCount,-1)||new or(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Cp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Cp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Cp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ne.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class P5{constructor(e,n){this.$from=e,this.$to=n}}let Ax=!1;function Rx(t){!Ax&&!t.parent.inlineContent&&(Ax=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ne extends ze{constructor(e,n=e){Rx(e),Rx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let i=e.resolve(n.map(this.anchor));return new Ne(i.parent.inlineContent?i:r,r)}replace(e,n=me.empty){if(super.replace(e,n),n==me.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ff(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ne(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ze.findFrom(n,r,!0)||ze.findFrom(n,-r,!0);if(s)n=s.$head;else return ze.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ne(e,n)}}ze.jsonID("text",Ne);class ff{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ff(e.map(this.anchor),e.map(this.head))}resolve(e){return Ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class Te extends ze{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?ze.near(s):new Te(s)}content(){return new me(ie.from(this.node),0,0)}eq(e){return e instanceof Te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new X0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Te(e.resolve(n.anchor))}static create(e,n){return new Te(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Te.prototype.visible=!1;ze.jsonID("node",Te);class X0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new ff(r,r):new X0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Te.isSelectable(r)?new Te(n):ze.near(n)}}class or extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=me.empty){if(n==me.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new or(e)}map(e){return new or(e)}eq(e){return e instanceof or}getBookmark(){return O5}}ze.jsonID("all",or);const O5={map(){return this},resolve(t){return new or(t)}};function Po(t,e,n,r,i,s=!1){if(e.inlineContent)return Ne.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Te.isSelectable(a))return Te.create(t,n-(i<0?a.nodeSize:0))}else{let l=Po(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function Px(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Vt||i instanceof Kt))return;let s=t.mapping.maps[r],o;s.forEach((a,l,u,c)=>{o==null&&(o=c)}),t.setSelection(ze.near(t.doc.resolve(o),n))}const Ox=1,vc=2,Ix=4;class I5 extends U_{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ox)&~vc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ox)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vc,this}ensureMarks(e){return nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~vc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||nt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ix,this}get scrolledIntoView(){return(this.updated&Ix)>0}}function Mx(t,e){return!e||!t?t:t.bind(e)}class cl{constructor(e,n,r){this.name=e,this.init=Mx(n.init,r),this.apply=Mx(n.apply,r)}}const M5=[new cl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new cl("selection",{init(t,e){return t.selection||ze.atStart(e.doc)},apply(t){return t.selection}}),new cl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new cl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Tp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=M5.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cl(r.key,r.spec.state,r))})}}class Go{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,u=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Go(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new I5(this)}static create(e){let n=new Tp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Go(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Tp(this.schema,e.plugins),r=n.fields,i=new Go(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Tp(e.schema,e.plugins),s=new Go(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Rr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=ze.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=u.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function V_(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=V_(i,e,{})),n[r]=i}return n}class xt{constructor(e){this.spec=e,this.props={},e.props&&V_(e.props,this,this.props),this.key=e.key?e.key.key:H_("plugin")}getState(e){return e[this.key]}}const _p=Object.create(null);function H_(t){return t in _p?t+"$"+ ++_p[t]:(_p[t]=0,t+"$")}class Bt{constructor(e="key"){this.key=H_(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const N5=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function W_(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const D5=(t,e,n)=>{let r=W_(t,n);if(!r)return!1;let i=Z0(r);if(!i){let o=r.blockRange(),a=o&&La(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(J_(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Sa(s,"end")||Te.isSelectable(s)))for(let o=r.depth;;o--){let a=hf(t.doc,r.before(o),r.after(o),me.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Sa(s,"end")?ze.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Te.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},L5=(t,e,n)=>{let r=W_(t,n);if(!r)return!1;let i=Z0(r);return i?K_(t,i,e):!1},j5=(t,e,n)=>{let r=q_(t,n);if(!r)return!1;let i=ev(r);return i?K_(t,i,e):!1};function K_(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=hf(t.doc,s,l,me.empty);if(!u||u.from!=s||u instanceof Vt&&u.slice.size>=l-s)return!1;if(n){let c=t.tr.step(u);c.setSelection(Ne.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Sa(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const $5=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Z0(r)}let o=s&&s.nodeBefore;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Z0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function q_(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const z5=(t,e,n)=>{let r=q_(t,n);if(!r)return!1;let i=ev(r);if(!i)return!1;let s=i.nodeAfter;if(J_(t,i,e,1))return!0;if(r.parent.content.size==0&&(Sa(s,"start")||Te.isSelectable(s))){let o=hf(t.doc,r.before(),r.after(),me.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Sa(s,"start")?ze.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Te.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},B5=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=ev(r)}let o=s&&s.nodeAfter;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,s.pos)).scrollIntoView()),!0)};function ev(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const F5=(t,e)=>{let n=t.selection,r=n instanceof Te,i;if(r){if(n.node.isTextblock||!ms(t.doc,n.from))return!1;i=n.from}else if(i=df(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Te.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},U5=(t,e)=>{let n=t.selection,r;if(n instanceof Te){if(n.node.isTextblock||!ms(t.doc,n.to))return!1;r=n.to}else if(r=df(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},V5=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&La(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},H5=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function G_(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const W5=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=G_(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ze.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},K5=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof or||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=G_(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ne.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},q5=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(aa(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&La(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},G5=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Te.create(t.doc,i))),!0)};function J5(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ms(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function J_(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&J5(t,e,n))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=ie.empty;for(let m=o.length-1;m>=0;m--)p=ie.from(o[m].create(null,p));p=ie.from(i.copy(p));let g=t.tr.step(new Kt(e.pos-1,f,e.pos,f,new me(p,1,0),o.length,!0)),y=g.doc.resolve(f+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&ms(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:ze.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),h=d&&La(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(u&&Sa(s,"start",!0)&&Sa(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let m=ie.empty;for(let v=p.length-1;v>=0;v--)m=ie.from(p[v].copy(m));let w=t.tr.step(new Kt(e.pos-p.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new me(m,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function Y_(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ne.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Y5=Y_(-1),Q5=Y_(1);function X5(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Q0(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Nx(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Z5(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return e4(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function e4(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Hd(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Hd(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Q0(s,n,r,e);return a?(t&&t4(t,e,a,i,n),!0):!1}function t4(t,e,n,r,i){let s=ie.empty;for(let c=n.length-1;c>=0;c--)s=ie.from(n[c].type.create(n[c].attrs,s));t.step(new Kt(e.start-(r?2:0),e.end,e.start,e.end,new me(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,h=!0;c<d;c++,h=!1)!h&&aa(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function n4(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?r4(e,n,t,s):i4(e,n,s):!0:!1}}function r4(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Kt(s-1,o,s,o,new me(ie.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hd(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=La(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return ms(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function i4(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,u=s.node(-1),c=s.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?ie.empty:ie.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new Kt(d-(a?1:0),h+(l?1:0),d+1,h-1,new me((a?ie.empty:ie.from(i.copy(ie.empty))).append(l?ie.empty:ie.from(i.copy(ie.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function s4(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,c=ie.from(u?t.create():null),d=new me(ie.from(t.create(null,ie.from(a.type.create(null,c)))),u?3:1,0),h=s.start,f=s.end;n(e.tr.step(new Kt(h-(u?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}const Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ea=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Mg=null;const ri=function(t,e,n){let r=Mg||(Mg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},o4=function(){Mg=null},ao=function(t,e,n,r){return n&&(Dx(t,e,n,r,-1)||Dx(t,e,n,r,1))},a4=/^(img|br|input|textarea|hr)$/i;function Dx(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:nr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||$u(t)||a4.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?nr(t):0}else return!1}}function nr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function l4(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=nr(t)}else if(t.parentNode&&!$u(t))e=Zt(t),t=t.parentNode;else return null}}function u4(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$u(t))e=Zt(t)+1,t=t.parentNode;else return null}}function c4(t,e,n){for(let r=e==0,i=e==nr(t);r||i;){if(t==n)return!0;let s=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==nr(t)}}function $u(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const pf=function(t){return t.focusNode&&ao(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Is(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function d4(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function h4(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(nr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(nr(r.startContainer),r.startOffset)}}}const qr=typeof navigator<"u"?navigator:null,Lx=typeof document<"u"?document:null,gs=qr&&qr.userAgent||"",Ng=/Edge\/(\d+)/.exec(gs),Q_=/MSIE \d/.exec(gs),Dg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gs),On=!!(Q_||Dg||Ng),es=Q_?document.documentMode:Dg?+Dg[1]:Ng?+Ng[1]:0,ar=!On&&/gecko\/(\d+)/i.test(gs);ar&&+(/Firefox\/(\d+)/.exec(gs)||[0,0])[1];const Lg=!On&&/Chrome\/(\d+)/.exec(gs),Ht=!!Lg,X_=Lg?+Lg[1]:0,dn=!On&&!!qr&&/Apple Computer/.test(qr.vendor),Ca=dn&&(/Mobile\/\w+/.test(gs)||!!qr&&qr.maxTouchPoints>2),Xn=Ca||(qr?/Mac/.test(qr.platform):!1),Z_=qr?/Win/.test(qr.platform):!1,ai=/Android \d/.test(gs),zu=!!Lx&&"webkitFontSmoothing"in Lx.documentElement.style,f4=zu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function p4(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Qr(t,e){return typeof t=="number"?t:t[e]}function m4(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function jx(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Ea(o);continue}let a=o,l=a==s.body,u=l?p4(s):m4(a),c=0,d=0;if(e.top<u.top+Qr(r,"top")?d=-(u.top-e.top+Qr(i,"top")):e.bottom>u.bottom-Qr(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Qr(i,"top")-u.top:e.bottom-u.bottom+Qr(i,"bottom")),e.left<u.left+Qr(r,"left")?c=-(u.left-e.left+Qr(i,"left")):e.right>u.right-Qr(r,"right")&&(c=e.right-u.right+Qr(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let g=a.scrollLeft-f,y=a.scrollTop-p;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Ea(o)}}function g4(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:e2(t.dom)}}function e2(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ea(r));return e}function y4({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;t2(n,r==0?0:r-e)}function t2(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Eo=null;function v4(t){if(t.setActive)return t.setActive();if(Eo)return t.focus(Eo);let e=e2(t);t.focus(Eo==null?{get preventScroll(){return Eo={preventScroll:!0},!0}}:void 0),Eo||(Eo=!1,t2(e,0))}function n2(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=ri(c).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=c,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,c.nodeType==1&&g&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=c,u={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?w4(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:n2(n,i)}function w4(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=Ci(r,1);if(o.top!=o.bottom&&tv(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function tv(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function x4(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function b4(t,e,n){let{node:r,offset:i}=n2(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function k4(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function r2(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(tv(e,u))return r2(o,e,u)}}if((s=(s+1)%r)==i)break}return t}function S4(t,e){let n=t.dom.ownerDocument,r,i=0,s=h4(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!tv(e,u)||(o=r2(t.dom,e,u),!o))return null}if(dn)for(let u=o;r&&u;u=Ea(u))u.draggable&&(r=void 0);if(o=x4(o,e),r){if(ar&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;zu&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=k4(t,r,i,e))}a==null&&(a=b4(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function $x(t){return t.top<t.bottom||t.left<t.right}function Ci(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if($x(r))return r}return Array.prototype.find.call(n,$x)||t.getBoundingClientRect()}const E4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function i2(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=zu||ar;if(r.nodeType==3)if(o&&(E4.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Ci(ri(r,i,i),n);if(ar&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Ci(ri(r,i-1,i-1),-1);if(u.top==l.top){let c=Ci(ri(r,i,i+1),-1);if(c.top!=l.top)return Qa(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,Qa(Ci(ri(r,l,u),c),c<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==nr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Ap(l.getBoundingClientRect(),!1)}if(s==null&&i<nr(r)){let l=r.childNodes[i];if(l.nodeType==1)return Ap(l.getBoundingClientRect(),!0)}return Ap(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==nr(r))){let l=r.childNodes[i-1],u=l.nodeType==3?ri(l,nr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Qa(Ci(u,1),!1)}if(s==null&&i<nr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?ri(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Qa(Ci(u,-1),!0)}return Qa(Ci(r.nodeType==3?ri(r):r,-n),n>=0)}function Qa(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ap(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function s2(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function C4(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return s2(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=i2(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ri(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const T4=/[\u0590-\u08ac]/;function _4(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!T4.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:s2(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),y=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&u==g;try{a.collapse(c,d),l&&(l!=c||u!=d)&&a.extend&&a.extend(l,u)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let zx=null,Bx=null,Fx=!1;function A4(t,e,n){return zx==e&&Bx==n?Fx:(zx=e,Bx=n,Fx=n=="up"||n=="down"?C4(t,e,n):_4(t,e,n))}const lr=0,Ux=1,zs=2,Gr=3;class Bu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=lr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof a2){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof o2&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Zt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Zt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],u=o+l.size;if(i==-1&&e<=u){let c=o+l.border;if(e>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,c);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Zt(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(u>n||a==this.children.length-1)){n=u;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Zt(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],y=p+g.size;if(s>p&&o<y)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((ar||dn)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let g=f,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Zt(y)+1});break}let m=g.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{let g=f.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(ar&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&dn)&&ao(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ao(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((u.extend||e==n)&&!(d&&ar)){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?zs:Ux,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Gr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?zs:Gr}r=o}this.dirty=zs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?zs:Ux;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class o2 extends Bu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==lr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class R4 extends Bu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class lo extends Bu{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=fo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new lo(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Gr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Gr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=lr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=lr}}slice(e,n,r){let i=lo.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=$g(s,n,o,r)),e>0&&(s=$g(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ts extends Bu{constructor(e,n,r,i,s,o,a,l,u){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,u=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=fo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let h=c;return c=c2(c,r,n),u?l=new P4(e,n,r,i,c,d||null,h,u,s,o+1):n.isText?new mf(e,n,r,i,c,h,s):new ts(e,n,r,i,c,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ie.empty)}return e}matchesNode(e,n,r){return this.dirty==lr&&e.eq(this.node)&&Kd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new I4(this,o&&o.node,e);D4(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?nt.none:this.node.child(c).marks,r,e),l.placeWidget(u,e,i)},(u,c,d,h)=>{l.syncToMarks(u.marks,r,e);let f;l.findNodeMatch(u,c,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,c,d,f,e)||l.updateNextNode(u,c,d,e,h,i)||l.addNode(u,c,d,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==zs)&&(o&&this.protectLocalComposition(e,o),l2(this.contentDOM,this.children,e),Ca&&L4(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ne)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=j4(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new R4(this,s,n,i);e.input.compositionNodes.push(o),this.children=$g(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Gr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=lr}updateOuterDeco(e){if(Kd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=u2(this.dom,this.nodeDOM,jg(this.outerDeco,this.node,n),jg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Vx(t,e,n,r,i){c2(r,e,t);let s=new ts(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class mf extends ts{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Gr||this.dirty!=lr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=lr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=lr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new mf(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Gr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class a2 extends Bu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==lr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class P4 extends ts{constructor(e,n,r,i,s,o,a,l,u,c){super(e,n,r,i,s,o,a,u,c),this.spec=l}update(e,n,r,i){if(this.dirty==Gr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function l2(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Hx(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof lo){let l=r?r.previousSibling:t.lastChild;l2(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Hx(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Tl=function(t){t&&(this.nodeName=t)};Tl.prototype=Object.create(null);const Bs=[new Tl];function jg(t,e,n){if(t.length==0)return Bs;let r=n?Bs[0]:new Tl,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Tl(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Tl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function u2(t,e,n,r){if(n==Bs&&r==Bs)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Bs[0]),i=l}O4(i,a||Bs[0],o)}return i}function O4(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function c2(t,e,n){return u2(t,t,Bs,jg(e,n,t.nodeType!=1))}function Kd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Hx(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class I4{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=M4(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=lr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=lo.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Gr&&o.dom==o.contentDOM&&(o.dirty=zs),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ts){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let c=l.dom,d,h=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Gr&&Kd(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=zs,d.updateChildren(i,o+1),d.dirty=lr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Kd(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=ts.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=ts.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new o2(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof lo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof mf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((dn||Ht)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new a2(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function M4(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof lo)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function N4(t,e){return t.type.side-e.type.side}function D4(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(s,c),u),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(N4);for(let y=0;y<d.length;y++)n(d[y],u,!!l)}else n(c,u,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(u<t.childCount)f=u,h=t.child(u++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+h.nodeSize;if(h.isText){let y=p;o<i.length&&i[o].from<y&&(y=i[o].from);for(let m=0;m<a.length;m++)a[m].to<y&&(y=a[m].to);y<p&&(l=h.cut(y-s),h=h.cut(0,y-s),p=y,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function L4(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function j4(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let u=t.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function $g(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,c=a+=l.size;u>=n||c<=e?s.push(l):(u<e&&s.push(l.slice(0,e-u,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-u,l.size,r)))}return s}function nv(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,u;if(pf(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Te.isSelectable(d)&&i.parent&&!(d.isInline&&c4(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;u=new Te(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!u){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;u=rv(t,c,a,d)}return u}function d2(t){return t.editable?t.hasFocus():f2(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ci(t,e=!1){let n=t.state.selection;if(h2(t,n),!!d2(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ht){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ao(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)z4(t);else{let{anchor:r,head:i}=n,s,o;Wx&&!(n instanceof Ne)&&(n.$from.parent.inlineContent||(s=Kx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Kx(t,n.to))),t.docView.setSelection(r,i,t,e),Wx&&(s&&qx(s),o&&qx(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$4(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Wx=dn||Ht&&X_<63;function Kx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(dn&&i&&i.contentEditable=="false")return Rp(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Rp(i);if(s)return Rp(s)}}function Rp(t){return t.contentEditable="true",dn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function qx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function $4(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!d2(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function z4(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Zt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&On&&es<=11&&(n.disabled=!0,n.disabled=!1)}function h2(t,e){if(e instanceof Te){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Gx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Gx(t)}function Gx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function rv(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ne.between(e,n,r)}function Jx(t){return t.editable&&!t.hasFocus()?!1:f2(t)}function f2(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function B4(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ao(e.node,e.offset,n.anchorNode,n.anchorOffset)}function zg(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ze.findFrom(s,e)}function Pi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Yx(t,e,n){let r=t.state.selection;if(r instanceof Ne)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Pi(t,new Ne(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=zg(t.state,e);return i&&i instanceof Te?Pi(t,i):!1}else if(!(Xn&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Te.isSelectable(s)?Pi(t,new Te(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):zu?Pi(t,new Ne(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Te&&r.node.isInline)return Pi(t,new Ne(e>0?r.$to:r.$from));{let i=zg(t.state,e);return i?Pi(t,i):!1}}}function qd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function _l(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Co(t,e){return e<0?F4(t):U4(t)}function F4(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ar&&n.nodeType==1&&r<qd(n)&&_l(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(_l(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(p2(n))break;{let a=n.previousSibling;for(;a&&_l(a,-1);)i=n.parentNode,s=Zt(a),a=a.previousSibling;if(a)n=a,r=qd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Bg(t,n,r):i&&Bg(t,i,s)}function U4(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=qd(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(_l(a,1))s=n,o=++r;else break}else{if(p2(n))break;{let a=n.nextSibling;for(;a&&_l(a,1);)s=a.parentNode,o=Zt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=qd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Bg(t,s,o)}function p2(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function V4(t,e){for(;t&&e==t.childNodes.length&&!$u(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function H4(t,e){for(;t&&!e&&!$u(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Bg(t,e,n){if(e.nodeType!=3){let s,o;(o=V4(e,n))?(e=o,n=0):(s=H4(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(pf(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ci(t)},50)}function Qx(t,e){let n=t.state.doc.resolve(e);if(!(Ht||Z_)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Xx(t,e,n){let r=t.state.selection;if(r instanceof Ne&&!r.empty||n.indexOf("s")>-1||Xn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=zg(t.state,e);if(o&&o instanceof Te)return Pi(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof or?ze.near(o,e):ze.findFrom(o,e);return a?Pi(t,a):!1}return!1}function Zx(t,e){if(!(t.state.selection instanceof Ne))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function eb(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function W4(t){if(!dn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;eb(t,r,"true"),setTimeout(()=>eb(t,r,"false"),20)}return!1}function K4(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function q4(t,e){let n=e.keyCode,r=K4(e);if(n==8||Xn&&n==72&&r=="c")return Zx(t,-1)||Co(t,-1);if(n==46&&!e.shiftKey||Xn&&n==68&&r=="c")return Zx(t,1)||Co(t,1);if(n==13||n==27)return!0;if(n==37||Xn&&n==66&&r=="c"){let i=n==37?Qx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Yx(t,i,r)||Co(t,i)}else if(n==39||Xn&&n==70&&r=="c"){let i=n==39?Qx(t,t.state.selection.from)=="ltr"?1:-1:1;return Yx(t,i,r)||Co(t,i)}else{if(n==38||Xn&&n==80&&r=="c")return Xx(t,-1,r)||Co(t,-1);if(n==40||Xn&&n==78&&r=="c")return W4(t)||Xx(t,1,r)||Co(t,1);if(r==(Xn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function iv(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||fo.fromSchema(t.state.schema),a=x2(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let u=l.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=w2[u.nodeName.toLowerCase()]);){for(let f=c.length-1;f>=0;f--){let p=a.createElement(c[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function m2(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return a=new me(ie.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:f}=t.state,p=fo.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=Q4(n),zu&&X4(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Zi.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!G4.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)a=Z4(tb(a,+c[1],+c[2]),c[4]);else if(a=me.maxOpen(J4(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=tb(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const G4=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function J4(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&s.length&&y2(l,s,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=v2(o[o.length-1],s.length));let c=g2(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return ie.from(o)}return t}function g2(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ie.from(t));return t}function y2(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=y2(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(ie.from(g2(n,t,i+1))))}}function v2(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,v2(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ie.empty,!0);return t.copy(n.append(r))}function Fg(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=Fg(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(ie.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function tb(t,e,n){return e<t.openStart&&(t=new me(Fg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new me(Fg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const w2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nb=null;function x2(){return nb||(nb=document.implementation.createHTMLDocument("title"))}let Pp=null;function Y4(t){let e=window.trustedTypes;return e?(Pp||(Pp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Pp.createHTML(t)):t}function Q4(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=x2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&w2[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Y4(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function X4(t){let e=t.querySelectorAll(Ht?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Z4(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=ie.from(l.create(r[a+1],i)),s++,o++}return new me(i,s,o)}const vn={},wn={},e$={touchstart:!0,touchmove:!0};class t${constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function n$(t){for(let e in vn){let n=vn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{i$(t,r)&&!sv(t,r)&&(t.editable||!(r.type in wn))&&n(t,r)},e$[e]?{passive:!0}:void 0)}dn&&t.dom.addEventListener("input",()=>null),Ug(t)}function Vi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function r$(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ug(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>sv(t,r))})}function sv(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function i$(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function s$(t,e){!sv(t,e)&&vn[e.type]&&(t.editable||!(e.type in wn))&&vn[e.type](t,e)}wn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!k2(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ai&&Ht&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ca&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Is(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||q4(t,n)?n.preventDefault():Vi(t,"key")};wn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};wn.keypress=(t,e)=>{let n=e;if(k2(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ne)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function gf(t){return{left:t.clientX,top:t.clientY}}function o$(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ov(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ua(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function a$(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Te.isSelectable(r)?(ua(t,new Te(n),"pointer"),!0):!1}function l$(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Te&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Te.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ua(t,Te.create(t.state.doc,i),"pointer"),!0):!1}function u$(t,e,n,r,i){return ov(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?l$(t,n):a$(t,n))}function c$(t,e,n,r){return ov(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function d$(t,e,n,r){return ov(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||h$(t,n,r)}function h$(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ua(t,Ne.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ua(t,Ne.create(r,a+1,a+1+o.content.size),"pointer");else if(Te.isSelectable(o))ua(t,Te.create(r,a),"pointer");else continue;return!0}}function av(t){return Gd(t)}const b2=Xn?"metaKey":"ctrlKey";vn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=av(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&o$(n,t.input.lastClick)&&!n[b2]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(gf(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new f$(t,o,n,!!r)):(s=="doubleClick"?c$:d$)(t,o.pos,o.inside,n)?n.preventDefault():Vi(t,"pointer"))};class f${constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[b2],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let c=e.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Te&&u.from<=o&&u.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ar&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Vi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ci(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(gf(e))),this.updateAllowDefault(e),this.allowDefault||!n?Vi(this.view,"pointer"):u$(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||dn&&this.mightDrag&&!this.mightDrag.node.isAtom||Ht&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ua(this.view,ze.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Vi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Vi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}vn.touchstart=t=>{t.input.lastTouch=Date.now(),av(t),Vi(t,"pointer")};vn.touchmove=t=>{t.input.lastTouch=Date.now(),Vi(t,"pointer")};vn.contextmenu=t=>av(t);function k2(t,e){return t.composing?!0:dn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const p$=ai?5e3:-1;wn.compositionstart=wn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ne&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ht&&Z_&&m$(t)))t.markCursor=t.state.storedMarks||n.marks(),Gd(t,!0),t.markCursor=null;else if(Gd(t,!e.selection.empty),ar&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}S2(t,p$)};function m$(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}wn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,S2(t,20))};function S2(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Gd(t),e))}function E2(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=y$());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function g$(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=l4(e.focusNode,e.focusOffset),r=u4(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function y$(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Gd(t,e=!1){if(!(ai&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),E2(t),e||t.docView&&t.docView.dirty){let n=nv(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function v$(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const vu=On&&es<15||Ca&&f4<604;vn.copy=wn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=vu?null:n.clipboardData,o=r.content(),{dom:a,text:l}=iv(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):v$(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function w$(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function x$(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?wu(t,r.value,null,i,e):wu(t,r.textContent,r.innerHTML,i,e)},50)}function wu(t,e,n,r,i){let s=m2(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||me.empty)))return!0;if(!s)return!1;let o=w$(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function C2(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}wn.paste=(t,e)=>{let n=e;if(t.composing&&!ai)return;let r=vu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&wu(t,C2(r),r.getData("text/html"),i,n)?n.preventDefault():x$(t,n)};class T2{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const b$=Xn?"altKey":"ctrlKey";function _2(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[b$]}vn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(gf(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Te?i.to-1:i.to))){if(r&&r.mightDrag)o=Te.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=Te.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:c}=iv(t,a);(!n.dataTransfer.files.length||!Ht||X_>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(vu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",vu||n.dataTransfer.setData("text/plain",u),t.dragging=new T2(c,_2(t,n),o)};vn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};wn.dragover=wn.dragenter=(t,e)=>e.preventDefault();wn.drop=(t,e)=>{try{k$(t,e,t.dragging)}finally{t.dragging=null}};function k$(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(gf(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",f=>{s=f(s,t,!1)}):s=m2(t,C2(e.dataTransfer),vu?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&_2(t,e));if(t.someProp("handleDrop",f=>f(t,e,s||me.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?j_(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:f}=n;f?f.replace(l):l.deleteSelection()}let u=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(d))return;let h=l.doc.resolve(u);if(c&&Te.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Te(h));else{let f=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,g,y,m)=>f=m),l.setSelection(rv(t,h,l.doc.resolve(f)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}vn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ci(t)},20))};vn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};vn.beforeinput=(t,e)=>{if(Ht&&ai&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Is(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in wn)vn[t]=wn[t];function xu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Jd{constructor(e,n){this.toDOM=e,this.spec=n||Js,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new mn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Jd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&xu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ns{constructor(e,n){this.attrs=e,this.spec=n||Js}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new mn(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ns&&xu(this.attrs,e.attrs)&&xu(this.spec,e.spec)}static is(e){return e.type instanceof ns}destroy(){}}class lv{constructor(e,n){this.attrs=e,this.spec=n||Js}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new mn(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof lv&&xu(this.attrs,e.attrs)&&xu(this.spec,e.spec)}destroy(){}}class mn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new mn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new mn(e,e,new Jd(n,r))}static inline(e,n,r,i){return new mn(e,n,new ns(r,i))}static node(e,n,r,i){return new mn(e,n,new lv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ns}get widget(){return this.type instanceof Jd}}const Oo=[],Js={};class gt{constructor(e,n){this.local=e.length?e:Oo,this.children=n.length?n:Oo}static create(e,n){return n.length?Yd(n,e,0,Js):an}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==an||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Js)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?S$(this.children,o||[],e,n,r,i,s):o?new gt(o.sort(Ys),Oo):an}add(e,n){return n.length?this==an?gt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let u=l+r,c;if(c=R2(n,a,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,u+1):i.splice(s,0,l,l+a.nodeSize,Yd(c,a,u+1,Js)),s+=3}});let o=A2(s?P2(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new gt(o.length?this.local.concat(o).sort(Ys):this.local,i||this.children)}remove(e){return e.length==0||this==an?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>a&&d.to<l&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(o,a+1);u!=an?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new gt(i,r):an}forChild(e,n){if(this==an)return this;if(n.isLeaf)return gt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof ns){let u=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let a=new gt(i.sort(Ys),Oo);return r?new Li([a,r]):a}return r||an}eq(e){if(this==e)return!0;if(!(e instanceof gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return uv(this.localsInner(e))}localsInner(e){if(this==an)return Oo;if(e.inlineContent||!this.local.some(ns.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ns||n.push(this.local[r]);return n}forEachSet(e){e(this)}}gt.empty=new gt([],[]);gt.removeOverlap=uv;const an=gt.empty;class Li{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Js));return Li.from(r)}forChild(e,n){if(n.isLeaf)return gt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=an&&(s instanceof Li?r=r.concat(s.members):r.push(s))}return Li.from(r)}eq(e){if(!(e instanceof Li)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?uv(r?n:n.sort(Ys)):Oo}static from(e){switch(e.length){case 0:return an;case 1:return e[0];default:return new Li(e.every(n=>n instanceof gt)?e:e.reduce((n,r)=>n.concat(r instanceof gt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function S$(t,e,n,r,i,s,o){let a=t.slice();for(let u=0,c=s;u<n.maps.length;u++){let d=0;n.maps[u].forEach((h,f,p,g)=>{let y=g-p-(f-h);for(let m=0;m<a.length;m+=3){let w=a[m+1];if(w<0||h>w+c-d)continue;let v=a[m]+c-d;f>=v?a[m+1]=h<=v?-2:-1:h>=c&&y&&(a[m]+=y,a[m+1]+=y)}d+=y}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=n.map(t[u]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[u+1]+s,-1),f=h-i,{index:p,offset:g}=r.content.findIndex(d),y=r.maybeChild(p);if(y&&g==d&&g+y.nodeSize==f){let m=a[u+2].mapInner(n,y,c+1,t[u]+s+1,o);m!=an?(a[u]=d,a[u+1]=f,a[u+2]=m):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=E$(a,t,e,n,i,s,o),c=Yd(u,r,0,o);e=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<c.children.length;d+=3){let f=c.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,c.children[d],c.children[d+1],c.children[d+2])}}return new gt(e.sort(Ys),a)}function A2(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new mn(i.from+e,i.to+e,i.type))}return n}function E$(t,e,n,r,i,s,o){function a(l,u){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,u);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function R2(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function P2(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Yd(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let u=R2(t,a,l+n);if(u){s=!0;let c=Yd(u,a,n+l+1,r);c!=an&&i.push(l,l+a.nodeSize,c)}});let o=A2(s?P2(t):t,-n).sort(Ys);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new gt(o,i):an}function Ys(t,e){return t.from-e.from||t.to-e.to}function uv(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),rb(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),rb(e,i,r.copy(s.from,r.to)));break}}}return e}function rb(t,e,n){for(;e<t.length&&Ys(n,t[e])>0;)e++;t.splice(e,0,n)}function Op(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=an&&e.push(r)}),t.cursorWrapper&&e.push(gt.create(t.state.doc,[t.cursorWrapper.deco])),Li.from(e)}const C$={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},T$=On&&es<=11;class _${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class A${constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _$,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);On&&es<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),T$&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,C$)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Jx(this.view)){if(this.suppressingSelectionUpdates)return ci(this.view);if(On&&es<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ao(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ea(s))n.add(s);for(let s=e.anchorNode;s;s=Ea(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Jx(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(ar&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,h]=c;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of c){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||O$(e,d)!=f)&&h.remove()}}}else if((Ht||dn)&&l.some(c=>c.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}let u=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pf(r)&&(u=nv(e))&&u.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ci(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),R$(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ci(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(On&&es<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:h}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Zt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Zt(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ib=new WeakMap,sb=!1;function R$(t){if(!ib.has(t)&&(ib.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ar,sb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),sb=!0}}function ob(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ao(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function P$(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ob(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ob(t,n):null}function O$(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function I$(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],pf(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Ht&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let m=r.childNodes[y-1],w=m.pmViewDesc;if(m.nodeName=="BR"&&!w){s=y;break}if(!w||w.size)break}let d=t.state.doc,h=t.someProp("domParser")||Zi.fromSchema(t.state.schema),f=d.resolve(o),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:M$,context:f});if(u&&u[0].pos!=null){let y=u[0].pos,m=u[1]&&u[1].pos;m==null&&(m=y),p={anchor:y+o,head:m+o}}return{doc:g,sel:p,from:o,to:a}}function M$(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(dn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||dn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const N$=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function D$(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,b=nv(t,R);if(b&&!t.state.selection.eq(b)){if(Ht&&ai&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",O=>O(t,Is(13,"Enter"))))return;let k=t.state.tr.setSelection(b);R=="pointer"?k.setMeta("pointer",!0):R=="key"&&k.scrollIntoView(),s&&k.setMeta("composition",s),t.dispatch(k)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,u=I$(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=$$(d.content,u.doc.content,u.from,h,f);if(p&&t.input.domChangeCount++,(Ca&&t.input.lastIOSEnter>Date.now()-225||ai)&&i.some(R=>R.nodeType==1&&!N$.test(R.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",R=>R(t,Is(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Ne&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let R=ab(t,t.state.doc,u.sel);if(R&&!R.eq(t.state.selection)){let b=t.state.tr.setSelection(R);s&&b.setMeta("composition",s),t.dispatch(b)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ne&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),On&&es<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>u.from&&u.doc.textBetween(p.start-u.from-1,p.start-u.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=u.doc.resolveNoCache(p.start-u.from),y=u.doc.resolveNoCache(p.endB-u.from),m=c.resolve(p.start),w=g.sameParent(y)&&g.parent.inlineContent&&m.end()>=p.endA;if((Ca&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!w&&g.pos<u.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(u.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",R=>R(t,Is(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&j$(c,p.start,p.endA,g,y)&&t.someProp("handleKeyDown",R=>R(t,Is(8,"Backspace")))){ai&&Ht&&t.domObserver.suppressSelectionUpdates();return}Ht&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),ai&&!w&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==p.endA&&(p.endB-=2,y=u.doc.resolveNoCache(p.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,Is(13,"Enter"))})},20));let v=p.start,S=p.endA,T=R=>{let b=R||t.state.tr.replace(v,S,u.doc.slice(p.start-u.from,p.endB-u.from));if(u.sel){let k=ab(t,b.doc,u.sel);k&&!(Ht&&t.composing&&k.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(k.head==v||k.head==b.mapping.map(S)-1)||On&&k.empty&&k.head==v)&&b.setSelection(k)}return s&&b.setMeta("composition",s),b.scrollIntoView()},x;if(w)if(g.pos==y.pos){On&&es<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ci(t),20));let R=T(t.state.tr.delete(v,S)),b=c.resolve(p.start).marksAcross(c.resolve(p.endA));b&&R.ensureMarks(b),t.dispatch(R)}else if(p.endA==p.endB&&(x=L$(g.parent.content.cut(g.parentOffset,y.parentOffset),m.parent.content.cut(m.parentOffset,p.endA-m.start())))){let R=T(t.state.tr);x.type=="add"?R.addMark(v,S,x.mark):R.removeMark(v,S,x.mark),t.dispatch(R)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let R=g.parent.textBetween(g.parentOffset,y.parentOffset),b=()=>T(t.state.tr.insertText(R,v,S));t.someProp("handleTextInput",k=>k(t,v,S,R,b))||t.dispatch(b())}else t.dispatch(T());else t.dispatch(T())}function ab(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:rv(t,e.resolve(n.anchor),e.resolve(n.head))}function L$(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(ie.from(u).eq(t))return{mark:a,type:o}}function j$(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ip(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ip(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ip(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ip(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function $$(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&lb(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&lb(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function lb(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class O2{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new t$,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=db(this),cb(this),this.nodeViews=hb(this),this.docView=Vx(this.state.doc,ub(this),Op(this),this.dom,this),this.domObserver=new A$(this,(r,i,s,o)=>D$(this,r,i,s,o)),this.domObserver.start(),n$(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ug(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fb),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(E2(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=hb(this);B$(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ug(this),this.editable=db(this),cb(this);let l=Op(this),u=ub(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,u,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&g4(this);if(o){this.domObserver.stop();let f=d&&(On||Ht)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&z$(i.selection,e.selection);if(d){let p=Ht?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=g$(this)),(s||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Vx(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&B4(this))?ci(this,f):(h2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&y4(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Te){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&jx(this,n.getBoundingClientRect(),e)}else jx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new T2(e.slice,e.move,i<0?void 0:Te.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(On){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&v4(this.dom),ci(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return S4(this,e)}coordsAtPos(e,n=1){return i2(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return A4(this,n||this.state,e)}pasteHTML(e,n){return wu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return wu(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return iv(this,e)}destroy(){this.docView&&(r$(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Op(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,o4())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return s$(this,e)}domSelectionRange(){let e=this.domSelection();return e?dn&&this.root.nodeType===11&&d4(this.dom.ownerDocument)==this.dom&&P$(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}O2.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function ub(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[mn.node(0,t.state.doc.content.size,e)]}function cb(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function db(t){return!t.someProp("editable",e=>e(t.state)===!1)}function z$(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function hb(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function B$(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function fb(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ss={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},F$=typeof navigator<"u"&&/Mac/.test(navigator.platform),U$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var en=0;en<10;en++)ss[48+en]=ss[96+en]=String(en);for(var en=1;en<=24;en++)ss[en+111]="F"+en;for(var en=65;en<=90;en++)ss[en]=String.fromCharCode(en+32),Qd[en]=String.fromCharCode(en);for(var Mp in ss)Qd.hasOwnProperty(Mp)||(Qd[Mp]=ss[Mp]);function V$(t){var e=F$&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||U$&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Qd:ss)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const H$=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),W$=typeof navigator<"u"&&/Win/.test(navigator.platform);function K$(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))H$?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function q$(t){let e=Object.create(null);for(let n in t)e[K$(n)]=t[n];return e}function Np(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function G$(t){return new xt({props:{handleKeyDown:I2(t)}})}function I2(t){let e=q$(t);return function(n,r){let i=V$(r),s,o=e[Np(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Np(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(W$&&r.ctrlKey&&r.altKey)&&(s=ss[r.keyCode])&&s!=i){let a=e[Np(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var J$=Object.defineProperty,cv=(t,e)=>{for(var n in e)J$(t,n,{get:e[n],enumerable:!0})};function yf(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var vf=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const c=a(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!t,l=t||i.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,h])=>[d,(...p)=>{const g=this.buildProps(l,e),y=h(...p)(g);return o.push(y),c}])),run:u};return c}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:yf({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},M2={};cv(M2,{blur:()=>Y$,clearContent:()=>Q$,clearNodes:()=>X$,command:()=>Z$,createParagraphNear:()=>ez,cut:()=>tz,deleteCurrentNode:()=>nz,deleteNode:()=>rz,deleteRange:()=>iz,deleteSelection:()=>sz,enter:()=>oz,exitCode:()=>az,extendMarkRange:()=>lz,first:()=>uz,focus:()=>dz,forEach:()=>hz,insertContent:()=>fz,insertContentAt:()=>gz,joinBackward:()=>wz,joinDown:()=>vz,joinForward:()=>xz,joinItemBackward:()=>bz,joinItemForward:()=>kz,joinTextblockBackward:()=>Sz,joinTextblockForward:()=>Ez,joinUp:()=>yz,keyboardShortcut:()=>Tz,lift:()=>_z,liftEmptyBlock:()=>Az,liftListItem:()=>Rz,newlineInCode:()=>Pz,resetAttributes:()=>Oz,scrollIntoView:()=>Iz,selectAll:()=>Mz,selectNodeBackward:()=>Nz,selectNodeForward:()=>Dz,selectParentNode:()=>Lz,selectTextblockEnd:()=>jz,selectTextblockStart:()=>$z,setContent:()=>zz,setMark:()=>sB,setMeta:()=>oB,setNode:()=>aB,setNodeSelection:()=>lB,setTextDirection:()=>uB,setTextSelection:()=>cB,sinkListItem:()=>dB,splitBlock:()=>hB,splitListItem:()=>fB,toggleList:()=>pB,toggleMark:()=>mB,toggleNode:()=>gB,toggleWrap:()=>yB,undoInputRule:()=>vB,unsetAllMarks:()=>wB,unsetMark:()=>xB,unsetTextDirection:()=>bB,updateAttributes:()=>kB,wrapIn:()=>SB,wrapInList:()=>EB});var Y$=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Q$=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),X$=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(l)),h=u.resolve(c.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=La(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},Z$=t=>e=>t(e),ez=()=>({state:t,dispatch:e})=>K5(t,e),tz=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ne(r.doc.resolve(Math.max(o-1,0)))),!0},nz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function Nt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var rz=t=>({tr:e,state:n,dispatch:r})=>{const i=Nt(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),u=s.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},iz=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},sz=()=>({state:t,dispatch:e})=>N5(t,e),oz=()=>({commands:t})=>t.keyboardShortcut("Enter"),az=()=>({state:t,dispatch:e})=>W5(t,e);function dv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Xd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:dv(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function N2(t,e,n={}){return t.find(r=>r.type===e&&Xd(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function pb(t,e,n={}){return!!N2(t,e,n)}function hv(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!N2([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,u=a+i.node.nodeSize;for(;o>0&&pb([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&pb([...t.parent.child(l).marks],e,n);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function bi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var lz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=bi(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:u,to:c}=a;if(i){const d=hv(l,s,e);if(d&&d.from<=u&&d.to>=c){const h=Ne.create(o,d.from,d.to);n.setSelection(h)}}return!0},uz=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function D2(t){return t instanceof Ne}function Fs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function L2(t,e=null){if(!e)return null;const n=ze.atStart(t),r=ze.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ne.create(t,Fs(0,i,s),Fs(t.content.size,i,s)):Ne.create(t,Fs(e,i,s),Fs(e,i,s))}function cz(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function fv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var dz=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(fv()||cz())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!D2(n.state.selection))return o(),!0;const a=L2(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},hz=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),fz=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),j2=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&j2(r)}return t};function wc(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return j2(n)}function bu(t,e,n){if(t instanceof Rr||t instanceof ie)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ie.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),bu("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new T_({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Zi.fromSchema(l).parseSlice(wc(t),n.parseOptions):Zi.fromSchema(l).parse(wc(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Zi.fromSchema(e);return n.slice?s.parseSlice(wc(t),n.parseOptions).content:s.parse(wc(t),n.parseOptions)}return bu("",e,n)}function pz(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Vt||i instanceof Kt))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,u,c)=>{o===0&&(o=c)}),t.setSelection(ze.near(t.doc.resolve(o),n))}var mz=t=>!("type"in t),gz=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{bu(e,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=bu(e,s.schema,{parseOptions:u,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:c,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((mz(a)?a:[a]).forEach(y=>{y.check(),h=h?y.isText&&y.marks.length===0:!1,f=f?y.isBlock:!1}),c===d&&f){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof ie){let y="";e.forEach(m=>{m.text&&(y+=m.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,c,d)}else{g=a;const y=r.doc.resolve(c),m=y.node(),w=y.parentOffset===0,v=m.isText||m.isTextblock,S=m.content.size>0;w&&v&&S&&(c=Math.max(0,c-1)),r.replaceWith(c,d,g)}n.updateSelection&&pz(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:g})}return!0},yz=()=>({state:t,dispatch:e})=>F5(t,e),vz=()=>({state:t,dispatch:e})=>U5(t,e),wz=()=>({state:t,dispatch:e})=>D5(t,e),xz=()=>({state:t,dispatch:e})=>z5(t,e),bz=()=>({state:t,dispatch:e,tr:n})=>{try{const r=df(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},kz=()=>({state:t,dispatch:e,tr:n})=>{try{const r=df(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Sz=()=>({state:t,dispatch:e})=>L5(t,e),Ez=()=>({state:t,dispatch:e})=>j5(t,e);function $2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Cz(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))fv()||$2()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var Tz=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=Cz(t).split(/-(?!$)/),o=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function as(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Nt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(i,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=i-r,u=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Xd(d.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((d,h)=>d+h.to-h.from,0)>=l}var _z=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return as(n,i,e)?V5(n,r):!1},Az=()=>({state:t,dispatch:e})=>q5(t,e),Rz=t=>({state:e,dispatch:n})=>{const r=Nt(t,e.schema);return n4(r)(e,n)},Pz=()=>({state:t,dispatch:e})=>H5(t,e);function wf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function mb(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Oz=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=wf(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=Nt(t,r.schema)),a==="mark"&&(o=bi(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,mb(c.attrs,e))),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(mb(h.attrs,e))))})})}),l},Iz=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Mz=()=>({tr:t,dispatch:e})=>{if(e){const n=new or(t.doc);t.setSelection(n)}return!0},Nz=()=>({state:t,dispatch:e})=>$5(t,e),Dz=()=>({state:t,dispatch:e})=>B5(t,e),Lz=()=>({state:t,dispatch:e})=>G5(t,e),jz=()=>({state:t,dispatch:e})=>Q5(t,e),$z=()=>({state:t,dispatch:e})=>Y5(t,e);function Vg(t,e,n={},r={}){return bu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var zz=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const u=Vg(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function z2(t,e){const n=bi(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function B2(t,e){const n=new U_(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function Bz(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Fz(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Uz(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function xf(t){return e=>Uz(e.$from,t)}function Ee(t,e,n){return t.config[e]===void 0&&t.parent?Ee(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ee(t.parent,e,n):null}):t.config[e]}function pv(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ee(e,"addExtensions",n);return r?[e,...pv(r())]:e}).flat(10)}function mv(t,e){const n=fo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function F2(t){return typeof t=="function"}function et(t,e=void 0,...n){return F2(t)?e?t.bind(e)(...n):t(...n):t}function Vz(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ta(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function U2(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ta(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Ee(o,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Ee(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:c,attribute:h})})}),e}function _t(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],u=a.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());u.set(d,h)}),a.forEach(c=>{const[d,h]=c.split(":").map(f=>f.trim());u.set(d,h)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Zd(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>_t(n,r),{})}function Hz(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function gb(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Hz(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function yb(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Vz(n)?!1:n!=null))}function vb(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function Wz(t,e){var n;const r=U2(t),{nodeExtensions:i,markExtensions:s}=Ta(t),o=(n=i.find(u=>Ee(u,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(u=>{const c=r.filter(m=>m.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((m,w)=>{const v=Ee(w,"extendNodeSchema",d);return{...m,...v?v(u):{}}},{}),f=yb({...h,content:et(Ee(u,"content",d)),marks:et(Ee(u,"marks",d)),group:et(Ee(u,"group",d)),inline:et(Ee(u,"inline",d)),atom:et(Ee(u,"atom",d)),selectable:et(Ee(u,"selectable",d)),draggable:et(Ee(u,"draggable",d)),code:et(Ee(u,"code",d)),whitespace:et(Ee(u,"whitespace",d)),linebreakReplacement:et(Ee(u,"linebreakReplacement",d)),defining:et(Ee(u,"defining",d)),isolating:et(Ee(u,"isolating",d)),attrs:Object.fromEntries(c.map(vb))}),p=et(Ee(u,"parseHTML",d));p&&(f.parseDOM=p.map(m=>gb(m,c)));const g=Ee(u,"renderHTML",d);g&&(f.toDOM=m=>g({node:m,HTMLAttributes:Zd(m,c)}));const y=Ee(u,"renderText",d);return y&&(f.toText=y),[u.name,f]})),l=Object.fromEntries(s.map(u=>{const c=r.filter(y=>y.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((y,m)=>{const w=Ee(m,"extendMarkSchema",d);return{...y,...w?w(u):{}}},{}),f=yb({...h,inclusive:et(Ee(u,"inclusive",d)),excludes:et(Ee(u,"excludes",d)),group:et(Ee(u,"group",d)),spanning:et(Ee(u,"spanning",d)),code:et(Ee(u,"code",d)),attrs:Object.fromEntries(c.map(vb))}),p=et(Ee(u,"parseHTML",d));p&&(f.parseDOM=p.map(y=>gb(y,c)));const g=Ee(u,"renderHTML",d);return g&&(f.toDOM=y=>g({mark:y,HTMLAttributes:Zd(y,c)})),[u.name,f]}));return new T_({topNode:o,nodes:a,marks:l})}function Kz(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function gv(t){return t.sort((n,r)=>{const i=Ee(n,"priority")||100,s=Ee(r,"priority")||100;return i>s?-1:i<s?1:0})}function V2(t){const e=gv(pv(t)),n=Kz(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function H2(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,u,c,d)=>{var h;l.isBlock&&u>r&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return c&&(a+=f({node:l,pos:u,parent:c,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,u)-u,i-u))}),a}function qz(t,e){const n={from:0,to:t.content.size};return H2(t,n,e)}function W2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Gz(t,e){const n=Nt(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function K2(t,e){const n=wf(typeof e=="string"?e:e.name,t.schema);return n==="node"?Gz(t,e):n==="mark"?z2(t,e):{}}function Jz(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Yz(t){const e=Jz(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function q2(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(s).map(a,-1),c=e.slice(s).map(l),d=e.invert().map(u,-1),h=e.invert().map(c);r.push({oldRange:{from:d,to:h},newRange:{from:u,to:c}})})}),Yz(r)}function yv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=hv(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var Qz=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function Dp(t,e){return e.nodes[t]||e.marks[t]||null}function Xc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var Xz=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,u;const c=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function Hg(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?bi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Xd(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,y)=>{if(!g.isText&&!g.marks.length)return;const m=Math.max(f,y),w=Math.min(p,y+g.nodeSize),v=w-m;o+=v,a.push(...g.marks.map(S=>({mark:S,from:m,to:w})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Xd(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),u=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+u:l)>=o}function Zz(t,e,n={}){if(!e)return as(t,null,n)||Hg(t,null,n);const r=wf(e,t.schema);return r==="node"?as(t,e,n):r==="mark"?Hg(t,e,n):!1}var eB=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=xf(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},tB=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function wb(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function xb(t,e){const{nodeExtensions:n}=Ta(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=et(Ee(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function bf(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(bf(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function G2(t){return t instanceof Te}var J2=class Y2{constructor(e){this.position=e}static fromJSON(e){return new Y2(e.position)}toJSON(){return{position:this.position}}};function nB(t,e){const n=e.mapping.mapResult(t.position);return{position:new J2(n.pos),mapResult:n}}function rB(t){return new J2(t)}function iB(t,e,n){var r;const{selection:i}=e;let s=null;if(D2(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(u=>u.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,d,h)=>{if(u)return!1;if(c.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));u=f&&p}return!u}),u})}var sB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=bi(t,r.schema);if(i)if(o){const u=z2(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(h,f)=>{const p=Math.max(f,c),g=Math.min(f+h.nodeSize,d);h.marks.find(m=>m.type===l)?h.marks.forEach(m=>{l===m.type&&n.addMark(p,g,l.create({...m.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return iB(r,n,l)},oB=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),aB=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Nt(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>Nx(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Nx(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lB=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Fs(t,0,r.content.size),s=Te.create(r,i);e.setSelection(s)}return!0},uB=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,u)=>{l.isText||n.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},cB=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ne.atStart(r).from,a=Ne.atEnd(r).to,l=Fs(i,o,a),u=Fs(s,o,a),c=Ne.create(r,l,u);e.setSelection(c)}return!0},dB=t=>({state:e,dispatch:n})=>{const r=Nt(t,e.schema);return s4(r)(e,n)};function bb(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var hB=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,u=i.extensionManager.attributes,c=Xc(u,a.node().type.name,a.node().attrs);if(s instanceof Te&&s.node.isBlock)return!a.parentOffset||!aa(o,a.pos)?!1:(r&&(t&&bb(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:Bz(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:c}]:void 0,p=aa(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&aa(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:c}]:void 0),r){if(p&&(s instanceof Ne&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&bb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},fB=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Nt(t,r.schema),{$from:l,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let m=ie.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let b=l.depth-w;b>=l.depth-3;b-=1)m=ie.from(l.node(b).copy(m));const v=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Xc(h,l.node().type.name,l.node().attrs),...e},T=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;m=m.append(ie.from(a.createAndFill(null,T)||void 0));const x=l.before(l.depth-(w-1));n.replace(x,l.after(-v),new me(m,4-w,0));let R=-1;n.doc.nodesBetween(x,n.doc.content.size,(b,k)=>{if(R>-1)return!1;b.isTextblock&&b.content.size===0&&(R=k+1)}),R>-1&&n.setSelection(Ne.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const f=u.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...Xc(h,d.type.name,d.attrs),...e},g={...Xc(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,u.pos);const y=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!aa(n.doc,l.pos,2))return!1;if(i){const{selection:m,storedMarks:w}=r,{splittableMarks:v}=s.extensionManager,S=w||m.$to.parentOffset&&m.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!S||!i)return!0;const T=S.filter(x=>v.includes(x.type.name));n.ensureMarks(T)}return!0},Lp=(t,e)=>{const n=xf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ms(t.doc,n.pos)&&t.join(n.pos),!0},jp=(t,e)=>{const n=xf(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ms(t.doc,r)&&t.join(r),!0},pB=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=Nt(t,o.schema),p=Nt(e,o.schema),{selection:g,storedMarks:y}=o,{$from:m,$to:w}=g,v=m.blockRange(w),S=y||g.$to.parentOffset&&g.$from.marks();if(!v)return!1;const T=xf(x=>xb(x.type.name,d))(g);if(v.depth>=1&&T&&v.depth-T.depth<=1){if(T.node.type===f)return u.liftListItem(p);if(xb(T.node.type.name,d)&&f.validContent(T.node.content)&&a)return l().command(()=>(s.setNodeMarkup(T.pos,f),!0)).command(()=>Lp(s,f)).command(()=>jp(s,f)).run()}return!n||!S||!a?l().command(()=>c().wrapInList(f,r)?!0:u.clearNodes()).wrapInList(f,r).command(()=>Lp(s,f)).command(()=>jp(s,f)).run():l().command(()=>{const x=c().wrapInList(f,r),R=S.filter(b=>h.includes(b.type.name));return s.ensureMarks(R),x?!0:u.clearNodes()}).wrapInList(f,r).command(()=>Lp(s,f)).command(()=>jp(s,f)).run()},mB=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=bi(t,r.schema);return Hg(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},gB=(t,e,n={})=>({state:r,commands:i})=>{const s=Nt(t,r.schema),o=Nt(e,r.schema),a=as(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},yB=(t,e={})=>({state:n,commands:r})=>{const i=Nt(t,n.schema);return as(n,i,e)?r.lift(i):r.wrapIn(i,e)},vB=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},wB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},xB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=bi(t,r.schema),{$from:u,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:h,to:f}=a;const p=(s=u.marks().find(y=>y.type===l))==null?void 0:s.attrs,g=hv(u,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},bB=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),r&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},kB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=wf(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=Nt(t,r.schema)),a==="mark"&&(o=bi(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;let h,f,p,g;n.selection.empty?r.doc.nodesBetween(c,d,(y,m)=>{s&&s===y.type&&(l=!0,p=Math.max(m,c),g=Math.min(m+y.nodeSize,d),h=m,f=y)}):r.doc.nodesBetween(c,d,(y,m)=>{m<c&&s&&s===y.type&&(l=!0,p=Math.max(m,c),g=Math.min(m+y.nodeSize,d),h=m,f=y),m>=c&&m<=d&&(s&&s===y.type&&(l=!0,i&&n.setNodeMarkup(m,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(w=>{if(o===w.type&&(l=!0,i)){const v=Math.max(m,c),S=Math.min(m+y.nodeSize,d);n.addMark(v,S,o.create({...w.attrs,...e}))}}))}),f&&(h!==void 0&&i&&n.setNodeMarkup(h,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(y=>{o===y.type&&i&&n.addMark(p,g,o.create({...y.attrs,...e}))}))}),l},SB=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return X5(i,e)(n,r)},EB=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return Z5(i,e)(n,r)},CB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},kf=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},TB=(t,e)=>{if(dv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function xc(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let c=!1;const d=Xz(u)+s;return o.forEach(h=>{if(c)return;const f=TB(d,h.find);if(!f)return;const p=l.state.tr,g=yf({state:l.state,transaction:p}),y={from:r-(f[0].length-s.length),to:i},{commands:m,chain:w,can:v}=new vf({editor:n,state:g});h.handler({state:g,range:y,match:f,commands:m,chain:w,can:v})===null||!p.steps.length||(h.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),c=!0)}),c}function _B(t){const{editor:e,rules:n}=t,r=new xt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=mv(ie.from(c),o.schema);const{from:d}=l,h=d+c.length;xc({editor:e,from:d,to:h,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return xc({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&xc({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?xc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function AB(t){return Object.prototype.toString.call(t).slice(8,-1)}function bc(t){return AB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Q2(t,e){const n={...t};return bc(t)&&bc(e)&&Object.keys(e).forEach(r=>{bc(e[r])&&bc(t[r])?n[r]=Q2(t[r],e[r]):n[r]=e[r]}),n}var vv=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...et(Ee(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...et(Ee(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Q2(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ys=class X2 extends vv{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new X2(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function RB(t){return typeof t=="number"}var PB=class{constructor(t){this.find=t.find,this.handler=t.handler}},OB=(t,e,n)=>{if(dv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function IB(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:c}=new vf({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,p)=>{var g,y,m,w,v;if((y=(g=f.type)==null?void 0:g.spec)!=null&&y.code||!(f.isText||f.isTextblock||f.isInline))return;const S=(v=(w=(m=f.content)==null?void 0:m.size)!=null?w:f.nodeSize)!=null?v:0,T=Math.max(r,p),x=Math.min(i,p+S);if(T>=x)return;const R=f.isText?f.text||"":f.textBetween(T-p,x-p,void 0,"");OB(R,s.find,o).forEach(k=>{if(k.index===void 0)return;const O=T+k.index+1,M=O+k[0].length,N={from:n.tr.mapping.map(O),to:n.tr.mapping.map(M)},L=s.handler({state:n,range:N,match:k,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:a});d.push(L)})}),d.every(f=>f!==null)}var kc=null,MB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function NB(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:h,rule:f,pasteEvt:p})=>{const g=c.tr,y=yf({state:c,transaction:g});if(!(!IB({editor:e,state:y,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(c=>new xt({view(d){const h=p=>{var g;r=(g=d.dom.parentElement)!=null&&g.contains(p.target)?d.dom.parentElement:null,r&&(kc=e)},f=()=>{kc&&(kc=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const f=kc;f!=null&&f.isEditable&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)==null?void 0:f.getData("text/html");return o=h,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,y=p.getMeta("uiEvent")==="drop"&&!s,m=p.getMeta("applyPasteRules"),w=!!m;if(!g&&!y&&!w)return;if(w){let{text:T}=m;typeof T=="string"?T=T:T=mv(ie.from(T),f.schema);const{from:x}=m,R=x+T.length,b=MB(T);return l({rule:c,state:f,from:x,to:{b:R},pasteEvt:b})}const v=h.doc.content.findDiffStart(f.doc.content),S=h.doc.content.findDiffEnd(f.doc.content);if(!(!RB(v)||!S||v===S.b))return l({rule:c,state:f,from:v,to:S,pasteEvt:o})}}))}var Sf=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=V2(t),this.schema=Wz(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Dp(e.name,this.schema)},r=Ee(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return gv([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Dp(r.name,this.schema)},s=[],o=Ee(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&Ee(r,"exitable",i)&&(a.ArrowRight=()=>ys.handleExit({editor:t,mark:r})),o){const h=Object.fromEntries(Object.entries(o()).map(([f,p])=>[f,()=>p({editor:t})]));a={...a,...h}}const l=G$(a);s.push(l);const u=Ee(r,"addInputRules",i);if(wb(r,t.options.enableInputRules)&&u){const h=u();if(h&&h.length){const f=_B({editor:t,rules:h}),p=Array.isArray(f)?f:[f];s.push(...p)}}const c=Ee(r,"addPasteRules",i);if(wb(r,t.options.enablePasteRules)&&c){const h=c();if(h&&h.length){const f=NB({editor:t,rules:h});s.push(...f)}}const d=Ee(r,"addProseMirrorPlugins",i);if(d){const h=d();s.push(...h)}return s})}get attributes(){return U2(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ta(this.extensions);return Object.fromEntries(e.filter(n=>!!Ee(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Nt(n.name,this.schema)},s=Ee(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,u,c,d,h)=>{const f=Zd(l,r);return o({node:l,view:u,getPos:c,decorations:d,innerDecorations:h,editor:t,extension:n,HTMLAttributes:f})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Ta(this.extensions);return Object.fromEntries(e.filter(n=>!!Ee(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:bi(n.name,this.schema)},s=Ee(n,"addMarkView",i);if(!s)return[];const o=(a,l,u)=>{const c=Zd(a,r);return s()({mark:a,view:l,inline:u,editor:t,extension:n,HTMLAttributes:c,updateAttributes:d=>{GB(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Dp(e.name,this.schema)};e.type==="mark"&&((n=et(Ee(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Ee(e,"onBeforeCreate",r),s=Ee(e,"onCreate",r),o=Ee(e,"onUpdate",r),a=Ee(e,"onSelectionUpdate",r),l=Ee(e,"onTransaction",r),u=Ee(e,"onFocus",r),c=Ee(e,"onBlur",r),d=Ee(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};Sf.resolve=V2;Sf.sort=gv;Sf.flatten=pv;var DB={};cv(DB,{ClipboardTextSerializer:()=>eA,Commands:()=>tA,Delete:()=>nA,Drop:()=>rA,Editable:()=>iA,FocusEvents:()=>oA,Keymap:()=>aA,Paste:()=>lA,Tabindex:()=>uA,TextDirection:()=>cA,focusEventsPluginKey:()=>sA});var At=class Z2 extends vv{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Z2(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},eA=At.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new xt({key:new Bt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=W2(n);return H2(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),tA=At.create({name:"commands",addCommands(){return{...M2}}}),nA=At.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const c=B2(t.before,[t,...e]);q2(c).forEach(f=>{c.mapping.mapResult(f.oldRange.from).deletedAfter&&c.mapping.mapResult(f.oldRange.to).deletedBefore&&c.before.nodesBetween(f.oldRange.from,f.oldRange.to,(p,g)=>{const y=g+p.nodeSize-2,m=f.oldRange.from<=g&&y<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:g,to:y,newFrom:c.mapping.map(g),newTo:c.mapping.map(y),deletedRange:f.oldRange,newRange:f.newRange,partial:!m,editor:this.editor,transaction:t,combinedTransform:c})})});const h=c.mapping;c.steps.forEach((f,p)=>{var g,y;if(f instanceof Tr){const m=h.slice(p).map(f.from,-1),w=h.slice(p).map(f.to),v=h.invert().map(m,-1),S=h.invert().map(w),T=(g=c.doc.nodeAt(m-1))==null?void 0:g.marks.some(R=>R.eq(f.mark)),x=(y=c.doc.nodeAt(w))==null?void 0:y.marks.some(R=>R.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:v,to:S},newRange:{from:m,to:w},partial:!!(x||T),editor:this.editor,transaction:t,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),rA=At.create({name:"drop",addProseMirrorPlugins(){return[new xt({key:new Bt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),iA=At.create({name:"editable",addProseMirrorPlugins(){return[new xt({key:new Bt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),sA=new Bt("focusEvents"),oA=At.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new xt({key:sA,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),aA=At.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=p.parent.type.spec.isolating,y=d.pos-d.parentOffset,m=g&&p.parent.childCount===1?y===d.pos:ze.atStart(u).from===h;return!c||!f.type.isTextblock||f.textContent.length||!m||m&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return fv()||$2()?s:i},addProseMirrorPlugins(){return[new xt({key:new Bt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=ze.atStart(e.doc).from,u=ze.atEnd(e.doc).to;if(s||!(o===l&&a===u)||!bf(n.doc))return;const h=n.tr,f=yf({state:n,transaction:h}),{commands:p}=new vf({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),lA=At.create({name:"paste",addProseMirrorPlugins(){return[new xt({key:new Bt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),uA=At.create({name:"tabindex",addProseMirrorPlugins(){return[new xt({key:new Bt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),cA=At.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ta(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new xt({key:new Bt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),LB=class Io{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Io(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Io(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Io(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Io(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Io(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},jB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function $B(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var zB=class extends CB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:nB,createMappablePosition:rB},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=L2(e,this.options.autofocus);this.editorState=Go.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=$B(jB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=F2(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[iA,eA.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),tA,oA,aA,uA,rA,lA,nA,cA.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Sf(r,this)}createCommandManager(){this.commandManager=new vf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Vg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Vg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new O2(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return K2(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Zz(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return mv(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return qz(this.state.doc,{blockSeparator:e,textSerializers:{...W2(this.schema),...n}})}get isEmpty(){return bf(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new LB(e,this)}get $doc(){return this.$pos(0)}};function uo(t){return new kf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=et(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),u=n.from+a.indexOf(o),c=u+o.length;if(yv(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>u).length)return null;c<n.to&&s.delete(c,n.to),u>n.from&&s.delete(n.from+l,u);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function BB(t){return new kf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=et(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=o+u;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const u=t.type.isInline?o:o-1;s.insert(u,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function Wg(t){return new kf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=et(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function _a(t){return new kf({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=et(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),u=l&&Q0(l,t.type,s);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(y=>f.includes(y.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&ms(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&o.join(n.from-1)},undoable:t.undoable})}function FB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Te){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var UB={};cv(UB,{createAtomBlockMarkdownSpec:()=>VB,createBlockMarkdownSpec:()=>HB,createInlineMarkdownSpec:()=>qB,parseAttributes:()=>wv,parseIndentedBlocks:()=>Kg,renderNestedMarkdownContent:()=>bv,serializeAttributes:()=>xv});function wv(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(c=>c.trim().slice(1));e.class=u.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,u,c])=>{var d;const h=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),f=n[h];f&&(e[u]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(e[c]=!0)}),e}function xv(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function VB(t){const{nodeName:e,name:n,parseAttributes:r=wv,serializeAttributes:i=xv,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,u=c=>{if(!a)return c;const d={};return a.forEach(h=>{h in c&&(d[h]=c[h])}),d};return{parseMarkdown:(c,d)=>{const h={...s,...c.attributes};return d.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(c){var d;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(d=c.match(h))==null?void 0:d.index;return f!==void 0?f:-1},tokenize(c,d,h){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=c.match(f);if(!p)return;const g=p[1]||"",y=r(g);if(!o.find(w=>!(w in y)))return{type:e,raw:p[0],attributes:y}}},renderMarkdown:c=>{const d=u(c.attrs||{}),h=i(d),f=h?` {${h}}`:"";return`:::${l}${f} :::`}}}function HB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=wv,serializeAttributes:s=xv,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=n||e,c=d=>{if(!l)return d;const h={};return l.forEach(f=>{f in d&&(h[f]=d[f])}),h};return{parseMarkdown:(d,h)=>{let f;if(r){const g=r(d);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=h.parseChildren(d.tokens||[]):f=h.parseInline(d.tokens||[]);const p={...o,...d.attributes};return h.createNode(e,p,f)},markdownTokenizer:{name:e,level:"block",start(d){var h;const f=new RegExp(`^:::${u}`,"m"),p=(h=d.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(d,h,f){var p;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=d.match(g);if(!y)return;const[m,w=""]=y,v=i(w);let S=1;const T=m.length;let x="";const R=/^:::([\w-]*)(\s.*)?/gm,b=d.slice(T);for(R.lastIndex=0;;){const k=R.exec(b);if(k===null)break;const O=k.index,M=k[1];if(!((p=k[2])!=null&&p.endsWith(":::"))){if(M)S+=1;else if(S-=1,S===0){const N=b.slice(0,O);x=N.trim();const L=d.slice(0,T+O+k[0].length);let D=[];if(x)if(a==="block")for(D=f.blockTokens(N),D.forEach(z=>{z.text&&(!z.tokens||z.tokens.length===0)&&(z.tokens=f.inlineTokens(z.text))});D.length>0;){const z=D[D.length-1];if(z.type==="paragraph"&&(!z.text||z.text.trim()===""))D.pop();else break}else D=f.inlineTokens(x);return{type:e,raw:L,attributes:v,content:x,tokens:D}}}}}},renderMarkdown:(d,h)=>{const f=c(d.attrs||{}),p=s(f),g=p?` {${p}}`:"",y=h.renderChildren(d.content||[],`

`);return`:::${u}${g}

${y}

:::`}}}function WB(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function KB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function qB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=WB,serializeAttributes:s=KB,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=n||e,c=h=>{if(!l)return h;const f={};return l.forEach(p=>{const g=typeof p=="string"?p:p.name,y=typeof p=="string"?void 0:p.skipIfDefault;if(g in h){const m=h[g];if(y!==void 0&&m===y)return;f[g]=m}}),f},d=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,f)=>{const p={...o,...h.attributes};if(a)return f.createNode(e,p);const g=r?r(h):h.content||"";return g?f.createNode(e,p,[f.createTextNode(g)]):f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(h){const f=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=h.match(f),g=p==null?void 0:p.index;return g!==void 0?g:-1},tokenize(h,f,p){const g=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),y=h.match(g);if(!y)return;let m="",w="";if(a){const[,S]=y;w=S}else{const[,S,T]=y;w=S,m=T||""}const v=i(w.trim());return{type:e,raw:y[0],content:m.trim(),attributes:v}}},renderMarkdown:h=>{let f="";r?f=r(h):h.content&&h.content.length>0&&(f=h.content.filter(m=>m.type==="text").map(m=>m.text).join(""));const p=c(h.attrs||{}),g=s(p),y=g?` ${g}`:"";return a?`[${u}${y}]`:`[${u}${y}]${f}[/${u}]`}}}function Kg(t,e,n){var r,i,s,o;const a=t.split(`
`),l=[];let u="",c=0;const d=e.baseIndentSize||2;for(;c<a.length;){const h=a[c],f=h.match(e.itemPattern);if(!f){if(l.length>0)break;if(h.trim()===""){c+=1,u=`${u}${h}
`;continue}else return}const p=e.extractItemData(f),{indentLevel:g,mainContent:y}=p;u=`${u}${h}
`;const m=[y];for(c+=1;c<a.length;){const T=a[c];if(T.trim()===""){const R=a.slice(c+1).findIndex(O=>O.trim()!=="");if(R===-1)break;if((((i=(r=a[c+1+R].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){m.push(T),u=`${u}${T}
`,c+=1;continue}else break}if((((o=(s=T.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)m.push(T),u=`${u}${T}
`,c+=1;else break}let w;const v=m.slice(1);if(v.length>0){const T=v.map(x=>x.slice(g+d)).join(`
`);T.trim()&&(e.customNestedParser?w=e.customNestedParser(T):w=n.blockTokens(T))}const S=e.createToken(p,w);l.push(S)}if(l.length!==0)return{items:l,raw:u}}function bv(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(u=>{const c=e.renderChildren([u]);if(c){const d=c.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(d)}}),l.join(`
`)}function GB(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((a,l)=>{const u=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(f=>{if(f!==o)return!1;d=f}),!d)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==d.attrs[f]&&(h=!0)}),h){const f=t.type.create({...t.attrs,...n});s.removeMark(u,c,t.type),s.addMark(u,c,f)}}),s.docChanged&&e.view.dispatch(s)}var qn=class dA extends vv{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new dA(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function ls(t){return new PB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=et(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(yv(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+c,d),u=n.from+c+a.length,o.addMark(n.from+c,u,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:JB,getOwnPropertySymbols:YB}=Object,{hasOwnProperty:QB}=Object.prototype;function $p(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Sc(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=t(n,r,i);return s.delete(n),s.delete(r),l}}function XB(t){return t!=null?t[Symbol.toStringTag]:void 0}function kb(t){return JB(t).concat(YB(t))}const ZB=Object.hasOwn||((t,e)=>QB.call(t,e));function po(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const eF="__v",tF="__o",nF="_owner",{getOwnPropertyDescriptor:Sb,keys:Eb}=Object;function rF(t,e){return t.byteLength===e.byteLength&&eh(new Uint8Array(t),new Uint8Array(e))}function iF(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function sF(t,e){return t.byteLength===e.byteLength&&eh(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function oF(t,e){return po(t.getTime(),e.getTime())}function aF(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function lF(t,e){return t===e}function Cb(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let c=!1,d=0;for(;(a=u.next())&&!a.done;){if(i[d]){d++;continue}const h=o.value,f=a.value;if(n.equals(h[0],f[0],l,d,t,e,n)&&n.equals(h[1],f[1],h[0],f[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const uF=po;function cF(t,e,n){const r=Eb(t);let i=r.length;if(Eb(e).length!==i)return!1;for(;i-- >0;)if(!hA(t,e,n,r[i]))return!1;return!0}function Xa(t,e,n){const r=kb(t);let i=r.length;if(kb(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!hA(t,e,n,s)||(o=Sb(t,s),a=Sb(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function dF(t,e){return po(t.valueOf(),e.valueOf())}function hF(t,e){return t.source===e.source&&t.flags===e.flags}function Tb(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let u=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function eh(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function fF(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function hA(t,e,n,r){return(r===nF||r===tF||r===eF)&&(t.$$typeof||e.$$typeof)?!0:ZB(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const pF="[object ArrayBuffer]",mF="[object Arguments]",gF="[object Boolean]",yF="[object DataView]",vF="[object Date]",wF="[object Error]",xF="[object Map]",bF="[object Number]",kF="[object Object]",SF="[object RegExp]",EF="[object Set]",CF="[object String]",TF={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},_F="[object URL]",AF=Object.prototype.toString;function RF({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:f,unknownTagComparators:p}){return function(y,m,w){if(y===m)return!0;if(y==null||m==null)return!1;const v=typeof y;if(v!==typeof m)return!1;if(v!=="object")return v==="number"?a(y,m,w):v==="function"?s(y,m,w):!1;const S=y.constructor;if(S!==m.constructor)return!1;if(S===Object)return l(y,m,w);if(Array.isArray(y))return e(y,m,w);if(S===Date)return r(y,m,w);if(S===RegExp)return c(y,m,w);if(S===Map)return o(y,m,w);if(S===Set)return d(y,m,w);const T=AF.call(y);if(T===vF)return r(y,m,w);if(T===SF)return c(y,m,w);if(T===xF)return o(y,m,w);if(T===EF)return d(y,m,w);if(T===kF)return typeof y.then!="function"&&typeof m.then!="function"&&l(y,m,w);if(T===_F)return f(y,m,w);if(T===wF)return i(y,m,w);if(T===mF)return l(y,m,w);if(TF[T])return h(y,m,w);if(T===pF)return t(y,m,w);if(T===yF)return n(y,m,w);if(T===gF||T===bF||T===CF)return u(y,m,w);if(p){let x=p[T];if(!x){const R=XB(y);R&&(x=p[R])}if(x)return x(y,m,w)}return!1}}function PF({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:rF,areArraysEqual:n?Xa:iF,areDataViewsEqual:sF,areDatesEqual:oF,areErrorsEqual:aF,areFunctionsEqual:lF,areMapsEqual:n?$p(Cb,Xa):Cb,areNumbersEqual:uF,areObjectsEqual:n?Xa:cF,arePrimitiveWrappersEqual:dF,areRegExpsEqual:hF,areSetsEqual:n?$p(Tb,Xa):Tb,areTypedArraysEqual:n?$p(eh,Xa):eh,areUrlsEqual:fF,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Sc(r.areArraysEqual),s=Sc(r.areMapsEqual),o=Sc(r.areObjectsEqual),a=Sc(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function OF(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function IF({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:c}=n();return e(a,l,{cache:u,equals:r,meta:c,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const MF=vs();vs({strict:!0});vs({circular:!0});vs({circular:!0,strict:!0});vs({createInternalComparator:()=>po});vs({strict:!0,createInternalComparator:()=>po});vs({circular:!0,createInternalComparator:()=>po});vs({circular:!0,createInternalComparator:()=>po,strict:!0});function vs(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=PF(t),o=RF(s),a=n?n(o):OF(o);return IF({circular:e,comparator:o,createState:r,equals:a,strict:i})}var fA={exports:{}},pA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=P,NF=G0;function DF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LF=typeof Object.is=="function"?Object.is:DF,jF=NF.useSyncExternalStore,$F=Ef.useRef,zF=Ef.useEffect,BF=Ef.useMemo,FF=Ef.useDebugValue;pA.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=$F(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=BF(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,LF(c,f))return p;var g=r(f);return i!==void 0&&i(p,g)?(c=f,p):(c=f,d=g)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=jF(t,s[0],s[1]);return zF(function(){o.hasValue=!0,o.value=a},[a]),FF(a),a};fA.exports=pA;var UF=fA.exports,VF=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},HF=({contentComponent:t})=>{const e=G0.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return E.jsx(E.Fragment,{children:Object.values(e)})};function WF(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:AM.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var KF=class extends di.Component{constructor(t){var e;super(t),this.editorContentRef=di.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=WF(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return E.jsxs(E.Fragment,{children:[E.jsx("div",{ref:VF(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&E.jsx(HF,{contentComponent:t.contentComponent})]})}},qF=P.forwardRef((t,e)=>{const n=di.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return di.createElement(KF,{key:n,innerRef:e,...t})}),GF=di.memo(qF),JF=typeof window<"u"?P.useLayoutEffect:P.useEffect,YF=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function QF(t){var e;const[n]=P.useState(()=>new YF(t.editor)),r=UF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:MF);return JF(()=>n.watch(t.editor),[t.editor,n]),P.useDebugValue(r),r}var XF=!1,qg=typeof window>"u",ZF=qg||!!(typeof window<"u"&&window.next),eU=class mA{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return qg||ZF?null:this.createEditor();if(this.options.current.immediatelyRender&&qg&&XF)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new zB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?mA.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function tU(t={},e=[]){const n=P.useRef(t);n.current=t;const[r]=P.useState(()=>new eU(n)),i=G0.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return P.useDebugValue(i),P.useEffect(r.onRender(e)),QF({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var nU=P.createContext({editor:null});nU.Consumer;var rU=P.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),iU=()=>P.useContext(rU);di.forwardRef((t,e)=>{const{onDragStart:n}=iU(),r=t.as||"div";return E.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});di.createContext({markViewContentRef:()=>{}});var th=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},sU=/^\s*>\s$/,oU=qn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return th("blockquote",{..._t(this.options.HTMLAttributes,t),children:th("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[_a({find:sU,type:this.type})]}}),aU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,lU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uU=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,cU=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,dU=ys.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return th("strong",{..._t(this.options.HTMLAttributes,t),children:th("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[uo({find:aU,type:this.type}),uo({find:uU,type:this.type})]},addPasteRules(){return[ls({find:lU,type:this.type}),ls({find:cU,type:this.type})]}}),hU=/(^|[^`])`([^`]+)`(?!`)$/,fU=/(^|[^`])`([^`]+)`(?!`)/g,pU=ys.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",_t(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[uo({find:hU,type:this.type})]},addPasteRules(){return[ls({find:fU,type:this.type})]}}),zp=4,mU=/^```([a-z]+)?[\s\n]$/,gU=/^~~~([a-z]+)?[\s\n]$/,yU=qn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:zp,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",_t(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:zp,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:c}=i,f=r.doc.textBetween(u,c,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(u,c,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:zp,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=s,c=s.start(),d=s.end(),f=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let p=0,g=0;const y=u-c;for(let x=0;x<f.length;x+=1){if(g+f[x].length>=y){p=x;break}g+=f[x].length+1}const w=((l=f[p].match(/^ */))==null?void 0:l[0])||"",v=Math.min(w.length,n);if(v===0)return!0;let S=c;for(let x=0;x<p;x+=1)S+=f[x].length+1;return a.delete(S,S+v),u-S<=v&&a.setSelection(Ne.create(a.doc,S)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=i,h=r.doc.textBetween(l,u,`
`,`
`).split(`
`).map(f=>{var p;const g=((p=f.match(/^ */))==null?void 0:p[0])||"",y=Math.min(g.length,n);return f.slice(y)}).join(`
`);return a.replaceWith(l,u,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(ze.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[Wg({find:mU,type:this.type,getAttributes:t=>({language:t[1]})}),Wg({find:gU,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new xt({key:new Bt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ne.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),vU=qn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),wU=qn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",_t(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const d=l.filter(h=>a.includes(h.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),xU=qn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,_t(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Wg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),bU=qn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",_t(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!FB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return G2(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Ne.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(Te.create(o.doc,l.pos)):o.setSelection(Ne.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(u,d),o.setSelection(Ne.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[BB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),kU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,SU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,EU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,CU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,TU=ys.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",_t(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[uo({find:kU,type:this.type}),uo({find:EU,type:this.type})]},addPasteRules(){return[ls({find:SU,type:this.type}),ls({find:CU,type:this.type})]}});const _U="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",AU="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Gg="numeric",Jg="ascii",Yg="alpha",Al="asciinumeric",dl="alphanumeric",Qg="domain",gA="emoji",RU="scheme",PU="slashscheme",Bp="whitespace";function OU(t,e){return t in e||(e[t]=[]),e[t]}function Us(t,e,n){e[Gg]&&(e[Al]=!0,e[dl]=!0),e[Jg]&&(e[Al]=!0,e[Yg]=!0),e[Al]&&(e[dl]=!0),e[Yg]&&(e[dl]=!0),e[dl]&&(e[Qg]=!0),e[gA]&&(e[Qg]=!0);for(const r in e){const i=OU(r,n);i.indexOf(t)<0&&i.push(t)}}function IU(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Cn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Cn.groups={};Cn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Cn.groups;let i;return e&&e.j?i=e:(i=new Cn(e),n&&r&&Us(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Cn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Cn,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Cn,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(IU(o.t,r),n);Us(s,l,r)}else n&&Us(s,n,r);o.t=s}return i.j[t]=o,o}};const $e=(t,e,n,r,i)=>t.ta(e,n,r,i),bt=(t,e,n,r,i)=>t.tr(e,n,r,i),_b=(t,e,n,r,i)=>t.ts(e,n,r,i),se=(t,e,n,r,i)=>t.tt(e,n,r,i),ei="WORD",Xg="UWORD",yA="ASCIINUMERICAL",vA="ALPHANUMERICAL",ku="LOCALHOST",Zg="TLD",ey="UTLD",Zc="SCHEME",Mo="SLASH_SCHEME",kv="NUM",ty="WS",Sv="NL",Rl="OPENBRACE",Pl="CLOSEBRACE",nh="OPENBRACKET",rh="CLOSEBRACKET",ih="OPENPAREN",sh="CLOSEPAREN",oh="OPENANGLEBRACKET",ah="CLOSEANGLEBRACKET",lh="FULLWIDTHLEFTPAREN",uh="FULLWIDTHRIGHTPAREN",ch="LEFTCORNERBRACKET",dh="RIGHTCORNERBRACKET",hh="LEFTWHITECORNERBRACKET",fh="RIGHTWHITECORNERBRACKET",ph="FULLWIDTHLESSTHAN",mh="FULLWIDTHGREATERTHAN",gh="AMPERSAND",yh="APOSTROPHE",vh="ASTERISK",Oi="AT",wh="BACKSLASH",xh="BACKTICK",bh="CARET",ji="COLON",Ev="COMMA",kh="DOLLAR",Lr="DOT",Sh="EQUALS",Cv="EXCLAMATION",Yn="HYPHEN",Ol="PERCENT",Eh="PIPE",Ch="PLUS",Th="POUND",Il="QUERY",Tv="QUOTE",wA="FULLWIDTHMIDDLEDOT",_v="SEMI",jr="SLASH",Ml="TILDE",_h="UNDERSCORE",xA="EMOJI",Ah="SYM";var bA=Object.freeze({__proto__:null,ALPHANUMERICAL:vA,AMPERSAND:gh,APOSTROPHE:yh,ASCIINUMERICAL:yA,ASTERISK:vh,AT:Oi,BACKSLASH:wh,BACKTICK:xh,CARET:bh,CLOSEANGLEBRACKET:ah,CLOSEBRACE:Pl,CLOSEBRACKET:rh,CLOSEPAREN:sh,COLON:ji,COMMA:Ev,DOLLAR:kh,DOT:Lr,EMOJI:xA,EQUALS:Sh,EXCLAMATION:Cv,FULLWIDTHGREATERTHAN:mh,FULLWIDTHLEFTPAREN:lh,FULLWIDTHLESSTHAN:ph,FULLWIDTHMIDDLEDOT:wA,FULLWIDTHRIGHTPAREN:uh,HYPHEN:Yn,LEFTCORNERBRACKET:ch,LEFTWHITECORNERBRACKET:hh,LOCALHOST:ku,NL:Sv,NUM:kv,OPENANGLEBRACKET:oh,OPENBRACE:Rl,OPENBRACKET:nh,OPENPAREN:ih,PERCENT:Ol,PIPE:Eh,PLUS:Ch,POUND:Th,QUERY:Il,QUOTE:Tv,RIGHTCORNERBRACKET:dh,RIGHTWHITECORNERBRACKET:fh,SCHEME:Zc,SEMI:_v,SLASH:jr,SLASH_SCHEME:Mo,SYM:Ah,TILDE:Ml,TLD:Zg,UNDERSCORE:_h,UTLD:ey,UWORD:Xg,WORD:ei,WS:ty});const Xr=/[a-z]/,Za=/\p{L}/u,Fp=/\p{Emoji}/u,Zr=/\d/,Up=/\s/,Ab="\r",Vp=`
`,MU="",NU="",Hp="";let Ec=null,Cc=null;function DU(t=[]){const e={};Cn.groups=e;const n=new Cn;Ec==null&&(Ec=Rb(_U)),Cc==null&&(Cc=Rb(AU)),se(n,"'",yh),se(n,"{",Rl),se(n,"}",Pl),se(n,"[",nh),se(n,"]",rh),se(n,"(",ih),se(n,")",sh),se(n,"<",oh),se(n,">",ah),se(n,"",lh),se(n,"",uh),se(n,"",ch),se(n,"",dh),se(n,"",hh),se(n,"",fh),se(n,"",ph),se(n,"",mh),se(n,"&",gh),se(n,"*",vh),se(n,"@",Oi),se(n,"`",xh),se(n,"^",bh),se(n,":",ji),se(n,",",Ev),se(n,"$",kh),se(n,".",Lr),se(n,"=",Sh),se(n,"!",Cv),se(n,"-",Yn),se(n,"%",Ol),se(n,"|",Eh),se(n,"+",Ch),se(n,"#",Th),se(n,"?",Il),se(n,'"',Tv),se(n,"/",jr),se(n,";",_v),se(n,"~",Ml),se(n,"_",_h),se(n,"\\",wh),se(n,"",wA);const r=bt(n,Zr,kv,{[Gg]:!0});bt(r,Zr,r);const i=bt(r,Xr,yA,{[Al]:!0}),s=bt(r,Za,vA,{[dl]:!0}),o=bt(n,Xr,ei,{[Jg]:!0});bt(o,Zr,i),bt(o,Xr,o),bt(i,Zr,i),bt(i,Xr,i);const a=bt(n,Za,Xg,{[Yg]:!0});bt(a,Xr),bt(a,Zr,s),bt(a,Za,a),bt(s,Zr,s),bt(s,Xr),bt(s,Za,s);const l=se(n,Vp,Sv,{[Bp]:!0}),u=se(n,Ab,ty,{[Bp]:!0}),c=bt(n,Up,ty,{[Bp]:!0});se(n,Hp,c),se(u,Vp,l),se(u,Hp,c),bt(u,Up,c),se(c,Ab),se(c,Vp),bt(c,Up,c),se(c,Hp,c);const d=bt(n,Fp,xA,{[gA]:!0});se(d,"#"),bt(d,Fp,d),se(d,MU,d);const h=se(d,NU);se(h,"#"),bt(h,Fp,d);const f=[[Xr,o],[Zr,i]],p=[[Xr,null],[Za,a],[Zr,s]];for(let g=0;g<Ec.length;g++)Si(n,Ec[g],Zg,ei,f);for(let g=0;g<Cc.length;g++)Si(n,Cc[g],ey,Xg,p);Us(Zg,{tld:!0,ascii:!0},e),Us(ey,{utld:!0,alpha:!0},e),Si(n,"file",Zc,ei,f),Si(n,"mailto",Zc,ei,f),Si(n,"http",Mo,ei,f),Si(n,"https",Mo,ei,f),Si(n,"ftp",Mo,ei,f),Si(n,"ftps",Mo,ei,f),Us(Zc,{scheme:!0,ascii:!0},e),Us(Mo,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],w=t[g][1]?{[RU]:!0}:{[PU]:!0};y.indexOf("-")>=0?w[Qg]=!0:Xr.test(y)?Zr.test(y)?w[Al]=!0:w[Jg]=!0:w[Gg]=!0,_b(n,y,y,w)}return _b(n,"localhost",ku,{ascii:!0}),n.jd=new Cn(Ah),{start:n,tokens:Object.assign({groups:e},bA)}}function kA(t,e){const n=LU(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,l=null,u=0,c=null,d=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,h=0,c=a):d>=0&&(d+=n[o].length,h++),u+=n[o].length,s+=n[o].length,o++;s-=d,o-=h,u-=d,i.push({t:c.t,v:e.slice(s-u,s),s:s-u,e:s})}return i}function LU(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Si(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new Cn(r),s.jr=i.slice(),t.j[l]=s),t=s}return s=new Cn(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Rb(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Su={defaultProtocol:"http",events:null,format:Pb,formatHref:Pb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Av(t,e=null){let n=Object.assign({},Su);t&&(n=Object.assign(n,t instanceof Av?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Av.prototype={o:Su,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Su[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Pb(t){return t}function SA(t,e){this.t="token",this.v=t,this.tk=e}SA.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Su.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function Cf(t,e){class n extends SA{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Ob=Cf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ib=Cf("text"),jU=Cf("nl"),Tc=Cf("url",{isLink:!0,toHref(t=Su.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==ku&&t[1].t===ji}}),Jn=t=>new Cn(t);function $U({groups:t}){const e=t.domain.concat([gh,vh,Oi,wh,xh,bh,kh,Sh,Yn,kv,Ol,Eh,Ch,Th,jr,Ah,Ml,_h]),n=[yh,ji,Ev,Lr,Cv,Ol,Il,Tv,_v,oh,ah,Rl,Pl,rh,nh,ih,sh,lh,uh,ch,dh,hh,fh,ph,mh],r=[gh,yh,vh,wh,xh,bh,kh,Sh,Yn,Rl,Pl,Ol,Eh,Ch,Th,Il,jr,Ah,Ml,_h],i=Jn(),s=se(i,Ml);$e(s,r,s),$e(s,t.domain,s);const o=Jn(),a=Jn(),l=Jn();$e(i,t.domain,o),$e(i,t.scheme,a),$e(i,t.slashscheme,l),$e(o,r,s),$e(o,t.domain,o);const u=se(o,Oi);se(s,Oi,u),se(a,Oi,u),se(l,Oi,u);const c=se(s,Lr);$e(c,r,s),$e(c,t.domain,s);const d=Jn();$e(u,t.domain,d),$e(d,t.domain,d);const h=se(d,Lr);$e(h,t.domain,d);const f=Jn(Ob);$e(h,t.tld,f),$e(h,t.utld,f),se(u,ku,f);const p=se(d,Yn);se(p,Yn,p),$e(p,t.domain,d),$e(f,t.domain,d),se(f,Lr,h),se(f,Yn,p);const g=se(f,ji);$e(g,t.numeric,Ob);const y=se(o,Yn),m=se(o,Lr);se(y,Yn,y),$e(y,t.domain,o),$e(m,r,s),$e(m,t.domain,o);const w=Jn(Tc);$e(m,t.tld,w),$e(m,t.utld,w),$e(w,t.domain,o),$e(w,r,s),se(w,Lr,m),se(w,Yn,y),se(w,Oi,u);const v=se(w,ji),S=Jn(Tc);$e(v,t.numeric,S);const T=Jn(Tc),x=Jn();$e(T,e,T),$e(T,n,x),$e(x,e,T),$e(x,n,x),se(w,jr,T),se(S,jr,T);const R=se(a,ji),b=se(l,ji),k=se(b,jr),O=se(k,jr);$e(a,t.domain,o),se(a,Lr,m),se(a,Yn,y),$e(l,t.domain,o),se(l,Lr,m),se(l,Yn,y),$e(R,t.domain,T),se(R,jr,T),se(R,Il,T),$e(O,t.domain,T),$e(O,e,T),se(O,jr,T);const M=[[Rl,Pl],[nh,rh],[ih,sh],[oh,ah],[lh,uh],[ch,dh],[hh,fh],[ph,mh]];for(let N=0;N<M.length;N++){const[L,D]=M[N],z=se(T,L);se(x,L,z),se(z,D,T);const I=Jn(Tc);$e(z,e,I);const _=Jn();$e(z,n),$e(I,e,I),$e(I,n,_),$e(_,e,I),$e(_,n,_),se(I,D,T),se(_,D,T)}return se(i,ku,w),se(i,Sv,jU),{start:i,tokens:bA}}function zU(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,l=null,u=null,c=0,d=null,h=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=l||a.go(n[i].t));)l=null,a=u,a.accepts()?(h=0,d=a):h>=0&&h++,i++,c++;if(h<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Wp(Ib,e,o)),o=[]),i-=h,c-=h;const f=d.t,p=n.slice(i-c,i);s.push(Wp(f,e,p))}}return o.length>0&&s.push(Wp(Ib,e,o)),s}function Wp(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const BU=typeof console<"u"&&console&&console.warn||(()=>{}),FU="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ut={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function UU(){return Cn.groups={},ut.scanner=null,ut.parser=null,ut.tokenQueue=[],ut.pluginQueue=[],ut.customSchemes=[],ut.initialized=!1,ut}function Mb(t,e=!1){if(ut.initialized&&BU(`linkifyjs: already initialized - will not register custom scheme "${t}" ${FU}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ut.customSchemes.push([t,e])}function VU(){ut.scanner=DU(ut.customSchemes);for(let t=0;t<ut.tokenQueue.length;t++)ut.tokenQueue[t][1]({scanner:ut.scanner});ut.parser=$U(ut.scanner.tokens);for(let t=0;t<ut.pluginQueue.length;t++)ut.pluginQueue[t][1]({scanner:ut.scanner,parser:ut.parser});return ut.initialized=!0,ut}function Rv(t){return ut.initialized||VU(),zU(ut.parser.start,t,kA(ut.scanner.start,t))}Rv.scan=kA;function EA(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Av(n),i=Rv(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var Pv="[\0- -\u2029]",HU=new RegExp(Pv),WU=new RegExp(`${Pv}$`),KU=new RegExp(Pv,"g");function qU(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function GU(t){return new xt({key:new Bt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=B2(n.doc,[...e]);if(q2(a).forEach(({newRange:u})=>{const c=Fz(r.doc,u,f=>f.isTextblock);let d,h;if(c.length>1)d=c[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const f=r.doc.textBetween(u.from,u.to," "," ");if(!WU.test(f))return;d=c[0],h=r.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&h){const f=h.split(HU).filter(Boolean);if(f.length<=0)return!1;const p=f[f.length-1],g=d.pos+h.lastIndexOf(p);if(!p)return!1;const y=Rv(p).map(m=>m.toObject(t.defaultProtocol));if(!qU(y))return!1;y.filter(m=>m.isLink).map(m=>({...m,from:g+m.start+1,to:g+m.end+1})).filter(m=>r.schema.marks.code?!r.doc.rangeHasMark(m.from,m.to,r.schema.marks.code):!0).filter(m=>t.validate(m.value)).filter(m=>t.shouldAutoLink(m.value)).forEach(m=>{yv(m.from,m.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(m.from,m.to,t.type.create({href:m.href}))})}}),!!o.steps.length)return o}})}function JU(t){return new xt({key:new Bt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const h=[];for(;d.nodeName!=="DIV";)h.push(d),d=d.parentNode;a=h.find(f=>f.nodeName==="A")}if(!a)return o;const l=K2(e.state,t.type.name),u=(i=a==null?void 0:a.href)!=null?i:l.href,c=(s=a==null?void 0:a.target)!=null?s:l.target;a&&u&&(window.open(u,c),o=!0)}return o}}})}function YU(t){return new xt({key:new Bt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const u=EA(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!u||i!==void 0&&!i(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Es(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(KU,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var CA=ys.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Mb(t);return}Mb(t.scheme,t.optionalSlashes)})},onDestroy(){UU()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Es(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Es(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Es(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",_t(this.options.HTMLAttributes,t),0]:["a",_t(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Es(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Es(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ls({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=EA(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Es(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(GU({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Es(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(JU({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(YU({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),QU=CA,XU=Object.defineProperty,ZU=(t,e)=>{for(var n in e)XU(t,n,{get:e[n],enumerable:!0})},eV="listItem",Nb="textStyle",Db=/^\s*([-+*])\s$/,TA=qn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",_t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(eV,this.editor.getAttributes(Nb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=_a({find:Db,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=_a({find:Db,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Nb),editor:this.editor})),[t]}}),_A=qn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",_t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>bv(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),tV={};ZU(tV,{findListItemPos:()=>Fu,getNextListDepth:()=>Ov,handleBackspace:()=>ny,handleDelete:()=>ry,hasListBefore:()=>AA,hasListItemAfter:()=>nV,hasListItemBefore:()=>RA,listItemHasSubList:()=>PA,nextListIsDeeper:()=>OA,nextListIsHigher:()=>IA});var Fu=(t,e)=>{const{$from:n}=e.selection,r=Nt(t,e.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Ov=(t,e)=>{const n=Fu(t,e);if(!n)return!1;const[,r]=Qz(e,t,n.$pos.pos+4);return r},AA=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},RA=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},PA=(t,e,n)=>{if(!n)return!1;const r=Nt(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},ny=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!as(t.state,e)&&AA(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((h,f)=>{h.type.name===e&&u.push({node:h,pos:f})});const c=u.at(-1);if(!c)return!1;const d=t.state.doc.resolve(l.start()+c.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!as(t.state,e)||!tB(t.state))return!1;const r=Fu(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=PA(e,t.state,s);return RA(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},OA=(t,e)=>{const n=Ov(t,e),r=Fu(t,e);return!r||!n?!1:n>r.depth},IA=(t,e)=>{const n=Ov(t,e),r=Fu(t,e);return!r||!n?!1:n<r.depth},ry=(t,e)=>{if(!as(t.state,e)||!eB(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:OA(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():IA(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},nV=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},MA=At.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ry(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&ry(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&ny(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&ny(t,n,r)&&(e=!0)}),e}}}}),Lb=/^(\s*)(\d+)\.\s+(.*)$/,rV=/^\s/;function iV(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(Lb);if(!s)break;const[,o,a,l]=s,u=o.length;let c=l,d=n+1;const h=[i];for(;d<t.length;){const f=t[d];if(f.match(Lb))break;if(f.trim()==="")h.push(f),c+=`
`,d+=1;else if(f.match(rV))h.push(f),c+=`
${f.slice(u+2)}`,d+=1;else break}e.push({indent:u,number:parseInt(a,10),content:c.trim(),raw:h.join(`
`)}),r=d,n=d}return[e,r]}function NA(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const f=n.blockTokens(c);u.push(...f)}let d=s+1;const h=[];for(;d<t.length&&t[d].indent>e;)h.push(t[d]),d+=1;if(h.length>0){const f=Math.min(...h.map(g=>g.indent)),p=NA(h,f,n);u.push({type:"list",ordered:!0,start:h[0].number,items:p,raw:h.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:u}),s=d}else s+=1}return i}function sV(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var oV="listItem",jb="textStyle",$b=/^(\d+)\.\s$/,DA=qn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",_t(this.options.HTMLAttributes,n),0]:["ol",_t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?sV(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=iV(i);if(s.length===0)return;const a=NA(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(oV,this.editor.getAttributes(jb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=_a({find:$b,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=_a({find:$b,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(jb)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),aV=/^\s*(\[([( |x])?\])\s$/,LA=qn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",_t(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return bv(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=c=>{var d,h;a.ariaLabel=((h=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:h.call(d,c,a.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return u(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",c=>c.preventDefault()),a.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const f=n();if(typeof f!="number")return!1;const p=h.doc.nodeAt(f);return h.setNodeMarkup(f,void 0,{...p==null?void 0:p.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{i.setAttribute(c,d)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([c,d])=>{i.setAttribute(c,d)}),{dom:i,contentDOM:l,update:c=>c.type!==this.type?!1:(i.dataset.checked=c.attrs.checked,a.checked=c.attrs.checked,u(c),!0)}}},addInputRules(){return[_a({find:aV,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),jA=qn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",_t(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=Kg(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=Kg(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});At.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(TA.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(_A.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(MA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(DA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(LA.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(jA.configure(this.options.taskList)),t}});var lV=qn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",_t(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,cV=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,dV=ys.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",_t(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[uo({find:uV,type:this.type})]},addPasteRules(){return[ls({find:cV,type:this.type})]}}),hV=qn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),fV=ys.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",_t(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function pV(t={}){return new xt({view(e){return new mV(e,t)}})}class mV{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=d?p.bottom:p.top;d&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:p.left,right:p.right,top:g-y,bottom:g+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;u=d.left-l.scrollLeft*h,c=d.top-l.scrollTop*f}this.element.style.left=(r.left-u)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=j_(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ct extends ze{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ct.valid(r)?new Ct(r):ze.near(r)}content(){return me.empty}eq(e){return e instanceof Ct&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ct(e.resolve(n.pos))}getBookmark(){return new Iv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!gV(e)||!yV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ct.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Ct.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Te.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Ct.valid(a))return a}return null}}}Ct.prototype.visible=!1;Ct.findFrom=Ct.findGapCursorFrom;ze.jsonID("gapcursor",Ct);class Iv{constructor(e){this.pos=e}map(e){return new Iv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ct.valid(n)?new Ct(n):ze.near(n)}}function $A(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function gV(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||$A(i.type))return!0;if(i.inlineContent)return!1}}return!0}function yV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||$A(i.type))return!0;if(i.inlineContent)return!1}}return!0}function vV(){return new xt({props:{decorations:kV,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ct.valid(n)?new Ct(n):null},handleClick:xV,handleKeyDown:wV,handleDOMEvents:{beforeinput:bV}}})}const wV=I2({ArrowLeft:_c("horiz",-1),ArrowRight:_c("horiz",1),ArrowUp:_c("vert",-1),ArrowDown:_c("vert",1)});function _c(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ne){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Ct.findGapCursorFrom(a,e,l);return u?(i&&i(r.tr.setSelection(new Ct(u))),!0):!1}}function xV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ct.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Te.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ct(r))),!0)}function bV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ct))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=ie.empty;for(let o=r.length-1;o>=0;o--)i=ie.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new me(i,0,0));return s.setSelection(Ne.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function kV(t){if(!(t.selection instanceof Ct))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",gt.create(t.doc,[mn.widget(t.selection.head,e,{key:"gapcursor"})])}var Rh=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<Rh&&this.leafAppend(e)||this.length<Rh&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new SV(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};qt.from=function(e){return e instanceof qt?e:e&&e.length?new zA(e):qt.empty};var zA=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Rh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Rh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(qt);qt.empty=new zA([]);var SV=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qt);const EV=500;class Er{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new $r(d.map));let f=d.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new $r(p,void 0,void 0,u.length+c.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Er(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),h=new $r(e.mapping.maps[c],d,n),f;(f=l&&l.merge(h))&&(h=f,c?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let u=o-r.depth;return u>TV&&(a=CV(a,u),o-=u),new Er(a.append(s),o)}remapping(e,n){let r=new gu;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Er(this.items.append(e.map(n=>new $r(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),y=h.selection&&h.selection.map(s.slice(l+1,f));y&&a++,r.push(new $r(p,g,y))}else r.push(new $r(p))},i);let u=[];for(let h=n;h<o;h++)u.push(new $r(s.maps[h]));let c=this.items.slice(0,i).append(u).append(r),d=new Er(c,a);return d.emptyItemCount()>EV&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new $r(u.invert(),l,c),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new Er(qt.from(i.reverse()),s)}}Er.empty=new Er(qt.empty,0);function CV(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class $r{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new $r(n.getMap().invert(),n,this.selection)}}}class Ii{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const TV=20;function _V(t,e,n,r){let i=n.getMeta(Qs),s;if(i)return i.historyState;n.getMeta(PV)&&(t=new Ii(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Qs))return o.getMeta(Qs).redo?new Ii(t.done.addTransform(n,void 0,r,ed(e)),t.undone,zb(n.mapping.maps),t.prevTime,t.prevComposition):new Ii(t.done,t.undone.addTransform(n,void 0,r,ed(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!AV(n,t.prevRanges)),u=o?Kp(t.prevRanges,n.mapping):zb(n.mapping.maps);return new Ii(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,ed(e)),Er.empty,u,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ii(t.done.rebased(n,s),t.undone.rebased(n,s),Kp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ii(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Kp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function AV(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function zb(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Kp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function RV(t,e,n){let r=ed(e),i=Qs.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Ii(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Qs,{redo:n,historyState:l})}let qp=!1,Bb=null;function ed(t){let e=t.plugins;if(Bb!=e){qp=!1,Bb=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){qp=!0;break}}return qp}const Qs=new Bt("history"),PV=new Bt("closeHistory");function OV(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xt({key:Qs,state:{init(){return new Ii(Er.empty,Er.empty,null,0,-1)},apply(e,n,r){return _V(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?FA:r=="historyRedo"?UA:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function BA(t,e){return(n,r)=>{let i=Qs.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=RV(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const FA=BA(!1,!0),UA=BA(!0,!0);At.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new xt({key:new Bt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-r,u=a-l,c=a;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>r)}})]}});var IV=At.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[pV(this.options)]}});At.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new xt({key:new Bt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return gt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(mn.node(u,u+l.nodeSize,{class:this.options.className}))}),gt.create(t,s)}}})]}});var MV=At.create({name:"gapCursor",addProseMirrorPlugins(){return[vV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=et(Ee(t,"allowGapCursor",n)))!=null?e:null}}}),NV=At.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new xt({key:new Bt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,u=!o.isLeaf&&bf(o);if((l||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];s&&c.push(this.options.emptyEditorClass);const d=mn.node(a,a+o.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),gt.create(t,i)}}})]}});At.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new xt({key:new Bt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||G2(n.selection)||t.view.dragging?null:gt.create(n.doc,[mn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Fb({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var DV=At.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Bt(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new xt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:u}=o,c=e.getState(o),d=a.content.size,h=u.nodes[n];if(c)return l.insert(d,h.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!Fb({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!Fb({node:o,types:r})}}})]}}),LV=At.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>FA(t,e),redo:()=>({state:t,dispatch:e})=>UA(t,e)}},addProseMirrorPlugins(){return[OV(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),jV=At.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(dU.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(oU.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(TA.configure(this.options.bulletList)),this.options.code!==!1&&i.push(pU.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(yU.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(vU.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(IV.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(MV.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(wU.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(xU.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(LV.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(bU.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(TU.configure(this.options.italic)),this.options.listItem!==!1&&i.push(_A.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(MA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(CA.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(DA.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(lV.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(dV.configure(this.options.strike)),this.options.text!==!1&&i.push(hV.configure(this.options.text)),this.options.underline!==!1&&i.push(fV.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(DV.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),$V=jV,zV=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,BV=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,FV=ys.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",_t(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const i=/^(==)([^=]+)(==)/.exec(t);if(i){const s=i[2].trim(),o=n.inlineTokens(s);return{type:"highlight",raw:i[0],text:s,tokens:o}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[uo({find:zV,type:this.type})]},addPasteRules(){return[ls({find:BV,type:this.type})]}}),UV=FV,VV=NV,HV=jA,WV=LA;const KV=({initialContent:t,onChange:e,editable:n=!0,className:r="",placeholder:i="...",textSizeClass:s="text-base",descFontClass:o="font-normal",autoFocus:a=!1})=>{const l=tU({extensions:[$V,QU.configure({openOnClick:!1,autolink:!0,defaultProtocol:"https"}),UV.configure({multicolor:!0}),VV.configure({placeholder:i,emptyEditorClass:"is-editor-empty before:content-[attr(data-placeholder)] before:text-slate-300 before:float-left before:pointer-events-none before:h-0"}),HV,WV.configure({nested:!0})],content:t,editable:n,editorProps:{attributes:{class:`prose prose-sm max-w-none focus:outline-none min-h-[60px] text-slate-500 ${s} ${o} leading-relaxed`}},onUpdate:({editor:u})=>{const c=u.getHTML();u.isEmpty?e(""):e(c)}});return P.useEffect(()=>{l&&t!==l.getHTML()&&l.isEmpty&&t&&l.commands.setContent(t)},[t,l]),P.useEffect(()=>{l&&a&&l.commands.focus("end")},[l,a]),l?E.jsx("div",{className:`note-editor-wrapper ${r}`,children:E.jsx(GF,{editor:l})}):null},td=({initialData:t,onClose:e,isQuickAdd:n=!1})=>{const{addTask:r,updateTask:i,tags:s,tasks:o,addTag:a,deleteTag:l,setFocusedTaskId:u,themeSettings:c,toggleExpansion:d,setSelectedTaskIds:h,deleteTask:f,visibleTasks:p,user:g}=P.useContext(fr),[y,m]=P.useState((t==null?void 0:t.title)||""),[w,v]=P.useState((t==null?void 0:t.description)||""),[S,T]=P.useState((t==null?void 0:t.due_date)||null),[x,R]=P.useState((t==null?void 0:t.start_date)||null),[b,k]=P.useState((t==null?void 0:t.tags)||[]),[O,M]=P.useState((t==null?void 0:t.images)||[]),[N,L]=P.useState((t==null?void 0:t.parent_id)||null),[D,z]=P.useState([]),[I,_]=P.useState((t==null?void 0:t.is_project)||!1),[$,j]=P.useState((t==null?void 0:t.color)||"blue"),[C,q]=P.useState(!1),[G,A]=P.useState(null),K=P.useRef(null),V=P.useRef(null),te=t?!!t.completed_at:!1,we=P.useRef(null),Q=P.useRef(null),B=P.useRef(null),ee=P.useRef(null),[ce,ue]=P.useState([]),[ye,Ge]=P.useState(!1),[Ue,Ve]=P.useState(-1);P.useEffect(()=>{Q.current},[w]);const Me=X=>{if(!X)return $;let de=o.find(Se=>Se.id===X);const xe=new Set;for(;de&&de.parent_id&&!xe.has(de.id);){xe.add(de.id);const Se=o.find(qe=>qe.id===de.parent_id);if(Se)de=Se;else break}return(de==null?void 0:de.color)||"blue"},je=P.useMemo(()=>Me(N),[N,o,$]),Ce=Cr[je]||Cr.blue;fu(K,()=>{if(t&&e)if(y.trim())He();else{const X=p.findIndex(xe=>xe.data.id===t.id),de=p[X-1];f(t.id),e(de?de.data.id:null)}});const Je=P.useMemo(()=>t!=null&&t.id?o.filter(X=>X.id!==t.id&&!V0(t.id,X.id,o)&&X.status!=="deleted"):o.filter(X=>X.status!=="deleted"),[o,t]);P.useEffect(()=>{if(t!=null&&t.id){const X=o.filter(de=>de.parent_id===t.id).map(de=>de.id);z(X)}},[t,o]),P.useEffect(()=>{const X=!t||!t.title;if(y.length>=2&&X){const de=o.filter(xe=>xe.title.toLowerCase().includes(y.toLowerCase())&&xe.id!==(t==null?void 0:t.id));ue(de.slice(0,5)),Ge(de.length>0),Ve(-1)}else Ge(!1)},[y,o,t]),P.useEffect(()=>{!t&&we.current&&we.current.focus()},[t]);const He=async()=>{if(!y.trim())return;const X={title:y,description:w,due_date:S,start_date:x,parent_id:N,is_project:I||D.length>0,tags:b,status:(t==null?void 0:t.status)||"inbox",color:je,images:O};if(e?(e(),t!=null&&t.id&&u(t.id)):Ze(),t)await i(t.id,X,D);else{const de=await r(X,D);u(de),h([de])}},Ze=()=>{m(""),v(""),T(null),R(null),k([]),M([]),L(null),z([]),_(!1)},rt=async X=>{if(!X.target.files||X.target.files.length===0||!he)return;q(!0);const de=Array.from(X.target.files),xe=[];try{for(const Se of de){console.log(`Processing ${Se.name}, original size: ${(Se.size/1024).toFixed(2)} KB`);const qe={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0};let H=Se;try{const ne=await on(Se,qe);console.log(`Compressed ${Se.name}, new size: ${(ne.size/1024).toFixed(2)} KB`),H=ne}catch(ne){console.warn("Compression failed, using original file:",ne)}const F=Se.name.split(".").pop(),J=`${Date.now()}-${Math.random().toString(36).substring(7)}.${F}`,U=`${g.id}/${J}`;console.log("Uploading file:",U);const{error:W}=await he.storage.from("attachments").upload(U,H);if(W){console.error("Upload error:",W);continue}const{data:Z}=he.storage.from("attachments").getPublicUrl(U);console.log("Got public URL:",Z),Z&&xe.push(Z.publicUrl)}M(Se=>(console.log("Updating images state:",[...Se,...xe]),[...Se,...xe]))}catch(Se){console.error("Error uploading images:",Se)}finally{q(!1),V.current&&(V.current.value="")}},Ye=X=>{M(de=>de.filter(xe=>xe!==X))},Dt=X=>{var qe,H,F,J,U,W,Z,ne,fe,ke,De,re,pe,We;X.preventDefault();const de=document.activeElement,xe=X.shiftKey,Se=(qe=K.current)==null?void 0:qe.querySelector(".ProseMirror");xe?de===we.current?(ne=ee.current)==null||ne.focus():de!=null&&de.classList.contains("ProseMirror")?(fe=we.current)==null||fe.focus():ee.current&&(de===ee.current||(ke=ee.current.parentElement)!=null&&ke.contains(de))?(De=B.current)==null||De.focus():B.current&&(de===B.current||(re=B.current.parentElement)!=null&&re.contains(de))?Se?Se.focus():(pe=we.current)==null||pe.focus():(We=ee.current)==null||We.focus():de===we.current?Se&&Se.focus():de!=null&&de.classList.contains("ProseMirror")?(H=B.current)==null||H.focus():de===B.current||B.current&&((F=B.current.parentElement)!=null&&F.contains(de))?(J=ee.current)==null||J.focus():ee.current&&(de===ee.current||(U=ee.current.parentElement)!=null&&U.contains(de))?(W=we.current)==null||W.focus():(Z=we.current)==null||Z.focus()},Y=()=>{t&&i(t.id,{completed_at:te?null:new Date().toISOString()})},le=X=>{var de,xe;if(X.shiftKey){if(X.key==="S"||X.key==="s"){X.preventDefault(),(de=B.current)==null||de.focus();return}if(X.key==="T"||X.key==="t"){X.preventDefault(),(xe=ee.current)==null||xe.focus();return}}if(X.ctrlKey&&X.key==="."){X.preventDefault(),X.stopPropagation(),Y();return}if(X.key==="Tab"){Dt(X);return}if(ye){if(X.key==="ArrowDown"){X.preventDefault(),Ve(Se=>Se===-1?0:(Se+1)%ce.length);return}if(X.key==="ArrowUp"){X.preventDefault(),Ve(Se=>Se<=0?ce.length-1:Se-1);return}if((X.ctrlKey||X.metaKey)&&X.key==="Enter"&&Ue>=0){X.preventDefault(),m(ce[Ue].title),Ge(!1);return}if(X.key==="Escape"){X.preventDefault(),Ge(!1);return}}if(X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),X.stopPropagation(),He()),X.key==="Escape"&&e)if(X.preventDefault(),t&&!y.trim()){const Se=p.findIndex(H=>H.data.id===t.id),qe=p[Se-1];f(t.id),e(qe?qe.data.id:null)}else He()},ve=t?"":"pl-3",_e=c.fontWeight==="thin"?"font-extralight":"font-medium",Oe=c.fontWeight==="thin"?"font-extralight":"font-normal",Xe={small:"text-sm",normal:"text-base",large:"text-lg"}[c.fontSize]||"text-base";return E.jsxs("div",{ref:K,className:`group transition-all ${n?"bg-transparent":"mb-3 bg-white rounded-xl border border-gray-100/50 shadow-[0_4px_8px_rgba(0,0,0,0.08)]"}`,onKeyDown:le,children:[E.jsxs("div",{className:`flex gap-3 ${ve} py-3`,children:[t?E.jsxs("div",{className:"mt-1.5 ml-1",children:[" ",E.jsx(QT,{checked:te,onChange:X=>{X.stopPropagation(),Y()},size:18,color:je,isRoot:!N})," "]}):E.jsx("button",{type:"button",tabIndex:-1,onClick:()=>_(!I),className:`mt-1 h-5 w-5 flex items-center justify-center transition-all ${I?Ce.accent:"text-gray-300 hover:text-gray-400"}`,children:I?E.jsx(qT,{size:16}):E.jsx(WT,{size:16})}),E.jsxs("div",{className:"flex-1 space-y-3 relative pr-2",children:[E.jsx("div",{className:"flex items-start justify-between",children:E.jsxs("div",{className:"flex-1 relative space-y-2",children:[E.jsx("input",{ref:we,autoFocus:!0,type:"text",value:y,onChange:X=>m(X.target.value),placeholder:"...",className:`w-full ${Xe} ${_e} placeholder:font-light placeholder-gray-300 border-none bg-transparent focus:ring-0 outline-none p-0 leading-tight ${te?"text-gray-300 line-through":"text-slate-800"}`}),ye&&E.jsx("div",{className:"w-full mt-1 mb-2",children:E.jsx("div",{className:"bg-gray-50/50 rounded-lg overflow-hidden border border-gray-100",children:ce.map((X,de)=>E.jsxs("div",{className:`px-3 py-1.5 text-xs cursor-pointer transition-colors flex justify-between items-center ${de===Ue?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-500 hover:bg-gray-100"}`,onClick:()=>{m(X.title),Ge(!1)},children:[E.jsx("span",{children:X.title}),de===Ue&&E.jsx("span",{className:"text-[9px] text-indigo-400 font-normal",children:"Ctrl+Enter"})]},X.id))})}),E.jsx(KV,{initialContent:w,onChange:v,textSizeClass:Xe,descFontClass:Oe}),O.length>0&&E.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:O.map((X,de)=>E.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-100 shadow-sm cursor-pointer",onClick:()=>A(X),children:[E.jsx("img",{src:X,alt:"attachment",className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),E.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"}),E.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),Ye(X)},className:"absolute top-1 right-1 p-1 bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500",children:E.jsx(xa,{size:12})})]},de))})]})}),E.jsxs("div",{className:"flex items-center justify-between pt-1",children:[E.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[E.jsx(fx,{innerRef:B,label:"",value:x,onChange:R,theme:Ce,tasks:o}),E.jsx(fx,{tabIndex:-1,label:"",value:S,onChange:T,colorClass:"text-red-500",tasks:o,theme:Ce}),E.jsx(yp,{innerRef:ee,icon:g3,label:"",items:s,selectedIds:b,placeholder:"...",allowAdd:!0,onDeleteItem:l,multiSelect:!0,theme:Ce,onSelect:async(X,de)=>{if(X)k(xe=>xe.includes(X)?xe.filter(Se=>Se!==X):[...xe,X]);else if(de){const xe=await a(de);xe&&k(Se=>[...Se,xe])}}}),!t&&E.jsx(yp,{tabIndex:-1,icon:W0,label:"",items:Je,selectedIds:D,placeholder:"...",theme:Ce,onSelect:X=>z(de=>de.includes(X)?de.filter(xe=>xe!==X):[...de,X])}),E.jsx("input",{type:"file",ref:V,className:"hidden",multiple:!0,accept:"image/*",onChange:rt}),E.jsxs("button",{type:"button",tabIndex:-1,onClick:()=>{var X;return(X=V.current)==null?void 0:X.click()},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border border-transparent hover:bg-gray-100 text-gray-400 focus:outline-none focus:bg-white focus:ring-1 ${(Ce==null?void 0:Ce.buttonRing)||"focus:ring-indigo-300"} ${Xe} ${c.fontWeight==="thin"?"font-light":"font-medium"}`,children:[C?E.jsx(JT,{size:13,className:"animate-spin"}):E.jsx(o3,{size:13}),E.jsx("span",{children:""})]}),E.jsx("div",{className:"w-px h-3 bg-gray-200 mx-1"}),E.jsx("div",{className:"flex items-center",children:E.jsx(yp,{tabIndex:-1,icon:Xj,label:"",items:Je,allowAdd:!0,selectedIds:N?[N]:[],placeholder:"...",theme:Ce,onSelect:async(X,de)=>{let xe=X;if(!xe&&de&&(xe=await r({title:de,is_project:!0,status:"inbox"})),!xe&&!X)return;const Se=xe===N?null:xe;L(Se),t&&(Se&&d(Se,!0),await i(t.id,{parent_id:Se}))}})})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[b.length>0&&E.jsx("div",{className:"flex flex-wrap gap-1",children:b.map(X=>{const de=s.find(xe=>xe.id===X);return de?E.jsx(b3,{tag:de,onRemove:()=>k(xe=>xe.filter(Se=>Se!==X))},X):null})}),!N&&E.jsx("div",{className:"flex gap-0.5 p-0.5 bg-gray-50 rounded-full border border-gray-100",children:Object.keys(Cr).map(X=>E.jsx("button",{tabIndex:-1,type:"button",onClick:()=>j(X),className:`w-2.5 h-2.5 rounded-full ${Cr[X].dot} ${$===X?"ring-1 ring-gray-400 ring-offset-1":"hover:scale-110"} transition-all`},X))})]})]})]})]}),G&&E.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4",onClick:()=>A(null),children:E.jsxs("div",{className:"relative max-w-full max-h-full",onClick:X=>X.stopPropagation(),children:[E.jsx("img",{src:G,alt:"Preview",className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl"}),E.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[E.jsx("a",{href:G,download:`attachment-${Date.now()}`,target:"_blank",rel:"noopener noreferrer",onClick:X=>X.stopPropagation(),className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-colors",title:"Download",children:E.jsx(KT,{size:20})}),E.jsx("button",{onClick:()=>A(null),className:"p-2 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-colors",children:E.jsx(xa,{size:20})})]})]})})]})},VA=P.createContext({});function qV(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const Mv=typeof window<"u",GV=Mv?P.useLayoutEffect:P.useEffect,Nv=P.createContext(null);function Dv(t,e){t.indexOf(e)===-1&&t.push(e)}function Lv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yi=(t,e,n)=>n>e?e:n<t?t:n;let jv=()=>{};const vi={},HA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function WA(t){return typeof t=="object"&&t!==null}const KA=t=>/^0[^.\s]+$/u.test(t);function $v(t){let e;return()=>(e===void 0&&(e=t()),e)}const ur=t=>t,JV=(t,e)=>n=>e(t(n)),Uu=(...t)=>t.reduce(JV),Eu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class zv{constructor(){this.subscriptions=[]}add(e){return Dv(this.subscriptions,e),()=>Lv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wr=t=>t*1e3,ir=t=>t/1e3;function qA(t,e){return e?t*(1e3/e):0}const GA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,YV=1e-7,QV=12;function XV(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=GA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>YV&&++a<QV);return o}function Vu(t,e,n,r){if(t===e&&n===r)return ur;const i=s=>XV(s,0,1,t,n);return s=>s===0||s===1?s:GA(i(s),e,r)}const JA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,YA=t=>e=>1-t(1-e),QA=Vu(.33,1.53,.69,.99),Bv=YA(QA),XA=JA(Bv),ZA=t=>(t*=2)<1?.5*Bv(t):.5*(2-Math.pow(2,-10*(t-1))),Fv=t=>1-Math.sin(Math.acos(t)),eR=YA(Fv),tR=JA(Fv),ZV=Vu(.42,0,1,1),e6=Vu(0,0,.58,1),nR=Vu(.42,0,.58,1),t6=t=>Array.isArray(t)&&typeof t[0]!="number",rR=t=>Array.isArray(t)&&typeof t[0]=="number",n6={linear:ur,easeIn:ZV,easeInOut:nR,easeOut:e6,circIn:Fv,circInOut:tR,circOut:eR,backIn:Bv,backInOut:XA,backOut:QA,anticipate:ZA},r6=t=>typeof t=="string",Ub=t=>{if(rR(t)){jv(t.length===4);const[e,n,r,i]=t;return Vu(e,n,r,i)}else if(r6(t))return n6[t];return t},Ac=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Vb={value:null,addProjectionMetrics:null};function i6(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(c.schedule(d),t()),l++,d(a)}const c={schedule:(d,h=!1,f=!1)=>{const g=f&&i?n:r;return h&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&Vb.value&&Vb.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,c.process(d))}};return c}const s6=40;function iR(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ac.reduce((v,S)=>(v[S]=i6(s,e?S:void 0),v),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:f,postRender:p}=o,g=()=>{const v=vi.useManualTiming?i.timestamp:performance.now();n=!1,vi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,s6),1)),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:Ac.reduce((v,S)=>{const T=o[S];return v[S]=(x,R=!1,b=!1)=>(n||y(),T.schedule(x,R,b)),v},{}),cancel:v=>{for(let S=0;S<Ac.length;S++)o[Ac[S]].cancel(v)},state:i,steps:o}}const{schedule:ht,cancel:us,state:Xt,steps:Gp}=iR(typeof requestAnimationFrame<"u"?requestAnimationFrame:ur,!0);let nd;function o6(){nd=void 0}const _n={now:()=>(nd===void 0&&_n.set(Xt.isProcessing||vi.useManualTiming?Xt.timestamp:performance.now()),nd),set:t=>{nd=t,queueMicrotask(o6)}},sR=t=>e=>typeof e=="string"&&e.startsWith(t),oR=sR("--"),a6=sR("var(--"),Uv=t=>a6(t)?l6.test(t.split("/*")[0].trim()):!1,l6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ja={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Cu={...ja,transform:t=>yi(0,1,t)},Rc={...ja,default:1},Nl=t=>Math.round(t*1e5)/1e5,Vv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function u6(t){return t==null}const c6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hv=(t,e)=>n=>!!(typeof n=="string"&&c6.test(n)&&n.startsWith(t)||e&&!u6(n)&&Object.prototype.hasOwnProperty.call(n,e)),aR=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Vv);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},d6=t=>yi(0,255,t),Jp={...ja,transform:t=>Math.round(d6(t))},Vs={test:Hv("rgb","red"),parse:aR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Jp.transform(t)+", "+Jp.transform(e)+", "+Jp.transform(n)+", "+Nl(Cu.transform(r))+")"};function h6(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const iy={test:Hv("#"),parse:h6,transform:Vs.transform},Hu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ti=Hu("deg"),Kr=Hu("%"),Pe=Hu("px"),f6=Hu("vh"),p6=Hu("vw"),Hb=(()=>({...Kr,parse:t=>Kr.parse(t)/100,transform:t=>Kr.transform(t*100)}))(),Jo={test:Hv("hsl","hue"),parse:aR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Kr.transform(Nl(e))+", "+Kr.transform(Nl(n))+", "+Nl(Cu.transform(r))+")"},Ot={test:t=>Vs.test(t)||iy.test(t)||Jo.test(t),parse:t=>Vs.test(t)?Vs.parse(t):Jo.test(t)?Jo.parse(t):iy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vs.transform(t):Jo.transform(t),getAnimatableNone:t=>{const e=Ot.parse(t);return e.alpha=0,Ot.transform(e)}},m6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function g6(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Vv))==null?void 0:e.length)||0)+(((n=t.match(m6))==null?void 0:n.length)||0)>0}const lR="number",uR="color",y6="var",v6="var(",Wb="${}",w6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(w6,l=>(Ot.test(l)?(r.color.push(s),i.push(uR),n.push(Ot.parse(l))):l.startsWith(v6)?(r.var.push(s),i.push(y6),n.push(l)):(r.number.push(s),i.push(lR),n.push(parseFloat(l))),++s,Wb)).split(Wb);return{values:n,split:a,indexes:r,types:i}}function cR(t){return Tu(t).values}function dR(t){const{split:e,types:n}=Tu(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===lR?s+=Nl(i[o]):a===uR?s+=Ot.transform(i[o]):s+=i[o]}return s}}const x6=t=>typeof t=="number"?0:Ot.test(t)?Ot.getAnimatableNone(t):t;function b6(t){const e=cR(t);return dR(t)(e.map(x6))}const cs={test:g6,parse:cR,createTransformer:dR,getAnimatableNone:b6};function Yp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function k6({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Yp(l,a,t+1/3),s=Yp(l,a,t),o=Yp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ph(t,e){return n=>n>0?e:t}const yt=(t,e,n)=>t+(e-t)*n,Qp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},S6=[iy,Vs,Jo],E6=t=>S6.find(e=>e.test(t));function Kb(t){const e=E6(t);if(!e)return!1;let n=e.parse(t);return e===Jo&&(n=k6(n)),n}const qb=(t,e)=>{const n=Kb(t),r=Kb(e);if(!n||!r)return Ph(t,e);const i={...n};return s=>(i.red=Qp(n.red,r.red,s),i.green=Qp(n.green,r.green,s),i.blue=Qp(n.blue,r.blue,s),i.alpha=yt(n.alpha,r.alpha,s),Vs.transform(i))},sy=new Set(["none","hidden"]);function C6(t,e){return sy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function T6(t,e){return n=>yt(t,e,n)}function Wv(t){return typeof t=="number"?T6:typeof t=="string"?Uv(t)?Ph:Ot.test(t)?qb:R6:Array.isArray(t)?hR:typeof t=="object"?Ot.test(t)?qb:_6:Ph}function hR(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Wv(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function _6(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Wv(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function A6(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const R6=(t,e)=>{const n=cs.createTransformer(e),r=Tu(t),i=Tu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?sy.has(t)&&!i.values.length||sy.has(e)&&!r.values.length?C6(t,e):Uu(hR(A6(r,i),i.values),n):Ph(t,e)};function fR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):Wv(t)(t,e)}const P6=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ht.update(e,n),stop:()=>us(e),now:()=>Xt.isProcessing?Xt.timestamp:_n.now()}},pR=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Oh=2e4;function Kv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Oh;)e+=n,r=t.next(e);return e>=Oh?1/0:e}function O6(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Kv(r),Oh);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:ir(i)}}const I6=5;function mR(t,e,n){const r=Math.max(e-I6,0);return qA(n-t(r),e-r)}const St={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xp=.001;function M6({duration:t=St.duration,bounce:e=St.bounce,velocity:n=St.velocity,mass:r=St.mass}){let i,s,o=1-e;o=yi(St.minDamping,St.maxDamping,o),t=yi(St.minDuration,St.maxDuration,ir(t)),o<1?(i=u=>{const c=u*o,d=c*t,h=c-n,f=oy(u,o),p=Math.exp(-d);return Xp-h/f*p},s=u=>{const d=u*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-d),g=oy(Math.pow(u,2),o);return(-i(u)+Xp>0?-1:1)*((h-f)*p)/g}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-Xp+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=D6(i,s,a);if(t=Wr(t),isNaN(l))return{stiffness:St.stiffness,damping:St.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const N6=12;function D6(t,e,n){let r=n;for(let i=1;i<N6;i++)r=r-t(r)/e(r);return r}function oy(t,e){return t*Math.sqrt(1-e*e)}const L6=["duration","bounce"],j6=["stiffness","damping","mass"];function Gb(t,e){return e.some(n=>t[n]!==void 0)}function $6(t){let e={velocity:St.velocity,stiffness:St.stiffness,damping:St.damping,mass:St.mass,isResolvedFromDuration:!1,...t};if(!Gb(t,j6)&&Gb(t,L6))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*yi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:St.mass,stiffness:i,damping:s}}else{const n=M6(t);e={...e,...n,mass:St.mass},e.isResolvedFromDuration=!0}return e}function Ih(t=St.visualDuration,e=St.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=$6({...n,velocity:-ir(n.velocity||0)}),p=h||0,g=u/(2*Math.sqrt(l*c)),y=o-s,m=ir(Math.sqrt(l/c)),w=Math.abs(y)<5;r||(r=w?St.restSpeed.granular:St.restSpeed.default),i||(i=w?St.restDelta.granular:St.restDelta.default);let v;if(g<1){const T=oy(m,g);v=x=>{const R=Math.exp(-g*m*x);return o-R*((p+g*m*y)/T*Math.sin(T*x)+y*Math.cos(T*x))}}else if(g===1)v=T=>o-Math.exp(-m*T)*(y+(p+m*y)*T);else{const T=m*Math.sqrt(g*g-1);v=x=>{const R=Math.exp(-g*m*x),b=Math.min(T*x,300);return o-R*((p+g*m*y)*Math.sinh(b)+T*y*Math.cosh(b))/T}}const S={calculatedDuration:f&&d||null,next:T=>{const x=v(T);if(f)a.done=T>=d;else{let R=T===0?p:0;g<1&&(R=T===0?Wr(p):mR(v,T,x));const b=Math.abs(R)<=r,k=Math.abs(o-x)<=i;a.done=b&&k}return a.value=a.done?o:x,a},toString:()=>{const T=Math.min(Kv(S),Oh),x=pR(R=>S.next(T*R).value,T,30);return T+"ms "+x},toTransition:()=>{}};return S}Ih.applyToOptions=t=>{const e=O6(t,100,Ih);return t.ease=e.ease,t.duration=Wr(e.duration),t.type="keyframes",t};function ay({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],h={done:!1,value:d},f=b=>a!==void 0&&b<a||l!==void 0&&b>l,p=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let g=n*e;const y=d+g,m=o===void 0?y:o(y);m!==y&&(g=m-d);const w=b=>-g*Math.exp(-b/r),v=b=>m+w(b),S=b=>{const k=w(b),O=v(b);h.done=Math.abs(k)<=u,h.value=h.done?m:O};let T,x;const R=b=>{f(h.value)&&(T=b,x=Ih({keyframes:[h.value,p(h.value)],velocity:mR(v,b,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:b=>{let k=!1;return!x&&T===void 0&&(k=!0,S(b),R(b)),T!==void 0&&b>=T?x.next(b-T):(!k&&S(b),h)}}}function z6(t,e,n){const r=[],i=n||vi.mix||fR,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ur:e;a=Uu(l,a)}r.push(a)}return r}function B6(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(jv(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=z6(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const h=Eu(t[d],t[d+1],c);return a[d](h)};return n?c=>u(yi(t[0],t[s-1],c)):u}function F6(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Eu(0,e,r);t.push(yt(n,1,i))}}function U6(t){const e=[0];return F6(e,t.length-1),e}function V6(t,e){return t.map(n=>n*e)}function H6(t,e){return t.map(()=>e||nR).splice(0,t.length-1)}function Dl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=t6(r)?r.map(Ub):Ub(r),s={done:!1,value:e[0]},o=V6(n&&n.length===e.length?n:U6(e),t),a=B6(o,e,{ease:Array.isArray(i)?i:H6(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const W6=t=>t!==null;function qv(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(W6),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const K6={decay:ay,inertia:ay,tween:Dl,keyframes:Dl,spring:Ih};function gR(t){typeof t.type=="string"&&(t.type=K6[t.type])}class Gv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const q6=t=>t/100;class Jv extends Gv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==_n.now()&&this.tick(_n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;gR(e);const{type:n=Dl,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Dl;l!==Dl&&typeof a[0]!="number"&&(this.mixKeyframes=Uu(q6,fR(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Kv(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:h,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const m=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?m<0:m>i;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,S=r;if(d){const b=Math.min(this.currentTime,i)/a;let k=Math.floor(b),O=b%1;!O&&b>=1&&(O=1),O===1&&k--,k=Math.min(k,d+1),!!(k%2)&&(h==="reverse"?(O=1-O,f&&(O-=f/a)):h==="mirror"&&(S=o)),v=yi(0,1,O)*a}const T=w?{done:!1,value:c[0]}:S.next(v);s&&(T.value=s(T.value));let{done:x}=T;!w&&l!==null&&(x=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&x);return R&&p!==ay&&(T.value=qv(c,this.options,y,this.speed)),g&&g(T.value),R&&this.finish(),T}then(e,n){return this.finished.then(e,n)}get duration(){return ir(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ir(e)}get time(){return ir(this.currentTime)}set time(e){var n;e=Wr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_n.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ir(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=P6,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function G6(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Hs=t=>t*180/Math.PI,ly=t=>{const e=Hs(Math.atan2(t[1],t[0]));return uy(e)},J6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ly,rotateZ:ly,skewX:t=>Hs(Math.atan(t[1])),skewY:t=>Hs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},uy=t=>(t=t%360,t<0&&(t+=360),t),Jb=ly,Yb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Qb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Y6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Yb,scaleY:Qb,scale:t=>(Yb(t)+Qb(t))/2,rotateX:t=>uy(Hs(Math.atan2(t[6],t[5]))),rotateY:t=>uy(Hs(Math.atan2(-t[2],t[0]))),rotateZ:Jb,rotate:Jb,skewX:t=>Hs(Math.atan(t[4])),skewY:t=>Hs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function cy(t){return t.includes("scale")?1:0}function dy(t,e){if(!t||t==="none")return cy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Y6,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=J6,i=a}if(!i)return cy(e);const s=r[e],o=i[1].split(",").map(X6);return typeof s=="function"?s(o):o[s]}const Q6=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return dy(n,e)};function X6(t){return parseFloat(t.trim())}const $a=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],za=(()=>new Set($a))(),Xb=t=>t===ja||t===Pe,Z6=new Set(["x","y","z"]),e8=$a.filter(t=>!Z6.has(t));function t8(t){const e=[];return e8.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>dy(e,"x"),y:(t,{transform:e})=>dy(e,"y")};Xs.translateX=Xs.x;Xs.translateY=Xs.y;const Zs=new Set;let hy=!1,fy=!1,py=!1;function yR(){if(fy){const t=Array.from(Zs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=t8(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}fy=!1,hy=!1,Zs.forEach(t=>t.complete(py)),Zs.clear()}function vR(){Zs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(fy=!0)})}function n8(){py=!0,vR(),yR(),py=!1}class Yv{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Zs.add(this),hy||(hy=!0,ht.read(vR),ht.resolveKeyframes(yR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}G6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Zs.delete(this)}cancel(){this.state==="scheduled"&&(Zs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r8=t=>t.startsWith("--");function i8(t,e,n){r8(e)?t.style.setProperty(e,n):t.style[e]=n}const s8=$v(()=>window.ScrollTimeline!==void 0),o8={};function a8(t,e){const n=$v(t);return()=>o8[e]??n()}const wR=a8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Zb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hl([0,.65,.55,1]),circOut:hl([.55,0,1,.45]),backIn:hl([.31,.01,.66,-.59]),backOut:hl([.33,1.53,.69,.99])};function xR(t,e){if(t)return typeof t=="function"?wR()?pR(t,e):"ease-out":rR(t)?hl(t):Array.isArray(t)?t.map(n=>xR(n,e)||Zb.easeOut):Zb[t]}function l8(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=xR(a,i);Array.isArray(d)&&(c.easing=d);const h={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(c,h)}function bR(t){return typeof t=="function"&&"applyToOptions"in t}function u8({type:t,...e}){return bR(t)&&wR()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class c8 extends Gv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,jv(typeof e.type!="string");const u=u8(e);this.animation=l8(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=qv(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):i8(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ir(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ir(e)}get time(){return ir(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Wr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&s8()?(this.animation.timeline=e,ur):n(this)}}const kR={anticipate:ZA,backInOut:XA,circInOut:tR};function d8(t){return t in kR}function h8(t){typeof t.ease=="string"&&d8(t.ease)&&(t.ease=kR[t.ease])}const ek=10;class f8 extends c8{constructor(e){h8(e),gR(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Jv({...o,autoplay:!1}),l=Wr(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-ek).value,a.sample(l).value,ek),a.stop()}}const tk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(cs.test(t)||t==="0")&&!t.startsWith("url("));function p8(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function m8(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=tk(i,e),a=tk(s,e);return!o||!a?!1:p8(t)||(n==="spring"||bR(n))&&r}function my(t){t.duration=0,t.type="keyframes"}const g8=new Set(["opacity","clipPath","filter","transform"]),y8=$v(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function v8(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return y8()&&n&&g8.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const w8=40;class x8 extends Gv{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var p;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=_n.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},f=(c==null?void 0:c.KeyframeResolver)||Yv;this.keyframeResolver=new f(a,(g,y,m)=>this.onKeyframesResolved(g,y,h,!m),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=_n.now(),m8(e,s,o,a)||((vi.instantAnimations||!l)&&(c==null||c(qv(e,r,n))),e[0]=e[e.length-1],my(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>w8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},f=!u&&v8(h)?new f8({...h,element:h.motionValue.owner.current}):new Jv(h);f.finished.then(()=>this.notifyFinished()).catch(ur),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),n8()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const b8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function k8(t){const e=b8.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function SR(t,e,n=1){const[r,i]=k8(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return HA(o)?parseFloat(o):o}return Uv(i)?SR(i,e,n+1):i}function Qv(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const ER=new Set(["width","height","top","left","right","bottom",...$a]),S8={test:t=>t==="auto",parse:t=>t},CR=t=>e=>e.test(t),TR=[ja,Pe,Kr,Ti,p6,f6,S8],nk=t=>TR.find(CR(t));function E8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||KA(t):!0}const C8=new Set(["brightness","contrast","saturate","opacity"]);function T8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vv)||[];if(!r)return t;const i=n.replace(r,"");let s=C8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const _8=/\b([a-z-]*)\(.*?\)/gu,gy={...cs,getAnimatableNone:t=>{const e=t.match(_8);return e?e.map(T8).join(" "):t}},rk={...ja,transform:Math.round},A8={rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:Rc,scaleX:Rc,scaleY:Rc,scaleZ:Rc,skew:Ti,skewX:Ti,skewY:Ti,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Cu,originX:Hb,originY:Hb,originZ:Pe},Xv={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...A8,zIndex:rk,fillOpacity:Cu,strokeOpacity:Cu,numOctaves:rk},R8={...Xv,color:Ot,backgroundColor:Ot,outlineColor:Ot,fill:Ot,stroke:Ot,borderColor:Ot,borderTopColor:Ot,borderRightColor:Ot,borderBottomColor:Ot,borderLeftColor:Ot,filter:gy,WebkitFilter:gy},_R=t=>R8[t];function AR(t,e){let n=_R(t);return n!==gy&&(n=cs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const P8=new Set(["auto","none","0"]);function O8(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!P8.has(s)&&Tu(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=AR(n,i)}class I8 extends Yv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Uv(u))){const c=SR(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ER.has(r)||e.length!==2)return;const[i,s]=e,o=nk(i),a=nk(s);if(o!==a)if(Xb(o)&&Xb(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Xs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||E8(e[i]))&&r.push(i);r.length&&O8(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Xs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function M8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const RR=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function N8(t){return WA(t)&&"offsetHeight"in t}const ik=30,D8=t=>!isNaN(parseFloat(t));class L8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=_n.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_n.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=D8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zv);const r=this.events[e].add(n);return e==="change"?()=>{r(),ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ik)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ik);return qA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Aa(t,e){return new L8(t,e)}const{schedule:Zv,cancel:SJ}=iR(queueMicrotask,!1),vr={x:!1,y:!1};function PR(){return vr.x||vr.y}function j8(t){return t==="x"||t==="y"?vr[t]?null:(vr[t]=!0,()=>{vr[t]=!1}):vr.x||vr.y?null:(vr.x=vr.y=!0,()=>{vr.x=vr.y=!1})}function OR(t,e){const n=M8(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function sk(t){return!(t.pointerType==="touch"||PR())}function $8(t,e,n={}){const[r,i,s]=OR(t,n),o=a=>{if(!sk(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{sk(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const IR=(t,e)=>e?t===e?!0:IR(t,e.parentElement):!1,e1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,z8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function B8(t){return z8.has(t.tagName)||t.tabIndex!==-1}const rd=new WeakSet;function ok(t){return e=>{e.key==="Enter"&&t(e)}}function Zp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const F8=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=ok(()=>{if(rd.has(n))return;Zp(n,"down");const i=ok(()=>{Zp(n,"up")}),s=()=>Zp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function ak(t){return e1(t)&&!PR()}function U8(t,e,n={}){const[r,i,s]=OR(t,n),o=a=>{const l=a.currentTarget;if(!ak(a))return;rd.add(l);const u=e(l,a),c=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),rd.has(l)&&rd.delete(l),ak(f)&&typeof u=="function"&&u(f,{success:p})},d=f=>{c(f,l===window||l===document||n.useGlobalTarget||IR(l,f.target))},h=f=>{c(f,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),N8(a)&&(a.addEventListener("focus",u=>F8(u,i)),!B8(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function MR(t){return WA(t)&&"ownerSVGElement"in t}function V8(t){return MR(t)&&t.tagName==="svg"}const un=t=>!!(t&&t.getVelocity),H8=[...TR,Ot,cs],W8=t=>H8.find(CR(t)),NR=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function K8(t=!0){const e=P.useContext(Nv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{if(t)return i(s)},[t]);const o=P.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const DR=P.createContext({strict:!1}),lk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ra={};for(const t in lk)Ra[t]={isEnabled:e=>lk[t].some(n=>!!e[n])};function q8(t){for(const e in t)Ra[e]={...Ra[e],...t[e]}}const G8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G8.has(t)}let LR=t=>!Mh(t);function J8(t){typeof t=="function"&&(LR=e=>e.startsWith("on")?!Mh(e):t(e))}try{J8(require("@emotion/is-prop-valid").default)}catch{}function Y8(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(LR(i)||n===!0&&Mh(i)||!e&&!Mh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Tf=P.createContext({});function _f(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function _u(t){return typeof t=="string"||Array.isArray(t)}const t1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],n1=["initial",...t1];function Af(t){return _f(t.animate)||n1.some(e=>_u(t[e]))}function jR(t){return!!(Af(t)||t.variants)}function Q8(t,e){if(Af(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_u(n)?n:void 0,animate:_u(r)?r:void 0}}return t.inherit!==!1?e:{}}function X8(t){const{initial:e,animate:n}=Q8(t,P.useContext(Tf));return P.useMemo(()=>({initial:e,animate:n}),[uk(e),uk(n)])}function uk(t){return Array.isArray(t)?t.join(" "):t}function ck(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const el={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=ck(t,e.target.x),r=ck(t,e.target.y);return`${n}% ${r}%`}},Z8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=cs.parse(t);if(i.length>5)return r;const s=cs.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=yt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},yy={borderRadius:{...el,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:el,borderTopRightRadius:el,borderBottomLeftRadius:el,borderBottomRightRadius:el,boxShadow:Z8};function $R(t,{layout:e,layoutId:n}){return za.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yy[t]||t==="opacity")}const eH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tH=$a.length;function nH(t,e,n){let r="",i=!0;for(let s=0;s<tH;s++){const o=$a[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=RR(a,Xv[o]);if(!l){i=!1;const c=eH[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function r1(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(za.has(l)){o=!0;continue}else if(oR(l)){i[l]=u;continue}else{const c=RR(u,Xv[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=nH(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const i1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zR(t,e,n){for(const r in e)!un(e[r])&&!$R(r,n)&&(t[r]=e[r])}function rH({transformTemplate:t},e){return P.useMemo(()=>{const n=i1();return r1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function iH(t,e){const n=t.style||{},r={};return zR(r,n,t),Object.assign(r,rH(t,e)),r}function sH(t,e){const n={},r=iH(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const oH={offset:"stroke-dashoffset",array:"stroke-dasharray"},aH={offset:"strokeDashoffset",array:"strokeDasharray"};function lH(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?oH:aH;t[s.offset]=Pe.transform(-r);const o=Pe.transform(e),a=Pe.transform(n);t[s.array]=`${o} ${a}`}function BR(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(r1(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&lH(d,i,s,o,!1)}const FR=()=>({...i1(),attrs:{}}),UR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uH(t,e,n,r){const i=P.useMemo(()=>{const s=FR();return BR(s,e,UR(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};zR(s,t.style,t),i.style={...s,...i.style}}return i}const cH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function s1(t){return typeof t!="string"||t.includes("-")?!1:!!(cH.indexOf(t)>-1||/[A-Z]/u.test(t))}function dH(t,e,n,{latestValues:r},i,s=!1){const a=(s1(t)?uH:sH)(e,r,i,t),l=Y8(e,typeof t=="string",s),u=t!==P.Fragment?{...l,...a,ref:n}:{},{children:c}=e,d=P.useMemo(()=>un(c)?c.get():c,[c]);return P.createElement(t,{...u,children:d})}function dk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function o1(t,e,n,r){if(typeof e=="function"){const[i,s]=dk(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=dk(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function id(t){return un(t)?t.get():t}function hH({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:fH(n,r,i,t),renderState:e()}}function fH(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=id(s[h]);let{initial:o,animate:a}=t;const l=Af(t),u=jR(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!_f(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=o1(t,h[f]);if(p){const{transitionEnd:g,transition:y,...m}=p;for(const w in m){let v=m[w];if(Array.isArray(v)){const S=c?v.length-1:0;v=v[S]}v!==null&&(i[w]=v)}for(const w in g)i[w]=g[w]}}}return i}const VR=t=>(e,n)=>{const r=P.useContext(Tf),i=P.useContext(Nv),s=()=>hH(t,e,r,i);return n?s():qV(s)};function a1(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(un(r[o])||e.style&&un(e.style[o])||$R(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const pH=VR({scrapeMotionValuesFromProps:a1,createRenderState:i1});function HR(t,e,n){const r=a1(t,e,n);for(const i in t)if(un(t[i])||un(e[i])){const s=$a.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const mH=VR({scrapeMotionValuesFromProps:HR,createRenderState:FR}),gH=Symbol.for("motionComponentSymbol");function Yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yH(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yo(n)&&(n.current=r))},[e])}const l1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vH="framerAppearId",WR="data-"+l1(vH),KR=P.createContext({});function wH(t,e,n,r,i){var g,y;const{visualElement:s}=P.useContext(Tf),o=P.useContext(DR),a=P.useContext(Nv),l=P.useContext(NR).reducedMotion,u=P.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=P.useContext(KR);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&xH(u.current,n,i,d);const h=P.useRef(!1);P.useInsertionEffect(()=>{c&&h.current&&c.update(n,a)});const f=n[WR],p=P.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,f)));return GV(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),P.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,f)}),p.current=!1),c.enteringChildren=void 0)}),c}function xH(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:qR(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Yo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function qR(t){if(t)return t.options.allowProjection!==!1?t.projection:qR(t.parent)}function em(t,{forwardMotionProps:e=!1}={},n,r){n&&q8(n);const i=s1(t)?mH:pH;function s(a,l){let u;const c={...P.useContext(NR),...a,layoutId:bH(a)},{isStatic:d}=c,h=X8(a),f=i(a,d);if(!d&&Mv){kH();const p=SH(c);u=p.MeasureLayout,h.visualElement=wH(t,f,c,r,p.ProjectionNode)}return E.jsxs(Tf.Provider,{value:h,children:[u&&h.visualElement?E.jsx(u,{visualElement:h.visualElement,...c}):null,dH(t,a,yH(f,h.visualElement,l),f,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=P.forwardRef(s);return o[gH]=t,o}function bH({layoutId:t}){const e=P.useContext(VA).id;return e&&t!==void 0?e+"-"+t:t}function kH(t,e){P.useContext(DR).strict}function SH(t){const{drag:e,layout:n}=Ra;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function EH(t,e){if(typeof Proxy>"u")return em;const n=new Map,r=(s,o)=>em(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,em(o,void 0,t,e)),n.get(o))})}function GR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function CH({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function TH(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tm(t){return t===void 0||t===1}function vy({scale:t,scaleX:e,scaleY:n}){return!tm(t)||!tm(e)||!tm(n)}function Rs(t){return vy(t)||JR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function JR(t){return hk(t.x)||hk(t.y)}function hk(t){return t&&t!=="0%"}function Nh(t,e,n){const r=t-n,i=e*r;return n+i}function fk(t,e,n,r,i){return i!==void 0&&(t=Nh(t,i,r)),Nh(t,n,r)+e}function wy(t,e=0,n=1,r,i){t.min=fk(t.min,e,n,r,i),t.max=fk(t.max,e,n,r,i)}function YR(t,{x:e,y:n}){wy(t.x,e.translate,e.scale,e.originPoint),wy(t.y,n.translate,n.scale,n.originPoint)}const pk=.999999999999,mk=1.0000000000001;function _H(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YR(t,o)),r&&Rs(s.latestValues)&&Xo(t,s.latestValues))}e.x<mk&&e.x>pk&&(e.x=1),e.y<mk&&e.y>pk&&(e.y=1)}function Qo(t,e){t.min=t.min+e,t.max=t.max+e}function gk(t,e,n,r,i=.5){const s=yt(t.min,t.max,i);wy(t,e,n,s,r)}function Xo(t,e){gk(t.x,e.x,e.scaleX,e.scale,e.originX),gk(t.y,e.y,e.scaleY,e.scale,e.originY)}function QR(t,e){return GR(TH(t.getBoundingClientRect(),e))}function AH(t,e,n){const r=QR(t,n),{scroll:i}=e;return i&&(Qo(r.x,i.offset.x),Qo(r.y,i.offset.y)),r}const yk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zo=()=>({x:yk(),y:yk()}),vk=()=>({min:0,max:0}),jt=()=>({x:vk(),y:vk()}),xy={current:null},XR={current:!1};function RH(){if(XR.current=!0,!!Mv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xy.current=t.matches;t.addEventListener("change",e),e()}else xy.current=!1}const PH=new WeakMap;function OH(t,e,n){for(const r in e){const i=e[r],s=n[r];if(un(i))t.addValue(r,i);else if(un(s))t.addValue(r,Aa(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Aa(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const wk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=_n.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,ht.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Af(n),this.isVariantNode=jR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const f=d[h];l[h]!==void 0&&un(f)&&f.set(l[h])}}mount(e){var n;this.current=e,PH.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),XR.current||RH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xy.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),us(this.notifyUpdate),us(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=za.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ra){const n=Ra[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<wk.length;r++){const i=wk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=OH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Aa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(HA(r)||KA(r))?r=parseFloat(r):!W8(r)&&cs.test(n)&&(r=AR(e,n)),this.setBaseTarget(e,un(r)?r.get():r)),un(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=o1(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!un(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Zv.render(this.render)}}class ZR extends IH{constructor(){super(...arguments),this.KeyframeResolver=I8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;un(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eP(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function MH(t){return window.getComputedStyle(t)}class NH extends ZR{constructor(){super(...arguments),this.type="html",this.renderInstance=eP}readValueFromInstance(e,n){var r;if(za.has(n))return(r=this.projection)!=null&&r.isProjecting?cy(n):Q6(e,n);{const i=MH(e),s=(oR(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return QR(e,n)}build(e,n,r){r1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return a1(e,n,r)}}const tP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DH(t,e,n,r){eP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(tP.has(i)?i:l1(i),e.attrs[i])}class LH extends ZR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(za.has(n)){const r=_R(n);return r&&r.default||0}return n=tP.has(n)?n:l1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return HR(e,n,r)}build(e,n,r){BR(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){DH(e,n,r,i)}mount(e){this.isSVGTag=UR(e.tagName),super.mount(e)}}const jH=(t,e)=>s1(t)?new LH(e):new NH(e,{allowProjection:t!==P.Fragment});function ca(t,e,n){const r=t.getProps();return o1(r,e,n!==void 0?n:r.custom,t)}const by=t=>Array.isArray(t);function $H(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Aa(n))}function zH(t){return by(t)?t[t.length-1]||0:t}function BH(t,e){const n=ca(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=zH(s[o]);$H(t,o,a)}}function FH(t){return!!(un(t)&&t.add)}function ky(t,e){const n=t.getValue("willChange");if(FH(n))return n.add(e);if(!n&&vi.WillChange){const r=new vi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function nP(t){return t.props[WR]}const UH=t=>t!==null;function VH(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(UH),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const HH={type:"spring",stiffness:500,damping:25,restSpeed:10},WH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KH={type:"keyframes",duration:.8},qH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GH=(t,{keyframes:e})=>e.length>2?KH:za.has(t)?t.startsWith("scale")?WH(e[1]):HH:qH;function JH({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const u1=(t,e,n,r={},i,s)=>o=>{const a=Qv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Wr(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};JH(a)||Object.assign(c,GH(t,c)),c.duration&&(c.duration=Wr(c.duration)),c.repeatDelay&&(c.repeatDelay=Wr(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(my(c),c.delay===0&&(d=!0)),(vi.instantAnimations||vi.skipAnimations)&&(d=!0,my(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const h=VH(c.keyframes,a);if(h!==void 0){ht.update(()=>{c.onUpdate(h),c.onComplete()});return}}return a.isSync?new Jv(c):new x8(c)};function YH({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function rP(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),h=a[c];if(h===void 0||u&&YH(u,c))continue;const f={delay:n,...Qv(s||{},c)},p=d.get();if(p!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const m=nP(t);if(m){const w=window.MotionHandoffAnimation(m,c,ht);w!==null&&(f.startTime=w,g=!0)}}ky(t,c),d.start(u1(c,d,h,t.shouldReduceMotion&&ER.has(c)?{type:!1}:f,t,g));const y=d.animation;y&&l.push(y)}return o&&Promise.all(l).then(()=>{ht.update(()=>{o&&BH(t,o)})}),l}function iP(t,e,n,r=0,i=1){const s=Array.from(t).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function Sy(t,e,n={}){var l;const r=ca(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(rP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=i;return QH(t,e,u,c,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function QH(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Sy(l,e,{...o,delay:n+(typeof r=="function"?0:r)+iP(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function XH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Sy(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Sy(t,e,n);else{const i=typeof e=="function"?ca(t,e,n.custom):e;r=Promise.all(rP(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function sP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const ZH=n1.length;function oP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?oP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ZH;n++){const r=n1[n],i=t.props[r];(_u(i)||i===!1)&&(e[r]=i)}return e}const e9=[...t1].reverse(),t9=t1.length;function n9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>XH(t,n,r)))}function r9(t){let e=n9(t),n=xk(),r=!0;const i=l=>(u,c)=>{var h;const d=ca(t,c,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:p,...g}=d;u={...u,...g,...p}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=oP(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let y=0;y<t9;y++){const m=e9[y],w=n[m],v=u[m]!==void 0?u[m]:c[m],S=_u(v),T=m===l?w.isActive:null;T===!1&&(p=y);let x=v===c[m]&&v!==u[m]&&S;if(x&&r&&t.manuallyAnimateOnMount&&(x=!1),w.protectedKeys={...f},!w.isActive&&T===null||!v&&!w.prevProp||_f(v)||typeof v=="boolean")continue;const R=i9(w.prevProp,v);let b=R||m===l&&w.isActive&&!x&&S||y>p&&S,k=!1;const O=Array.isArray(v)?v:[v];let M=O.reduce(i(m),{});T===!1&&(M={});const{prevResolvedValues:N={}}=w,L={...N,...M},D=_=>{b=!0,h.has(_)&&(k=!0,h.delete(_)),w.needsAnimating[_]=!0;const $=t.getValue(_);$&&($.liveStyle=!1)};for(const _ in L){const $=M[_],j=N[_];if(f.hasOwnProperty(_))continue;let C=!1;by($)&&by(j)?C=!sP($,j):C=$!==j,C?$!=null?D(_):h.add(_):$!==void 0&&h.has(_)?D(_):w.protectedKeys[_]=!0}w.prevProp=v,w.prevResolvedValues=M,w.isActive&&(f={...f,...M}),r&&t.blockInitialAnimation&&(b=!1);const z=x&&R;b&&(!z||k)&&d.push(...O.map(_=>{const $={type:m};if(typeof _=="string"&&r&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:j}=t,C=ca(j,_);if(j.enteringChildren&&C){const{delayChildren:q}=C.transition||{};$.delay=iP(j.enteringChildren,t,q)}}return{animation:_,options:$}}))}if(h.size){const y={};if(typeof u.initial!="boolean"){const m=ca(t,Array.isArray(u.initial)?u.initial[0]:u.initial);m&&m.transition&&(y.transition=m.transition)}h.forEach(m=>{const w=t.getBaseTarget(m),v=t.getValue(m);v&&(v.liveStyle=!0),y[m]=w??null}),d.push({animation:y})}let g=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const h in n)n[h].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=xk()}}}function i9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sP(e,t):!1}function Cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xk(){return{animate:Cs(!0),whileInView:Cs(),whileHover:Cs(),whileTap:Cs(),whileDrag:Cs(),whileFocus:Cs(),exit:Cs()}}class ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s9 extends ws{constructor(e){super(e),e.animationState||(e.animationState=r9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let o9=0;class a9 extends ws{constructor(){super(...arguments),this.id=o9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const l9={animation:{Feature:s9},exit:{Feature:a9}};function Au(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wu(t){return{point:{x:t.pageX,y:t.pageY}}}const u9=t=>e=>e1(e)&&t(e,Wu(e));function Ll(t,e,n,r){return Au(t,e,u9(n),r)}const aP=1e-4,c9=1-aP,d9=1+aP,lP=.01,h9=0-lP,f9=0+lP;function gn(t){return t.max-t.min}function p9(t,e,n){return Math.abs(t-e)<=n}function bk(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=gn(n)/gn(e),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=c9&&t.scale<=d9||isNaN(t.scale))&&(t.scale=1),(t.translate>=h9&&t.translate<=f9||isNaN(t.translate))&&(t.translate=0)}function jl(t,e,n,r){bk(t.x,e.x,n.x,r?r.originX:void 0),bk(t.y,e.y,n.y,r?r.originY:void 0)}function kk(t,e,n){t.min=n.min+e.min,t.max=t.min+gn(e)}function m9(t,e,n){kk(t.x,e.x,n.x),kk(t.y,e.y,n.y)}function Sk(t,e,n){t.min=e.min-n.min,t.max=t.min+gn(e)}function Dh(t,e,n){Sk(t.x,e.x,n.x),Sk(t.y,e.y,n.y)}function Qn(t){return[t("x"),t("y")]}const uP=({current:t})=>t?t.ownerDocument.defaultView:null,Ek=(t,e)=>Math.abs(t-e);function g9(t,e){const n=Ek(t.x,e.x),r=Ek(t.y,e.y);return Math.sqrt(n**2+r**2)}class cP{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=rm(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=g9(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:g}=h,{timestamp:y}=Xt;this.history.push({...g,timestamp:y});const{onStart:m,onMove:w}=this.handlers;f||(m&&m(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nm(f,this.transformPagePoint),ht.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=rm(h.type==="pointercancel"?this.lastMoveEventInfo:nm(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,m),g&&g(h,m)},!e1(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Wu(e),l=nm(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Xt;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,rm(l,this.history)),this.removeListeners=Uu(Ll(this.contextWindow,"pointermove",this.handlePointerMove),Ll(this.contextWindow,"pointerup",this.handlePointerUp),Ll(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),us(this.updatePoint)}}function nm(t,e){return e?{point:e(t.point)}:t}function Ck(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rm({point:t},e){return{point:t,delta:Ck(t,dP(e)),offset:Ck(t,y9(e)),velocity:v9(e,.1)}}function y9(t){return t[0]}function dP(t){return t[t.length-1]}function v9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=dP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Wr(e)));)n--;if(!r)return{x:0,y:0};const s=ir(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function w9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function Tk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function x9(t,{top:e,left:n,bottom:r,right:i}){return{x:Tk(t.x,n,i),y:Tk(t.y,e,r)}}function _k(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function b9(t,e){return{x:_k(t.x,e.x),y:_k(t.y,e.y)}}function k9(t,e){let n=.5;const r=gn(t),i=gn(e);return i>r?n=Eu(e.min,e.max-r,t.min):r>i&&(n=Eu(t.min,t.max-i,e.min)),yi(0,1,n)}function S9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ey=.35;function E9(t=Ey){return t===!1?t=0:t===!0&&(t=Ey),{x:Ak(t,"left","right"),y:Ak(t,"top","bottom")}}function Ak(t,e,n){return{min:Rk(t,e),max:Rk(t,n)}}function Rk(t,e){return typeof t=="number"?t:t[e]||0}const C9=new WeakMap;class T9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wu(d).point)},o=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=j8(f),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(m=>{let w=this.getAxisMotionValue(m).get()||0;if(Kr.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[m];S&&(w=gn(S)*(parseFloat(w)/100))}}this.originPoint[m]=w}),g&&ht.postRender(()=>g(d,h)),ky(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:m}=h;if(p&&this.currentDirection===null){this.currentDirection=_9(m),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,m),this.updateAxis("y",h.point,m),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Qn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new cP(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:uP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ht.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Pc(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=w9(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Yo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=x9(r.layoutBox,e):this.constraints=!1,this.elastic=E9(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=S9(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=AH(r,i.root,this.visualElement.getTransformPagePoint());let o=b9(i.layout.layoutBox,s);if(n){const a=n(CH(o));this.hasMutatedConstraints=!!a,a&&(o=GR(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Qn(c=>{if(!Pc(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ky(this.visualElement,e),r.start(u1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qn(n=>{const{drag:r}=this.getProps();if(!Pc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-yt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=k9({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qn(o=>{if(!Pc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(yt(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;C9.set(this.visualElement,this);const e=this.visualElement.current,n=Ll(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ht.read(r);const o=Au(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Qn(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Ey,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Pc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function _9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class A9 extends ws{constructor(e){super(e),this.removeGroupControls=ur,this.removeListeners=ur,this.controls=new T9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pk=t=>(e,n)=>{t&&ht.postRender(()=>t(e,n))};class R9 extends ws{constructor(){super(...arguments),this.removePointerDownListener=ur}onPointerDown(e){this.session=new cP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Pk(e),onStart:Pk(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ht.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let im=!1;class P9 extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),im&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,im=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;im=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hP(t){const[e,n]=K8(),r=P.useContext(VA);return E.jsx(P9,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(KR),isPresent:e,safeToRemove:n})}function O9(t,e,n){const r=un(t)?t:Aa(t);return r.start(u1("",r,e,n)),r.animation}const I9=(t,e)=>t.depth-e.depth;class M9{constructor(){this.children=[],this.isDirty=!1}add(e){Dv(this.children,e),this.isDirty=!0}remove(e){Lv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(I9),this.isDirty=!1,this.children.forEach(e)}}function N9(t,e){const n=_n.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(us(r),t(s-e))};return ht.setup(r,!0),()=>us(r)}const fP=["TopLeft","TopRight","BottomLeft","BottomRight"],D9=fP.length,Ok=t=>typeof t=="string"?parseFloat(t):t,Ik=t=>typeof t=="number"||Pe.test(t);function L9(t,e,n,r,i,s){i?(t.opacity=yt(0,n.opacity??1,j9(r)),t.opacityExit=yt(e.opacity??1,0,$9(r))):s&&(t.opacity=yt(e.opacity??1,n.opacity??1,r));for(let o=0;o<D9;o++){const a=`border${fP[o]}Radius`;let l=Mk(e,a),u=Mk(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Ik(l)===Ik(u)?(t[a]=Math.max(yt(Ok(l),Ok(u),r),0),(Kr.test(u)||Kr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function Mk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const j9=pP(0,.5,eR),$9=pP(.5,.95,ur);function pP(t,e,n){return r=>r<t?0:r>e?1:n(Eu(t,e,r))}function Nk(t,e){t.min=e.min,t.max=e.max}function mr(t,e){Nk(t.x,e.x),Nk(t.y,e.y)}function Dk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Lk(t,e,n,r,i){return t-=e,t=Nh(t,1/n,r),i!==void 0&&(t=Nh(t,1/i,r)),t}function z9(t,e=0,n=1,r=.5,i,s=t,o=t){if(Kr.test(e)&&(e=parseFloat(e),e=yt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=yt(s.min,s.max,r);t===s&&(a-=e),t.min=Lk(t.min,e,n,a,i),t.max=Lk(t.max,e,n,a,i)}function jk(t,e,[n,r,i],s,o){z9(t,e[n],e[r],e[i],e.scale,s,o)}const B9=["x","scaleX","originX"],F9=["y","scaleY","originY"];function $k(t,e,n,r){jk(t.x,e,B9,n?n.x:void 0,r?r.x:void 0),jk(t.y,e,F9,n?n.y:void 0,r?r.y:void 0)}function zk(t){return t.translate===0&&t.scale===1}function mP(t){return zk(t.x)&&zk(t.y)}function Bk(t,e){return t.min===e.min&&t.max===e.max}function U9(t,e){return Bk(t.x,e.x)&&Bk(t.y,e.y)}function Fk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function gP(t,e){return Fk(t.x,e.x)&&Fk(t.y,e.y)}function Uk(t){return gn(t.x)/gn(t.y)}function Vk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class V9{constructor(){this.members=[]}add(e){Dv(this.members,e),e.scheduleRender()}remove(e){if(Lv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function H9(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:f,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const sm=["","X","Y","Z"],W9=1e3;let K9=0;function om(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function yP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ht,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&yP(r)}function vP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=K9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(J9),this.nodes.forEach(Z9),this.nodes.forEach(eW),this.nodes.forEach(Y9)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new M9)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=MR(o)&&!V8(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c,d=0;const h=()=>this.root.updateBlockedByResize=!1;ht.read(()=>{d=window.innerWidth}),t(o,()=>{const f=window.innerWidth;f!==d&&(d=f,this.root.updateBlockedByResize=!0,c&&c(),c=N9(h,250),sd.hasAnimatedSinceResize&&(sd.hasAnimatedSinceResize=!1,this.nodes.forEach(Kk)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||sW,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),m=!this.targetLayout||!gP(this.targetLayout,f),w=!d&&h;if(this.options.layoutRoot||this.resumeFrom||w||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...Qv(p,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(c,w)}else d||Kk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Wk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(X9),this.nodes.forEach(q9),this.nodes.forEach(G9)):this.nodes.forEach(Wk),this.clearAllSnapshots();const a=_n.now();Xt.delta=yi(0,1e3/60,a-Xt.timestamp),Xt.timestamp=a,Xt.isProcessing=!0,Gp.update.process(Xt),Gp.preRender.process(Xt),Gp.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Q9),this.sharedNodes.forEach(nW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gn(this.snapshot.measuredBox.x)&&!gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!mP(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Rs(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),oW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return jt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(aW))){const{scroll:c}=this.root;c&&(Qo(a.x,c.offset.x),Qo(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=jt();if(mr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&mr(a,o),Qo(a.x,d.offset.x),Qo(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=jt();mr(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Xo(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Rs(c.latestValues)&&Xo(l,c.latestValues)}return Rs(this.latestValues)&&Xo(l,this.latestValues),l}removeTransform(o){const a=jt();mr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Rs(u.latestValues))continue;vy(u.latestValues)&&u.updateSnapshot();const c=jt(),d=u.measurePageBox();mr(c,d),$k(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Rs(this.latestValues)&&$k(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!this.layout||!(c||d))return;this.resolvedRelativeTargetAt=Xt.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),m9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mr(this.target,this.layout.layoutBox),YR(this.target,this.targetDelta)):mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||vy(this.parent.latestValues)||JR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),Dh(this.relativeTargetOrigin,a,l),mr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;mr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;_H(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=jt());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dk(this.prevProjectionDelta.x,this.projectionDelta.x),Dk(this.prevProjectionDelta.y,this.projectionDelta.y)),jl(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!Vk(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zo(),this.projectionDelta=Zo(),this.projectionDeltaWithTransform=Zo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=jt(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,y=this.getStack(),m=!y||y.members.length<=1,w=!!(g&&!m&&this.options.crossfade===!0&&!this.path.some(iW));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const T=S/1e3;qk(d.x,o.x,T),qk(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rW(this.relativeTarget,this.relativeTargetOrigin,h,T),v&&U9(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=jt()),mr(v,this.relativeTarget)),g&&(this.animationValues=c,L9(c,u,this.latestValues,T,w,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ht.update(()=>{sd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Aa(0)),this.currentAnimation=O9(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(W9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&wP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||jt();const d=gn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=gn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}mr(a,l),Xo(a,c),jl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new V9),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&om("z",o,u,this.animationValues);for(let c=0;c<sm.length;c++)om(`rotate${sm[c]}`,o,u,this.animationValues),om(`skew${sm[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=id(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=id(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Rs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=H9(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:h,y:f}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in yy){if(c[p]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:m}=yy[p],w=d==="none"?c[p]:g(c[p],u);if(y){const v=y.length;for(let S=0;S<v;S++)o[y[S]]=w}else m?this.options.visualElement.renderState.vars[p]=w:o[p]=w}this.options.layoutId&&(o.pointerEvents=u===this?id(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Hk),this.root.sharedNodes.clear()}}}function q9(t){t.updateLayout()}function G9(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Qn(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],f=gn(h);h.min=r[d].min,h.max=h.min+f}):wP(s,e.layoutBox,r)&&Qn(d=>{const h=o?e.measuredBox[d]:e.layoutBox[d],f=gn(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=Zo();jl(a,r,e.layoutBox);const l=Zo();o?jl(l,t.applyTransform(i,!0),e.measuredBox):jl(l,r,e.layoutBox);const u=!mP(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=jt();Dh(p,e.layoutBox,h.layoutBox);const g=jt();Dh(g,r,f.layoutBox),gP(p,g)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function J9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Y9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Q9(t){t.clearSnapshot()}function Hk(t){t.clearMeasurements()}function Wk(t){t.isLayoutDirty=!1}function X9(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Z9(t){t.resolveTargetDelta()}function eW(t){t.calcProjection()}function tW(t){t.resetSkewAndRotation()}function nW(t){t.removeLeadSnapshot()}function qk(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Gk(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function rW(t,e,n,r){Gk(t.x,e.x,n.x,r),Gk(t.y,e.y,n.y,r)}function iW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sW={duration:.45,ease:[.4,0,.1,1]},Jk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yk=Jk("applewebkit/")&&!Jk("chrome/")?Math.round:ur;function Qk(t){t.min=Yk(t.min),t.max=Yk(t.max)}function oW(t){Qk(t.x),Qk(t.y)}function wP(t,e,n){return t==="position"||t==="preserve-aspect"&&!p9(Uk(e),Uk(n),.2)}function aW(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const lW=vP({attachResizeListener:(t,e)=>Au(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),am={current:void 0},xP=vP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!am.current){const t=new lW({});t.mount(window),t.setOptions({layoutScroll:!0}),am.current=t}return am.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uW={pan:{Feature:R9},drag:{Feature:A9,ProjectionNode:xP,MeasureLayout:hP}};function Xk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ht.postRender(()=>s(e,Wu(e)))}class cW extends ws{mount(){const{current:e}=this.node;e&&(this.unmount=$8(e,(n,r)=>(Xk(this.node,r,"Start"),i=>Xk(this.node,i,"End"))))}unmount(){}}class dW extends ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uu(Au(this.node.current,"focus",()=>this.onFocus()),Au(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ht.postRender(()=>s(e,Wu(e)))}class hW extends ws{mount(){const{current:e}=this.node;e&&(this.unmount=U8(e,(n,r)=>(Zk(this.node,r,"Start"),(i,{success:s})=>Zk(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cy=new WeakMap,lm=new WeakMap,fW=t=>{const e=Cy.get(t.target);e&&e(t)},pW=t=>{t.forEach(fW)};function mW({root:t,...e}){const n=t||document;lm.has(n)||lm.set(n,{});const r=lm.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pW,{root:t,...e})),r[i]}function gW(t,e,n){const r=mW(e);return Cy.set(t,n),r.observe(t),()=>{Cy.delete(t),r.unobserve(t)}}const yW={some:0,all:1};class vW extends ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:yW[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return gW(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(wW(e,n))&&this.startObserver()}unmount(){}}function wW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xW={inView:{Feature:vW},tap:{Feature:hW},focus:{Feature:dW},hover:{Feature:cW}},bW={layout:{ProjectionNode:xP,MeasureLayout:hP}},kW={...l9,...xW,...uW,...bW},SW=EH(kW,jH),EW=({flatTask:t,isFocused:e,onEdit:n})=>{const{updateTask:r,deleteTask:i,setFocusedTaskId:s,setEditingTaskId:o,addTask:a,toggleExpansion:l,startDrag:u,keyboardMove:c,tasks:d,tags:h,dragState:f,navigateToTask:p,navigateBack:g,view:y,canNavigateBack:m,smartReschedule:w,selectedTaskIds:v,handleSelection:S,themeSettings:T,setPendingFocusTaskId:x,setSelectedTaskIds:R,visibleTasks:b}=P.useContext(fr),k=t.data,O=P.useRef(null),M=t.isExpanded,N=t.hasChildren,L=!!k.completed_at,D=v.includes(k.id),z=Q=>{let B=Q;const ee=new Set;for(;B.parent_id&&!ee.has(B.id);){ee.add(B.id);const ce=d.find(ue=>ue.id===B.parent_id);if(!ce)break;B=ce}return B.color||"blue"};P.useEffect(()=>{e&&O.current&&O.current.focus({preventScroll:!0})},[e]);const I=()=>{r(k.id,{completed_at:L?null:new Date().toISOString()})},_=Q=>{if(Q.altKey&&!Q.ctrlKey&&!Q.metaKey){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(Q.key)&&(Q.preventDefault(),Q.stopPropagation()),Q.key==="ArrowUp"){c(k.id,"up");return}if(Q.key==="ArrowDown"){c(k.id,"down");return}if(Q.key==="ArrowRight"){c(k.id,"right");return}if(Q.key==="ArrowLeft"){m&&y==="all"?g():c(k.id,"left");return}}if(Q.key==="Tab"){Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?m&&y==="all"?g():c(k.id,"left"):c(k.id,"right");return}if(Q.key==="Delete"||Q.key==="Backspace"&&!Q.target.matches("input, textarea")){Q.preventDefault(),Q.stopPropagation();const B=v.includes(k.id)?v:[k.id],ee=b.findIndex(ue=>ue.data.id===k.id);let ce=null;for(let ue=ee+1;ue<b.length;ue++)if(!B.includes(b[ue].data.id)){ce=b[ue];break}if(!ce){for(let ue=ee-1;ue>=0;ue--)if(!B.includes(b[ue].data.id)){ce=b[ue];break}}B.forEach(ue=>i(ue)),ce&&(s(ce.data.id),R([ce.data.id]));return}if(Q.ctrlKey&&Q.key==="."){Q.preventDefault(),Q.stopPropagation(),I();return}if(Q.key==="Enter"&&(Q.preventDefault(),Q.stopPropagation(),n()),Q.key===" "&&(y==="inbox"||y==="all")){Q.preventDefault(),Q.stopPropagation();const B=d.filter(ue=>ue.parent_id===k.parent_id).sort((ue,ye)=>(ue.order_index||0)-(ye.order_index||0)),ee=B.findIndex(ue=>ue.id===k.id);let ce=k.order_index+1e4;ee<B.length-1&&(ce=(k.order_index+B[ee+1].order_index)/2),a({title:"",status:"inbox",parent_id:k.parent_id,order_index:ce},[],void 0).then(ue=>{ue&&(x(ue),o(ue),R([]))})}if(Q.ctrlKey){if(Q.key==="t"&&(Q.preventDefault(),Q.stopPropagation(),r(k.id,{start_date:new Date().toISOString()})),Q.key==="]"){Q.preventDefault(),Q.stopPropagation();const B=k.start_date?new Date(k.start_date):new Date;B.setDate(B.getDate()+1),r(k.id,{start_date:B.toISOString()})}if(Q.key==="["){Q.preventDefault(),Q.stopPropagation();const B=k.start_date?new Date(k.start_date):new Date;B.setDate(B.getDate()-1),r(k.id,{start_date:B.toISOString()})}}Q.altKey&&(Q.metaKey||Q.ctrlKey)&&Q.key==="r"&&(Q.preventDefault(),Q.stopPropagation(),w(k.id)),!Q.altKey&&!Q.ctrlKey&&!Q.metaKey&&Q.key!==" "&&(Q.key==="ArrowRight"&&(Q.preventDefault(),N&&!M&&l(k.id,!0)),Q.key==="ArrowLeft"&&(Q.preventDefault(),M?l(k.id,!1):k.parent_id&&s(k.parent_id)))},$=f.draggedId===k.id||f.isDragging&&D,K=`group relative mb-0.5 rounded-lg outline-none select-none cursor-default py-1.5 ${D?"bg-[#cfe1fc]":""} ${!D&&!$&&(e&&!D&&!$?"bg-slate-50":"")} ${L?"bg-emerald-50/30":""} ${$?"opacity-40 scale-[0.98] blur-[0.5px] transition-all duration-200":"opacity-100 scale-100 transition-all duration-200"} transition-all duration-200 ease-in-out`,V=()=>{if(!k.start_date)return null;const Q=Xi(k.start_date),B=du(k.start_date)&&!L;let ee="bg-slate-50 text-slate-400";return Q?ee="bg-yellow-50 text-yellow-600 font-medium":B&&(ee="bg-red-50 text-red-600 font-medium"),E.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded border border-transparent ${ee} flex items-center gap-1`,children:[" ",E.jsx(af,{size:10})," ",UT(k.start_date)," "]})},te=T.fontWeight==="thin"?"font-extralight":"font-medium",we={small:"text-sm",normal:"text-base",large:"text-lg"}[T.fontSize]||"text-base";return E.jsx(SW.div,{layout:!0,transition:{layout:{duration:.2,ease:"easeInOut"}},ref:O,"data-task-id":k.id,"data-task-index":t.index,draggable:y!=="schedule",onDragStart:Q=>u(Q,t),className:K,style:{marginLeft:`${t.depth*_g}px`},tabIndex:0,onKeyDown:_,onClick:Q=>{Q.stopPropagation(),S(Q,k.id)},onDoubleClick:Q=>{Q.stopPropagation(),n()},children:E.jsxs("div",{className:"flex flex-col px-3",children:[y==="next"&&t.breadcrumbs&&t.breadcrumbs.length>0&&E.jsxs("div",{className:"flex items-center gap-1 mb-1 flex-wrap",children:[t.breadcrumbs.map((Q,B)=>{const ee=Cr[z(Q)]||Cr.blue;return E.jsxs(di.Fragment,{children:[" ",E.jsxs("button",{onClick:ce=>{ce.stopPropagation(),p(Q.id)},className:`text-[9px] px-1.5 py-0.5 rounded border ${ee.badge} hover:opacity-80 transition-opacity flex items-center gap-1`,children:[" ",Q.is_project?E.jsx(qT,{size:8}):E.jsx(WT,{size:8})," ",E.jsx("span",{className:"max-w-[80px] truncate",children:Q.title})," "]})," ",B<t.breadcrumbs.length-1&&E.jsx(hu,{size:8,className:"text-gray-300"})," "]},Q.id)}),E.jsx(n3,{size:10,className:"text-gray-300 ml-1"})]}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:`mt-1 cursor-grab active:cursor-grabbing text-slate-300 hover:text-slate-500 transition-colors ${y==="schedule"?"invisible":""}`,children:E.jsx(i3,{size:14})}),E.jsxs("div",{className:"mt-0.5 flex items-center gap-1",children:[N&&y!=="next"?E.jsx("button",{onClick:Q=>{Q.stopPropagation(),l(k.id)},className:"text-slate-400 hover:text-slate-800 transition-transform",children:M?E.jsx(W0,{size:16}):E.jsx(hu,{size:16})}):E.jsx("div",{className:"w-[16px]"}),E.jsx(QT,{checked:L,onChange:Q=>{Q.stopPropagation(),I()},color:z(k),isRoot:!k.parent_id})]}),E.jsxs("div",{className:"flex-1 min-w-0 pt-0.5 cursor-text flex items-center",children:[E.jsx("span",{className:`${we} ${te} transition-all duration-300 ${L?"text-slate-400 line-through decoration-slate-300":"text-slate-700"} mr-2`,children:k.title}),(k.tags||[]).length>0&&E.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[" ",(k.tags||[]).map(Q=>{var ee;const B=(ee=h.find(ce=>ce.id===Q))==null?void 0:ee.name;return B?E.jsxs("span",{className:`text-[10px] font-light border border-slate-200 rounded-md px-1.5 py-px ${L?"text-slate-300 bg-slate-50":"text-slate-500 bg-slate-50"}`,children:[" #",B," "]},Q):null})," "]}),k.description&&E.jsx("span",{className:"text-[10px] text-slate-300 mr-2",children:"..."}),E.jsxs("div",{className:`ml-auto ${L?"opacity-50":"opacity-100"}`,children:[" ",V()," "]})]}),E.jsx("div",{className:"opacity-0 group-hover:opacity-100 flex items-center gap-1 pl-2",children:E.jsx("button",{onClick:Q=>{Q.stopPropagation(),i(k.id)},className:"p-1 hover:text-red-500 text-slate-300 transition-colors",children:E.jsx(lf,{size:14})})})]})]})})},CW=({task:t,position:e,count:n})=>{if(!t)return null;const r=Cr[t.color]||Cr.blue;return E.jsx("div",{className:"fixed pointer-events-none z-[9999]",style:{left:e.x,top:e.y,transform:"translate(-20px, -50%) rotate(-2deg) scale(1.02)"},children:E.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border border-slate-200 px-4 py-2 min-w-[200px] max-w-[300px] ring-2 ring-blue-400/30 backdrop-blur-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:`w-3 h-3 rounded ${r.dot}`}),E.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",children:t.title||""})]}),n>1&&E.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-lg border border-white",children:n})]})})},TW=({show:t,top:e,left:n,width:r,color:i})=>{if(!t)return null;const s=Cr[i]||Cr.blue;return E.jsx("div",{className:"absolute pointer-events-none z-40 transition-all duration-100 ease-out",style:{top:`${e}px`,left:`${n}px`,width:`${r}px`},children:E.jsx("div",{className:`h-0.5 ${s.indicator} rounded-full shadow-sm relative`,children:E.jsx("div",{className:`absolute -left-1.5 -top-[3px] w-2 h-2 ${s.indicator} rounded-full shadow-md`})})})},_W=()=>{const{visibleTasks:t,focusedTaskId:e,setFocusedTaskId:n,editingTaskId:r,setEditingTaskId:i,expandedTaskIds:s,endDrag:o,dragState:a,updateDropState:l,updateGhostPosition:u,selectedTaskIds:c,handleSelection:d,selectionAnchor:h,tasks:f,pendingFocusTaskId:p,setPendingFocusTaskId:g}=P.useContext(fr),y=P.useRef(null),m=P.useRef(null);P.useEffect(()=>{const b=k=>{var M,N;if(r||((M=document.activeElement)==null?void 0:M.tagName)==="INPUT"||((N=document.activeElement)==null?void 0:N.tagName)==="TEXTAREA")return;const O=t.findIndex(L=>L.data.id===e);if(k.metaKey||k.ctrlKey){if(k.key==="ArrowUp"){if(k.preventDefault(),t.length>0){const L=t[0];n(L.data.id),d({shiftKey:!1,ctrlKey:!1},L.data.id)}return}if(k.key==="ArrowDown"){if(k.preventDefault(),t.length>0){const L=t[t.length-1];n(L.data.id),d({shiftKey:!1,ctrlKey:!1},L.data.id)}return}}if(k.shiftKey&&(k.key==="ArrowDown"||k.key==="ArrowUp")){k.preventDefault();let L=O;k.key==="ArrowDown"&&(L=Math.min(O+1,t.length-1)),k.key==="ArrowUp"&&(L=Math.max(O-1,0));const D=t[L];D&&(n(D.data.id),d({shiftKey:!0,preventDefault:()=>{}},D.data.id));return}if(k.key==="ArrowDown"&&!k.altKey){k.preventDefault();const L=O+1;if(L<t.length){const D=t[L];n(D.data.id),d({shiftKey:!1,ctrlKey:!1},D.data.id)}}else if(k.key==="ArrowUp"&&!k.altKey){k.preventDefault();const L=O-1;if(L>=0){const D=t[L];n(D.data.id),d({shiftKey:!1,ctrlKey:!1},D.data.id)}}else k.key==="Enter"&&O!==-1&&!r&&!k.altKey&&(k.preventDefault(),i(t[O].data.id))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e,s,r,h]);const w=b=>{var Q;if(b.preventDefault(),!a.isDragging||!y.current)return;u(b.clientX,b.clientY);const k=y.current.getBoundingClientRect(),O=b.clientX,M=b.clientY,N=O-k.left,L=100,D=10,z=window.innerHeight,I=document.querySelector("main");I&&(M<L?m.current||(m.current=setInterval(()=>{I.scrollTop-=D},16)):M>z-L?m.current||(m.current=setInterval(()=>{I.scrollTop+=D},16)):m.current&&(clearInterval(m.current),m.current=null));let _=-1,$=null,j=document.elementFromPoint(O,M);for(;j&&j!==y.current&&j!==document.body;){if(j.hasAttribute("data-task-index")){_=parseInt(j.getAttribute("data-task-index")||"-1"),$=j.getBoundingClientRect();break}j=j.parentElement}if(_===-1&&t.length>0&&y.current){const B=y.current.querySelector("[data-task-index]:last-child");if(B){const ee=B.getBoundingClientRect();M>ee.bottom&&(_=parseInt(B.getAttribute("data-task-index")||"-1")+1,$=ee)}}if(_===-1){const B=(Q=y.current)==null?void 0:Q.querySelector("[data-task-index]:first-child");if(B){const ee=B.getBoundingClientRect();M<ee.top&&(_=0,$=ee)}if(_===-1)return}let C=_;if($){const B=$.top+$.height/2;M>B&&_<t.length&&(C=_+1)}const q=N-a.dragOffsetX;let G=Math.floor(q/_g);G<0&&(G=0);const A=t[C-1],K=A?A.depth+1:0;G>K&&(G=K);let V=0;$?C===_?V=$.top-k.top:V=$.bottom-k.top:C===0&&(V=0);const te=G*_g+40,we=k.width-te-20;l({dropIndex:C,dropDepth:G,indicatorTop:V,indicatorLeft:te,indicatorWidth:we})},v=()=>{m.current&&(clearInterval(m.current),m.current=null),o()},S=b=>{i(null),p?(n(p),g(null)):n(b)},T=a.draggedId?f.find(b=>b.id===a.draggedId):null,x=c.includes(a.draggedId||"")?c.length:1,R=()=>{if(a.dropIndex===null||a.dropIndex===0)return"blue";const b=t[a.dropIndex-1];return(b==null?void 0:b.data.color)||"blue"};return t.length===0?E.jsxs("div",{className:"text-center py-20 opacity-20",children:[E.jsx(a3,{size:48,className:"mx-auto"}),E.jsx("p",{className:"text-xs mt-2",children:"No tasks"})]}):E.jsxs(E.Fragment,{children:[a.isDragging&&T&&E.jsx(CW,{task:T,position:a.ghostPosition,count:x}),E.jsxs("div",{ref:y,className:"pb-20 relative min-h-[500px]",onDragOver:w,onDrop:b=>{b.preventDefault(),v()},onDragEnd:v,children:[E.jsx(TW,{show:a.isDragging&&a.dropIndex!==null,top:a.indicatorTop,left:a.indicatorLeft,width:a.indicatorWidth,depth:a.dropDepth,color:R()}),t.map((b,k)=>E.jsx(di.Fragment,{children:r===b.data.id?E.jsx(td,{initialData:b.data,onClose:()=>S(b.data.id)},b.data.id):E.jsx(EW,{flatTask:b,isFocused:e===b.data.id,onEdit:()=>i(b.data.id)},b.data.id)},b.data.id))]})]})},AW=()=>{const{tasks:t,updateTask:e,setEditingTaskId:n}=P.useContext(fr),[r,i]=P.useState(new Date),s=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),o=new Date(r.getFullYear(),r.getMonth(),1).getDay(),a=f=>t.filter(p=>{if(p.status==="deleted"||p.status==="logged")return!1;const g=p.start_date?new Date(p.start_date):p.due_date?new Date(p.due_date):null;return g&&Bi(g,f)}),l=()=>{i(new Date(r.getFullYear(),r.getMonth()-1,1))},u=()=>{i(new Date(r.getFullYear(),r.getMonth()+1,1))},c=(f,p)=>{f.preventDefault();const g=f.dataTransfer.getData("text/plain");if(g){const y=new Date(p);y.setHours(9,0,0,0),e(g,{start_date:y.toISOString()})}},d=f=>{f.preventDefault()},h=()=>{const f=[];for(let p=0;p<o;p++)f.push(E.jsx("div",{className:"h-32 bg-gray-50/50 border-b border-r border-gray-100"},`empty-${p}`));for(let p=1;p<=s;p++){const g=new Date(r.getFullYear(),r.getMonth(),p),y=a(g),m=Bi(g,new Date);f.push(E.jsxs("div",{onDragOver:d,onDrop:w=>c(w,g),className:`h-32 border-b border-r border-gray-100 p-2 overflow-y-auto hover:bg-gray-50 transition-colors ${m?"bg-indigo-50/30":""}`,children:[E.jsxs("div",{className:`text-xs font-bold mb-1 ${m?"text-indigo-600":"text-gray-400"}`,children:[p," ",m&&"(Today)"]}),E.jsx("div",{className:"space-y-1",children:y.map(w=>{const v=Cr[w.color||"blue"];return E.jsx("div",{draggable:!0,onDragStart:S=>{S.dataTransfer.setData("text/plain",w.id)},onClick:S=>{S.stopPropagation(),n(w.id)},className:`text-[10px] px-1.5 py-1 rounded border ${v.badge} cursor-grab active:cursor-grabbing truncate shadow-sm hover:shadow-md transition-shadow`,title:w.title,children:w.title},w.id)})})]},p))}return f};return E.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden h-full flex flex-col",children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50/50",children:[E.jsxs("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[E.jsx(af,{size:18,className:"text-gray-500"}),r.toLocaleString("default",{month:"long",year:"numeric"})]}),E.jsxs("div",{className:"flex gap-1",children:[E.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:E.jsx(HT,{size:20})}),E.jsx("button",{onClick:()=>i(new Date),className:"px-3 py-1 text-xs font-bold text-gray-600 hover:bg-gray-200 rounded",children:"Today"}),E.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-200 rounded text-gray-600",children:E.jsx(hu,{size:20})})]})]}),E.jsxs("div",{className:"grid grid-cols-7 border-b border-gray-200 bg-gray-50 text-center py-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:[E.jsx("div",{children:"Sun"}),E.jsx("div",{children:"Mon"}),E.jsx("div",{children:"Tue"}),E.jsx("div",{children:"Wed"}),E.jsx("div",{children:"Thu"}),E.jsx("div",{children:"Fri"}),E.jsx("div",{children:"Sat"})]}),E.jsx("div",{className:"grid grid-cols-7 flex-1 overflow-y-auto",children:h()})]})};function RW(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const PW=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OW=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IW={};function eS(t,e){return((e||IW).jsx?OW:PW).test(t)}const MW=/[ \t\n\f\r]/g;function NW(t){return typeof t=="object"?t.type==="text"?tS(t.value):!1:tS(t)}function tS(t){return t.replace(MW,"")===""}class Ku{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Ku.prototype.normal={};Ku.prototype.property={};Ku.prototype.space=void 0;function bP(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ku(n,r,e)}function Ty(t){return t.toLowerCase()}class Mn{constructor(e,n){this.attribute=n,this.property=e}}Mn.prototype.attribute="";Mn.prototype.booleanish=!1;Mn.prototype.boolean=!1;Mn.prototype.commaOrSpaceSeparated=!1;Mn.prototype.commaSeparated=!1;Mn.prototype.defined=!1;Mn.prototype.mustUseProperty=!1;Mn.prototype.number=!1;Mn.prototype.overloadedBoolean=!1;Mn.prototype.property="";Mn.prototype.spaceSeparated=!1;Mn.prototype.space=void 0;let DW=0;const Le=mo(),Rt=mo(),_y=mo(),ae=mo(),st=mo(),da=mo(),Dn=mo();function mo(){return 2**++DW}const Ay=Object.freeze(Object.defineProperty({__proto__:null,boolean:Le,booleanish:Rt,commaOrSpaceSeparated:Dn,commaSeparated:da,number:ae,overloadedBoolean:_y,spaceSeparated:st},Symbol.toStringTag,{value:"Module"})),um=Object.keys(Ay);class c1 extends Mn{constructor(e,n,r,i){let s=-1;if(super(e,n),nS(this,"space",i),typeof r=="number")for(;++s<um.length;){const o=um[s];nS(this,um[s],(r&Ay[o])===Ay[o])}}}c1.prototype.defined=!0;function nS(t,e,n){n&&(t[e]=n)}function Ba(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new c1(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Ty(r)]=r,n[Ty(s.attribute)]=r}return new Ku(e,n,t.space)}const kP=Ba({properties:{ariaActiveDescendant:null,ariaAtomic:Rt,ariaAutoComplete:null,ariaBusy:Rt,ariaChecked:Rt,ariaColCount:ae,ariaColIndex:ae,ariaColSpan:ae,ariaControls:st,ariaCurrent:null,ariaDescribedBy:st,ariaDetails:null,ariaDisabled:Rt,ariaDropEffect:st,ariaErrorMessage:null,ariaExpanded:Rt,ariaFlowTo:st,ariaGrabbed:Rt,ariaHasPopup:null,ariaHidden:Rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:st,ariaLevel:ae,ariaLive:null,ariaModal:Rt,ariaMultiLine:Rt,ariaMultiSelectable:Rt,ariaOrientation:null,ariaOwns:st,ariaPlaceholder:null,ariaPosInSet:ae,ariaPressed:Rt,ariaReadOnly:Rt,ariaRelevant:null,ariaRequired:Rt,ariaRoleDescription:st,ariaRowCount:ae,ariaRowIndex:ae,ariaRowSpan:ae,ariaSelected:Rt,ariaSetSize:ae,ariaSort:null,ariaValueMax:ae,ariaValueMin:ae,ariaValueNow:ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function SP(t,e){return e in t?t[e]:e}function EP(t,e){return SP(t,e.toLowerCase())}const LW=Ba({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:da,acceptCharset:st,accessKey:st,action:null,allow:null,allowFullScreen:Le,allowPaymentRequest:Le,allowUserMedia:Le,alt:null,as:null,async:Le,autoCapitalize:null,autoComplete:st,autoFocus:Le,autoPlay:Le,blocking:st,capture:null,charSet:null,checked:Le,cite:null,className:st,cols:ae,colSpan:null,content:null,contentEditable:Rt,controls:Le,controlsList:st,coords:ae|da,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Le,defer:Le,dir:null,dirName:null,disabled:Le,download:_y,draggable:Rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Le,formTarget:null,headers:st,height:ae,hidden:_y,high:ae,href:null,hrefLang:null,htmlFor:st,httpEquiv:st,id:null,imageSizes:null,imageSrcSet:null,inert:Le,inputMode:null,integrity:null,is:null,isMap:Le,itemId:null,itemProp:st,itemRef:st,itemScope:Le,itemType:st,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Le,low:ae,manifest:null,max:null,maxLength:ae,media:null,method:null,min:null,minLength:ae,multiple:Le,muted:Le,name:null,nonce:null,noModule:Le,noValidate:Le,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Le,optimum:ae,pattern:null,ping:st,placeholder:null,playsInline:Le,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Le,referrerPolicy:null,rel:st,required:Le,reversed:Le,rows:ae,rowSpan:ae,sandbox:st,scope:null,scoped:Le,seamless:Le,selected:Le,shadowRootClonable:Le,shadowRootDelegatesFocus:Le,shadowRootMode:null,shape:null,size:ae,sizes:null,slot:null,span:ae,spellCheck:Rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ae,step:null,style:null,tabIndex:ae,target:null,title:null,translate:null,type:null,typeMustMatch:Le,useMap:null,value:Rt,width:ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:st,axis:null,background:null,bgColor:null,border:ae,borderColor:null,bottomMargin:ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Le,declare:Le,event:null,face:null,frame:null,frameBorder:null,hSpace:ae,leftMargin:ae,link:null,longDesc:null,lowSrc:null,marginHeight:ae,marginWidth:ae,noResize:Le,noHref:Le,noShade:Le,noWrap:Le,object:null,profile:null,prompt:null,rev:null,rightMargin:ae,rules:null,scheme:null,scrolling:Rt,standby:null,summary:null,text:null,topMargin:ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Le,disableRemotePlayback:Le,prefix:null,property:null,results:ae,security:null,unselectable:null},space:"html",transform:EP}),jW=Ba({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Dn,accentHeight:ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ae,amplitude:ae,arabicForm:null,ascent:ae,attributeName:null,attributeType:null,azimuth:ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ae,by:null,calcMode:null,capHeight:ae,className:st,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ae,diffuseConstant:ae,direction:null,display:null,dur:null,divisor:ae,dominantBaseline:null,download:Le,dx:null,dy:null,edgeMode:null,editable:null,elevation:ae,enableBackground:null,end:null,event:null,exponent:ae,externalResourcesRequired:null,fill:null,fillOpacity:ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:da,g2:da,glyphName:da,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ae,horizOriginX:ae,horizOriginY:ae,id:null,ideographic:ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ae,k:ae,k1:ae,k2:ae,k3:ae,k4:ae,kernelMatrix:Dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ae,overlineThickness:ae,paintOrder:null,panose1:null,path:null,pathLength:ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:st,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ae,pointsAtY:ae,pointsAtZ:ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dn,rev:Dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dn,requiredFeatures:Dn,requiredFonts:Dn,requiredFormats:Dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ae,specularExponent:ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ae,strikethroughThickness:ae,string:null,stroke:null,strokeDashArray:Dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ae,strokeOpacity:ae,strokeWidth:null,style:null,surfaceScale:ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dn,tabIndex:ae,tableValues:null,target:null,targetX:ae,targetY:ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ae,underlineThickness:ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ae,values:null,vAlphabetic:ae,vMathematical:ae,vectorEffect:null,vHanging:ae,vIdeographic:ae,version:null,vertAdvY:ae,vertOriginX:ae,vertOriginY:ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:SP}),CP=Ba({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),TP=Ba({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:EP}),_P=Ba({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),$W={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},zW=/[A-Z]/g,rS=/-[a-z]/g,BW=/^data[-\w.:]+$/i;function FW(t,e){const n=Ty(e);let r=e,i=Mn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&BW.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(rS,VW);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!rS.test(s)){let o=s.replace(zW,UW);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=c1}return new i(r,e)}function UW(t){return"-"+t.toLowerCase()}function VW(t){return t.charAt(1).toUpperCase()}const HW=bP([kP,LW,CP,TP,_P],"html"),d1=bP([kP,jW,CP,TP,_P],"svg");function WW(t){return t.join(" ").trim()}var h1={},iS=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,KW=/\n/g,qW=/^\s*/,GW=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,JW=/^:\s*/,YW=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,QW=/^[;\s]*/,XW=/^\s+|\s+$/g,ZW=`
`,sS="/",oS="*",Ms="",e7="comment",t7="declaration";function n7(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(p){var g=p.match(KW);g&&(n+=g.length);var y=p.lastIndexOf(ZW);r=~y?p.length-y:r+p.length}function s(){var p={line:n,column:r};return function(g){return g.position=new o(p),u(),g}}function o(p){this.start=p,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(p){var g=new Error(e.source+":"+n+":"+r+": "+p);if(g.reason=p,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function l(p){var g=p.exec(t);if(g){var y=g[0];return i(y),t=t.slice(y.length),g}}function u(){l(qW)}function c(p){var g;for(p=p||[];g=d();)g!==!1&&p.push(g);return p}function d(){var p=s();if(!(sS!=t.charAt(0)||oS!=t.charAt(1))){for(var g=2;Ms!=t.charAt(g)&&(oS!=t.charAt(g)||sS!=t.charAt(g+1));)++g;if(g+=2,Ms===t.charAt(g-1))return a("End of comment missing");var y=t.slice(2,g-2);return r+=2,i(y),t=t.slice(g),r+=2,p({type:e7,comment:y})}}function h(){var p=s(),g=l(GW);if(g){if(d(),!l(JW))return a("property missing ':'");var y=l(YW),m=p({type:t7,property:aS(g[0].replace(iS,Ms)),value:y?aS(y[0].replace(iS,Ms)):Ms});return l(QW),m}}function f(){var p=[];c(p);for(var g;g=h();)g!==!1&&(p.push(g),c(p));return p}return u(),f()}function aS(t){return t?t.replace(XW,Ms):Ms}var r7=n7,i7=ld&&ld.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h1,"__esModule",{value:!0});h1.default=o7;const s7=i7(r7);function o7(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,s7.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.camelCase=void 0;var a7=/^--[a-zA-Z0-9_-]+$/,l7=/-([a-z])/g,u7=/^[^-]+$/,c7=/^-(webkit|moz|ms|o|khtml)-/,d7=/^-(ms)-/,h7=function(t){return!t||u7.test(t)||a7.test(t)},f7=function(t,e){return e.toUpperCase()},lS=function(t,e){return"".concat(e,"-")},p7=function(t,e){return e===void 0&&(e={}),h7(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(d7,lS):t=t.replace(c7,lS),t.replace(l7,f7))};Rf.camelCase=p7;var m7=ld&&ld.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},g7=m7(h1),y7=Rf;function Ry(t,e){var n={};return!t||typeof t!="string"||(0,g7.default)(t,function(r,i){r&&i&&(n[(0,y7.camelCase)(r,e)]=i)}),n}Ry.default=Ry;var v7=Ry;const w7=$h(v7),AP=RP("end"),f1=RP("start");function RP(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function x7(t){const e=f1(t),n=AP(t);if(e&&n)return{start:e,end:n}}function $l(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?uS(t.position):"start"in t||"end"in t?uS(t):"line"in t||"column"in t?Py(t):""}function Py(t){return cS(t&&t.line)+":"+cS(t&&t.column)}function uS(t){return Py(t&&t.start)+"-"+Py(t&&t.end)}function cS(t){return t&&typeof t=="number"?t:1}class fn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=$l(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}fn.prototype.file="";fn.prototype.name="";fn.prototype.reason="";fn.prototype.message="";fn.prototype.stack="";fn.prototype.column=void 0;fn.prototype.line=void 0;fn.prototype.ancestors=void 0;fn.prototype.cause=void 0;fn.prototype.fatal=void 0;fn.prototype.place=void 0;fn.prototype.ruleId=void 0;fn.prototype.source=void 0;const p1={}.hasOwnProperty,b7=new Map,k7=/[A-Z]/g,S7=new Set(["table","tbody","thead","tfoot","tr"]),E7=new Set(["td","th"]),PP="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function C7(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=M7(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=I7(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?d1:HW,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=OP(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function OP(t,e,n){if(e.type==="element")return T7(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return _7(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return R7(t,e,n);if(e.type==="mdxjsEsm")return A7(t,e);if(e.type==="root")return P7(t,e,n);if(e.type==="text")return O7(t,e)}function T7(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=d1,t.schema=i),t.ancestors.push(e);const s=MP(t,e.tagName,!1),o=N7(t,e);let a=g1(t,e);return S7.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!NW(l):!0})),IP(t,o,s,e),m1(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function _7(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Ru(t,e.position)}function A7(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Ru(t,e.position)}function R7(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=d1,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:MP(t,e.name,!0),o=D7(t,e),a=g1(t,e);return IP(t,o,s,e),m1(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function P7(t,e,n){const r={};return m1(r,g1(t,e)),t.create(e,t.Fragment,r,n)}function O7(t,e){return e.value}function IP(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function m1(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function I7(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function M7(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=f1(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function N7(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&p1.call(e.properties,i)){const s=L7(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&E7.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function D7(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Ru(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Ru(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function g1(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:b7;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=OP(t,s,o);a!==void 0&&n.push(a)}return n}function L7(t,e,n){const r=FW(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?RW(n):WW(n)),r.property==="style"){let i=typeof n=="object"?n:j7(t,String(n));return t.stylePropertyNameCase==="css"&&(i=$7(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?$W[r.property]||r.property:r.attribute,n]}}function j7(t,e){try{return w7(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new fn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=PP+"#cannot-parse-style-attribute",i}}function MP(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=eS(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=eS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return p1.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Ru(t)}function Ru(t,e){const n=new fn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=PP+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $7(t){const e={};let n;for(n in t)p1.call(t,n)&&(e[z7(n)]=t[n]);return e}function z7(t){let e=t.replace(k7,B7);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function B7(t){return"-"+t.toLowerCase()}const cm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},F7={};function U7(t,e){const n=e||F7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return NP(t,r,i)}function NP(t,e,n){if(V7(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return dS(t.children,e,n)}return Array.isArray(t)?dS(t,e,n):""}function dS(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=NP(t[i],e,n);return r.join("")}function V7(t){return!!(t&&typeof t=="object")}const hS=document.createElement("i");function y1(t){const e="&"+t+";";hS.innerHTML=e;const n=hS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Jr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function tr(t,e){return t.length>0?(Jr(t,t.length,0,e),t):e}const fS={}.hasOwnProperty;function H7(t){const e={};let n=-1;for(;++n<t.length;)W7(e,t[n]);return e}function W7(t,e){let n;for(n in e){const i=(fS.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){fS.call(i,o)||(i[o]=[]);const a=s[o];K7(i[o],Array.isArray(a)?a:a?[a]:[])}}}function K7(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Jr(t,0,0,r)}function DP(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ha(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ur=xs(/[A-Za-z]/),Fn=xs(/[\dA-Za-z]/),q7=xs(/[#-'*+\--9=?A-Z^-~]/);function Oy(t){return t!==null&&(t<32||t===127)}const Iy=xs(/\d/),G7=xs(/[\dA-Fa-f]/),J7=xs(/[!-/:-@[-`{-~]/);function Ie(t){return t!==null&&t<-2}function In(t){return t!==null&&(t<0||t===32)}function Qe(t){return t===-2||t===-1||t===32}const Y7=xs(/\p{P}|\p{S}/u),Q7=xs(/\s/);function xs(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Fa(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Fn(t.charCodeAt(n+1))&&Fn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function at(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Qe(l)?(t.enter(n),a(l)):e(l)}function a(l){return Qe(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const X7={tokenize:Z7};function Z7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),at(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Ie(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const eK={tokenize:tK},pS={tokenize:nK};function tK(t){const e=this,n=[];let r=0,i,s,o;return a;function a(v){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,l,u)(v)}return u(v)}function l(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const S=e.events.length;let T=S,x;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){x=e.events[T][1].end;break}m(r);let R=S;for(;R<e.events.length;)e.events[R][1].end={...x},R++;return Jr(e.events,T+1,0,e.events.slice(S)),e.events.length=R,u(v)}return a(v)}function u(v){if(r===n.length){if(!i)return h(v);if(i.currentConstruct&&i.currentConstruct.concrete)return p(v);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(pS,c,d)(v)}function c(v){return i&&w(),m(r),h(v)}function d(v){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(v)}function h(v){return e.containerState={},t.attempt(pS,f,p)(v)}function f(v){return r++,n.push([e.currentConstruct,e.containerState]),h(v)}function p(v){if(v===null){i&&w(),m(0),t.consume(v);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(v)}function g(v){if(v===null){y(t.exit("chunkFlow"),!0),m(0),t.consume(v);return}return Ie(v)?(t.consume(v),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(v),g)}function y(v,S){const T=e.sliceStream(v);if(S&&T.push(null),v.previous=s,s&&(s.next=v),s=v,i.defineSkip(v.start),i.write(T),e.parser.lazy[v.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const R=e.events.length;let b=R,k,O;for(;b--;)if(e.events[b][0]==="exit"&&e.events[b][1].type==="chunkFlow"){if(k){O=e.events[b][1].end;break}k=!0}for(m(r),x=R;x<e.events.length;)e.events[x][1].end={...O},x++;Jr(e.events,b+1,0,e.events.slice(R)),e.events.length=x}}function m(v){let S=n.length;for(;S-- >v;){const T=n[S];e.containerState=T[1],T[0].exit.call(e,t)}n.length=v}function w(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function nK(t,e,n){return at(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function mS(t){if(t===null||In(t)||Q7(t))return 1;if(Y7(t))return 2}function v1(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const My={name:"attention",resolveAll:rK,tokenize:iK};function rK(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},h={...t[n][1].start};gS(d,-l),gS(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=tr(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=tr(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=tr(u,v1(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=tr(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=tr(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Jr(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function iK(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=mS(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=mS(l),d=!c||c===2&&i||n.includes(l),h=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!h)),u._close=!!(s===42?h:h&&(c||!d)),e(l)}}function gS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const sK={name:"autolink",tokenize:oK};function oK(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return Ur(f)?(t.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||Fn(f)?(r=1,a(f)):u(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||Fn(f))&&r++<32?(t.consume(f),a):(r=0,u(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Oy(f)?n(f):(t.consume(f),l)}function u(f){return f===64?(t.consume(f),c):q7(f)?(t.consume(f),u):n(f)}function c(f){return Fn(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,c):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||Fn(f))&&r++<63){const p=f===45?h:d;return t.consume(f),p}return n(f)}}const Pf={partial:!0,tokenize:aK};function aK(t,e,n){return r;function r(s){return Qe(s)?at(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ie(s)?e(s):n(s)}}const LP={continuation:{tokenize:uK},exit:cK,name:"blockQuote",tokenize:lK};function lK(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Qe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function uK(t,e,n){const r=this;return i;function i(o){return Qe(o)?at(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(LP,e,n)(o)}}function cK(t){t.exit("blockQuote")}const jP={name:"characterEscape",tokenize:dK};function dK(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return J7(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const $P={name:"characterReference",tokenize:hK};function hK(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=Fn,c(d))}function u(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=G7,c):(t.enter("characterReferenceValue"),s=7,o=Iy,c(d))}function c(d){if(d===59&&i){const h=t.exit("characterReferenceValue");return o===Fn&&!y1(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),c):n(d)}}const yS={partial:!0,tokenize:pK},vS={concrete:!0,name:"codeFenced",tokenize:fK};function fK(t,e,n){const r=this,i={partial:!0,tokenize:T};let s=0,o=0,a;return l;function l(x){return u(x)}function u(x){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,a=x,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,t.consume(x),c):o<3?n(x):(t.exit("codeFencedFenceSequence"),Qe(x)?at(t,d,"whitespace")(x):d(x))}function d(x){return x===null||Ie(x)?(t.exit("codeFencedFence"),r.interrupt?e(x):t.check(yS,g,S)(x)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===null||Ie(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(x)):Qe(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),at(t,f,"whitespace")(x)):x===96&&x===a?n(x):(t.consume(x),h)}function f(x){return x===null||Ie(x)?d(x):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||Ie(x)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(x)):x===96&&x===a?n(x):(t.consume(x),p)}function g(x){return t.attempt(i,S,y)(x)}function y(x){return t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),m}function m(x){return s>0&&Qe(x)?at(t,w,"linePrefix",s+1)(x):w(x)}function w(x){return x===null||Ie(x)?t.check(yS,g,S)(x):(t.enter("codeFlowValue"),v(x))}function v(x){return x===null||Ie(x)?(t.exit("codeFlowValue"),w(x)):(t.consume(x),v)}function S(x){return t.exit("codeFenced"),e(x)}function T(x,R,b){let k=0;return O;function O(z){return x.enter("lineEnding"),x.consume(z),x.exit("lineEnding"),M}function M(z){return x.enter("codeFencedFence"),Qe(z)?at(x,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):N(z)}function N(z){return z===a?(x.enter("codeFencedFenceSequence"),L(z)):b(z)}function L(z){return z===a?(k++,x.consume(z),L):k>=o?(x.exit("codeFencedFenceSequence"),Qe(z)?at(x,D,"whitespace")(z):D(z)):b(z)}function D(z){return z===null||Ie(z)?(x.exit("codeFencedFence"),R(z)):b(z)}}}function pK(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const dm={name:"codeIndented",tokenize:gK},mK={partial:!0,tokenize:yK};function gK(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),at(t,s,"linePrefix",4+1)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Ie(u)?t.attempt(mK,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Ie(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function yK(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ie(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):at(t,s,"linePrefix",4+1)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Ie(o)?i(o):n(o)}}const vK={name:"codeText",previous:xK,resolve:wK,tokenize:bK};function wK(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function xK(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function bK(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(s=t.enter("codeTextSequence"),i=0,c(d)):Ie(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||Ie(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),u)}function c(d){return d===96?(t.consume(d),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",u(d))}}class kK{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&tl(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),tl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),tl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);tl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);tl(this.left,n.reverse())}}}function tl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function zP(t){const e={};let n=-1,r,i,s,o,a,l,u;const c=new kK(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,SK(c,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Jr(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function SK(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,d,h=-1,f=n,p=0,g=0;const y=[g];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(g=h+1,y.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const m=a.slice(y[h],y[h+1]),w=s.pop();l.push([w,w+m.length-1]),t.splice(w,2,m)}for(l.reverse(),h=-1;++h<l.length;)u[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return u}const EK={resolve:TK,tokenize:_K},CK={partial:!0,tokenize:AK};function TK(t){return zP(t),t}function _K(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Ie(a)?t.check(CK,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function AK(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),at(t,s,"linePrefix")}function s(o){if(o===null||Ie(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function BP(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(m){return m===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(m),t.exit(s),h):m===null||m===32||m===41||Oy(m)?n(m):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(m))}function h(m){return m===62?(t.enter(s),t.consume(m),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===62?(t.exit("chunkString"),t.exit(a),h(m)):m===null||m===60||Ie(m)?n(m):(t.consume(m),m===92?p:f)}function p(m){return m===60||m===62||m===92?(t.consume(m),f):f(m)}function g(m){return!c&&(m===null||m===41||In(m))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(m)):c<u&&m===40?(t.consume(m),c++,g):m===41?(t.consume(m),c--,g):m===null||m===32||m===40||Oy(m)?n(m):(t.consume(m),m===92?y:g)}function y(m){return m===40||m===41||m===92?(t.consume(m),g):g(m)}}function FP(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),c}function c(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Ie(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Ie(f)||a++>999?(t.exit("chunkString"),c(f)):(t.consume(f),l||(l=!Qe(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function UP(t,e,n,r,i,s){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),u(h))}function u(h){return h===o?(t.exit(s),l(o)):h===null?n(h):Ie(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),at(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===o||h===null||Ie(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?d:c)}function d(h){return h===o||h===92?(t.consume(h),c):c(h)}}function zl(t,e){let n;return r;function r(i){return Ie(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Qe(i)?at(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const RK={name:"definition",tokenize:OK},PK={partial:!0,tokenize:IK};function OK(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return FP.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=ha(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return In(f)?zl(t,u)(f):u(f)}function u(f){return BP(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return t.attempt(PK,d,d)(f)}function d(f){return Qe(f)?at(t,h,"whitespace")(f):h(f)}function h(f){return f===null||Ie(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function IK(t,e,n){return r;function r(a){return In(a)?zl(t,i)(a):n(a)}function i(a){return UP(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Qe(a)?at(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Ie(a)?e(a):n(a)}}const MK={name:"hardBreakEscape",tokenize:NK};function NK(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Ie(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const DK={name:"headingAtx",resolve:LK,tokenize:jK};function LK(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Jr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function jK(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||In(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Ie(c)?(t.exit("atxHeading"),e(c)):Qe(c)?at(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||In(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const $K=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wS=["pre","script","style","textarea"],zK={concrete:!0,name:"htmlFlow",resolveTo:UK,tokenize:VK},BK={partial:!0,tokenize:WK},FK={partial:!0,tokenize:HK};function UK(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function VK(t,e,n){const r=this;let i,s,o,a,l;return u;function u(A){return c(A)}function c(A){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(A),d}function d(A){return A===33?(t.consume(A),h):A===47?(t.consume(A),s=!0,g):A===63?(t.consume(A),i=3,r.interrupt?e:C):Ur(A)?(t.consume(A),o=String.fromCharCode(A),y):n(A)}function h(A){return A===45?(t.consume(A),i=2,f):A===91?(t.consume(A),i=5,a=0,p):Ur(A)?(t.consume(A),i=4,r.interrupt?e:C):n(A)}function f(A){return A===45?(t.consume(A),r.interrupt?e:C):n(A)}function p(A){const K="CDATA[";return A===K.charCodeAt(a++)?(t.consume(A),a===K.length?r.interrupt?e:N:p):n(A)}function g(A){return Ur(A)?(t.consume(A),o=String.fromCharCode(A),y):n(A)}function y(A){if(A===null||A===47||A===62||In(A)){const K=A===47,V=o.toLowerCase();return!K&&!s&&wS.includes(V)?(i=1,r.interrupt?e(A):N(A)):$K.includes(o.toLowerCase())?(i=6,K?(t.consume(A),m):r.interrupt?e(A):N(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):s?w(A):v(A))}return A===45||Fn(A)?(t.consume(A),o+=String.fromCharCode(A),y):n(A)}function m(A){return A===62?(t.consume(A),r.interrupt?e:N):n(A)}function w(A){return Qe(A)?(t.consume(A),w):O(A)}function v(A){return A===47?(t.consume(A),O):A===58||A===95||Ur(A)?(t.consume(A),S):Qe(A)?(t.consume(A),v):O(A)}function S(A){return A===45||A===46||A===58||A===95||Fn(A)?(t.consume(A),S):T(A)}function T(A){return A===61?(t.consume(A),x):Qe(A)?(t.consume(A),T):v(A)}function x(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),l=A,R):Qe(A)?(t.consume(A),x):b(A)}function R(A){return A===l?(t.consume(A),l=null,k):A===null||Ie(A)?n(A):(t.consume(A),R)}function b(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||In(A)?T(A):(t.consume(A),b)}function k(A){return A===47||A===62||Qe(A)?v(A):n(A)}function O(A){return A===62?(t.consume(A),M):n(A)}function M(A){return A===null||Ie(A)?N(A):Qe(A)?(t.consume(A),M):n(A)}function N(A){return A===45&&i===2?(t.consume(A),I):A===60&&i===1?(t.consume(A),_):A===62&&i===4?(t.consume(A),q):A===63&&i===3?(t.consume(A),C):A===93&&i===5?(t.consume(A),j):Ie(A)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(BK,G,L)(A)):A===null||Ie(A)?(t.exit("htmlFlowData"),L(A)):(t.consume(A),N)}function L(A){return t.check(FK,D,G)(A)}function D(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),z}function z(A){return A===null||Ie(A)?L(A):(t.enter("htmlFlowData"),N(A))}function I(A){return A===45?(t.consume(A),C):N(A)}function _(A){return A===47?(t.consume(A),o="",$):N(A)}function $(A){if(A===62){const K=o.toLowerCase();return wS.includes(K)?(t.consume(A),q):N(A)}return Ur(A)&&o.length<8?(t.consume(A),o+=String.fromCharCode(A),$):N(A)}function j(A){return A===93?(t.consume(A),C):N(A)}function C(A){return A===62?(t.consume(A),q):A===45&&i===2?(t.consume(A),C):N(A)}function q(A){return A===null||Ie(A)?(t.exit("htmlFlowData"),G(A)):(t.consume(A),q)}function G(A){return t.exit("htmlFlow"),e(A)}}function HK(t,e,n){const r=this;return i;function i(o){return Ie(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function WK(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Pf,e,n)}}const KK={name:"htmlText",tokenize:qK};function qK(t,e,n){const r=this;let i,s,o;return a;function a(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),l}function l(C){return C===33?(t.consume(C),u):C===47?(t.consume(C),T):C===63?(t.consume(C),v):Ur(C)?(t.consume(C),b):n(C)}function u(C){return C===45?(t.consume(C),c):C===91?(t.consume(C),s=0,p):Ur(C)?(t.consume(C),w):n(C)}function c(C){return C===45?(t.consume(C),f):n(C)}function d(C){return C===null?n(C):C===45?(t.consume(C),h):Ie(C)?(o=d,_(C)):(t.consume(C),d)}function h(C){return C===45?(t.consume(C),f):d(C)}function f(C){return C===62?I(C):C===45?h(C):d(C)}function p(C){const q="CDATA[";return C===q.charCodeAt(s++)?(t.consume(C),s===q.length?g:p):n(C)}function g(C){return C===null?n(C):C===93?(t.consume(C),y):Ie(C)?(o=g,_(C)):(t.consume(C),g)}function y(C){return C===93?(t.consume(C),m):g(C)}function m(C){return C===62?I(C):C===93?(t.consume(C),m):g(C)}function w(C){return C===null||C===62?I(C):Ie(C)?(o=w,_(C)):(t.consume(C),w)}function v(C){return C===null?n(C):C===63?(t.consume(C),S):Ie(C)?(o=v,_(C)):(t.consume(C),v)}function S(C){return C===62?I(C):v(C)}function T(C){return Ur(C)?(t.consume(C),x):n(C)}function x(C){return C===45||Fn(C)?(t.consume(C),x):R(C)}function R(C){return Ie(C)?(o=R,_(C)):Qe(C)?(t.consume(C),R):I(C)}function b(C){return C===45||Fn(C)?(t.consume(C),b):C===47||C===62||In(C)?k(C):n(C)}function k(C){return C===47?(t.consume(C),I):C===58||C===95||Ur(C)?(t.consume(C),O):Ie(C)?(o=k,_(C)):Qe(C)?(t.consume(C),k):I(C)}function O(C){return C===45||C===46||C===58||C===95||Fn(C)?(t.consume(C),O):M(C)}function M(C){return C===61?(t.consume(C),N):Ie(C)?(o=M,_(C)):Qe(C)?(t.consume(C),M):k(C)}function N(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),i=C,L):Ie(C)?(o=N,_(C)):Qe(C)?(t.consume(C),N):(t.consume(C),D)}function L(C){return C===i?(t.consume(C),i=void 0,z):C===null?n(C):Ie(C)?(o=L,_(C)):(t.consume(C),L)}function D(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||In(C)?k(C):(t.consume(C),D)}function z(C){return C===47||C===62||In(C)?k(C):n(C)}function I(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function _(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),$}function $(C){return Qe(C)?at(t,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):j(C)}function j(C){return t.enter("htmlTextData"),o(C)}}const w1={name:"labelEnd",resolveAll:QK,resolveTo:XK,tokenize:ZK},GK={tokenize:eq},JK={tokenize:tq},YK={tokenize:nq};function QK(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Jr(t,0,t.length,n),t}function XK(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=tr(a,t.slice(s+1,s+r+3)),a=tr(a,[["enter",c,e]]),a=tr(a,v1(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=tr(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=tr(a,t.slice(o+1)),a=tr(a,[["exit",l,e]]),Jr(t,s,t.length,a),t}function ZK(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(ha(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(GK,c,o?c:d)(h):h===91?t.attempt(JK,c,o?u:d)(h):o?c(h):d(h)}function u(h){return t.attempt(YK,c,d)(h)}function c(h){return e(h)}function d(h){return s._balanced=!0,n(h)}}function eq(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return In(d)?zl(t,s)(d):s(d)}function s(d){return d===41?c(d):BP(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return In(d)?zl(t,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?UP(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return In(d)?zl(t,c)(d):c(d)}function c(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function tq(t,e,n){const r=this;return i;function i(a){return FP.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ha(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function nq(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const rq={name:"labelStartImage",resolveAll:w1.resolveAll,tokenize:iq};function iq(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const sq={name:"labelStartLink",resolveAll:w1.resolveAll,tokenize:oq};function oq(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const hm={name:"lineEnding",tokenize:aq};function aq(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),at(t,e,"linePrefix")}}const od={name:"thematicBreak",tokenize:lq};function lq(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Ie(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),Qe(u)?at(t,a,"whitespace")(u):a(u))}}const kn={continuation:{tokenize:hq},exit:pq,name:"list",tokenize:dq},uq={partial:!0,tokenize:mq},cq={partial:!0,tokenize:fq};function dq(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Iy(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(od,n,u)(f):u(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return Iy(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),u(f)):n(f)}function u(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Pf,r.interrupt?n:c,t.attempt(uq,h,d))}function c(f){return r.containerState.initialBlankLine=!0,s++,h(f)}function d(f){return Qe(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function hq(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Pf,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,at(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Qe(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(cq,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,at(t,t.attempt(kn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function fq(t,e,n){const r=this;return at(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function pq(t){t.exit(this.containerState.type)}function mq(t,e,n){const r=this;return at(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(s){const o=r.events[r.events.length-1];return!Qe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const xS={name:"setextUnderline",resolveTo:gq,tokenize:yq};function gq(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function yq(t,e,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),Qe(u)?at(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Ie(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const vq={tokenize:wq};function wq(t){const e=this,n=t.attempt(Pf,r,t.attempt(this.parser.constructs.flowInitial,i,at(t,t.attempt(this.parser.constructs.flow,i,t.attempt(EK,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xq={resolveAll:HP()},bq=VP("string"),kq=VP("text");function VP(t){return{resolveAll:HP(t==="text"?Sq:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function HP(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function Sq(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const Eq={42:kn,43:kn,45:kn,48:kn,49:kn,50:kn,51:kn,52:kn,53:kn,54:kn,55:kn,56:kn,57:kn,62:LP},Cq={91:RK},Tq={[-2]:dm,[-1]:dm,32:dm},_q={35:DK,42:od,45:[xS,od],60:zK,61:xS,95:od,96:vS,126:vS},Aq={38:$P,92:jP},Rq={[-5]:hm,[-4]:hm,[-3]:hm,33:rq,38:$P,42:My,60:[sK,KK],91:sq,92:[MK,jP],93:w1,95:My,96:vK},Pq={null:[My,xq]},Oq={null:[42,95]},Iq={null:[]},Mq=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Oq,contentInitial:Cq,disable:Iq,document:Eq,flow:_q,flowInitial:Tq,insideSpan:Pq,string:Aq,text:Rq},Symbol.toStringTag,{value:"Module"}));function Nq(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:R(T),check:R(x),consume:w,enter:v,exit:S,interrupt:R(x,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:h,sliceStream:f,write:d};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function d(M){return o=tr(o,M),y(),o[o.length-1]!==null?[]:(b(e,0),u.events=v1(s,u.events,u),u.events)}function h(M,N){return Lq(f(M),N)}function f(M){return Dq(o,M)}function p(){const{_bufferIndex:M,_index:N,line:L,column:D,offset:z}=r;return{_bufferIndex:M,_index:N,line:L,column:D,offset:z}}function g(M){i[M.line]=M.column,O()}function y(){let M;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<N.length;)m(N.charCodeAt(r._bufferIndex));else m(N)}}function m(M){c=c(M)}function w(M){Ie(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,O()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=M}function v(M,N){const L=N||{};return L.type=M,L.start=p(),u.events.push(["enter",L,u]),a.push(L),L}function S(M){const N=a.pop();return N.end=p(),u.events.push(["exit",N,u]),N}function T(M,N){b(M,N.from)}function x(M,N){N.restore()}function R(M,N){return L;function L(D,z,I){let _,$,j,C;return Array.isArray(D)?G(D):"tokenize"in D?G([D]):q(D);function q(te){return we;function we(Q){const B=Q!==null&&te[Q],ee=Q!==null&&te.null,ce=[...Array.isArray(B)?B:B?[B]:[],...Array.isArray(ee)?ee:ee?[ee]:[]];return G(ce)(Q)}}function G(te){return _=te,$=0,te.length===0?I:A(te[$])}function A(te){return we;function we(Q){return C=k(),j=te,te.partial||(u.currentConstruct=te),te.name&&u.parser.constructs.disable.null.includes(te.name)?V():te.tokenize.call(N?Object.assign(Object.create(u),N):u,l,K,V)(Q)}}function K(te){return M(j,C),z}function V(te){return C.restore(),++$<_.length?A(_[$]):I}}}function b(M,N){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&Jr(u.events,N,u.events.length-N,M.resolve(u.events.slice(N),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function k(){const M=p(),N=u.previous,L=u.currentConstruct,D=u.events.length,z=Array.from(a);return{from:D,restore:I};function I(){r=M,u.previous=N,u.currentConstruct=L,u.events.length=D,a=z,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Dq(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Lq(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function jq(t){const r={constructs:H7([Mq,...(t||{}).extensions||[]]),content:i(X7),defined:[],document:i(eK),flow:i(vq),lazy:{},string:i(bq),text:i(kq)};return r;function i(s){return o;function o(a){return Nq(r,s,a)}}}function $q(t){for(;!zP(t););return t}const bS=/[\0\t\n\r]/g;function zq(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,h,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(bS.lastIndex=d,u=bS.exec(s),h=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(h),!u){e=s.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(s.slice(d,h)),t+=h-d),f){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Bq=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Fq(t){return t.replace(Bq,Uq)}function Uq(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return DP(n.slice(s?2:1),s?16:10)}return y1(n)||t}const WP={}.hasOwnProperty;function Vq(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Hq(n)($q(jq(n).document().write(zq()(t,e,!0))))}function Hq(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ce),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(Ue),blockQuote:s(ee),characterEscape:k,characterReference:k,codeFenced:s(ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ce,o),codeText:s(ue,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(ye),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ge),hardBreakEscape:s(Ve),hardBreakTrailing:s(Ve),htmlFlow:s(Me,o),htmlFlowData:k,htmlText:s(Me,o),htmlTextData:k,image:s(je),label:o,link:s(Ce),listItem:s(He),listItemValue:h,listOrdered:s(Je,d),listUnordered:s(Je),paragraph:s(Ze),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ue),strong:s(rt),thematicBreak:s(Dt)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:B,autolinkProtocol:Q,blockQuote:l(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:te,characterReference:we,codeFenced:l(y),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:O,codeIndented:l(m),codeText:l(z),codeTextData:O,data:O,definition:l(),definitionDestinationString:S,definitionLabelString:w,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(L),htmlFlowData:O,htmlText:l(D),htmlTextData:O,image:l(_),label:j,labelText:$,lineEnding:M,link:l(I),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:K,resourceDestinationString:C,resourceTitleString:q,resource:G,setextHeading:l(b),setextHeadingLineSequence:R,setextHeadingText:x,strong:l(),thematicBreak:l()}};KP(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Y){let le={type:"root",children:[]};const ve={stack:[le],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},_e=[];let Oe=-1;for(;++Oe<Y.length;)if(Y[Oe][1].type==="listOrdered"||Y[Oe][1].type==="listUnordered")if(Y[Oe][0]==="enter")_e.push(Oe);else{const Xe=_e.pop();Oe=i(Y,Xe,Oe)}for(Oe=-1;++Oe<Y.length;){const Xe=e[Y[Oe][0]];WP.call(Xe,Y[Oe][1].type)&&Xe[Y[Oe][1].type].call(Object.assign({sliceSerialize:Y[Oe][2].sliceSerialize},ve),Y[Oe][1])}if(ve.tokenStack.length>0){const Xe=ve.tokenStack[ve.tokenStack.length-1];(Xe[1]||kS).call(ve,void 0,Xe[0])}for(le.position={start:Ei(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:Ei(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},Oe=-1;++Oe<e.transforms.length;)le=e.transforms[Oe](le)||le;return le}function i(Y,le,ve){let _e=le-1,Oe=-1,Xe=!1,X,de,xe,Se;for(;++_e<=ve;){const qe=Y[_e];switch(qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qe[0]==="enter"?Oe++:Oe--,Se=void 0;break}case"lineEndingBlank":{qe[0]==="enter"&&(X&&!Se&&!Oe&&!xe&&(xe=_e),Se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Se=void 0}if(!Oe&&qe[0]==="enter"&&qe[1].type==="listItemPrefix"||Oe===-1&&qe[0]==="exit"&&(qe[1].type==="listUnordered"||qe[1].type==="listOrdered")){if(X){let H=_e;for(de=void 0;H--;){const F=Y[H];if(F[1].type==="lineEnding"||F[1].type==="lineEndingBlank"){if(F[0]==="exit")continue;de&&(Y[de][1].type="lineEndingBlank",Xe=!0),F[1].type="lineEnding",de=H}else if(!(F[1].type==="linePrefix"||F[1].type==="blockQuotePrefix"||F[1].type==="blockQuotePrefixWhitespace"||F[1].type==="blockQuoteMarker"||F[1].type==="listItemIndent"))break}xe&&(!de||xe<de)&&(X._spread=!0),X.end=Object.assign({},de?Y[de][1].start:qe[1].end),Y.splice(de||_e,0,["exit",X,qe[2]]),_e++,ve++}if(qe[1].type==="listItemPrefix"){const H={type:"listItem",_spread:!1,start:Object.assign({},qe[1].start),end:void 0};X=H,Y.splice(_e,0,["enter",H,qe[2]]),_e++,ve++,xe=void 0,Se=!0}}}return Y[le][1]._spread=Xe,ve}function s(Y,le){return ve;function ve(_e){a.call(this,Y(_e),_e),le&&le.call(this,_e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Y,le,ve){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([le,ve||void 0]),Y.position={start:Ei(le.start),end:void 0}}function l(Y){return le;function le(ve){Y&&Y.call(this,ve),u.call(this,ve)}}function u(Y,le){const ve=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==Y.type&&(le?le.call(this,Y,_e[0]):(_e[1]||kS).call(this,Y,_e[0]));else throw new Error("Cannot close `"+Y.type+"` ("+$l({start:Y.start,end:Y.end})+"): its not open");ve.position.end=Ei(Y.end)}function c(){return U7(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(Y){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.lang=Y}function p(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.meta=Y}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y.replace(/(\r?\n|\r)$/g,"")}function w(Y){const le=this.resume(),ve=this.stack[this.stack.length-1];ve.label=le,ve.identifier=ha(this.sliceSerialize(Y)).toLowerCase()}function v(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.title=Y}function S(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.url=Y}function T(Y){const le=this.stack[this.stack.length-1];if(!le.depth){const ve=this.sliceSerialize(Y).length;le.depth=ve}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function R(Y){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function b(){this.data.setextHeadingSlurpLineEnding=void 0}function k(Y){const ve=this.stack[this.stack.length-1].children;let _e=ve[ve.length-1];(!_e||_e.type!=="text")&&(_e=Ye(),_e.position={start:Ei(Y.start),end:void 0},ve.push(_e)),this.stack.push(_e)}function O(Y){const le=this.stack.pop();le.value+=this.sliceSerialize(Y),le.position.end=Ei(Y.end)}function M(Y){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=le.children[le.children.length-1];ve.position.end=Ei(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(le.type)&&(k.call(this,Y),O.call(this,Y))}function N(){this.data.atHardBreak=!0}function L(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function D(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function z(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.value=Y}function I(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=le,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function _(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=le,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function $(Y){const le=this.sliceSerialize(Y),ve=this.stack[this.stack.length-2];ve.label=Fq(le),ve.identifier=ha(le).toLowerCase()}function j(){const Y=this.stack[this.stack.length-1],le=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const _e=Y.children;ve.children=_e}else ve.alt=le}function C(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.url=Y}function q(){const Y=this.resume(),le=this.stack[this.stack.length-1];le.title=Y}function G(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function K(Y){const le=this.resume(),ve=this.stack[this.stack.length-1];ve.label=le,ve.identifier=ha(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function V(Y){this.data.characterReferenceType=Y.type}function te(Y){const le=this.sliceSerialize(Y),ve=this.data.characterReferenceType;let _e;ve?(_e=DP(le,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=y1(le);const Oe=this.stack[this.stack.length-1];Oe.value+=_e}function we(Y){const le=this.stack.pop();le.position.end=Ei(Y.end)}function Q(Y){O.call(this,Y);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(Y)}function B(Y){O.call(this,Y);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(Y)}function ee(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function ue(){return{type:"inlineCode",value:""}}function ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ge(){return{type:"emphasis",children:[]}}function Ue(){return{type:"heading",depth:0,children:[]}}function Ve(){return{type:"break"}}function Me(){return{type:"html",value:""}}function je(){return{type:"image",title:null,url:"",alt:null}}function Ce(){return{type:"link",title:null,url:"",children:[]}}function Je(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function He(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function Ze(){return{type:"paragraph",children:[]}}function rt(){return{type:"strong",children:[]}}function Ye(){return{type:"text",value:""}}function Dt(){return{type:"thematicBreak"}}}function Ei(t){return{line:t.line,column:t.column,offset:t.offset}}function KP(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?KP(t,r):Wq(t,r)}}function Wq(t,e){let n;for(n in e)if(WP.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function kS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+$l({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+$l({start:e.start,end:e.end})+") is still open")}function Kq(t){const e=this;e.parser=n;function n(r){return Vq(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qq(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Gq(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Jq(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function Yq(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Qq(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Xq(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Fa(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function Zq(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function eG(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function qP(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function tG(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return qP(t,e);const i={src:Fa(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function nG(t,e){const n={src:Fa(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function rG(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function iG(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return qP(t,e);const i={href:Fa(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function sG(t,e){const n={href:Fa(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function oG(t,e,n){const r=t.all(e),i=n?aG(n):GP(e),s={},o=[];if(typeof e.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function aG(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=GP(n[r])}return e}function GP(t){const e=t.spread;return e??t.children.length>1}function lG(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function uG(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cG(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function dG(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hG(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=f1(e.children[1]),l=AP(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function fG(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let p={type:"element",tagName:s,properties:h,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function pG(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const SS=9,ES=32;function mG(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(CS(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(CS(e.slice(i),i>0,!1)),s.join("")}function CS(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===SS||s===ES;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===SS||s===ES;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function gG(t,e){const n={type:"text",value:mG(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function yG(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vG={blockquote:qq,break:Gq,code:Jq,delete:Yq,emphasis:Qq,footnoteReference:Xq,heading:Zq,html:eG,imageReference:tG,image:nG,inlineCode:rG,linkReference:iG,link:sG,listItem:oG,list:lG,paragraph:uG,root:cG,strong:dG,table:hG,tableCell:pG,tableRow:fG,text:gG,thematicBreak:yG,toml:Oc,yaml:Oc,definition:Oc,footnoteDefinition:Oc};function Oc(){}const JP=-1,Of=0,Bl=1,Lh=2,x1=3,b1=4,k1=5,S1=6,YP=7,QP=8,TS=typeof self=="object"?self:globalThis,wG=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Of:case JP:return n(o,i);case Bl:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Lh:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case x1:return n(new Date(o),i);case b1:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case k1:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case S1:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case YP:{const{name:a,message:l}=o;return n(new TS[a](l),i)}case QP:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new TS[s](o),i)};return r},_S=t=>wG(new Map,t)(0),To="",{toString:xG}={},{keys:bG}=Object,nl=t=>{const e=typeof t;if(e!=="object"||!t)return[Of,e];const n=xG.call(t).slice(8,-1);switch(n){case"Array":return[Bl,To];case"Object":return[Lh,To];case"Date":return[x1,To];case"RegExp":return[b1,To];case"Map":return[k1,To];case"Set":return[S1,To];case"DataView":return[Bl,n]}return n.includes("Array")?[Bl,n]:n.includes("Error")?[YP,n]:[Lh,n]},Ic=([t,e])=>t===Of&&(e==="function"||e==="symbol"),kG=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=nl(o);switch(a){case Of:{let c=o;switch(l){case"bigint":a=QP,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([JP],o)}return i([a,c],o)}case Bl:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const c=[],d=i([a,c],o);for(const h of o)c.push(s(h));return d}case Lh:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const h of bG(o))(t||!Ic(nl(o[h])))&&c.push([s(h),s(o[h])]);return d}case x1:return i([a,o.toISOString()],o);case b1:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case k1:{const c=[],d=i([a,c],o);for(const[h,f]of o)(t||!(Ic(nl(h))||Ic(nl(f))))&&c.push([s(h),s(f)]);return d}case S1:{const c=[],d=i([a,c],o);for(const h of o)(t||!Ic(nl(h)))&&c.push(s(h));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},AS=(t,{json:e,lossy:n}={})=>{const r=[];return kG(!(e||n),!!e,new Map,r)(t),r},jh=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?_S(AS(t,e)):structuredClone(t):(t,e)=>_S(AS(t,e));function SG(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function EG(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function CG(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||SG,r=t.options.footnoteBackLabel||EG,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),d=String(u.identifier).toUpperCase(),h=Fa(d.toLowerCase());let f=0;const p=[],g=t.footnoteCounts.get(d);for(;g!==void 0&&++f<=g;){p.length>0&&p.push({type:"text",value:" "});let w=typeof n=="string"?n:n(l,f);typeof w=="string"&&(w={type:"text",value:w}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const w=y.children[y.children.length-1];w&&w.type==="text"?w.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const m={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(c,!0)};t.patch(u,m),a.push(m)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...jh(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const XP=function(t){if(t==null)return RG;if(typeof t=="function")return If(t);if(typeof t=="object")return Array.isArray(t)?TG(t):_G(t);if(typeof t=="string")return AG(t);throw new Error("Expected function, string, or object as test")};function TG(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=XP(t[n]);return If(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function _G(t){const e=t;return If(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function AG(t){return If(e);function e(n){return n&&n.type===t}}function If(t){return e;function e(n,r,i){return!!(PG(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function RG(){return!0}function PG(t){return t!==null&&typeof t=="object"&&"type"in t}const ZP=[],OG=!0,RS=!1,IG="skip";function MG(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=XP(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=ZP,p,g,y;if((!e||s(l,u,c[c.length-1]||void 0))&&(f=NG(n(l,c)),f[0]===RS))return f;if("children"in l&&l.children){const m=l;if(m.children&&f[0]!==IG)for(g=(r?m.children.length:-1)+o,y=c.concat(m);g>-1&&g<m.children.length;){const w=m.children[g];if(p=a(w,g,y)(),p[0]===RS)return p;g=typeof p[1]=="number"?p[1]:g+o}}return f}}}function NG(t){return Array.isArray(t)?t:typeof t=="number"?[OG,t]:t==null?ZP:[t]}function eO(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),MG(t,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const Ny={}.hasOwnProperty,DG={};function LG(t,e){const n=e||DG,r=new Map,i=new Map,s=new Map,o={...vG,...n.handlers},a={all:u,applyData:$G,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:jG,wrap:BG};return eO(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,h=String(c.identifier).toUpperCase();d.has(h)||d.set(h,c)}}),a;function l(c,d){const h=c.type,f=a.handlers[h];if(Ny.call(a.handlers,h)&&f)return f(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in c){const{children:g,...y}=c,m=jh(y);return m.children=a.all(c),m}return jh(c)}return(a.options.unknownHandler||zG)(a,c,d)}function u(c){const d=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const p=a.one(h[f],c);if(p){if(f&&h[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=PS(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=PS(g.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function jG(t,e){t.position&&(e.position=x7(t))}function $G(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,jh(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function zG(t,e){const n=e.data||{},r="value"in e&&!(Ny.call(n,"hProperties")||Ny.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function BG(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function PS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function OS(t,e){const n=LG(t,e),r=n.one(t,void 0),i=CG(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function FG(t,e){return t&&"run"in t?async function(n,r){const i=OS(n,{file:r,...e});await t.run(i,r)}:function(n,r){return OS(n,{file:r,...t||e})}}function IS(t){if(t)throw t}var ad=Object.prototype.hasOwnProperty,tO=Object.prototype.toString,MS=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,DS=function(e){return typeof Array.isArray=="function"?Array.isArray(e):tO.call(e)==="[object Array]"},LS=function(e){if(!e||tO.call(e)!=="[object Object]")return!1;var n=ad.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ad.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||ad.call(e,i)},jS=function(e,n){MS&&n.name==="__proto__"?MS(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},$S=function(e,n){if(n==="__proto__")if(ad.call(e,n)){if(NS)return NS(e,n).value}else return;return e[n]},UG=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=$S(a,n),i=$S(e,n),a!==i&&(c&&i&&(LS(i)||(s=DS(i)))?(s?(s=!1,o=r&&DS(r)?r:[]):o=r&&LS(r)?r:{},jS(a,{name:n,newValue:t(c,o,i)})):typeof i<"u"&&jS(a,{name:n,newValue:i}));return a};const fm=$h(UG);function Dy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function VG(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?HG(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function HG(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const zr={basename:WG,dirname:KG,extname:qG,join:GG,sep:"/"};function WG(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');qu(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function KG(t){if(qu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qG(t){qu(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function GG(...t){let e=-1,n;for(;++e<t.length;)qu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":JG(n)}function JG(t){qu(t);const e=t.codePointAt(0)===47;let n=YG(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function YG(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function qu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const QG={cwd:XG};function XG(){return"/"}function Ly(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ZG(t){if(typeof t=="string")t=new URL(t);else if(!Ly(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return eJ(t)}function eJ(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const pm=["history","path","basename","stem","extname","dirname"];class nO{constructor(e){let n;e?Ly(e)?n={path:e}:typeof e=="string"||tJ(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":QG.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<pm.length;){const s=pm[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)pm.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?zr.basename(this.path):void 0}set basename(e){gm(e,"basename"),mm(e,"basename"),this.path=zr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?zr.dirname(this.path):void 0}set dirname(e){zS(this.basename,"dirname"),this.path=zr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?zr.extname(this.path):void 0}set extname(e){if(mm(e,"extname"),zS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ly(e)&&(e=ZG(e)),gm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?zr.basename(this.path,this.extname):void 0}set stem(e){gm(e,"stem"),mm(e,"stem"),this.path=zr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new fn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mm(t,e){if(t&&t.includes(zr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+zr.sep+"`")}function gm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function zS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function tJ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nJ=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},rJ={}.hasOwnProperty;class E1 extends nJ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=VG()}copy(){const e=new E1;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(fm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(wm("data",this.frozen),this.namespace[e]=n,this):rJ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Mc(e),r=this.parser||this.Parser;return ym("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),ym("process",this.parser||this.Parser),vm("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Mc(e),l=r.parse(a);r.run(l,a,function(c,d,h){if(c||!d||!h)return u(c);const f=d,p=r.stringify(f,h);oJ(p)?h.value=p:h.result=p,u(c,h)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),ym("processSync",this.parser||this.Parser),vm("processSync",this.compiler||this.Compiler),this.process(e,i),FS("processSync","process",n),r;function i(s,o){n=!0,IS(s),r=o}}run(e,n,r){BS(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Mc(n);i.run(e,l,u);function u(c,d,h){const f=d||e;c?a(c):o?o(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),FS("runSync","run",r),i;function s(o,a){IS(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Mc(n),i=this.compiler||this.Compiler;return vm("stringify",i),BS(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(wm("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=fm(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...c]);else if(c.length>0){let[f,...p]=c;const g=r[h][1];Dy(g)&&Dy(f)&&(f=fm(!0,g,f)),r[h]=[u,f,...p]}}}}const iJ=new E1().freeze();function ym(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function vm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function wm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function BS(t){if(!Dy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function FS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Mc(t){return sJ(t)?t:new nO(t)}function sJ(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function oJ(t){return typeof t=="string"||aJ(t)}function aJ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const lJ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",US=[],VS={allowDangerousHtml:!0},uJ=/^(https?|ircs?|mailto|xmpp)$/i,cJ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dJ(t){const e=hJ(t),n=fJ(t);return pJ(e.runSync(e.parse(n),n),t)}function hJ(t){const e=t.rehypePlugins||US,n=t.remarkPlugins||US,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...VS}:VS;return iJ().use(Kq).use(n).use(FG,r).use(e)}function fJ(t){const e=t.children||"",n=new nO;return typeof e=="string"&&(n.value=e),n}function pJ(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||mJ;for(const c of cJ)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+lJ+c.id,void 0);return eO(t,u),C7(t,{Fragment:E.Fragment,components:i,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function u(c,d,h){if(c.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let f;for(f in cm)if(Object.hasOwn(cm,f)&&Object.hasOwn(c.properties,f)){const p=c.properties[f],g=cm[f];(g===null||g.includes(c.tagName))&&(c.properties[f]=l(String(p||""),f,c))}}if(c.type==="element"){let f=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(c,d,h)),f&&h&&typeof d=="number")return a&&c.children?h.children.splice(d,1,...c.children):h.children.splice(d,1),d}}}function mJ(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||uJ.test(t.slice(0,e))?t:""}const gJ=()=>{var g;const{user:t}=P.useContext(fr),[e,n]=P.useState([]),[r,i]=P.useState(null),[s,o]=P.useState(""),[a,l]=P.useState(!1),[u,c]=P.useState(!0);P.useEffect(()=>{t&&d()},[t]),P.useEffect(()=>{if(r){const y=e.find(m=>m.id===r);y&&(o(y.content),l(!1))}else o("")},[r,e]);const d=async()=>{if(!he)return;const{data:y}=await he.from("journals").select("*").order("date",{ascending:!1});y&&n(y),c(!1)},h=async()=>{const y=new Date().toISOString().split("T")[0],m=e.find(S=>S.date===y);if(m){i(m.id);return}const w={user_id:t.id,date:y,content:`# Today's Journal

Write something...`};if(!he)return;const{data:v}=await he.from("journals").insert([w]).select();v&&(n([v[0],...e]),i(v[0].id),l(!0))},f=async()=>{if(!r||!he)return;const{error:y}=await he.from("journals").update({content:s}).eq("id",r);y||(n(e.map(m=>m.id===r?{...m,content:s}:m)),l(!1))},p=async y=>{confirm("Are you sure?")&&he&&(await he.from("journals").delete().eq("id",y),n(e.filter(m=>m.id!==y)),r===y&&i(null))};return E.jsxs("div",{className:"flex h-full bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[E.jsxs("div",{className:"w-64 border-r border-gray-200 bg-gray-50 flex flex-col",children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[E.jsxs("h2",{className:"font-bold text-gray-700 flex items-center gap-2",children:[E.jsx(hx,{size:16})," Journal"]}),E.jsx("button",{onClick:h,className:"p-1 hover:bg-gray-200 rounded text-indigo-600",children:E.jsx(YT,{size:18})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[e.map(y=>E.jsxs("button",{onClick:()=>i(y.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between group transition-colors ${r===y.id?"bg-white shadow-sm text-indigo-600 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(af,{size:14,className:r===y.id?"text-indigo-500":"text-gray-400"}),E.jsx("span",{children:y.date}),Xi(y.date)&&E.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-1 rounded",children:"Today"})]}),E.jsx(lf,{size:12,className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500",onClick:m=>{m.stopPropagation(),p(y.id)}})]},y.id)),e.length===0&&!u&&E.jsx("div",{className:"text-xs text-gray-400 text-center py-4",children:"No entries"})]})]}),E.jsx("div",{className:"flex-1 flex flex-col",children:r?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"p-3 border-b border-gray-200 flex justify-between items-center bg-white",children:[E.jsx("span",{className:"text-sm text-gray-500 font-mono",children:(g=e.find(y=>y.id===r))==null?void 0:g.date}),E.jsx("div",{className:"flex gap-2",children:a?E.jsxs("button",{onClick:f,className:"flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700",children:[E.jsx(p3,{size:12})," Save"]}):E.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1 border border-gray-200 text-gray-600 text-xs rounded hover:bg-gray-50",children:"Edit"})})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:a?E.jsx("textarea",{className:"w-full h-full resize-none outline-none text-gray-800 font-serif leading-relaxed",value:s,onChange:y=>o(y.target.value),placeholder:"Start writing..."}):E.jsx("div",{className:"prose prose-sm max-w-none font-serif text-gray-800",children:E.jsx(dJ,{children:s})})})]}):E.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-300",children:E.jsxs("div",{className:"text-center",children:[E.jsx(hx,{size:48,className:"mx-auto mb-2 opacity-50"}),E.jsx("p",{children:"Select or create an entry"})]})})})]})},yJ=()=>{const{syncStatus:t,view:e,setView:n,tagFilter:r,setTagFilter:i,tasks:s,tags:o,toast:a,setToast:l,undo:u,redo:c,canUndo:d,canRedo:h,canNavigateBack:f,navigateBack:p,archiveCompletedTasks:g,editingTaskId:y,setEditingTaskId:m,themeSettings:w}=P.useContext(fr),[v,S]=P.useState(!1),[T,x]=P.useState(240),[R,b]=P.useState(!1),k={small:"text-sm",normal:"text-base",large:"text-lg"}[w.fontSize]||"text-base",O=w.fontWeight==="thin"?"font-light":"font-bold",M=y?s.find(L=>L.id===y):null;P.useEffect(()=>{const L=D=>{D.key==="k"&&(D.metaKey||D.ctrlKey)&&(D.preventDefault(),S(z=>!z)),D.key==="Escape"&&S(!1)};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[]),P.useEffect(()=>{const L=z=>{if(!R)return;let I=z.clientX;I<150&&(I=150),I>400&&(I=400),x(I)},D=()=>{b(!1),document.body.style.cursor="default"};return R&&(window.addEventListener("mousemove",L),window.addEventListener("mouseup",D),document.body.style.cursor="col-resize"),()=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",D)}},[R]);const N=()=>{var L;return r?((L=o.find(D=>D.id===r))==null?void 0:L.name)||"Tags":e.charAt(0).toUpperCase()+e.slice(1)};return E.jsxs("div",{className:"flex h-screen bg-white text-gray-900 font-sans selection:bg-indigo-50 selection:text-indigo-900",children:[E.jsxs("div",{style:{width:T},className:"relative flex-shrink-0",children:[E.jsx(x3,{view:e,setView:n,tagFilter:r,setTagFilter:i}),E.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-indigo-400/50 transition-colors z-50",onMouseDown:()=>b(!0)})]}),E.jsxs("main",{className:"flex-1 flex flex-col relative overflow-hidden",children:[E.jsxs("header",{className:"h-14 flex items-center justify-between px-8 border-b border-gray-50 z-10 sticky top-0 bg-white/90 backdrop-blur-sm",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[f?E.jsxs("button",{onClick:p,className:"p-1 hover:bg-gray-100 rounded text-slate-500 flex items-center gap-1 text-sm font-medium transition-colors",title:" Next Actions (Alt + Left)",children:[" ",E.jsx(r3,{size:16}),"  "]}):E.jsx("h2",{className:`${k} ${O} tracking-tight text-gray-800`,children:N()}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("button",{onClick:g,className:"p-1.5 rounded hover:bg-gray-100 text-slate-500 hover:text-emerald-600 transition-colors",title:" (Archive Completed)",children:[" ",E.jsx(Jj,{size:16})," "]}),E.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),E.jsx("button",{disabled:!d,onClick:u,className:`p-1 rounded hover:bg-gray-100 ${d?"opacity-100":"opacity-30"}`,title:" (Ctrl+Z)",children:E.jsx(y3,{size:14})}),E.jsx("button",{disabled:!h,onClick:c,className:`p-1 rounded hover:bg-gray-100 ${h?"opacity-100":"opacity-30"}`,title:" (Ctrl+Shift+Z)",children:E.jsx(f3,{size:14})})]}),E.jsxs("div",{className:`flex items-center gap-1 text-[10px] ${t==="synced"?"text-green-500":t==="error"?"text-red-500":"text-orange-400"}`,children:[" ",t==="synced"?E.jsx(t3,{size:12}):E.jsx(e3,{size:12,className:"animate-pulse"})," ",E.jsx("span",{className:"uppercase tracking-wider",children:t==="synced"?"Synced":t==="error"?"Error":"Syncing..."})," "]}),t==="error"&&E.jsxs("div",{className:"text-[10px] text-red-500 flex items-center gap-1",children:[E.jsx(Gj,{size:12})," Check Connection"]})]}),E.jsxs("div",{className:"hidden md:flex items-center gap-3 text-xs text-gray-400",children:[E.jsx("kbd",{className:"font-mono bg-gray-50 px-1.5 py-0.5 rounded border border-gray-100",children:" K"})," to add"]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-8 scroll-smooth no-scrollbar",children:e==="calendar"?E.jsx(AW,{}):e==="journal"?E.jsx(gJ,{}):E.jsxs("div",{className:"max-w-3xl mx-auto",children:[["inbox","today","projects","next","all"].includes(e)&&E.jsx(td,{}),E.jsx(_W,{})]})}),y&&(e==="calendar"||e==="journal")&&M&&E.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>m(null),children:E.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-xl shadow-2xl ring-1 ring-black/5 p-6",onClick:L=>L.stopPropagation(),children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider",children:"Edit Task"}),E.jsx("button",{onClick:()=>m(null),className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600",children:E.jsx(xa,{size:18})})]}),E.jsx(td,{initialData:M,onClose:()=>m(null)})]})}),v&&E.jsx("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm z-50 flex items-start justify-center pt-32 p-6",children:E.jsx("div",{className:"w-full max-w-3xl bg-white rounded-xl shadow-2xl ring-1 ring-black/5 p-6",children:E.jsx(td,{isQuickAdd:!0,onClose:()=>S(!1)})})}),a&&E.jsxs("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full shadow-xl flex items-center gap-6 z-50 text-sm ${a.type==="error"?"bg-red-500 text-white":"bg-gray-900 text-white"}`,children:[E.jsx("span",{children:a.msg}),a.undo&&E.jsx("button",{onClick:()=>{var L;(L=a.undo)==null||L.call(a),l(null)},className:"opacity-70 hover:opacity-100 transition-opacity",children:"Undo"})]})]})]})},vJ=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(""),[i,s]=P.useState(""),[o,a]=P.useState("signin"),[l,u]=P.useState(null),[c,d]=P.useState(null),h=async p=>{p.preventDefault(),e(!0),u(null),d(null);try{if(!he)throw new Error("Supabase client not initialized");if(o==="signup"){const{error:g}=await he.auth.signUp({email:n,password:i});if(g)throw g;d("")}else{const{error:g}=await he.auth.signInWithPassword({email:n,password:i});if(g)throw g}}catch(g){u(g.message)}finally{e(!1)}},f=async p=>{if(!he)return;const{error:g}=await he.auth.signInWithOAuth({provider:p,options:{redirectTo:window.location.origin}});g&&(g.message.includes("Unsupported provider")?u("Google  Email "):u(g.message))};return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:E.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[E.jsxs("div",{className:"flex flex-col items-center mb-8",children:[E.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white mb-4 shadow-lg shadow-indigo-200",children:E.jsx(GT,{size:24})}),E.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Things Clone"}),E.jsx("p",{className:"text-sm text-gray-500 mt-2",children:""})]}),l&&E.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100",children:l}),c&&E.jsx("div",{className:"mb-4 p-3 bg-green-50 text-green-600 text-sm rounded-lg border border-green-100",children:c}),E.jsxs("form",{onSubmit:h,className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Email"}),E.jsxs("div",{className:"relative",children:[E.jsx(c3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),E.jsx("input",{type:"email",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm",placeholder:"name@example.com"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(u3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),E.jsx("input",{type:"password",required:!0,value:i,onChange:p=>s(p.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm",placeholder:"",minLength:6})]})]}),E.jsx("button",{type:"submit",disabled:t,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 disabled:opacity-70 disabled:cursor-not-allowed",children:t?E.jsx(JT,{className:"animate-spin",size:18}):E.jsxs(E.Fragment,{children:[o==="signin"?"":"",E.jsx(Yj,{size:16})]})})]}),E.jsxs("div",{className:"mt-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-gray-200"})}),E.jsx("div",{className:"relative flex justify-center text-sm",children:E.jsx("span",{className:"px-2 bg-white text-gray-500 text-xs",children:""})})]}),E.jsx("div",{className:"mt-6 grid grid-cols-1 gap-3",children:E.jsxs("button",{type:"button",onClick:()=>f("google"),className:"w-full inline-flex justify-center py-2.5 px-4 border border-gray-200 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors",children:[E.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[E.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),E.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),E.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),E.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]})})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("button",{type:"button",onClick:()=>a(o==="signin"?"signup":"signin"),className:"text-sm text-indigo-600 hover:text-indigo-500 font-medium",children:o==="signin"?"":""})})]})})},wJ=({message:t=""})=>E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:E.jsxs("div",{className:"bg-[#1c1c1e] rounded-2xl shadow-2xl p-12 flex flex-col items-center justify-center min-w-[320px] max-w-md",children:[E.jsxs("div",{className:"bg-red-500/20 p-4 rounded-full mb-6",children:[E.jsx("div",{className:"bg-red-500 w-2 h-8 rounded-full mb-1 mx-auto"}),E.jsx("div",{className:"bg-red-500 w-2 h-2 rounded-full mx-auto"})]}),E.jsx("h1",{className:"text-white text-xl font-bold tracking-wide",children:t}),E.jsx("p",{className:"text-gray-500 text-xs mt-4 max-w-xs text-center break-all",children:t===""?"Check .env file and console logs.":""})]})}),xJ=()=>{const{user:t,loading:e,initError:n}=P.useContext(fr);if(e)return E.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),E.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Loading workspace..."})]})});if(n)return E.jsx(wJ,{message:n==="Supabase client not initialized"?"":n});const r=t&&t.aud==="authenticated",i=(t==null?void 0:t.id)==="00000000-0000-0000-0000-000000000000";return E.jsxs(AN,{children:[E.jsx(pg,{path:"/login",element:r?E.jsx(Fw,{to:"/",replace:!0}):E.jsx(vJ,{})}),E.jsx(pg,{path:"/*",element:r||i?E.jsx(yJ,{}):E.jsx(Fw,{to:"/login",replace:!0})})]})};function bJ(){return E.jsx(ZN,{children:E.jsx(Hj,{children:E.jsx(xJ,{})})})}xm.createRoot(document.getElementById("root")).render(E.jsx(bJ,{}));
