{
  "range-cache-file:///Users/leegary/ai_completion/.env.example": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"# Supabase Configuration\\\\nSUPABASE_URL=your_supabase_project_url\\\\nSUPABASE_ANON_KEY=your_supabase_anon_key\\\\nSUPABASE_DB_PASSWORD=your_database_password\\\\n\\\\n# Application Settings\\\\nPORT=3000\\\\nNODE_ENV=development\\\\n\",\"originAcceptText\":\"# Supabase Configuration\\nSUPABASE_URL=your_supabase_project_url\\nSUPABASE_ANON_KEY=your_supabase_anon_key\\nSUPABASE_DB_PASSWORD=your_database_password\\n\\n# Application Settings\\nPORT=3000\\nNODE_ENV=development\\n\",\"originTextLength\":204,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766404469996},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"# Supabase Configuration\\\\nSUPABASE_URL=your_supabase_project_url\\\\nSUPABASE_ANON_KEY=your_supabase_anon_key\\\\nSUPABASE_DB_PASSWORD=your_database_password\\\\n\\\\n# Application Settings\\\\nPORT=3000\\\\nNODE_ENV=development\\\\n\",\"originAcceptText\":\"# Supabase Configuration\\nSUPABASE_URL=your_supabase_project_url\\nSUPABASE_ANON_KEY=your_supabase_anon_key\\nSUPABASE_DB_PASSWORD=your_database_password\\n\\n# Application Settings\\nPORT=3000\\nNODE_ENV=development\\n\",\"originTextLength\":204,\"aiScene\":\"Completion\",\"behaviorType\":\"accept\",\"updateTime\":1766488554938}]",
  "range-cache-file:///Users/leegary/ai_completion/src/supabaseClient.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { createClient } from \\\\'@supabase/supabase-js\\\\'\\\\n\\\\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL\\\\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY\\\\n\\\\nif (!supabaseUrl || !supabaseAnonKey) {\\\\n  console.warn(\\\\'Supabase URL or Anon Key is missing. Please check your .env file.\\\\')\\\\n}\\\\n\\\\nexport const supabase = createClient(supabaseUrl || \\\\'\\\\', supabaseAnonKey || \\\\'\\\\')\\\\n\",\"originAcceptText\":\"import { createClient } from '@supabase/supabase-js'\\n\\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL\\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY\\n\\nif (!supabaseUrl || !supabaseAnonKey) {\\n  console.warn('Supabase URL or Anon Key is missing. Please check your .env file.')\\n}\\n\\nexport const supabase = createClient(supabaseUrl || '', supabaseAnonKey || '')\\n\",\"originTextLength\":378,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766404610445},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":16,\"character\":8}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":16,\"character\":8}},\"action\":\"None\",\"isLine\":false,\"originText\":\"console.log(\\\\'Supabase Config:\\\\', { \\\\n  url: supabaseUrl, \\\\n  keyLength: supabaseAnonKey?.length \\\\n});\\\\n\\\\nlet client = null;\\\\n\\\\nif (supabaseUrl && supabaseAnonKey) {\\\\n    try {\\\\n        client = createClient(supabaseUrl, supabaseAnonKey);\\\\n    } catch (error) {\\\\n        console.error(\\\\'Error creating Supabase client:\\\\', error);\\\\n    }\\\\n} else {\",\"originAcceptText\":\"console.log('Supabase Config:', { \\n  url: supabaseUrl, \\n  keyLength: supabaseAnonKey?.length \\n});\\n\\nlet client = null;\\n\\nif (supabaseUrl && supabaseAnonKey) {\\n    try {\\n        client = createClient(supabaseUrl, supabaseAnonKey);\\n    } catch (error) {\\n        console.error('Error creating Supabase client:', error);\\n    }\\n} else {\",\"originTextLength\":329,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417775602},{\"originRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":31}},\"modifyRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":31}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const supabase = client;\",\"originAcceptText\":\"export const supabase = client;\",\"originTextLength\":31,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417775607}]",
  "range-cache-file:///Users/leegary/ai_completion/src/App.tsx": "[{\"originRange\":{\"start\":{\"line\":326,\"character\":0},\"end\":{\"line\":326,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":326,\"character\":0},\"end\":{\"line\":326,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766404711251},{\"originRange\":{\"start\":{\"line\":651,\"character\":0},\"end\":{\"line\":656,\"character\":5}},\"modifyRange\":{\"start\":{\"line\":651,\"character\":0},\"end\":{\"line\":656,\"character\":5}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (error) { \\\\n        console.error(\\\\\\\"Task Insert Error:\\\\\\\", error);\\\\n        setTasks(prev => prev.filter(t => t.id !== id)); \\\\n        handleError(error); \\\\n        return \\\\'\\\\'; \\\\n    }\",\"originAcceptText\":\"    if (error) { \\n        console.error(\\\"Task Insert Error:\\\", error);\\n        setTasks(prev => prev.filter(t => t.id !== id)); \\n        handleError(error); \\n        return ''; \\n    }\",\"originTextLength\":182,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406314312},{\"originRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":7,\"character\":62}},\"modifyRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":7,\"character\":62}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { supabase as supabaseClient } from \\\\'./supabaseClient\\\\';\",\"originAcceptText\":\"import { supabase as supabaseClient } from './supabaseClient';\",\"originTextLength\":62,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369778},{\"originRange\":{\"start\":{\"line\":11,\"character\":0},\"end\":{\"line\":11,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":11,\"character\":0},\"end\":{\"line\":11,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369779},{\"originRange\":{\"start\":{\"line\":298,\"character\":0},\"end\":{\"line\":298,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":298,\"character\":0},\"end\":{\"line\":298,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369780},{\"originRange\":{\"start\":{\"line\":337,\"character\":0},\"end\":{\"line\":337,\"character\":9}},\"modifyRange\":{\"start\":{\"line\":337,\"character\":0},\"end\":{\"line\":337,\"character\":9}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  }, []);\",\"originAcceptText\":\"  }, []);\",\"originTextLength\":9,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369781},{\"originRange\":{\"start\":{\"line\":383,\"character\":0},\"end\":{\"line\":383,\"character\":13}},\"modifyRange\":{\"start\":{\"line\":383,\"character\":0},\"end\":{\"line\":383,\"character\":13}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  }, [user]);\",\"originAcceptText\":\"  }, [user]);\",\"originTextLength\":13,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369781},{\"originRange\":{\"start\":{\"line\":842,\"character\":0},\"end\":{\"line\":843,\"character\":10}},\"modifyRange\":{\"start\":{\"line\":842,\"character\":0},\"end\":{\"line\":843,\"character\":10}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      {isOpen && ( <div className=\\\\\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-80 animate-in fade-in zoom-in duration-100\\\\\\\"> <div className=\\\\\\\"mb-3 relative\\\\\\\"> <input autoFocus type=\\\\\\\"text\\\\\\\" placeholder=\\\\\\\"輸入: 5, 明天, 下週五...\\\\\\\" className=\\\\\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\\\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\\\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\\\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\\\\\"flex justify-between items-center mb-2\\\\\\\"> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronLeft size={16} /></button> <span className=\\\\\\\"font-bold text-sm text-gray-800\\\\\\\">{currentDate.toLocaleString(\\\\'default\\\\', { month: \\\\'long\\\\', year: \\\\'numeric\\\\' })}</span> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronRight size={16} /></button> </div> <div className=\\\\\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\\\\\">{[\\\\'日\\\\',\\\\'一\\\\',\\\\'二\\\\',\\\\'三\\\\',\\\\'四\\\\',\\\\'五\\\\',\\\\'六\\\\'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\\\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\\\\\"> <span className=\\\\\\\"text-xs text-gray-500 flex items-center gap-1\\\\\\\"><Clock size={12} /> 時間</span> <input type=\\\\\\\"time\\\\\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\\\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\\\\\" /> </div> <div className=\\\\\\\"border-t border-gray-100 pt-3 mt-3\\\\\\\"> <div className=\\\\\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\\\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : \\\\'行程預覽\\\\'}</span> <span>{previewTasks.length} 個任務</span> </div> <div className=\\\\\\\"space-y-1 max-h-32 overflow-y-auto\\\\\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\\\\\"text-[10px] bg-gray-50 p-1 rounded border border-gray-100 flex items-center gap-1 truncate\\\\\\\"> <div className={`w-1.5 h-1.5 rounded-full ${COLOR_THEMES[t.color as TaskColor].dot}`} /> {t.title} </div> )) : <div className=\\\\\\\"text-[10px] text-gray-300 text-center py-2\\\\\\\">無排程</div>} </div> </div> </div> )}\\\\n    </div>\",\"originAcceptText\":\"      {isOpen && ( <div className=\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-80 animate-in fade-in zoom-in duration-100\\\"> <div className=\\\"mb-3 relative\\\"> <input autoFocus type=\\\"text\\\" placeholder=\\\"輸入: 5, 明天, 下週五...\\\" className=\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\"flex justify-between items-center mb-2\\\"> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronLeft size={16} /></button> <span className=\\\"font-bold text-sm text-gray-800\\\">{currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })}</span> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronRight size={16} /></button> </div> <div className=\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\">{['日','一','二','三','四','五','六'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\"> <span className=\\\"text-xs text-gray-500 flex items-center gap-1\\\"><Clock size={12} /> 時間</span> <input type=\\\"time\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\" /> </div> <div className=\\\"border-t border-gray-100 pt-3 mt-3\\\"> <div className=\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : '行程預覽'}</span> <span>{previewTasks.length} 個任務</span> </div> <div className=\\\"space-y-1 max-h-32 overflow-y-auto\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\"text-[10px] bg-gray-50 p-1 rounded border border-gray-100 flex items-center gap-1 truncate\\\"> <div className={`w-1.5 h-1.5 rounded-full ${COLOR_THEMES[t.color as TaskColor].dot}`} /> {t.title} </div> )) : <div className=\\\"text-[10px] text-gray-300 text-center py-2\\\">無排程</div>} </div> </div> </div> )}\\n    </div>\",\"originTextLength\":2510,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369782},{\"originRange\":{\"start\":{\"line\":1269,\"character\":0},\"end\":{\"line\":1269,\"character\":113}},\"modifyRange\":{\"start\":{\"line\":1269,\"character\":0},\"end\":{\"line\":1269,\"character\":113}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (e.key === \\\\'Delete\\\\' || (e.key === \\\\'Backspace\\\\' && !(e.target as HTMLElement).matches(\\\\'input, textarea\\\\'))) {\",\"originAcceptText\":\"    if (e.key === 'Delete' || (e.key === 'Backspace' && !(e.target as HTMLElement).matches('input, textarea'))) {\",\"originTextLength\":113,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406369783},{\"originRange\":{\"start\":{\"line\":327,\"character\":0},\"end\":{\"line\":331,\"character\":74}},\"modifyRange\":{\"start\":{\"line\":327,\"character\":0},\"end\":{\"line\":331,\"character\":74}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      // Validate UUID format\\\\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\\\\n      \\\\n      if (!userId || !uuidRegex.test(userId)) {\\\\n        console.warn(\\\\\\\"Invalid or missing User ID, resetting to default.\\\\\\\");\",\"originAcceptText\":\"      // Validate UUID format\\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\\n      \\n      if (!userId || !uuidRegex.test(userId)) {\\n        console.warn(\\\"Invalid or missing User ID, resetting to default.\\\");\",\"originTextLength\":250,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406537980},{\"originRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":56}},\"modifyRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":56}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { motion, AnimatePresence } from \\\\'framer-motion\\\\';\",\"originAcceptText\":\"import { motion, AnimatePresence } from 'framer-motion';\",\"originTextLength\":56,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875886},{\"originRange\":{\"start\":{\"line\":1181,\"character\":0},\"end\":{\"line\":1191,\"character\":5}},\"modifyRange\":{\"start\":{\"line\":1181,\"character\":0},\"end\":{\"line\":1191,\"character\":5}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    <motion.div \\\\n      layoutId={initialData ? initialData.id : \\\\\\\"new-task\\\\\\\"}\\\\n      layout\\\\n      initial={{ opacity: 0, scale: 0.95 }}\\\\n      animate={{ opacity: 1, scale: 1 }}\\\\n      exit={{ opacity: 0, scale: 0.95 }}\\\\n      transition={{ duration: 0.2 }}\\\\n      ref={containerRef} \\\\n      className={`group transition-all ${isQuickAdd ? \\\\'bg-transparent\\\\' : editStyle}`} \\\\n      onKeyDown={handleKeyDown}\\\\n    >\",\"originAcceptText\":\"    <motion.div \\n      layoutId={initialData ? initialData.id : \\\"new-task\\\"}\\n      layout\\n      initial={{ opacity: 0, scale: 0.95 }}\\n      animate={{ opacity: 1, scale: 1 }}\\n      exit={{ opacity: 0, scale: 0.95 }}\\n      transition={{ duration: 0.2 }}\\n      ref={containerRef} \\n      className={`group transition-all ${isQuickAdd ? 'bg-transparent' : editStyle}`} \\n      onKeyDown={handleKeyDown}\\n    >\",\"originTextLength\":402,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875887},{\"originRange\":{\"start\":{\"line\":1207,\"character\":0},\"end\":{\"line\":1207,\"character\":17}},\"modifyRange\":{\"start\":{\"line\":1207,\"character\":0},\"end\":{\"line\":1207,\"character\":17}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    </motion.div>\",\"originAcceptText\":\"    </motion.div>\",\"originTextLength\":17,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875892},{\"originRange\":{\"start\":{\"line\":1357,\"character\":0},\"end\":{\"line\":1382,\"character\":5}},\"modifyRange\":{\"start\":{\"line\":1357,\"character\":0},\"end\":{\"line\":1382,\"character\":5}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    <motion.div \\\\n        layoutId={task.id}\\\\n        layout\\\\n        initial={{ opacity: 0 }}\\\\n        animate={{ opacity: 1 }}\\\\n        exit={{ opacity: 0 }}\\\\n        ref={itemRef} \\\\n        data-task-id={task.id} \\\\n        data-task-index={flatTask.index} \\\\n        draggable={view !== \\\\'schedule\\\\'} \\\\n        onDragStart={(e: any) => startDrag(e, flatTask)} \\\\n        className={finalClass}  \\\\n        style={{ marginLeft: `${flatTask.depth * INDENT_SIZE}px` }} \\\\n        tabIndex={0} \\\\n        onKeyDown={handleKeyDown} \\\\n        onClick={(e: any) => { \\\\n            e.stopPropagation(); \\\\n            if (e.metaKey || e.ctrlKey || e.shiftKey) {\\\\n                handleSelection(e, task.id); \\\\n            } else {\\\\n                handleSelection(e, task.id);\\\\n                onEdit();\\\\n            }\\\\n        }} \\\\n        onDoubleClick={(e: any) => { e.stopPropagation(); onEdit(); }} \\\\n    >\",\"originAcceptText\":\"    <motion.div \\n        layoutId={task.id}\\n        layout\\n        initial={{ opacity: 0 }}\\n        animate={{ opacity: 1 }}\\n        exit={{ opacity: 0 }}\\n        ref={itemRef} \\n        data-task-id={task.id} \\n        data-task-index={flatTask.index} \\n        draggable={view !== 'schedule'} \\n        onDragStart={(e: any) => startDrag(e, flatTask)} \\n        className={finalClass}  \\n        style={{ marginLeft: `${flatTask.depth * INDENT_SIZE}px` }} \\n        tabIndex={0} \\n        onKeyDown={handleKeyDown} \\n        onClick={(e: any) => { \\n            e.stopPropagation(); \\n            if (e.metaKey || e.ctrlKey || e.shiftKey) {\\n                handleSelection(e, task.id); \\n            } else {\\n                handleSelection(e, task.id);\\n                onEdit();\\n            }\\n        }} \\n        onDoubleClick={(e: any) => { e.stopPropagation(); onEdit(); }} \\n    >\",\"originTextLength\":873,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875893},{\"originRange\":{\"start\":{\"line\":1382,\"character\":0},\"end\":{\"line\":1382,\"character\":17}},\"modifyRange\":{\"start\":{\"line\":1382,\"character\":0},\"end\":{\"line\":1382,\"character\":17}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    </motion.div>\",\"originAcceptText\":\"    </motion.div>\",\"originTextLength\":17,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875894},{\"originRange\":{\"start\":{\"line\":1390,\"character\":0},\"end\":{\"line\":1393,\"character\":52}},\"modifyRange\":{\"start\":{\"line\":1390,\"character\":0},\"end\":{\"line\":1393,\"character\":52}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\\\\n  // Removed manual FLIP animation since we\\\\'re using Framer Motion\\\\n  // const prevPositions = useRef<Map<string, number>>(new Map());\\\\n  // useLayoutEffect(() => { ... }, [visibleTasks]);\",\"originAcceptText\":\"\\n  // Removed manual FLIP animation since we're using Framer Motion\\n  // const prevPositions = useRef<Map<string, number>>(new Map());\\n  // useLayoutEffect(() => { ... }, [visibleTasks]);\",\"originTextLength\":187,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875899},{\"originRange\":{\"start\":{\"line\":1500,\"character\":0},\"end\":{\"line\":1500,\"character\":42}},\"modifyRange\":{\"start\":{\"line\":1500,\"character\":0},\"end\":{\"line\":1500,\"character\":42}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        <AnimatePresence mode=\\\\\\\"popLayout\\\\\\\">\",\"originAcceptText\":\"        <AnimatePresence mode=\\\"popLayout\\\">\",\"originTextLength\":42,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875900},{\"originRange\":{\"start\":{\"line\":1505,\"character\":0},\"end\":{\"line\":1505,\"character\":26}},\"modifyRange\":{\"start\":{\"line\":1505,\"character\":0},\"end\":{\"line\":1505,\"character\":26}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        </AnimatePresence>\",\"originAcceptText\":\"        </AnimatePresence>\",\"originTextLength\":26,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766407875902},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":108}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":108}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useState, useEffect, useRef, useMemo, createContext, useContext, useCallback } from \\\\'react\\\\';\",\"originAcceptText\":\"import React, { useState, useEffect, useRef, useMemo, createContext, useContext, useCallback } from 'react';\",\"originTextLength\":108,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529925},{\"originRange\":{\"start\":{\"line\":455,\"character\":0},\"end\":{\"line\":455,\"character\":193}},\"modifyRange\":{\"start\":{\"line\":455,\"character\":0},\"end\":{\"line\":455,\"character\":193}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        const activeRoots = currentTasks.filter(t => (t.status === \\\\'inbox\\\\' || t.status === \\\\'active\\\\') && !t.parent_id && (t.status as string) !== \\\\'logged\\\\' && (t.status as string) !== \\\\'deleted\\\\');\",\"originAcceptText\":\"        const activeRoots = currentTasks.filter(t => (t.status === 'inbox' || t.status === 'active') && !t.parent_id && (t.status as string) !== 'logged' && (t.status as string) !== 'deleted');\",\"originTextLength\":193,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529927},{\"originRange\":{\"start\":{\"line\":462,\"character\":0},\"end\":{\"line\":462,\"character\":264}},\"modifyRange\":{\"start\":{\"line\":462,\"character\":0},\"end\":{\"line\":462,\"character\":264}},\"action\":\"None\",\"isLine\":false,\"originText\":\"                const children = currentTasks.filter(c => c.parent_id === current.id && (c.status as string) !== \\\\'logged\\\\' && (c.status as string) !== \\\\'deleted\\\\').sort((a,b) => (a.order_index || 0) - (b.order_index || 0) || a.created_at.localeCompare(b.created_at));\",\"originAcceptText\":\"                const children = currentTasks.filter(c => c.parent_id === current.id && (c.status as string) !== 'logged' && (c.status as string) !== 'deleted').sort((a,b) => (a.order_index || 0) - (b.order_index || 0) || a.created_at.localeCompare(b.created_at));\",\"originTextLength\":264,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529935},{\"originRange\":{\"start\":{\"line\":800,\"character\":0},\"end\":{\"line\":800,\"character\":49}},\"modifyRange\":{\"start\":{\"line\":800,\"character\":0},\"end\":{\"line\":800,\"character\":49}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const handleFocus = (_e: React.FocusEvent) => {\",\"originAcceptText\":\"  const handleFocus = (_e: React.FocusEvent) => {\",\"originTextLength\":49,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529936},{\"originRange\":{\"start\":{\"line\":941,\"character\":0},\"end\":{\"line\":941,\"character\":49}},\"modifyRange\":{\"start\":{\"line\":941,\"character\":0},\"end\":{\"line\":941,\"character\":49}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const handleFocus = (_e: React.FocusEvent) => {\",\"originAcceptText\":\"  const handleFocus = (_e: React.FocusEvent) => {\",\"originTextLength\":49,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529938},{\"originRange\":{\"start\":{\"line\":1021,\"character\":0},\"end\":{\"line\":1021,\"character\":171}},\"modifyRange\":{\"start\":{\"line\":1021,\"character\":0},\"end\":{\"line\":1021,\"character\":171}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { addTask, updateTask, tags, tasks, addTag, deleteTag, setFocusedTaskId, themeSettings, toggleExpansion, setSelectedTaskIds, deleteTask } = useContext(AppContext);\",\"originAcceptText\":\"  const { addTask, updateTask, tags, tasks, addTag, deleteTag, setFocusedTaskId, themeSettings, toggleExpansion, setSelectedTaskIds, deleteTask } = useContext(AppContext);\",\"originTextLength\":171,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529946},{\"originRange\":{\"start\":{\"line\":1520,\"character\":0},\"end\":{\"line\":1520,\"character\":45}},\"modifyRange\":{\"start\":{\"line\":1520,\"character\":0},\"end\":{\"line\":1520,\"character\":45}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        {visibleTasks.map((item, _index) => (\",\"originAcceptText\":\"        {visibleTasks.map((item, _index) => (\",\"originTextLength\":45,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529948},{\"originRange\":{\"start\":{\"line\":1583,\"character\":0},\"end\":{\"line\":1583,\"character\":202}},\"modifyRange\":{\"start\":{\"line\":1583,\"character\":0},\"end\":{\"line\":1583,\"character\":202}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { syncStatus, view, setView, tagFilter, setTagFilter, tags, toast, setToast, undo, redo, canUndo, canRedo, canNavigateBack, navigateBack, archiveCompletedTasks } = useContext(AppContext) as any;\",\"originAcceptText\":\"  const { syncStatus, view, setView, tagFilter, setTagFilter, tags, toast, setToast, undo, redo, canUndo, canRedo, canNavigateBack, navigateBack, archiveCompletedTasks } = useContext(AppContext) as any;\",\"originTextLength\":202,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408529952},{\"originRange\":{\"start\":{\"line\":107,\"character\":0},\"end\":{\"line\":107,\"character\":78}},\"modifyRange\":{\"start\":{\"line\":107,\"character\":0},\"end\":{\"line\":107,\"character\":78}},\"action\":\"None\",\"isLine\":false,\"originText\":\"const parseSmartDate = (input: string, _referenceDate: Date): Date | null => {\",\"originAcceptText\":\"const parseSmartDate = (input: string, _referenceDate: Date): Date | null => {\",\"originTextLength\":78,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408631904},{\"originRange\":{\"start\":{\"line\":220,\"character\":0},\"end\":{\"line\":220,\"character\":157}},\"modifyRange\":{\"start\":{\"line\":220,\"character\":0},\"end\":{\"line\":220,\"character\":157}},\"action\":\"None\",\"isLine\":false,\"originText\":\"const DropIndicator = ({ show, top, left, width, color }: { show: boolean; top: number; left: number; width: number; depth: number; color: TaskColor; }) => {\",\"originAcceptText\":\"const DropIndicator = ({ show, top, left, width, color }: { show: boolean; top: number; left: number; width: number; depth: number; color: TaskColor; }) => {\",\"originTextLength\":157,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408631909},{\"originRange\":{\"start\":{\"line\":491,\"character\":0},\"end\":{\"line\":491,\"character\":110}},\"modifyRange\":{\"start\":{\"line\":491,\"character\":0},\"end\":{\"line\":491,\"character\":110}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          case \\\\'waiting\\\\': return (t: TaskData) => t.status === \\\\'waiting\\\\' && (t.status as string) !== \\\\'logged\\\\';\",\"originAcceptText\":\"          case 'waiting': return (t: TaskData) => t.status === 'waiting' && (t.status as string) !== 'logged';\",\"originTextLength\":110,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408631911},{\"originRange\":{\"start\":{\"line\":1243,\"character\":0},\"end\":{\"line\":1243,\"character\":78}},\"modifyRange\":{\"start\":{\"line\":1243,\"character\":0},\"end\":{\"line\":1243,\"character\":78}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  // const theme = COLOR_THEMES[getEffectiveColor(task)] || COLOR_THEMES.blue;\",\"originAcceptText\":\"  // const theme = COLOR_THEMES[getEffectiveColor(task)] || COLOR_THEMES.blue;\",\"originTextLength\":78,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408631913},{\"originRange\":{\"start\":{\"line\":1175,\"character\":0},\"end\":{\"line\":1175,\"character\":216}},\"modifyRange\":{\"start\":{\"line\":1175,\"character\":0},\"end\":{\"line\":1175,\"character\":216}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  // const editStyle = initialData ? `mb-1 py-4 px-4 bg-white rounded-xl z-20 relative shadow-[0_3px_8px_rgba(0,0,0,0.16)] border border-transparent` : `mb-2 bg-white rounded-lg shadow-sm border border-gray-100 p-3`;\",\"originAcceptText\":\"  // const editStyle = initialData ? `mb-1 py-4 px-4 bg-white rounded-xl z-20 relative shadow-[0_3px_8px_rgba(0,0,0,0.16)] border border-transparent` : `mb-2 bg-white rounded-lg shadow-sm border border-gray-100 p-3`;\",\"originTextLength\":216,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191439},{\"originRange\":{\"start\":{\"line\":1177,\"character\":0},\"end\":{\"line\":1181,\"character\":4}},\"modifyRange\":{\"start\":{\"line\":1177,\"character\":0},\"end\":{\"line\":1181,\"character\":4}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  // Animation variants for the \\\\\\\"Lift\\\\\\\" effect\\\\n  const itemVariants = {\\\\n    idle: { scale: 1, boxShadow: \\\\\\\"0px 0px 0px rgba(0,0,0,0)\\\\\\\", zIndex: 0 },\\\\n    editing: { scale: 1.02, boxShadow: \\\\\\\"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)\\\\\\\", zIndex: 10 }\\\\n  };\",\"originAcceptText\":\"  // Animation variants for the \\\"Lift\\\" effect\\n  const itemVariants = {\\n    idle: { scale: 1, boxShadow: \\\"0px 0px 0px rgba(0,0,0,0)\\\", zIndex: 0 },\\n    editing: { scale: 1.02, boxShadow: \\\"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)\\\", zIndex: 10 }\\n  };\",\"originTextLength\":279,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191440},{\"originRange\":{\"start\":{\"line\":1185,\"character\":0},\"end\":{\"line\":1189,\"character\":66}},\"modifyRange\":{\"start\":{\"line\":1185,\"character\":0},\"end\":{\"line\":1189,\"character\":66}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      variants={itemVariants}\\\\n      initial=\\\\\\\"editing\\\\\\\"\\\\n      animate=\\\\\\\"editing\\\\\\\"\\\\n      exit=\\\\\\\"idle\\\\\\\"\\\\n      transition={{ type: \\\\\\\"spring\\\\\\\", stiffness: 300, damping: 30 }}\",\"originAcceptText\":\"      variants={itemVariants}\\n      initial=\\\"editing\\\"\\n      animate=\\\"editing\\\"\\n      exit=\\\"idle\\\"\\n      transition={{ type: \\\"spring\\\", stiffness: 300, damping: 30 }}\",\"originTextLength\":162,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191446},{\"originRange\":{\"start\":{\"line\":1190,\"character\":0},\"end\":{\"line\":1190,\"character\":129}},\"modifyRange\":{\"start\":{\"line\":1190,\"character\":0},\"end\":{\"line\":1190,\"character\":129}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      className={`group transition-all ${isQuickAdd ? \\\\'bg-transparent\\\\' : \\\\'mb-2 bg-white rounded-xl border border-transparent\\\\'}`} \",\"originAcceptText\":\"      className={`group transition-all ${isQuickAdd ? 'bg-transparent' : 'mb-2 bg-white rounded-xl border border-transparent'}`} \",\"originTextLength\":129,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191447},{\"originRange\":{\"start\":{\"line\":1385,\"character\":0},\"end\":{\"line\":1389,\"character\":22}},\"modifyRange\":{\"start\":{\"line\":1385,\"character\":0},\"end\":{\"line\":1389,\"character\":22}},\"action\":\"None\",\"isLine\":false,\"originText\":\"            handleSelection(e, task.id);\\\\n        }} \\\\n        onDoubleClick={(e: any) => { \\\\n            e.stopPropagation(); \\\\n            onEdit(); \",\"originAcceptText\":\"            handleSelection(e, task.id);\\n        }} \\n        onDoubleClick={(e: any) => { \\n            e.stopPropagation(); \\n            onEdit(); \",\"originTextLength\":147,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191447},{\"originRange\":{\"start\":{\"line\":1392,\"character\":0},\"end\":{\"line\":1392,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":1392,\"character\":0},\"end\":{\"line\":1392,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409191453},{\"originRange\":{\"start\":{\"line\":1067,\"character\":0},\"end\":{\"line\":1076,\"character\":27}},\"modifyRange\":{\"start\":{\"line\":1067,\"character\":0},\"end\":{\"line\":1076,\"character\":27}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  // const rootTask = useMemo(() => {\\\\n  //   if (!parentId) return null;\\\\n  //   let curr = tasks.find(t => t.id === parentId);\\\\n  //   const visited = new Set<string>();\\\\n  //   while (curr && curr.parent_id) {\\\\n  //      if (visited.has(curr.id)) break; visited.add(curr.id);\\\\n  //      const p = tasks.find(t => t.id === curr!.parent_id); if(p) curr = p; else break;\\\\n  //   }\\\\n  //   return curr;\\\\n  // }, [parentId, tasks]);\",\"originAcceptText\":\"  // const rootTask = useMemo(() => {\\n  //   if (!parentId) return null;\\n  //   let curr = tasks.find(t => t.id === parentId);\\n  //   const visited = new Set<string>();\\n  //   while (curr && curr.parent_id) {\\n  //      if (visited.has(curr.id)) break; visited.add(curr.id);\\n  //      const p = tasks.find(t => t.id === curr!.parent_id); if(p) curr = p; else break;\\n  //   }\\n  //   return curr;\\n  // }, [parentId, tasks]);\",\"originTextLength\":421,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725382},{\"originRange\":{\"start\":{\"line\":1180,\"character\":0},\"end\":{\"line\":1180,\"character\":124}},\"modifyRange\":{\"start\":{\"line\":1180,\"character\":0},\"end\":{\"line\":1180,\"character\":124}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    editing: { scale: 1, boxShadow: \\\\\\\"0 10px 30px -5px rgba(0, 0, 0, 0.1), 0 4px 10px -3px rgba(0, 0, 0, 0.05)\\\\\\\", zIndex: 10 }\",\"originAcceptText\":\"    editing: { scale: 1, boxShadow: \\\"0 10px 30px -5px rgba(0, 0, 0, 0.1), 0 4px 10px -3px rgba(0, 0, 0, 0.05)\\\", zIndex: 10 }\",\"originTextLength\":124,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725384},{\"originRange\":{\"start\":{\"line\":1194,\"character\":0},\"end\":{\"line\":1194,\"character\":69}},\"modifyRange\":{\"start\":{\"line\":1194,\"character\":0},\"end\":{\"line\":1194,\"character\":69}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      transition={{ type: \\\\\\\"tween\\\\\\\", ease: \\\\\\\"easeOut\\\\\\\", duration: 0.15 }}\",\"originAcceptText\":\"      transition={{ type: \\\"tween\\\", ease: \\\"easeOut\\\", duration: 0.15 }}\",\"originTextLength\":69,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725392},{\"originRange\":{\"start\":{\"line\":1196,\"character\":0},\"end\":{\"line\":1196,\"character\":129}},\"modifyRange\":{\"start\":{\"line\":1196,\"character\":0},\"end\":{\"line\":1196,\"character\":129}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      className={`group transition-all ${isQuickAdd ? \\\\'bg-transparent\\\\' : \\\\'mb-3 bg-white rounded-xl border border-gray-100/50\\\\'}`} \",\"originAcceptText\":\"      className={`group transition-all ${isQuickAdd ? 'bg-transparent' : 'mb-3 bg-white rounded-xl border border-gray-100/50'}`} \",\"originTextLength\":129,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725394},{\"originRange\":{\"start\":{\"line\":1199,\"character\":0},\"end\":{\"line\":1201,\"character\":56}},\"modifyRange\":{\"start\":{\"line\":1199,\"character\":0},\"end\":{\"line\":1201,\"character\":56}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      <div className={`flex gap-3 ${paddingClass} py-3`}>\\\\n        {initialData ? ( <div className=\\\\\\\"mt-1.5 ml-1\\\\\\\"> <ThingsCheckbox checked={isDone} onChange={(e) => { e.stopPropagation(); toggleCompletion(); }} size={18} color={effectiveColor} isRoot={!parentId} /> </div> ) : ( <button type=\\\\\\\"button\\\\\\\" tabIndex={-1} onClick={() => setIsProject(!isProject)} className={`mt-1 h-5 w-5 flex items-center justify-center transition-all ${isProject ? theme.accent : \\\\'text-gray-300 hover:text-gray-400\\\\'}`}>{isProject ? <Layers size={16} /> : <Circle size={16} />}</button> )}\\\\n        <div className=\\\\\\\"flex-1 space-y-3 relative pr-2\\\\\\\">\",\"originAcceptText\":\"      <div className={`flex gap-3 ${paddingClass} py-3`}>\\n        {initialData ? ( <div className=\\\"mt-1.5 ml-1\\\"> <ThingsCheckbox checked={isDone} onChange={(e) => { e.stopPropagation(); toggleCompletion(); }} size={18} color={effectiveColor} isRoot={!parentId} /> </div> ) : ( <button type=\\\"button\\\" tabIndex={-1} onClick={() => setIsProject(!isProject)} className={`mt-1 h-5 w-5 flex items-center justify-center transition-all ${isProject ? theme.accent : 'text-gray-300 hover:text-gray-400'}`}>{isProject ? <Layers size={16} /> : <Circle size={16} />}</button> )}\\n        <div className=\\\"flex-1 space-y-3 relative pr-2\\\">\",\"originTextLength\":621,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725395},{\"originRange\":{\"start\":{\"line\":1203,\"character\":0},\"end\":{\"line\":1204,\"character\":368}},\"modifyRange\":{\"start\":{\"line\":1203,\"character\":0},\"end\":{\"line\":1204,\"character\":368}},\"action\":\"None\",\"isLine\":false,\"originText\":\"            <div className=\\\\\\\"flex-1 relative space-y-2\\\\\\\">\\\\n              <input ref={titleRef} autoFocus type=\\\\\\\"text\\\\\\\" value={title} onChange={e => setTitle(e.target.value)} placeholder=\\\\\\\"任務名稱...\\\\\\\" className={`w-full ${textSizeClass} ${titleFontClass} placeholder:font-light placeholder-gray-300 border-none bg-transparent focus:ring-0 outline-none p-0 leading-tight ${isDone ? \\\\'text-gray-300 line-through\\\\' : \\\\'text-slate-800\\\\'}`} />\",\"originAcceptText\":\"            <div className=\\\"flex-1 relative space-y-2\\\">\\n              <input ref={titleRef} autoFocus type=\\\"text\\\" value={title} onChange={e => setTitle(e.target.value)} placeholder=\\\"任務名稱...\\\" className={`w-full ${textSizeClass} ${titleFontClass} placeholder:font-light placeholder-gray-300 border-none bg-transparent focus:ring-0 outline-none p-0 leading-tight ${isDone ? 'text-gray-300 line-through' : 'text-slate-800'}`} />\",\"originTextLength\":424,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725403},{\"originRange\":{\"start\":{\"line\":1206,\"character\":0},\"end\":{\"line\":1206,\"character\":404}},\"modifyRange\":{\"start\":{\"line\":1206,\"character\":0},\"end\":{\"line\":1206,\"character\":404}},\"action\":\"None\",\"isLine\":false,\"originText\":\"              <textarea ref={descRef} tabIndex={-1} value={desc} onChange={e => setDesc(e.target.value)} placeholder=\\\\\\\"添加備註...\\\\\\\" className={`w-full ${textSizeClass} ${descFontClass} text-slate-500 placeholder:text-slate-300 border-none bg-transparent focus:ring-0 outline-none p-0 resize-none h-auto min-h-[20px] leading-relaxed transition-[height] duration-200 ease-out overflow-hidden block`} rows={1} />\",\"originAcceptText\":\"              <textarea ref={descRef} tabIndex={-1} value={desc} onChange={e => setDesc(e.target.value)} placeholder=\\\"添加備註...\\\" className={`w-full ${textSizeClass} ${descFontClass} text-slate-500 placeholder:text-slate-300 border-none bg-transparent focus:ring-0 outline-none p-0 resize-none h-auto min-h-[20px] leading-relaxed transition-[height] duration-200 ease-out overflow-hidden block`} rows={1} />\",\"originTextLength\":404,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725404},{\"originRange\":{\"start\":{\"line\":1208,\"character\":0},\"end\":{\"line\":1225,\"character\":19}},\"modifyRange\":{\"start\":{\"line\":1208,\"character\":0},\"end\":{\"line\":1225,\"character\":19}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          </div>\\\\n          \\\\n          <div className=\\\\\\\"flex items-center justify-between pt-1\\\\\\\">\\\\n             <div className=\\\\\\\"flex flex-wrap gap-2 items-center\\\\\\\">\\\\n                <SmartDateInput innerRef={startDateRef} label=\\\\\\\"今天\\\\\\\" value={startDate} onChange={setStartDate} theme={theme} tasks={tasks} />\\\\n                <SmartDateInput tabIndex={-1} label=\\\\\\\"期限\\\\\\\" value={dueDate} onChange={setDueDate} colorClass=\\\\\\\"text-red-500\\\\\\\" tasks={tasks} theme={theme} />\\\\n                <DropdownSelect innerRef={tagsRef} icon={Tag} label=\\\\\\\"標籤\\\\\\\" items={tags.filter((t: any) => !selectedTags.includes(t.id))} selectedIds={[]} placeholder=\\\\\\\"新增標籤...\\\\\\\" allowAdd onDeleteItem={deleteTag} multiSelect={true} theme={theme} onSelect={async (id: string | null, newName?: string) => { if (id) setSelectedTags(prev => prev.includes(id) ? prev : [...prev, id]); else if (newName) { const newId = await addTag(newName); if (newId) setSelectedTags(prev => [...prev, newId]); } }} />\\\\n                {!initialData && ( <DropdownSelect tabIndex={-1} icon={ChevronDown} label=\\\\\\\"子任務\\\\\\\" items={eligibleParents} selectedIds={childIds} placeholder=\\\\\\\"搜尋子任務...\\\\\\\" theme={theme} onSelect={(id: string) => setChildIds(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id])} /> )}\\\\n                <div className=\\\\\\\"w-px h-3 bg-gray-200 mx-1\\\\\\\"></div>\\\\n                 {/* Selection of parent/project */}\\\\n                 <div className=\\\\\\\"flex items-center\\\\\\\">\\\\n                    <DropdownSelect tabIndex={-1} icon={ChevronUp} label=\\\\\\\"移動\\\\\\\" items={eligibleParents} allowAdd={true} selectedIds={parentId ? [parentId] : []} placeholder=\\\\\\\"搜尋母任務...\\\\\\\" theme={theme} onSelect={async (id: string | null, newName?: string) => { let targetId = id; if (!targetId && newName) { targetId = await addTask({ title: newName, is_project: true, status: \\\\'inbox\\\\' }); } if (!targetId && !id) return; const newPid = targetId === parentId ? null : targetId; setParentId(newPid); if (initialData) { if (newPid) { toggleExpansion(newPid, true); } await updateTask(initialData.id, { parent_id: newPid }); } }} />\\\\n                 </div>\\\\n             </div>\\\\n\\\\n             <div className=\\\\\\\"flex items-center gap-2\\\\\\\">\\\\n                {selectedTags.length > 0 && <div className=\\\\\\\"flex flex-wrap gap-1\\\\\\\">{selectedTags.map(tid => { const t = tags.find(tag => tag.id === tid); return t ? <TagChip key={tid} tag={t} onRemove={() => setSelectedTags(prev => prev.filter(x => x !== tid))} /> : null; })}</div>}\\\\n                {!parentId && <div className=\\\\\\\"flex gap-0.5 p-0.5 bg-gray-50 rounded-full border border-gray-100\\\\\\\">{(Object.keys(COLOR_THEMES) as TaskColor[]).map(c => <button key={c} tabIndex={-1} type=\\\\\\\"button\\\\\\\" onClick={() => setColor(c)} className={`w-2.5 h-2.5 rounded-full ${COLOR_THEMES[c].dot} ${color === c ? \\\\'ring-1 ring-gray-400 ring-offset-1\\\\' : \\\\'hover:scale-110\\\\'} transition-all`}/>)}</div>}\\\\n             </div>\",\"originAcceptText\":\"          </div>\\n          \\n          <div className=\\\"flex items-center justify-between pt-1\\\">\\n             <div className=\\\"flex flex-wrap gap-2 items-center\\\">\\n                <SmartDateInput innerRef={startDateRef} label=\\\"今天\\\" value={startDate} onChange={setStartDate} theme={theme} tasks={tasks} />\\n                <SmartDateInput tabIndex={-1} label=\\\"期限\\\" value={dueDate} onChange={setDueDate} colorClass=\\\"text-red-500\\\" tasks={tasks} theme={theme} />\\n                <DropdownSelect innerRef={tagsRef} icon={Tag} label=\\\"標籤\\\" items={tags.filter((t: any) => !selectedTags.includes(t.id))} selectedIds={[]} placeholder=\\\"新增標籤...\\\" allowAdd onDeleteItem={deleteTag} multiSelect={true} theme={theme} onSelect={async (id: string | null, newName?: string) => { if (id) setSelectedTags(prev => prev.includes(id) ? prev : [...prev, id]); else if (newName) { const newId = await addTag(newName); if (newId) setSelectedTags(prev => [...prev, newId]); } }} />\\n                {!initialData && ( <DropdownSelect tabIndex={-1} icon={ChevronDown} label=\\\"子任務\\\" items={eligibleParents} selectedIds={childIds} placeholder=\\\"搜尋子任務...\\\" theme={theme} onSelect={(id: string) => setChildIds(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id])} /> )}\\n                <div className=\\\"w-px h-3 bg-gray-200 mx-1\\\"></div>\\n                 {/* Selection of parent/project */}\\n                 <div className=\\\"flex items-center\\\">\\n                    <DropdownSelect tabIndex={-1} icon={ChevronUp} label=\\\"移動\\\" items={eligibleParents} allowAdd={true} selectedIds={parentId ? [parentId] : []} placeholder=\\\"搜尋母任務...\\\" theme={theme} onSelect={async (id: string | null, newName?: string) => { let targetId = id; if (!targetId && newName) { targetId = await addTask({ title: newName, is_project: true, status: 'inbox' }); } if (!targetId && !id) return; const newPid = targetId === parentId ? null : targetId; setParentId(newPid); if (initialData) { if (newPid) { toggleExpansion(newPid, true); } await updateTask(initialData.id, { parent_id: newPid }); } }} />\\n                 </div>\\n             </div>\\n\\n             <div className=\\\"flex items-center gap-2\\\">\\n                {selectedTags.length > 0 && <div className=\\\"flex flex-wrap gap-1\\\">{selectedTags.map(tid => { const t = tags.find(tag => tag.id === tid); return t ? <TagChip key={tid} tag={t} onRemove={() => setSelectedTags(prev => prev.filter(x => x !== tid))} /> : null; })}</div>}\\n                {!parentId && <div className=\\\"flex gap-0.5 p-0.5 bg-gray-50 rounded-full border border-gray-100\\\">{(Object.keys(COLOR_THEMES) as TaskColor[]).map(c => <button key={c} tabIndex={-1} type=\\\"button\\\" onClick={() => setColor(c)} className={`w-2.5 h-2.5 rounded-full ${COLOR_THEMES[c].dot} ${color === c ? 'ring-1 ring-gray-400 ring-offset-1' : 'hover:scale-110'} transition-all`}/>)}</div>}\\n             </div>\",\"originTextLength\":2840,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409725406},{\"originRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1260,\"character\":39}},\"modifyRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1260,\"character\":39}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          // Use requestAnimationFrame to ensure DOM is ready and focus works after layout changes\\\\n          requestAnimationFrame(() => {\",\"originAcceptText\":\"          // Use requestAnimationFrame to ensure DOM is ready and focus works after layout changes\\n          requestAnimationFrame(() => {\",\"originTextLength\":138,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409783080},{\"originRange\":{\"start\":{\"line\":1262,\"character\":0},\"end\":{\"line\":1269,\"character\":13}},\"modifyRange\":{\"start\":{\"line\":1262,\"character\":0},\"end\":{\"line\":1269,\"character\":13}},\"action\":\"None\",\"isLine\":false,\"originText\":\"                  itemRef.current.focus({ preventScroll: true });\\\\n                  // Only scroll if needed (e.g. out of view)\\\\n                  const rect = itemRef.current.getBoundingClientRect();\\\\n                  if (rect.top < 0 || rect.bottom > window.innerHeight) {\\\\n                      itemRef.current.scrollIntoView({ block: \\\\'nearest\\\\', behavior: \\\\'smooth\\\\' });\\\\n                  }\\\\n              }\\\\n          });\",\"originAcceptText\":\"                  itemRef.current.focus({ preventScroll: true });\\n                  // Only scroll if needed (e.g. out of view)\\n                  const rect = itemRef.current.getBoundingClientRect();\\n                  if (rect.top < 0 || rect.bottom > window.innerHeight) {\\n                      itemRef.current.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\\n                  }\\n              }\\n          });\",\"originTextLength\":419,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766409783082},{\"originRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1260,\"character\":42}},\"modifyRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1260,\"character\":42}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          // Force focus with a slight delay to ensure DOM is ready and previous element has blurred\\\\n          const timer = setTimeout(() => {\",\"originAcceptText\":\"          // Force focus with a slight delay to ensure DOM is ready and previous element has blurred\\n          const timer = setTimeout(() => {\",\"originTextLength\":143,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766410920039},{\"originRange\":{\"start\":{\"line\":1263,\"character\":0},\"end\":{\"line\":1263,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":1263,\"character\":0},\"end\":{\"line\":1263,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766410920040},{\"originRange\":{\"start\":{\"line\":1269,\"character\":0},\"end\":{\"line\":1270,\"character\":43}},\"modifyRange\":{\"start\":{\"line\":1269,\"character\":0},\"end\":{\"line\":1270,\"character\":43}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          }, 50); // Increased delay slightly\\\\n          return () => clearTimeout(timer);\",\"originAcceptText\":\"          }, 50); // Increased delay slightly\\n          return () => clearTimeout(timer);\",\"originTextLength\":89,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766410920041},{\"originRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1259,\"character\":57}},\"modifyRange\":{\"start\":{\"line\":1259,\"character\":0},\"end\":{\"line\":1259,\"character\":57}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          itemRef.current.focus({ preventScroll: true });\",\"originAcceptText\":\"          itemRef.current.focus({ preventScroll: true });\",\"originTextLength\":57,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411251358},{\"originRange\":{\"start\":{\"line\":1502,\"character\":0},\"end\":{\"line\":1502,\"character\":47}},\"modifyRange\":{\"start\":{\"line\":1502,\"character\":0},\"end\":{\"line\":1502,\"character\":47}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const handleCloseEdit = (taskId: string) => {\",\"originAcceptText\":\"  const handleCloseEdit = (taskId: string) => {\",\"originTextLength\":47,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411251360},{\"originRange\":{\"start\":{\"line\":1505,\"character\":0},\"end\":{\"line\":1505,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":1505,\"character\":0},\"end\":{\"line\":1505,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411251361},{\"originRange\":{\"start\":{\"line\":1515,\"character\":0},\"end\":{\"line\":1515,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":1515,\"character\":0},\"end\":{\"line\":1515,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411251362},{\"originRange\":{\"start\":{\"line\":1536,\"character\":0},\"end\":{\"line\":1536,\"character\":300}},\"modifyRange\":{\"start\":{\"line\":1536,\"character\":0},\"end\":{\"line\":1536,\"character\":300}},\"action\":\"None\",\"isLine\":false,\"originText\":\"                {editingTaskId === item.data.id ? ( <TaskInput key={item.data.id} initialData={item.data} onClose={() => handleCloseEdit(item.data.id)} /> ) : ( <TaskItem key={item.data.id} flatTask={item} isFocused={focusedTaskId === item.data.id} onEdit={() => setEditingTaskId(item.data.id)} /> )}\",\"originAcceptText\":\"                {editingTaskId === item.data.id ? ( <TaskInput key={item.data.id} initialData={item.data} onClose={() => handleCloseEdit(item.data.id)} /> ) : ( <TaskItem key={item.data.id} flatTask={item} isFocused={focusedTaskId === item.data.id} onEdit={() => setEditingTaskId(item.data.id)} /> )}\",\"originTextLength\":300,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411251363},{\"originRange\":{\"start\":{\"line\":1427,\"character\":0},\"end\":{\"line\":1427,\"character\":292}},\"modifyRange\":{\"start\":{\"line\":1427,\"character\":0},\"end\":{\"line\":1427,\"character\":292}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { visibleTasks, focusedTaskId, setFocusedTaskId, editingTaskId, setEditingTaskId, expandedTaskIds, endDrag, dragState, updateDropState, updateGhostPosition, selectedTaskIds, handleSelection, selectionAnchor, tasks, pendingFocusTaskId, setPendingFocusTaskId } = useContext(AppContext);\",\"originAcceptText\":\"  const { visibleTasks, focusedTaskId, setFocusedTaskId, editingTaskId, setEditingTaskId, expandedTaskIds, endDrag, dragState, updateDropState, updateGhostPosition, selectedTaskIds, handleSelection, selectionAnchor, tasks, pendingFocusTaskId, setPendingFocusTaskId } = useContext(AppContext);\",\"originTextLength\":292,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411293501},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":3,\"character\":31}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":3,\"character\":31}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React from \\\\'react\\\\';\\\\nimport { AppProvider } from \\\\'./context/AppContext\\\\';\\\\nimport { MainLayout } from \\\\'./components/MainLayout\\\\';\\\\n\\\\nexport default function App() {\",\"originAcceptText\":\"import React from 'react';\\nimport { AppProvider } from './context/AppContext';\\nimport { MainLayout } from './components/MainLayout';\\n\\nexport default function App() {\",\"originTextLength\":165,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412080589},{\"originRange\":{\"start\":{\"line\":208,\"character\":0},\"end\":{\"line\":211,\"character\":4}},\"modifyRange\":{\"start\":{\"line\":208,\"character\":0},\"end\":{\"line\":211,\"character\":4}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    <AppProvider>\\\\n      <MainLayout />\\\\n    </AppProvider>\\\\n  );\",\"originAcceptText\":\"    <AppProvider>\\n      <MainLayout />\\n    </AppProvider>\\n  );\",\"originTextLength\":62,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412080591},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137869},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":2,\"character\":63}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":2,\"character\":63}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useContext } from \\\\'react\\\\';\\\\nimport { BrowserRouter, Routes, Route, Navigate } from \\\\'react-router-dom\\\\';\\\\nimport { AppProvider, AppContext } from \\\\'./context/AppContext\\\\';\",\"originAcceptText\":\"import { useContext } from 'react';\\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\\nimport { AppProvider, AppContext } from './context/AppContext';\",\"originTextLength\":174,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412264088},{\"originRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":44,\"character\":2}},\"modifyRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":44,\"character\":2}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { Login } from \\\\'./components/Login\\\\';\\\\n\\\\nconst AppRoutes = () => {\\\\n  const { user, loading } = useContext(AppContext);\\\\n\\\\n  if (loading) {\\\\n    return (\\\\n      <div className=\\\\\\\"h-screen flex items-center justify-center bg-gray-50\\\\\\\">\\\\n        <div className=\\\\\\\"flex flex-col items-center gap-3\\\\\\\">\\\\n          <div className=\\\\\\\"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin\\\\\\\"></div>\\\\n          <p className=\\\\\\\"text-sm text-gray-500 font-medium\\\\\\\">Loading workspace...</p>\\\\n        </div>\\\\n      </div>\\\\n    );\\\\n  }\\\\n\\\\n  // Check if user is authenticated (and not using the default placeholder UUID if we want to enforce real auth)\\\\n  // The current AppContext sets a default UUID if none exists.\\\\n  // For the Login feature to be meaningful, we should check if it\\\\'s a real session user or at least allow logout.\\\\n  // But AppContext logic:\\\\n  // if (!userId) userId = \\\\'0000...\\\\'; setUser(session?.user || { id: userId });\\\\n  // So user is always defined.\\\\n  \\\\n  // We need to know if it\\\\'s an authenticated session.\\\\n  // We can check user.aud === \\\\'authenticated\\\\'.\\\\n  \\\\n  const isAuthenticated = user && user.aud === \\\\'authenticated\\\\';\\\\n  \\\\n  // For dev/demo purpose, if we want to allow the \\\\\\\"default\\\\\\\" user to access without login, we can skip this check.\\\\n  // But the requirement is \\\\\\\"User Authentication System\\\\\\\".\\\\n  // So we should enforce login.\\\\n  // HOWEVER, to avoid locking out the user immediately if they rely on the localstorage ID, \\\\n  // we might need a migration or just enforce it.\\\\n  \\\\n  // Let\\\\'s enforce it. If user.id is the default zero-UUID, treat as unauthenticated?\\\\n  // Or just check `user.aud`.\\\\n  \\\\n  const isGuest = user?.id === \\\\'00000000-0000-0000-0000-000000000000\\\\';\\\\n  \\\\n  return (\\\\n    <Routes>\\\\n      <Route path=\\\\\\\"/login\\\\\\\" element={!isAuthenticated ? <Login /> : <Navigate to=\\\\\\\"/\\\\\\\" replace />} />\\\\n      <Route path=\\\\\\\"/*\\\\\\\" element={(isAuthenticated || isGuest) ? <MainLayout /> : <Navigate to=\\\\\\\"/login\\\\\\\" replace />} />\\\\n    </Routes>\\\\n  );\\\\n};\",\"originAcceptText\":\"import { Login } from './components/Login';\\n\\nconst AppRoutes = () => {\\n  const { user, loading } = useContext(AppContext);\\n\\n  if (loading) {\\n    return (\\n      <div className=\\\"h-screen flex items-center justify-center bg-gray-50\\\">\\n        <div className=\\\"flex flex-col items-center gap-3\\\">\\n          <div className=\\\"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin\\\"></div>\\n          <p className=\\\"text-sm text-gray-500 font-medium\\\">Loading workspace...</p>\\n        </div>\\n      </div>\\n    );\\n  }\\n\\n  // Check if user is authenticated (and not using the default placeholder UUID if we want to enforce real auth)\\n  // The current AppContext sets a default UUID if none exists.\\n  // For the Login feature to be meaningful, we should check if it's a real session user or at least allow logout.\\n  // But AppContext logic:\\n  // if (!userId) userId = '0000...'; setUser(session?.user || { id: userId });\\n  // So user is always defined.\\n  \\n  // We need to know if it's an authenticated session.\\n  // We can check user.aud === 'authenticated'.\\n  \\n  const isAuthenticated = user && user.aud === 'authenticated';\\n  \\n  // For dev/demo purpose, if we want to allow the \\\"default\\\" user to access without login, we can skip this check.\\n  // But the requirement is \\\"User Authentication System\\\".\\n  // So we should enforce login.\\n  // HOWEVER, to avoid locking out the user immediately if they rely on the localstorage ID, \\n  // we might need a migration or just enforce it.\\n  \\n  // Let's enforce it. If user.id is the default zero-UUID, treat as unauthenticated?\\n  // Or just check `user.aud`.\\n  \\n  const isGuest = user?.id === '00000000-0000-0000-0000-000000000000';\\n  \\n  return (\\n    <Routes>\\n      <Route path=\\\"/login\\\" element={!isAuthenticated ? <Login /> : <Navigate to=\\\"/\\\" replace />} />\\n      <Route path=\\\"/*\\\" element={(isAuthenticated || isGuest) ? <MainLayout /> : <Navigate to=\\\"/login\\\" replace />} />\\n    </Routes>\\n  );\\n};\",\"originTextLength\":1946,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412264090},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":9,\"character\":20}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":9,\"character\":20}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    <BrowserRouter>\\\\n      <AppProvider>\\\\n        <AppRoutes />\\\\n      </AppProvider>\\\\n    </BrowserRouter>\",\"originAcceptText\":\"    <BrowserRouter>\\n      <AppProvider>\\n        <AppRoutes />\\n      </AppProvider>\\n    </BrowserRouter>\",\"originTextLength\":103,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412264096},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":55}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":55}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { ErrorScreen } from \\\\'./components/ErrorScreen\\\\';\",\"originAcceptText\":\"import { ErrorScreen } from './components/ErrorScreen';\",\"originTextLength\":55,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416182719},{\"originRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":7,\"character\":62}},\"modifyRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":7,\"character\":62}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { user, loading, initError } = useContext(AppContext);\",\"originAcceptText\":\"  const { user, loading, initError } = useContext(AppContext);\",\"originTextLength\":62,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416182731},{\"originRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":109}},\"modifyRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":109}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  }\\\\n\\\\n  if (initError) {\\\\n      return <ErrorScreen message={initError === \\\\\\\"Supabase client not initialized\\\\\\\" ? \\\\\\\"服务不可用\\\\\\\" : initError} />;\",\"originAcceptText\":\"  }\\n\\n  if (initError) {\\n      return <ErrorScreen message={initError === \\\"Supabase client not initialized\\\" ? \\\"服务不可用\\\" : initError} />;\",\"originTextLength\":133,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416182733},{\"originRange\":{\"start\":{\"line\":22,\"character\":0},\"end\":{\"line\":26,\"character\":8}},\"modifyRange\":{\"start\":{\"line\":22,\"character\":0},\"end\":{\"line\":26,\"character\":8}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      return (\\\\n        <ErrorScreen \\\\n            message={initError === \\\\\\\"Supabase client not initialized\\\\\\\" ? \\\\\\\"服务不可用\\\\\\\" : initError} \\\\n        />\\\\n      );\",\"originAcceptText\":\"      return (\\n        <ErrorScreen \\n            message={initError === \\\"Supabase client not initialized\\\" ? \\\"服务不可用\\\" : initError} \\n        />\\n      );\",\"originTextLength\":149,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417775617},{\"originRange\":{\"start\":{\"line\":29,\"character\":0},\"end\":{\"line\":30,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":29,\"character\":0},\"end\":{\"line\":30,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const isAuthenticated = !!user;\\\\n\",\"originAcceptText\":\"  const isAuthenticated = !!user;\\n\",\"originTextLength\":34,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766488249725},{\"originRange\":{\"start\":{\"line\":55,\"character\":0},\"end\":{\"line\":55,\"character\":103}},\"modifyRange\":{\"start\":{\"line\":55,\"character\":0},\"end\":{\"line\":55,\"character\":103}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      <Route path=\\\\\\\"/*\\\\\\\" element={isAuthenticated ? <MainLayout /> : <Navigate to=\\\\\\\"/login\\\\\\\" replace />} />\",\"originAcceptText\":\"      <Route path=\\\"/*\\\" element={isAuthenticated ? <MainLayout /> : <Navigate to=\\\"/login\\\" replace />} />\",\"originTextLength\":103,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766488249727}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase_schema.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":64,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":64,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Enable UUID extension\\\\ncreate extension if not exists \\\\\\\"uuid-ossp\\\\\\\";\\\\n\\\\n-- Create tags table\\\\ncreate table public.tags (\\\\n  id uuid not null default uuid_generate_v4(),\\\\n  user_id uuid not null default auth.uid(),\\\\n  name text not null,\\\\n  parent_id uuid null,\\\\n  color text null,\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  \\\\n  constraint tags_pkey primary key (id)\\\\n);\\\\n\\\\n-- Create tasks table\\\\ncreate table public.tasks (\\\\n  id uuid not null default uuid_generate_v4(),\\\\n  user_id uuid not null default auth.uid(),\\\\n  title text not null,\\\\n  description text null,\\\\n  status text not null default \\\\'inbox\\\\',\\\\n  parent_id uuid null,\\\\n  start_date timestamp with time zone null,\\\\n  due_date timestamp with time zone null,\\\\n  is_project boolean default false,\\\\n  tags text[] default array[]::text[],\\\\n  color text default \\\\'blue\\\\',\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  completed_at timestamp with time zone null,\\\\n  order_index numeric default 0,\\\\n  \\\\n  constraint tasks_pkey primary key (id)\\\\n);\\\\n\\\\n-- Enable Row Level Security (RLS)\\\\nalter table public.tags enable row level security;\\\\nalter table public.tasks enable row level security;\\\\n\\\\n-- Create Policies for tags\\\\ncreate policy \\\\\\\"Users can view their own tags\\\\\\\" \\\\non public.tags for select \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own tags\\\\\\\" \\\\non public.tags for insert \\\\nwith check (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own tags\\\\\\\" \\\\non public.tags for update \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can delete their own tags\\\\\\\" \\\\non public.tags for delete \\\\nusing (auth.uid() = user_id);\\\\n\\\\n-- Create Policies for tasks\\\\ncreate policy \\\\\\\"Users can view their own tasks\\\\\\\" \\\\non public.tasks for select \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own tasks\\\\\\\" \\\\non public.tasks for insert \\\\nwith check (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own tasks\\\\\\\" \\\\non public.tasks for update \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can delete their own tasks\\\\\\\" \\\\non public.tasks for delete \\\\nusing (auth.uid() = user_id);\\\\n\\\\n-- Create Realtime publication (Optional, for live updates)\\\\nalter publication supabase_realtime add table public.tasks;\\\\nalter publication supabase_realtime add table public.tags;\\\\n\",\"originAcceptText\":\"-- Enable UUID extension\\ncreate extension if not exists \\\"uuid-ossp\\\";\\n\\n-- Create tags table\\ncreate table public.tags (\\n  id uuid not null default uuid_generate_v4(),\\n  user_id uuid not null default auth.uid(),\\n  name text not null,\\n  parent_id uuid null,\\n  color text null,\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  \\n  constraint tags_pkey primary key (id)\\n);\\n\\n-- Create tasks table\\ncreate table public.tasks (\\n  id uuid not null default uuid_generate_v4(),\\n  user_id uuid not null default auth.uid(),\\n  title text not null,\\n  description text null,\\n  status text not null default 'inbox',\\n  parent_id uuid null,\\n  start_date timestamp with time zone null,\\n  due_date timestamp with time zone null,\\n  is_project boolean default false,\\n  tags text[] default array[]::text[],\\n  color text default 'blue',\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  completed_at timestamp with time zone null,\\n  order_index numeric default 0,\\n  \\n  constraint tasks_pkey primary key (id)\\n);\\n\\n-- Enable Row Level Security (RLS)\\nalter table public.tags enable row level security;\\nalter table public.tasks enable row level security;\\n\\n-- Create Policies for tags\\ncreate policy \\\"Users can view their own tags\\\" \\non public.tags for select \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can insert their own tags\\\" \\non public.tags for insert \\nwith check (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can update their own tags\\\" \\non public.tags for update \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can delete their own tags\\\" \\non public.tags for delete \\nusing (auth.uid() = user_id);\\n\\n-- Create Policies for tasks\\ncreate policy \\\"Users can view their own tasks\\\" \\non public.tasks for select \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can insert their own tasks\\\" \\non public.tasks for insert \\nwith check (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can update their own tasks\\\" \\non public.tasks for update \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can delete their own tasks\\\" \\non public.tasks for delete \\nusing (auth.uid() = user_id);\\n\\n-- Create Realtime publication (Optional, for live updates)\\nalter publication supabase_realtime add table public.tasks;\\nalter publication supabase_realtime add table public.tags;\\n\",\"originTextLength\":2304,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766405117543},{\"originRange\":{\"start\":{\"line\":31,\"character\":0},\"end\":{\"line\":31,\"character\":40}},\"modifyRange\":{\"start\":{\"line\":31,\"character\":0},\"end\":{\"line\":31,\"character\":40}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  images text[] default array[]::text[],\",\"originAcceptText\":\"  images text[] default array[]::text[],\",\"originTextLength\":40,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415507957},{\"originRange\":{\"start\":{\"line\":76,\"character\":0},\"end\":{\"line\":92,\"character\":70}},\"modifyRange\":{\"start\":{\"line\":76,\"character\":0},\"end\":{\"line\":92,\"character\":70}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\\\\n-- Storage setup for attachments\\\\ninsert into storage.buckets (id, name, public)\\\\nvalues (\\\\'attachments\\\\', \\\\'attachments\\\\', true)\\\\non conflict (id) do nothing;\\\\n\\\\ncreate policy \\\\\\\"Authenticated users can upload\\\\\\\"\\\\non storage.objects for insert\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Public Access\\\\\\\"\\\\non storage.objects for select\\\\nusing ( bucket_id = \\\\'attachments\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Authenticated users can update\\\\\\\"\\\\non storage.objects for update\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Authenticated users can delete\\\\\\\"\\\\non storage.objects for delete\\\\nusing ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\",\"originAcceptText\":\"\\n-- Storage setup for attachments\\ninsert into storage.buckets (id, name, public)\\nvalues ('attachments', 'attachments', true)\\non conflict (id) do nothing;\\n\\ncreate policy \\\"Authenticated users can upload\\\"\\non storage.objects for insert\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\\n\\ncreate policy \\\"Public Access\\\"\\non storage.objects for select\\nusing ( bucket_id = 'attachments' );\\n\\ncreate policy \\\"Authenticated users can update\\\"\\non storage.objects for update\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\\n\\ncreate policy \\\"Authenticated users can delete\\\"\\non storage.objects for delete\\nusing ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\",\"originTextLength\":708,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415507958}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase_schema_update.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":86,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":86,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Add columns to tags if they don\\\\'t exist\\\\ndo $$\\\\nbegin\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tags\\\\' and column_name = \\\\'user_id\\\\') then\\\\n    alter table public.tags add column user_id uuid not null default auth.uid();\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tags\\\\' and column_name = \\\\'name\\\\') then\\\\n    alter table public.tags add column name text;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tags\\\\' and column_name = \\\\'parent_id\\\\') then\\\\n    alter table public.tags add column parent_id uuid;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tags\\\\' and column_name = \\\\'color\\\\') then\\\\n    alter table public.tags add column color text;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tags\\\\' and column_name = \\\\'created_at\\\\') then\\\\n    alter table public.tags add column created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null;\\\\n  end if;\\\\nend $$;\\\\n\\\\n-- Add columns to tasks if they don\\\\'t exist\\\\ndo $$\\\\nbegin\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'user_id\\\\') then\\\\n    alter table public.tasks add column user_id uuid not null default auth.uid();\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'title\\\\') then\\\\n    alter table public.tasks add column title text;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'description\\\\') then\\\\n    alter table public.tasks add column description text;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'status\\\\') then\\\\n    alter table public.tasks add column status text default \\\\'inbox\\\\';\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'parent_id\\\\') then\\\\n    alter table public.tasks add column parent_id uuid;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'start_date\\\\') then\\\\n    alter table public.tasks add column start_date timestamp with time zone;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'due_date\\\\') then\\\\n    alter table public.tasks add column due_date timestamp with time zone;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'is_project\\\\') then\\\\n    alter table public.tasks add column is_project boolean default false;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'tags\\\\') then\\\\n    alter table public.tasks add column tags text[] default array[]::text[];\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'color\\\\') then\\\\n    alter table public.tasks add column color text default \\\\'blue\\\\';\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'created_at\\\\') then\\\\n    alter table public.tasks add column created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'completed_at\\\\') then\\\\n    alter table public.tasks add column completed_at timestamp with time zone;\\\\n  end if;\\\\n  if not exists (select 1 from information_schema.columns where table_name = \\\\'tasks\\\\' and column_name = \\\\'order_index\\\\') then\\\\n    alter table public.tasks add column order_index numeric default 0;\\\\n  end if;\\\\nend $$;\\\\n\\\\n-- Enable RLS\\\\nalter table public.tags enable row level security;\\\\nalter table public.tasks enable row level security;\\\\n\\\\n-- Re-create Policies (Drop first to avoid errors)\\\\ndrop policy if exists \\\\\\\"Users can view their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can view their own tags\\\\\\\" on public.tags for select using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can insert their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can insert their own tags\\\\\\\" on public.tags for insert with check (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can update their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can update their own tags\\\\\\\" on public.tags for update using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can delete their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can delete their own tags\\\\\\\" on public.tags for delete using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can view their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can view their own tasks\\\\\\\" on public.tasks for select using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can insert their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can insert their own tasks\\\\\\\" on public.tasks for insert with check (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can update their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can update their own tasks\\\\\\\" on public.tasks for update using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can delete their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can delete their own tasks\\\\\\\" on public.tasks for delete using (auth.uid() = user_id);\\\\n\\\\n-- Enable Realtime publication (Try catch block not standard in SQL, running command directly)\\\\n-- If this fails, it usually means the table is already in the publication, which is fine.\\\\nalter publication supabase_realtime add table public.tasks;\\\\nalter publication supabase_realtime add table public.tags;\\\\n\",\"originAcceptText\":\"-- Add columns to tags if they don't exist\\ndo $$\\nbegin\\n  if not exists (select 1 from information_schema.columns where table_name = 'tags' and column_name = 'user_id') then\\n    alter table public.tags add column user_id uuid not null default auth.uid();\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tags' and column_name = 'name') then\\n    alter table public.tags add column name text;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tags' and column_name = 'parent_id') then\\n    alter table public.tags add column parent_id uuid;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tags' and column_name = 'color') then\\n    alter table public.tags add column color text;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tags' and column_name = 'created_at') then\\n    alter table public.tags add column created_at timestamp with time zone default timezone('utc'::text, now()) not null;\\n  end if;\\nend $$;\\n\\n-- Add columns to tasks if they don't exist\\ndo $$\\nbegin\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'user_id') then\\n    alter table public.tasks add column user_id uuid not null default auth.uid();\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'title') then\\n    alter table public.tasks add column title text;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'description') then\\n    alter table public.tasks add column description text;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'status') then\\n    alter table public.tasks add column status text default 'inbox';\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'parent_id') then\\n    alter table public.tasks add column parent_id uuid;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'start_date') then\\n    alter table public.tasks add column start_date timestamp with time zone;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'due_date') then\\n    alter table public.tasks add column due_date timestamp with time zone;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'is_project') then\\n    alter table public.tasks add column is_project boolean default false;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'tags') then\\n    alter table public.tasks add column tags text[] default array[]::text[];\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'color') then\\n    alter table public.tasks add column color text default 'blue';\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'created_at') then\\n    alter table public.tasks add column created_at timestamp with time zone default timezone('utc'::text, now()) not null;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'completed_at') then\\n    alter table public.tasks add column completed_at timestamp with time zone;\\n  end if;\\n  if not exists (select 1 from information_schema.columns where table_name = 'tasks' and column_name = 'order_index') then\\n    alter table public.tasks add column order_index numeric default 0;\\n  end if;\\nend $$;\\n\\n-- Enable RLS\\nalter table public.tags enable row level security;\\nalter table public.tasks enable row level security;\\n\\n-- Re-create Policies (Drop first to avoid errors)\\ndrop policy if exists \\\"Users can view their own tags\\\" on public.tags;\\ncreate policy \\\"Users can view their own tags\\\" on public.tags for select using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can insert their own tags\\\" on public.tags;\\ncreate policy \\\"Users can insert their own tags\\\" on public.tags for insert with check (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can update their own tags\\\" on public.tags;\\ncreate policy \\\"Users can update their own tags\\\" on public.tags for update using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can delete their own tags\\\" on public.tags;\\ncreate policy \\\"Users can delete their own tags\\\" on public.tags for delete using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can view their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can view their own tasks\\\" on public.tasks for select using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can insert their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can insert their own tasks\\\" on public.tasks for insert with check (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can update their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can update their own tasks\\\" on public.tasks for update using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can delete their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can delete their own tasks\\\" on public.tasks for delete using (auth.uid() = user_id);\\n\\n-- Enable Realtime publication (Try catch block not standard in SQL, running command directly)\\n-- If this fails, it usually means the table is already in the publication, which is fine.\\nalter publication supabase_realtime add table public.tasks;\\nalter publication supabase_realtime add table public.tags;\\n\",\"originTextLength\":5690,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766405117544},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":9,\"character\":2}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":9,\"character\":2}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Add journals table\\\\ncreate table public.journals (\\\\n  id uuid not null default uuid_generate_v4(),\\\\n  user_id uuid not null default auth.uid(),\\\\n  date date not null,\\\\n  content text default \\\\'\\\\',\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  \\\\n  constraint journals_pkey primary key (id)\\\\n);\",\"originAcceptText\":\"-- Add journals table\\ncreate table public.journals (\\n  id uuid not null default uuid_generate_v4(),\\n  user_id uuid not null default auth.uid(),\\n  date date not null,\\n  content text default '',\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  \\n  constraint journals_pkey primary key (id)\\n);\",\"originTextLength\":327,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394402},{\"originRange\":{\"start\":{\"line\":64,\"character\":0},\"end\":{\"line\":65,\"character\":54}},\"modifyRange\":{\"start\":{\"line\":64,\"character\":0},\"end\":{\"line\":65,\"character\":54}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- RLS for journals\\\\nalter table public.journals enable row level security;\",\"originAcceptText\":\"-- RLS for journals\\nalter table public.journals enable row level security;\",\"originTextLength\":74,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394405},{\"originRange\":{\"start\":{\"line\":68,\"character\":0},\"end\":{\"line\":70,\"character\":29}},\"modifyRange\":{\"start\":{\"line\":68,\"character\":0},\"end\":{\"line\":70,\"character\":29}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Users can view their own journals\\\\\\\" \\\\non public.journals for select \\\\nusing (auth.uid() = user_id);\",\"originAcceptText\":\"create policy \\\"Users can view their own journals\\\" \\non public.journals for select \\nusing (auth.uid() = user_id);\",\"originTextLength\":111,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394407},{\"originRange\":{\"start\":{\"line\":72,\"character\":0},\"end\":{\"line\":74,\"character\":34}},\"modifyRange\":{\"start\":{\"line\":72,\"character\":0},\"end\":{\"line\":74,\"character\":34}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Users can insert their own journals\\\\\\\" \\\\non public.journals for insert \\\\nwith check (auth.uid() = user_id);\",\"originAcceptText\":\"create policy \\\"Users can insert their own journals\\\" \\non public.journals for insert \\nwith check (auth.uid() = user_id);\",\"originTextLength\":118,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394416},{\"originRange\":{\"start\":{\"line\":75,\"character\":0},\"end\":{\"line\":77,\"character\":29}},\"modifyRange\":{\"start\":{\"line\":75,\"character\":0},\"end\":{\"line\":77,\"character\":29}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Users can update their own journals\\\\\\\" \\\\non public.journals for update \\\\nusing (auth.uid() = user_id);\",\"originAcceptText\":\"create policy \\\"Users can update their own journals\\\" \\non public.journals for update \\nusing (auth.uid() = user_id);\",\"originTextLength\":113,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394418},{\"originRange\":{\"start\":{\"line\":84,\"character\":0},\"end\":{\"line\":86,\"character\":29}},\"modifyRange\":{\"start\":{\"line\":84,\"character\":0},\"end\":{\"line\":86,\"character\":29}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Users can delete their own journals\\\\\\\" \\\\non public.journals for delete \\\\nusing (auth.uid() = user_id);\",\"originAcceptText\":\"create policy \\\"Users can delete their own journals\\\" \\non public.journals for delete \\nusing (auth.uid() = user_id);\",\"originTextLength\":113,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394427},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":5,\"character\":28}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":5,\"character\":28}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Add images column to tasks table\\\\nalter table public.tasks add column if not exists images text[] default array[]::text[];\\\\n\\\\n-- Create storage bucket for task attachments\\\\ninsert into storage.buckets (id, name, public)\\\\nvalues (\\\\'attachments\\\\', \\\\'attachments\\\\', true)\\\\non conflict (id) do nothing;\",\"originAcceptText\":\"-- Add images column to tasks table\\nalter table public.tasks add column if not exists images text[] default array[]::text[];\\n\\n-- Create storage bucket for task attachments\\ninsert into storage.buckets (id, name, public)\\nvalues ('attachments', 'attachments', true)\\non conflict (id) do nothing;\",\"originTextLength\":291,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415294515},{\"originRange\":{\"start\":{\"line\":11,\"character\":0},\"end\":{\"line\":14,\"character\":36}},\"modifyRange\":{\"start\":{\"line\":11,\"character\":0},\"end\":{\"line\":14,\"character\":36}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Set up storage policy to allow public access (simplified for demo)\\\\ncreate policy \\\\\\\"Public Access\\\\\\\"\\\\non storage.objects for select\\\\nusing ( bucket_id = \\\\'attachments\\\\' );\",\"originAcceptText\":\"-- Set up storage policy to allow public access (simplified for demo)\\ncreate policy \\\"Public Access\\\"\\non storage.objects for select\\nusing ( bucket_id = 'attachments' );\",\"originTextLength\":166,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415294519},{\"originRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":75}},\"modifyRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":75}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Authenticated users can upload\\\\\\\"\\\\non storage.objects for insert\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\",\"originAcceptText\":\"create policy \\\"Authenticated users can upload\\\"\\non storage.objects for insert\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\",\"originTextLength\":152,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415294522},{\"originRange\":{\"start\":{\"line\":22,\"character\":0},\"end\":{\"line\":24,\"character\":75}},\"modifyRange\":{\"start\":{\"line\":22,\"character\":0},\"end\":{\"line\":24,\"character\":75}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Authenticated users can update\\\\\\\"\\\\non storage.objects for update\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\",\"originAcceptText\":\"create policy \\\"Authenticated users can update\\\"\\non storage.objects for update\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\",\"originTextLength\":152,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415294524},{\"originRange\":{\"start\":{\"line\":26,\"character\":0},\"end\":{\"line\":28,\"character\":70}},\"modifyRange\":{\"start\":{\"line\":26,\"character\":0},\"end\":{\"line\":28,\"character\":70}},\"action\":\"None\",\"isLine\":false,\"originText\":\"create policy \\\\\\\"Authenticated users can delete\\\\\\\"\\\\non storage.objects for delete\\\\nusing ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\",\"originAcceptText\":\"create policy \\\"Authenticated users can delete\\\"\\non storage.objects for delete\\nusing ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\",\"originTextLength\":147,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415294528}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase_schema_simple.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":52,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":52,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- 1. Enable UUID extension\\\\ncreate extension if not exists \\\\\\\"uuid-ossp\\\\\\\";\\\\n\\\\n-- 2. Ensure Tables Exist\\\\ncreate table if not exists public.tags (\\\\n  id uuid not null default uuid_generate_v4() primary key\\\\n);\\\\n\\\\ncreate table if not exists public.tasks (\\\\n  id uuid not null default uuid_generate_v4() primary key\\\\n);\\\\n\\\\n-- 3. Add Columns to \\\\'tags\\\\' (Safe to run multiple times)\\\\nalter table public.tags add column if not exists user_id uuid not null default auth.uid();\\\\nalter table public.tags add column if not exists name text;\\\\nalter table public.tags add column if not exists parent_id uuid;\\\\nalter table public.tags add column if not exists color text;\\\\nalter table public.tags add column if not exists created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null;\\\\n\\\\n-- 4. Add Columns to \\\\'tasks\\\\' (Safe to run multiple times)\\\\nalter table public.tasks add column if not exists user_id uuid not null default auth.uid();\\\\nalter table public.tasks add column if not exists title text;\\\\nalter table public.tasks add column if not exists description text;\\\\nalter table public.tasks add column if not exists status text default \\\\'inbox\\\\';\\\\nalter table public.tasks add column if not exists parent_id uuid;\\\\nalter table public.tasks add column if not exists start_date timestamp with time zone;\\\\nalter table public.tasks add column if not exists due_date timestamp with time zone;\\\\nalter table public.tasks add column if not exists is_project boolean default false;\\\\nalter table public.tasks add column if not exists tags text[] default array[]::text[];\\\\nalter table public.tasks add column if not exists color text default \\\\'blue\\\\';\\\\nalter table public.tasks add column if not exists created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null;\\\\nalter table public.tasks add column if not exists completed_at timestamp with time zone;\\\\nalter table public.tasks add column if not exists order_index numeric default 0;\\\\n\\\\n-- 5. Enable RLS\\\\nalter table public.tags enable row level security;\\\\nalter table public.tasks enable row level security;\\\\n\\\\n-- 6. Policies (Drop and Recreate to ensure correctness)\\\\ndrop policy if exists \\\\\\\"Users can view their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can view their own tags\\\\\\\" on public.tags for select using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can insert their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can insert their own tags\\\\\\\" on public.tags for insert with check (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can update their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can update their own tags\\\\\\\" on public.tags for update using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can delete their own tags\\\\\\\" on public.tags;\\\\ncreate policy \\\\\\\"Users can delete their own tags\\\\\\\" on public.tags for delete using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can view their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can view their own tasks\\\\\\\" on public.tasks for select using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can insert their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can insert their own tasks\\\\\\\" on public.tasks for insert with check (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can update their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can update their own tasks\\\\\\\" on public.tasks for update using (auth.uid() = user_id);\\\\n\\\\ndrop policy if exists \\\\\\\"Users can delete their own tasks\\\\\\\" on public.tasks;\\\\ncreate policy \\\\\\\"Users can delete their own tasks\\\\\\\" on public.tasks for delete using (auth.uid() = user_id);\\\\n\\\\n-- 7. Realtime\\\\nalter publication supabase_realtime add table public.tasks;\\\\nalter publication supabase_realtime add table public.tags;\\\\n\",\"originAcceptText\":\"-- 1. Enable UUID extension\\ncreate extension if not exists \\\"uuid-ossp\\\";\\n\\n-- 2. Ensure Tables Exist\\ncreate table if not exists public.tags (\\n  id uuid not null default uuid_generate_v4() primary key\\n);\\n\\ncreate table if not exists public.tasks (\\n  id uuid not null default uuid_generate_v4() primary key\\n);\\n\\n-- 3. Add Columns to 'tags' (Safe to run multiple times)\\nalter table public.tags add column if not exists user_id uuid not null default auth.uid();\\nalter table public.tags add column if not exists name text;\\nalter table public.tags add column if not exists parent_id uuid;\\nalter table public.tags add column if not exists color text;\\nalter table public.tags add column if not exists created_at timestamp with time zone default timezone('utc'::text, now()) not null;\\n\\n-- 4. Add Columns to 'tasks' (Safe to run multiple times)\\nalter table public.tasks add column if not exists user_id uuid not null default auth.uid();\\nalter table public.tasks add column if not exists title text;\\nalter table public.tasks add column if not exists description text;\\nalter table public.tasks add column if not exists status text default 'inbox';\\nalter table public.tasks add column if not exists parent_id uuid;\\nalter table public.tasks add column if not exists start_date timestamp with time zone;\\nalter table public.tasks add column if not exists due_date timestamp with time zone;\\nalter table public.tasks add column if not exists is_project boolean default false;\\nalter table public.tasks add column if not exists tags text[] default array[]::text[];\\nalter table public.tasks add column if not exists color text default 'blue';\\nalter table public.tasks add column if not exists created_at timestamp with time zone default timezone('utc'::text, now()) not null;\\nalter table public.tasks add column if not exists completed_at timestamp with time zone;\\nalter table public.tasks add column if not exists order_index numeric default 0;\\n\\n-- 5. Enable RLS\\nalter table public.tags enable row level security;\\nalter table public.tasks enable row level security;\\n\\n-- 6. Policies (Drop and Recreate to ensure correctness)\\ndrop policy if exists \\\"Users can view their own tags\\\" on public.tags;\\ncreate policy \\\"Users can view their own tags\\\" on public.tags for select using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can insert their own tags\\\" on public.tags;\\ncreate policy \\\"Users can insert their own tags\\\" on public.tags for insert with check (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can update their own tags\\\" on public.tags;\\ncreate policy \\\"Users can update their own tags\\\" on public.tags for update using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can delete their own tags\\\" on public.tags;\\ncreate policy \\\"Users can delete their own tags\\\" on public.tags for delete using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can view their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can view their own tasks\\\" on public.tasks for select using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can insert their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can insert their own tasks\\\" on public.tasks for insert with check (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can update their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can update their own tasks\\\" on public.tasks for update using (auth.uid() = user_id);\\n\\ndrop policy if exists \\\"Users can delete their own tasks\\\" on public.tasks;\\ncreate policy \\\"Users can delete their own tasks\\\" on public.tasks for delete using (auth.uid() = user_id);\\n\\n-- 7. Realtime\\nalter publication supabase_realtime add table public.tasks;\\nalter publication supabase_realtime add table public.tags;\\n\",\"originTextLength\":3668,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766405219547}]",
  "range-cache-file:///Users/leegary/ai_completion/package.json": "[{\"originRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":10,\"character\":4}},\"modifyRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":10,\"character\":4}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  \\\\\\\"name\\\\\\\": \\\\\\\"things4-clone\\\\\\\",\\\\n  \\\\\\\"private\\\\\\\": true,\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"0.0.0\\\\\\\",\\\\n  \\\\\\\"type\\\\\\\": \\\\\\\"module\\\\\\\",\\\\n  \\\\\\\"scripts\\\\\\\": {\\\\n    \\\\\\\"dev\\\\\\\": \\\\\\\"vite\\\\\\\",\\\\n    \\\\\\\"build\\\\\\\": \\\\\\\"tsc && vite build\\\\\\\",\\\\n    \\\\\\\"lint\\\\\\\": \\\\\\\"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\\\\\\\",\\\\n    \\\\\\\"preview\\\\\\\": \\\\\\\"vite preview\\\\\\\"\\\\n  },\",\"originAcceptText\":\"  \\\"name\\\": \\\"things4-clone\\\",\\n  \\\"private\\\": true,\\n  \\\"version\\\": \\\"0.0.0\\\",\\n  \\\"type\\\": \\\"module\\\",\\n  \\\"scripts\\\": {\\n    \\\"dev\\\": \\\"vite\\\",\\n    \\\"build\\\": \\\"tsc && vite build\\\",\\n    \\\"lint\\\": \\\"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0\\\",\\n    \\\"preview\\\": \\\"vite preview\\\"\\n  },\",\"originTextLength\":279,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406169638},{\"originRange\":{\"start\":{\"line\":10,\"character\":0},\"end\":{\"line\":13,\"character\":44}},\"modifyRange\":{\"start\":{\"line\":10,\"character\":0},\"end\":{\"line\":13,\"character\":44}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    \\\\\\\"@vitejs/plugin-react\\\\\\\": \\\\\\\"^4.0.3\\\\\\\",\\\\n    \\\\\\\"eslint\\\\\\\": \\\\\\\"^8.45.0\\\\\\\",\\\\n    \\\\\\\"eslint-plugin-react-hooks\\\\\\\": \\\\\\\"^4.6.0\\\\\\\",\\\\n    \\\\\\\"eslint-plugin-react-refresh\\\\\\\": \\\\\\\"^0.4.3\\\\\\\",\",\"originAcceptText\":\"    \\\"@vitejs/plugin-react\\\": \\\"^4.0.3\\\",\\n    \\\"eslint\\\": \\\"^8.45.0\\\",\\n    \\\"eslint-plugin-react-hooks\\\": \\\"^4.6.0\\\",\\n    \\\"eslint-plugin-react-refresh\\\": \\\"^0.4.3\\\",\",\"originTextLength\":150,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406169640}]",
  "range-cache-file:///Users/leegary/ai_completion/test_supabase.js": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":39,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":39,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\\\\nimport { createClient } from \\\\'@supabase/supabase-js\\\\'\\\\n\\\\nconst supabaseUrl = \\\\'https://acrkclmderqewcwugsnl.supabase.co\\\\'\\\\nconst supabaseKey = \\\\'sb_publishable_3Fod_bgE3WDwePE_lbDCxA_KTapidKH\\\\'\\\\n\\\\nconst supabase = createClient(supabaseUrl, supabaseKey)\\\\n\\\\nasync function testConnection() {\\\\n  console.log(\\\\'Testing connection...\\\\')\\\\n  \\\\n  // 1. Try to select\\\\n  console.log(\\\\'1. Selecting from tasks...\\\\')\\\\n  const { data: selectData, error: selectError } = await supabase\\\\n    .from(\\\\'tasks\\\\')\\\\n    .select(\\\\'count\\\\')\\\\n    .limit(1)\\\\n\\\\n  if (selectError) {\\\\n    console.error(\\\\'Select Error:\\\\', selectError)\\\\n  } else {\\\\n    console.log(\\\\'Select Success:\\\\', selectData)\\\\n  }\\\\n\\\\n  // 2. Try to insert\\\\n  console.log(\\\\'2. Inserting test task...\\\\')\\\\n  const testTask = {\\\\n    title: \\\\'Test Task from Script\\\\',\\\\n    status: \\\\'inbox\\\\',\\\\n    is_project: false,\\\\n    order_index: 0,\\\\n    created_at: new Date().toISOString()\\\\n  }\\\\n\\\\n  const { data: insertData, error: insertError } = await supabase\\\\n    .from(\\\\'tasks\\\\')\\\\n    .insert([testTask])\\\\n    .select()\\\\n\\\\n  if (insertError) {\\\\n    console.error(\\\\'Insert Error:\\\\', insertError)\\\\n  } else {\\\\n    console.log(\\\\'Insert Success:\\\\', insertData)\\\\n  }\\\\n}\\\\n\\\\ntestConnection()\\\\n\",\"originAcceptText\":\"\\nimport { createClient } from '@supabase/supabase-js'\\n\\nconst supabaseUrl = 'https://acrkclmderqewcwugsnl.supabase.co'\\nconst supabaseKey = 'sb_publishable_3Fod_bgE3WDwePE_lbDCxA_KTapidKH'\\n\\nconst supabase = createClient(supabaseUrl, supabaseKey)\\n\\nasync function testConnection() {\\n  console.log('Testing connection...')\\n  \\n  // 1. Try to select\\n  console.log('1. Selecting from tasks...')\\n  const { data: selectData, error: selectError } = await supabase\\n    .from('tasks')\\n    .select('count')\\n    .limit(1)\\n\\n  if (selectError) {\\n    console.error('Select Error:', selectError)\\n  } else {\\n    console.log('Select Success:', selectData)\\n  }\\n\\n  // 2. Try to insert\\n  console.log('2. Inserting test task...')\\n  const testTask = {\\n    title: 'Test Task from Script',\\n    status: 'inbox',\\n    is_project: false,\\n    order_index: 0,\\n    created_at: new Date().toISOString()\\n  }\\n\\n  const { data: insertData, error: insertError } = await supabase\\n    .from('tasks')\\n    .insert([testTask])\\n    .select()\\n\\n  if (insertError) {\\n    console.error('Insert Error:', insertError)\\n  } else {\\n    console.log('Insert Success:', insertData)\\n  }\\n}\\n\\ntestConnection()\\n\",\"originTextLength\":1147,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406447211}]",
  "range-cache-file:///Users/leegary/ai_completion/test_supabase_v2.js": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":29,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":29,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\\\\nimport { createClient } from \\\\'@supabase/supabase-js\\\\'\\\\n\\\\nconst supabaseUrl = \\\\'https://acrkclmderqewcwugsnl.supabase.co\\\\'\\\\nconst supabaseKey = \\\\'sb_publishable_3Fod_bgE3WDwePE_lbDCxA_KTapidKH\\\\'\\\\n\\\\nconst supabase = createClient(supabaseUrl, supabaseKey)\\\\n\\\\nasync function testConnection() {\\\\n  console.log(\\\\'Testing connection...\\\\')\\\\n  \\\\n  // 1. Try to insert with explicit user_id\\\\n  console.log(\\\\'1. Inserting test task with UUID...\\\\')\\\\n  const testTask = {\\\\n    title: \\\\'Test Task with UUID\\\\',\\\\n    status: \\\\'inbox\\\\',\\\\n    is_project: false,\\\\n    order_index: 0,\\\\n    created_at: new Date().toISOString(),\\\\n    user_id: \\\\'00000000-0000-0000-0000-000000000000\\\\' \\\\n  }\\\\n\\\\n  const { data: insertData, error: insertError } = await supabase\\\\n    .from(\\\\'tasks\\\\')\\\\n    .insert([testTask])\\\\n    .select()\\\\n\\\\n  if (insertError) {\\\\n    console.error(\\\\'Insert Error:\\\\', insertError)\\\\n  } else {\\\\n    console.log(\\\\'Insert Success:\\\\', insertData)\\\\n  }\\\\n}\\\\n\\\\ntestConnection()\\\\n\",\"originAcceptText\":\"\\nimport { createClient } from '@supabase/supabase-js'\\n\\nconst supabaseUrl = 'https://acrkclmderqewcwugsnl.supabase.co'\\nconst supabaseKey = 'sb_publishable_3Fod_bgE3WDwePE_lbDCxA_KTapidKH'\\n\\nconst supabase = createClient(supabaseUrl, supabaseKey)\\n\\nasync function testConnection() {\\n  console.log('Testing connection...')\\n  \\n  // 1. Try to insert with explicit user_id\\n  console.log('1. Inserting test task with UUID...')\\n  const testTask = {\\n    title: 'Test Task with UUID',\\n    status: 'inbox',\\n    is_project: false,\\n    order_index: 0,\\n    created_at: new Date().toISOString(),\\n    user_id: '00000000-0000-0000-0000-000000000000' \\n  }\\n\\n  const { data: insertData, error: insertError } = await supabase\\n    .from('tasks')\\n    .insert([testTask])\\n    .select()\\n\\n  if (insertError) {\\n    console.error('Insert Error:', insertError)\\n  } else {\\n    console.log('Insert Success:', insertData)\\n  }\\n}\\n\\ntestConnection()\\n\",\"originTextLength\":912,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766406467962}]",
  "range-cache-file:///Users/leegary/ai_completion/src/main.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766408631903}]",
  "range-cache-file:///Users/leegary/ai_completion/src/constants/index.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":11,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":11,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { TaskColor } from \\\\'../types\\\\';\\\\n\\\\nexport const APP_VERSION = \\\\\\\"v1.5.0 (Modular Refactor)\\\\\\\";\\\\nexport const INDENT_SIZE = 28;\\\\n\\\\nexport const DRAG_GHOST_IMG = new Image();\\\\nDRAG_GHOST_IMG.src = \\\\'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\\\';\\\\n\\\\nexport const COLOR_THEMES: Record<TaskColor, any> = {\\\\n  blue:   { text: \\\\'text-slate-700\\\\', accent: \\\\'text-blue-600\\\\',  bg: \\\\'hover:bg-slate-50\\\\', border: \\\\'border-blue-500\\\\',  ring: \\\\'focus-within:ring-blue-200\\\\', buttonRing: \\\\'focus:ring-blue-200 focus:border-blue-300\\\\', dot: \\\\'bg-blue-400\\\\', badge: \\\\'bg-blue-50 text-blue-700 border-blue-100\\\\', breadcrumb: \\\\'bg-blue-50 text-blue-600 hover:bg-blue-100\\\\', indicator: \\\\'bg-blue-500\\\\', ringColor: \\\\'ring-blue-400\\\\' },\\\\n  green:  { text: \\\\'text-slate-700\\\\', accent: \\\\'text-emerald-600\\\\', bg: \\\\'hover:bg-slate-50\\\\', border: \\\\'border-emerald-500\\\\', ring: \\\\'focus-within:ring-emerald-200\\\\', buttonRing: \\\\'focus:ring-emerald-200 focus:border-emerald-300\\\\', dot: \\\\'bg-emerald-400\\\\', badge: \\\\'bg-emerald-50 text-emerald-700 border-emerald-100\\\\', breadcrumb: \\\\'bg-emerald-50 text-emerald-600 hover:bg-emerald-100\\\\', indicator: \\\\'bg-emerald-500\\\\', ringColor: \\\\'ring-emerald-400\\\\' },\\\\n  amber:  { text: \\\\'text-slate-700\\\\', accent: \\\\'text-amber-600\\\\',  bg: \\\\'hover:bg-slate-50\\\\', border: \\\\'border-amber-500\\\\',  ring: \\\\'focus-within:ring-amber-200\\\\',  buttonRing: \\\\'focus:ring-amber-200 focus:border-amber-300\\\\', dot: \\\\'bg-amber-400\\\\', badge: \\\\'bg-amber-50 text-amber-700 border-amber-100\\\\', breadcrumb: \\\\'bg-amber-50 text-amber-600 hover:bg-amber-100\\\\', indicator: \\\\'bg-amber-500\\\\', ringColor: \\\\'ring-amber-400\\\\' },\\\\n  purple: { text: \\\\'text-slate-700\\\\', accent: \\\\'text-purple-600\\\\', bg: \\\\'hover:bg-slate-50\\\\', border: \\\\'border-purple-500\\\\', ring: \\\\'focus-within:ring-purple-200\\\\', focusBorder: \\\\'border-l-purple-400\\\\', buttonRing: \\\\'focus:ring-purple-200 focus:border-purple-300\\\\', dot: \\\\'bg-purple-400\\\\', badge: \\\\'bg-purple-50 text-purple-700 border-purple-100\\\\', breadcrumb: \\\\'bg-purple-50 text-purple-600 hover:bg-purple-100\\\\', indicator: \\\\'bg-purple-500\\\\', ringColor: \\\\'ring-purple-400\\\\' },\\\\n};\\\\n\",\"originAcceptText\":\"import { TaskColor } from '../types';\\n\\nexport const APP_VERSION = \\\"v1.5.0 (Modular Refactor)\\\";\\nexport const INDENT_SIZE = 28;\\n\\nexport const DRAG_GHOST_IMG = new Image();\\nDRAG_GHOST_IMG.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\\n\\nexport const COLOR_THEMES: Record<TaskColor, any> = {\\n  blue:   { text: 'text-slate-700', accent: 'text-blue-600',  bg: 'hover:bg-slate-50', border: 'border-blue-500',  ring: 'focus-within:ring-blue-200', buttonRing: 'focus:ring-blue-200 focus:border-blue-300', dot: 'bg-blue-400', badge: 'bg-blue-50 text-blue-700 border-blue-100', breadcrumb: 'bg-blue-50 text-blue-600 hover:bg-blue-100', indicator: 'bg-blue-500', ringColor: 'ring-blue-400' },\\n  green:  { text: 'text-slate-700', accent: 'text-emerald-600', bg: 'hover:bg-slate-50', border: 'border-emerald-500', ring: 'focus-within:ring-emerald-200', buttonRing: 'focus:ring-emerald-200 focus:border-emerald-300', dot: 'bg-emerald-400', badge: 'bg-emerald-50 text-emerald-700 border-emerald-100', breadcrumb: 'bg-emerald-50 text-emerald-600 hover:bg-emerald-100', indicator: 'bg-emerald-500', ringColor: 'ring-emerald-400' },\\n  amber:  { text: 'text-slate-700', accent: 'text-amber-600',  bg: 'hover:bg-slate-50', border: 'border-amber-500',  ring: 'focus-within:ring-amber-200',  buttonRing: 'focus:ring-amber-200 focus:border-amber-300', dot: 'bg-amber-400', badge: 'bg-amber-50 text-amber-700 border-amber-100', breadcrumb: 'bg-amber-50 text-amber-600 hover:bg-amber-100', indicator: 'bg-amber-500', ringColor: 'ring-amber-400' },\\n  purple: { text: 'text-slate-700', accent: 'text-purple-600', bg: 'hover:bg-slate-50', border: 'border-purple-500', ring: 'focus-within:ring-purple-200', focusBorder: 'border-l-purple-400', buttonRing: 'focus:ring-purple-200 focus:border-purple-300', dot: 'bg-purple-400', badge: 'bg-purple-50 text-purple-700 border-purple-100', breadcrumb: 'bg-purple-50 text-purple-600 hover:bg-purple-100', indicator: 'bg-purple-500', ringColor: 'ring-purple-400' },\\n};\\n\",\"originTextLength\":2020,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411792468},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":22,\"character\":374}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":22,\"character\":374}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const COLOR_THEMES: Record<string, any> = {\\\\n  gray: { color: \\\\'#6b7280\\\\', bg: \\\\'bg-gray-50\\\\', text: \\\\'text-gray-600\\\\', badge: \\\\'bg-gray-100 text-gray-600 border-gray-200\\\\', border: \\\\'border-gray-300\\\\', ring: \\\\'focus-within:ring-gray-200\\\\', buttonRing: \\\\'focus:ring-gray-200 focus:border-gray-300\\\\', dot: \\\\'bg-gray-400\\\\', breadcrumb: \\\\'bg-gray-50 text-gray-600 hover:bg-gray-100\\\\', indicator: \\\\'bg-gray-500\\\\', ringColor: \\\\'ring-gray-400\\\\' },\\\\n  blue: { color: \\\\'#3b82f6\\\\', bg: \\\\'bg-blue-50\\\\', text: \\\\'text-blue-600\\\\', badge: \\\\'bg-blue-100 text-blue-600 border-blue-200\\\\', border: \\\\'border-blue-500\\\\', ring: \\\\'focus-within:ring-blue-200\\\\', buttonRing: \\\\'focus:ring-blue-200 focus:border-blue-300\\\\', dot: \\\\'bg-blue-400\\\\', breadcrumb: \\\\'bg-blue-50 text-blue-600 hover:bg-blue-100\\\\', indicator: \\\\'bg-blue-500\\\\', ringColor: \\\\'ring-blue-400\\\\' },\\\\n  indigo: { color: \\\\'#6366f1\\\\', bg: \\\\'bg-indigo-50\\\\', text: \\\\'text-indigo-600\\\\', badge: \\\\'bg-indigo-100 text-indigo-600 border-indigo-200\\\\', border: \\\\'border-indigo-500\\\\', ring: \\\\'focus-within:ring-indigo-200\\\\', buttonRing: \\\\'focus:ring-indigo-200 focus:border-indigo-300\\\\', dot: \\\\'bg-indigo-400\\\\', breadcrumb: \\\\'bg-indigo-50 text-indigo-600 hover:bg-indigo-100\\\\', indicator: \\\\'bg-indigo-500\\\\', ringColor: \\\\'ring-indigo-400\\\\' },\\\\n  red: { color: \\\\'#ef4444\\\\', bg: \\\\'bg-red-50\\\\', text: \\\\'text-red-600\\\\', badge: \\\\'bg-red-100 text-red-600 border-red-200\\\\', border: \\\\'border-red-500\\\\', ring: \\\\'focus-within:ring-red-200\\\\', buttonRing: \\\\'focus:ring-red-200 focus:border-red-300\\\\', dot: \\\\'bg-red-400\\\\', breadcrumb: \\\\'bg-red-50 text-red-600 hover:bg-red-100\\\\', indicator: \\\\'bg-red-500\\\\', ringColor: \\\\'ring-red-400\\\\' },\\\\n  orange: { color: \\\\'#f97316\\\\', bg: \\\\'bg-orange-50\\\\', text: \\\\'text-orange-600\\\\', badge: \\\\'bg-orange-100 text-orange-600 border-orange-200\\\\', border: \\\\'border-orange-500\\\\', ring: \\\\'focus-within:ring-orange-200\\\\', buttonRing: \\\\'focus:ring-orange-200 focus:border-orange-300\\\\', dot: \\\\'bg-orange-400\\\\', breadcrumb: \\\\'bg-orange-50 text-orange-600 hover:bg-orange-100\\\\', indicator: \\\\'bg-orange-500\\\\', ringColor: \\\\'ring-orange-400\\\\' },\\\\n  amber: { color: \\\\'#f59e0b\\\\', bg: \\\\'bg-amber-50\\\\', text: \\\\'text-amber-600\\\\', badge: \\\\'bg-amber-100 text-amber-600 border-amber-200\\\\', border: \\\\'border-amber-500\\\\', ring: \\\\'focus-within:ring-amber-200\\\\', buttonRing: \\\\'focus:ring-amber-200 focus:border-amber-300\\\\', dot: \\\\'bg-amber-400\\\\', breadcrumb: \\\\'bg-amber-50 text-amber-600 hover:bg-amber-100\\\\', indicator: \\\\'bg-amber-500\\\\', ringColor: \\\\'ring-amber-400\\\\' },\\\\n  green: { color: \\\\'#10b981\\\\', bg: \\\\'bg-green-50\\\\', text: \\\\'text-green-600\\\\', badge: \\\\'bg-green-100 text-green-600 border-green-200\\\\', border: \\\\'border-green-500\\\\', ring: \\\\'focus-within:ring-green-200\\\\', buttonRing: \\\\'focus:ring-green-200 focus:border-green-300\\\\', dot: \\\\'bg-green-400\\\\', breadcrumb: \\\\'bg-green-50 text-green-600 hover:bg-green-100\\\\', indicator: \\\\'bg-green-500\\\\', ringColor: \\\\'ring-green-400\\\\' },\\\\n  teal: { color: \\\\'#14b8a6\\\\', bg: \\\\'bg-teal-50\\\\', text: \\\\'text-teal-600\\\\', badge: \\\\'bg-teal-100 text-teal-600 border-teal-200\\\\', border: \\\\'border-teal-500\\\\', ring: \\\\'focus-within:ring-teal-200\\\\', buttonRing: \\\\'focus:ring-teal-200 focus:border-teal-300\\\\', dot: \\\\'bg-teal-400\\\\', breadcrumb: \\\\'bg-teal-50 text-teal-600 hover:bg-teal-100\\\\', indicator: \\\\'bg-teal-500\\\\', ringColor: \\\\'ring-teal-400\\\\' },\\\\n  cyan: { color: \\\\'#06b6d4\\\\', bg: \\\\'bg-cyan-50\\\\', text: \\\\'text-cyan-600\\\\', badge: \\\\'bg-cyan-100 text-cyan-600 border-cyan-200\\\\', border: \\\\'border-cyan-500\\\\', ring: \\\\'focus-within:ring-cyan-200\\\\', buttonRing: \\\\'focus:ring-cyan-200 focus:border-cyan-300\\\\', dot: \\\\'bg-cyan-400\\\\', breadcrumb: \\\\'bg-cyan-50 text-cyan-600 hover:bg-cyan-100\\\\', indicator: \\\\'bg-cyan-500\\\\', ringColor: \\\\'ring-cyan-400\\\\' },\\\\n  sky: { color: \\\\'#0ea5e9\\\\', bg: \\\\'bg-sky-50\\\\', text: \\\\'text-sky-600\\\\', badge: \\\\'bg-sky-100 text-sky-600 border-sky-200\\\\', border: \\\\'border-sky-500\\\\', ring: \\\\'focus-within:ring-sky-200\\\\', buttonRing: \\\\'focus:ring-sky-200 focus:border-sky-300\\\\', dot: \\\\'bg-sky-400\\\\', breadcrumb: \\\\'bg-sky-50 text-sky-600 hover:bg-sky-100\\\\', indicator: \\\\'bg-sky-500\\\\', ringColor: \\\\'ring-sky-400\\\\' },\\\\n  purple: { color: \\\\'#a855f7\\\\', bg: \\\\'bg-purple-50\\\\', text: \\\\'text-purple-600\\\\', badge: \\\\'bg-purple-100 text-purple-600 border-purple-200\\\\', border: \\\\'border-purple-500\\\\', ring: \\\\'focus-within:ring-purple-200\\\\', buttonRing: \\\\'focus:ring-purple-200 focus:border-purple-300\\\\', dot: \\\\'bg-purple-400\\\\', breadcrumb: \\\\'bg-purple-50 text-purple-600 hover:bg-purple-100\\\\', indicator: \\\\'bg-purple-500\\\\', ringColor: \\\\'ring-purple-400\\\\' },\\\\n  fuchsia: { color: \\\\'#d946ef\\\\', bg: \\\\'bg-fuchsia-50\\\\', text: \\\\'text-fuchsia-600\\\\', badge: \\\\'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200\\\\', border: \\\\'border-fuchsia-500\\\\', ring: \\\\'focus-within:ring-fuchsia-200\\\\', buttonRing: \\\\'focus:ring-fuchsia-200 focus:border-fuchsia-300\\\\', dot: \\\\'bg-fuchsia-400\\\\', breadcrumb: \\\\'bg-fuchsia-50 text-fuchsia-600 hover:bg-fuchsia-100\\\\', indicator: \\\\'bg-fuchsia-500\\\\', ringColor: \\\\'ring-fuchsia-400\\\\' },\\\\n  pink: { color: \\\\'#ec4899\\\\', bg: \\\\'bg-pink-50\\\\', text: \\\\'text-pink-600\\\\', badge: \\\\'bg-pink-100 text-pink-600 border-pink-200\\\\', border: \\\\'border-pink-500\\\\', ring: \\\\'focus-within:ring-pink-200\\\\', buttonRing: \\\\'focus:ring-pink-200 focus:border-pink-300\\\\', dot: \\\\'bg-pink-400\\\\', breadcrumb: \\\\'bg-pink-50 text-pink-600 hover:bg-pink-100\\\\', indicator: \\\\'bg-pink-500\\\\', ringColor: \\\\'ring-pink-400\\\\' },\\\\n  rose: { color: \\\\'#f43f5e\\\\', bg: \\\\'bg-rose-50\\\\', text: \\\\'text-rose-600\\\\', badge: \\\\'bg-rose-100 text-rose-600 border-rose-200\\\\', border: \\\\'border-rose-500\\\\', ring: \\\\'focus-within:ring-rose-200\\\\', buttonRing: \\\\'focus:ring-rose-200 focus:border-rose-300\\\\', dot: \\\\'bg-rose-400\\\\', breadcrumb: \\\\'bg-rose-50 text-rose-600 hover:bg-rose-100\\\\', indicator: \\\\'bg-rose-500\\\\', ringColor: \\\\'ring-rose-400\\\\' },\",\"originAcceptText\":\"export const COLOR_THEMES: Record<string, any> = {\\n  gray: { color: '#6b7280', bg: 'bg-gray-50', text: 'text-gray-600', badge: 'bg-gray-100 text-gray-600 border-gray-200', border: 'border-gray-300', ring: 'focus-within:ring-gray-200', buttonRing: 'focus:ring-gray-200 focus:border-gray-300', dot: 'bg-gray-400', breadcrumb: 'bg-gray-50 text-gray-600 hover:bg-gray-100', indicator: 'bg-gray-500', ringColor: 'ring-gray-400' },\\n  blue: { color: '#3b82f6', bg: 'bg-blue-50', text: 'text-blue-600', badge: 'bg-blue-100 text-blue-600 border-blue-200', border: 'border-blue-500', ring: 'focus-within:ring-blue-200', buttonRing: 'focus:ring-blue-200 focus:border-blue-300', dot: 'bg-blue-400', breadcrumb: 'bg-blue-50 text-blue-600 hover:bg-blue-100', indicator: 'bg-blue-500', ringColor: 'ring-blue-400' },\\n  indigo: { color: '#6366f1', bg: 'bg-indigo-50', text: 'text-indigo-600', badge: 'bg-indigo-100 text-indigo-600 border-indigo-200', border: 'border-indigo-500', ring: 'focus-within:ring-indigo-200', buttonRing: 'focus:ring-indigo-200 focus:border-indigo-300', dot: 'bg-indigo-400', breadcrumb: 'bg-indigo-50 text-indigo-600 hover:bg-indigo-100', indicator: 'bg-indigo-500', ringColor: 'ring-indigo-400' },\\n  red: { color: '#ef4444', bg: 'bg-red-50', text: 'text-red-600', badge: 'bg-red-100 text-red-600 border-red-200', border: 'border-red-500', ring: 'focus-within:ring-red-200', buttonRing: 'focus:ring-red-200 focus:border-red-300', dot: 'bg-red-400', breadcrumb: 'bg-red-50 text-red-600 hover:bg-red-100', indicator: 'bg-red-500', ringColor: 'ring-red-400' },\\n  orange: { color: '#f97316', bg: 'bg-orange-50', text: 'text-orange-600', badge: 'bg-orange-100 text-orange-600 border-orange-200', border: 'border-orange-500', ring: 'focus-within:ring-orange-200', buttonRing: 'focus:ring-orange-200 focus:border-orange-300', dot: 'bg-orange-400', breadcrumb: 'bg-orange-50 text-orange-600 hover:bg-orange-100', indicator: 'bg-orange-500', ringColor: 'ring-orange-400' },\\n  amber: { color: '#f59e0b', bg: 'bg-amber-50', text: 'text-amber-600', badge: 'bg-amber-100 text-amber-600 border-amber-200', border: 'border-amber-500', ring: 'focus-within:ring-amber-200', buttonRing: 'focus:ring-amber-200 focus:border-amber-300', dot: 'bg-amber-400', breadcrumb: 'bg-amber-50 text-amber-600 hover:bg-amber-100', indicator: 'bg-amber-500', ringColor: 'ring-amber-400' },\\n  green: { color: '#10b981', bg: 'bg-green-50', text: 'text-green-600', badge: 'bg-green-100 text-green-600 border-green-200', border: 'border-green-500', ring: 'focus-within:ring-green-200', buttonRing: 'focus:ring-green-200 focus:border-green-300', dot: 'bg-green-400', breadcrumb: 'bg-green-50 text-green-600 hover:bg-green-100', indicator: 'bg-green-500', ringColor: 'ring-green-400' },\\n  teal: { color: '#14b8a6', bg: 'bg-teal-50', text: 'text-teal-600', badge: 'bg-teal-100 text-teal-600 border-teal-200', border: 'border-teal-500', ring: 'focus-within:ring-teal-200', buttonRing: 'focus:ring-teal-200 focus:border-teal-300', dot: 'bg-teal-400', breadcrumb: 'bg-teal-50 text-teal-600 hover:bg-teal-100', indicator: 'bg-teal-500', ringColor: 'ring-teal-400' },\\n  cyan: { color: '#06b6d4', bg: 'bg-cyan-50', text: 'text-cyan-600', badge: 'bg-cyan-100 text-cyan-600 border-cyan-200', border: 'border-cyan-500', ring: 'focus-within:ring-cyan-200', buttonRing: 'focus:ring-cyan-200 focus:border-cyan-300', dot: 'bg-cyan-400', breadcrumb: 'bg-cyan-50 text-cyan-600 hover:bg-cyan-100', indicator: 'bg-cyan-500', ringColor: 'ring-cyan-400' },\\n  sky: { color: '#0ea5e9', bg: 'bg-sky-50', text: 'text-sky-600', badge: 'bg-sky-100 text-sky-600 border-sky-200', border: 'border-sky-500', ring: 'focus-within:ring-sky-200', buttonRing: 'focus:ring-sky-200 focus:border-sky-300', dot: 'bg-sky-400', breadcrumb: 'bg-sky-50 text-sky-600 hover:bg-sky-100', indicator: 'bg-sky-500', ringColor: 'ring-sky-400' },\\n  purple: { color: '#a855f7', bg: 'bg-purple-50', text: 'text-purple-600', badge: 'bg-purple-100 text-purple-600 border-purple-200', border: 'border-purple-500', ring: 'focus-within:ring-purple-200', buttonRing: 'focus:ring-purple-200 focus:border-purple-300', dot: 'bg-purple-400', breadcrumb: 'bg-purple-50 text-purple-600 hover:bg-purple-100', indicator: 'bg-purple-500', ringColor: 'ring-purple-400' },\\n  fuchsia: { color: '#d946ef', bg: 'bg-fuchsia-50', text: 'text-fuchsia-600', badge: 'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200', border: 'border-fuchsia-500', ring: 'focus-within:ring-fuchsia-200', buttonRing: 'focus:ring-fuchsia-200 focus:border-fuchsia-300', dot: 'bg-fuchsia-400', breadcrumb: 'bg-fuchsia-50 text-fuchsia-600 hover:bg-fuchsia-100', indicator: 'bg-fuchsia-500', ringColor: 'ring-fuchsia-400' },\\n  pink: { color: '#ec4899', bg: 'bg-pink-50', text: 'text-pink-600', badge: 'bg-pink-100 text-pink-600 border-pink-200', border: 'border-pink-500', ring: 'focus-within:ring-pink-200', buttonRing: 'focus:ring-pink-200 focus:border-pink-300', dot: 'bg-pink-400', breadcrumb: 'bg-pink-50 text-pink-600 hover:bg-pink-100', indicator: 'bg-pink-500', ringColor: 'ring-pink-400' },\\n  rose: { color: '#f43f5e', bg: 'bg-rose-50', text: 'text-rose-600', badge: 'bg-rose-100 text-rose-600 border-rose-200', border: 'border-rose-500', ring: 'focus-within:ring-rose-200', buttonRing: 'focus:ring-rose-200 focus:border-rose-300', dot: 'bg-rose-400', breadcrumb: 'bg-rose-50 text-rose-600 hover:bg-rose-100', indicator: 'bg-rose-500', ringColor: 'ring-rose-400' },\",\"originTextLength\":5444,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427923113},{\"originRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":36}},\"modifyRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":36}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const APP_VERSION = \\\\\\\"v1.5.0\\\\\\\";\",\"originAcceptText\":\"export const APP_VERSION = \\\"v1.5.0\\\";\",\"originTextLength\":36,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766428083159},{\"originRange\":{\"start\":{\"line\":24,\"character\":0},\"end\":{\"line\":24,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":24,\"character\":0},\"end\":{\"line\":24,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766428083161},{\"originRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":22,\"character\":399}},\"modifyRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":22,\"character\":399}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  gray: { color: \\\\'#6b7280\\\\', bg: \\\\'bg-gray-50\\\\', text: \\\\'text-gray-600\\\\', accent: \\\\'text-gray-600\\\\', badge: \\\\'bg-gray-100 text-gray-600 border-gray-200\\\\', border: \\\\'border-gray-300\\\\', ring: \\\\'focus-within:ring-gray-200\\\\', buttonRing: \\\\'focus:ring-gray-200 focus:border-gray-300\\\\', dot: \\\\'bg-gray-400\\\\', breadcrumb: \\\\'bg-gray-50 text-gray-600 hover:bg-gray-100\\\\', indicator: \\\\'bg-gray-500\\\\', ringColor: \\\\'ring-gray-400\\\\' },\\\\n  blue: { color: \\\\'#3b82f6\\\\', bg: \\\\'bg-blue-50\\\\', text: \\\\'text-blue-600\\\\', accent: \\\\'text-blue-600\\\\', badge: \\\\'bg-blue-100 text-blue-600 border-blue-200\\\\', border: \\\\'border-blue-500\\\\', ring: \\\\'focus-within:ring-blue-200\\\\', buttonRing: \\\\'focus:ring-blue-200 focus:border-blue-300\\\\', dot: \\\\'bg-blue-400\\\\', breadcrumb: \\\\'bg-blue-50 text-blue-600 hover:bg-blue-100\\\\', indicator: \\\\'bg-blue-500\\\\', ringColor: \\\\'ring-blue-400\\\\' },\\\\n  indigo: { color: \\\\'#6366f1\\\\', bg: \\\\'bg-indigo-50\\\\', text: \\\\'text-indigo-600\\\\', accent: \\\\'text-indigo-600\\\\', badge: \\\\'bg-indigo-100 text-indigo-600 border-indigo-200\\\\', border: \\\\'border-indigo-500\\\\', ring: \\\\'focus-within:ring-indigo-200\\\\', buttonRing: \\\\'focus:ring-indigo-200 focus:border-indigo-300\\\\', dot: \\\\'bg-indigo-400\\\\', breadcrumb: \\\\'bg-indigo-50 text-indigo-600 hover:bg-indigo-100\\\\', indicator: \\\\'bg-indigo-500\\\\', ringColor: \\\\'ring-indigo-400\\\\' },\\\\n  red: { color: \\\\'#ef4444\\\\', bg: \\\\'bg-red-50\\\\', text: \\\\'text-red-600\\\\', accent: \\\\'text-red-600\\\\', badge: \\\\'bg-red-100 text-red-600 border-red-200\\\\', border: \\\\'border-red-500\\\\', ring: \\\\'focus-within:ring-red-200\\\\', buttonRing: \\\\'focus:ring-red-200 focus:border-red-300\\\\', dot: \\\\'bg-red-400\\\\', breadcrumb: \\\\'bg-red-50 text-red-600 hover:bg-red-100\\\\', indicator: \\\\'bg-red-500\\\\', ringColor: \\\\'ring-red-400\\\\' },\\\\n  orange: { color: \\\\'#f97316\\\\', bg: \\\\'bg-orange-50\\\\', text: \\\\'text-orange-600\\\\', accent: \\\\'text-orange-600\\\\', badge: \\\\'bg-orange-100 text-orange-600 border-orange-200\\\\', border: \\\\'border-orange-500\\\\', ring: \\\\'focus-within:ring-orange-200\\\\', buttonRing: \\\\'focus:ring-orange-200 focus:border-orange-300\\\\', dot: \\\\'bg-orange-400\\\\', breadcrumb: \\\\'bg-orange-50 text-orange-600 hover:bg-orange-100\\\\', indicator: \\\\'bg-orange-500\\\\', ringColor: \\\\'ring-orange-400\\\\' },\\\\n  amber: { color: \\\\'#f59e0b\\\\', bg: \\\\'bg-amber-50\\\\', text: \\\\'text-amber-600\\\\', accent: \\\\'text-amber-600\\\\', badge: \\\\'bg-amber-100 text-amber-600 border-amber-200\\\\', border: \\\\'border-amber-500\\\\', ring: \\\\'focus-within:ring-amber-200\\\\', buttonRing: \\\\'focus:ring-amber-200 focus:border-amber-300\\\\', dot: \\\\'bg-amber-400\\\\', breadcrumb: \\\\'bg-amber-50 text-amber-600 hover:bg-amber-100\\\\', indicator: \\\\'bg-amber-500\\\\', ringColor: \\\\'ring-amber-400\\\\' },\\\\n  green: { color: \\\\'#10b981\\\\', bg: \\\\'bg-green-50\\\\', text: \\\\'text-green-600\\\\', accent: \\\\'text-green-600\\\\', badge: \\\\'bg-green-100 text-green-600 border-green-200\\\\', border: \\\\'border-green-500\\\\', ring: \\\\'focus-within:ring-green-200\\\\', buttonRing: \\\\'focus:ring-green-200 focus:border-green-300\\\\', dot: \\\\'bg-green-400\\\\', breadcrumb: \\\\'bg-green-50 text-green-600 hover:bg-green-100\\\\', indicator: \\\\'bg-green-500\\\\', ringColor: \\\\'ring-green-400\\\\' },\\\\n  teal: { color: \\\\'#14b8a6\\\\', bg: \\\\'bg-teal-50\\\\', text: \\\\'text-teal-600\\\\', accent: \\\\'text-teal-600\\\\', badge: \\\\'bg-teal-100 text-teal-600 border-teal-200\\\\', border: \\\\'border-teal-500\\\\', ring: \\\\'focus-within:ring-teal-200\\\\', buttonRing: \\\\'focus:ring-teal-200 focus:border-teal-300\\\\', dot: \\\\'bg-teal-400\\\\', breadcrumb: \\\\'bg-teal-50 text-teal-600 hover:bg-teal-100\\\\', indicator: \\\\'bg-teal-500\\\\', ringColor: \\\\'ring-teal-400\\\\' },\\\\n  cyan: { color: \\\\'#06b6d4\\\\', bg: \\\\'bg-cyan-50\\\\', text: \\\\'text-cyan-600\\\\', accent: \\\\'text-cyan-600\\\\', badge: \\\\'bg-cyan-100 text-cyan-600 border-cyan-200\\\\', border: \\\\'border-cyan-500\\\\', ring: \\\\'focus-within:ring-cyan-200\\\\', buttonRing: \\\\'focus:ring-cyan-200 focus:border-cyan-300\\\\', dot: \\\\'bg-cyan-400\\\\', breadcrumb: \\\\'bg-cyan-50 text-cyan-600 hover:bg-cyan-100\\\\', indicator: \\\\'bg-cyan-500\\\\', ringColor: \\\\'ring-cyan-400\\\\' },\\\\n  sky: { color: \\\\'#0ea5e9\\\\', bg: \\\\'bg-sky-50\\\\', text: \\\\'text-sky-600\\\\', accent: \\\\'text-sky-600\\\\', badge: \\\\'bg-sky-100 text-sky-600 border-sky-200\\\\', border: \\\\'border-sky-500\\\\', ring: \\\\'focus-within:ring-sky-200\\\\', buttonRing: \\\\'focus:ring-sky-200 focus:border-sky-300\\\\', dot: \\\\'bg-sky-400\\\\', breadcrumb: \\\\'bg-sky-50 text-sky-600 hover:bg-sky-100\\\\', indicator: \\\\'bg-sky-500\\\\', ringColor: \\\\'ring-sky-400\\\\' },\\\\n  purple: { color: \\\\'#a855f7\\\\', bg: \\\\'bg-purple-50\\\\', text: \\\\'text-purple-600\\\\', accent: \\\\'text-purple-600\\\\', badge: \\\\'bg-purple-100 text-purple-600 border-purple-200\\\\', border: \\\\'border-purple-500\\\\', ring: \\\\'focus-within:ring-purple-200\\\\', buttonRing: \\\\'focus:ring-purple-200 focus:border-purple-300\\\\', dot: \\\\'bg-purple-400\\\\', breadcrumb: \\\\'bg-purple-50 text-purple-600 hover:bg-purple-100\\\\', indicator: \\\\'bg-purple-500\\\\', ringColor: \\\\'ring-purple-400\\\\' },\\\\n  fuchsia: { color: \\\\'#d946ef\\\\', bg: \\\\'bg-fuchsia-50\\\\', text: \\\\'text-fuchsia-600\\\\', accent: \\\\'text-fuchsia-600\\\\', badge: \\\\'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200\\\\', border: \\\\'border-fuchsia-500\\\\', ring: \\\\'focus-within:ring-fuchsia-200\\\\', buttonRing: \\\\'focus:ring-fuchsia-200 focus:border-fuchsia-300\\\\', dot: \\\\'bg-fuchsia-400\\\\', breadcrumb: \\\\'bg-fuchsia-50 text-fuchsia-600 hover:bg-fuchsia-100\\\\', indicator: \\\\'bg-fuchsia-500\\\\', ringColor: \\\\'ring-fuchsia-400\\\\' },\\\\n  pink: { color: \\\\'#ec4899\\\\', bg: \\\\'bg-pink-50\\\\', text: \\\\'text-pink-600\\\\', accent: \\\\'text-pink-600\\\\', badge: \\\\'bg-pink-100 text-pink-600 border-pink-200\\\\', border: \\\\'border-pink-500\\\\', ring: \\\\'focus-within:ring-pink-200\\\\', buttonRing: \\\\'focus:ring-pink-200 focus:border-pink-300\\\\', dot: \\\\'bg-pink-400\\\\', breadcrumb: \\\\'bg-pink-50 text-pink-600 hover:bg-pink-100\\\\', indicator: \\\\'bg-pink-500\\\\', ringColor: \\\\'ring-pink-400\\\\' },\\\\n  rose: { color: \\\\'#f43f5e\\\\', bg: \\\\'bg-rose-50\\\\', text: \\\\'text-rose-600\\\\', accent: \\\\'text-rose-600\\\\', badge: \\\\'bg-rose-100 text-rose-600 border-rose-200\\\\', border: \\\\'border-rose-500\\\\', ring: \\\\'focus-within:ring-rose-200\\\\', buttonRing: \\\\'focus:ring-rose-200 focus:border-rose-300\\\\', dot: \\\\'bg-rose-400\\\\', breadcrumb: \\\\'bg-rose-50 text-rose-600 hover:bg-rose-100\\\\', indicator: \\\\'bg-rose-500\\\\', ringColor: \\\\'ring-rose-400\\\\' },\",\"originAcceptText\":\"  gray: { color: '#6b7280', bg: 'bg-gray-50', text: 'text-gray-600', accent: 'text-gray-600', badge: 'bg-gray-100 text-gray-600 border-gray-200', border: 'border-gray-300', ring: 'focus-within:ring-gray-200', buttonRing: 'focus:ring-gray-200 focus:border-gray-300', dot: 'bg-gray-400', breadcrumb: 'bg-gray-50 text-gray-600 hover:bg-gray-100', indicator: 'bg-gray-500', ringColor: 'ring-gray-400' },\\n  blue: { color: '#3b82f6', bg: 'bg-blue-50', text: 'text-blue-600', accent: 'text-blue-600', badge: 'bg-blue-100 text-blue-600 border-blue-200', border: 'border-blue-500', ring: 'focus-within:ring-blue-200', buttonRing: 'focus:ring-blue-200 focus:border-blue-300', dot: 'bg-blue-400', breadcrumb: 'bg-blue-50 text-blue-600 hover:bg-blue-100', indicator: 'bg-blue-500', ringColor: 'ring-blue-400' },\\n  indigo: { color: '#6366f1', bg: 'bg-indigo-50', text: 'text-indigo-600', accent: 'text-indigo-600', badge: 'bg-indigo-100 text-indigo-600 border-indigo-200', border: 'border-indigo-500', ring: 'focus-within:ring-indigo-200', buttonRing: 'focus:ring-indigo-200 focus:border-indigo-300', dot: 'bg-indigo-400', breadcrumb: 'bg-indigo-50 text-indigo-600 hover:bg-indigo-100', indicator: 'bg-indigo-500', ringColor: 'ring-indigo-400' },\\n  red: { color: '#ef4444', bg: 'bg-red-50', text: 'text-red-600', accent: 'text-red-600', badge: 'bg-red-100 text-red-600 border-red-200', border: 'border-red-500', ring: 'focus-within:ring-red-200', buttonRing: 'focus:ring-red-200 focus:border-red-300', dot: 'bg-red-400', breadcrumb: 'bg-red-50 text-red-600 hover:bg-red-100', indicator: 'bg-red-500', ringColor: 'ring-red-400' },\\n  orange: { color: '#f97316', bg: 'bg-orange-50', text: 'text-orange-600', accent: 'text-orange-600', badge: 'bg-orange-100 text-orange-600 border-orange-200', border: 'border-orange-500', ring: 'focus-within:ring-orange-200', buttonRing: 'focus:ring-orange-200 focus:border-orange-300', dot: 'bg-orange-400', breadcrumb: 'bg-orange-50 text-orange-600 hover:bg-orange-100', indicator: 'bg-orange-500', ringColor: 'ring-orange-400' },\\n  amber: { color: '#f59e0b', bg: 'bg-amber-50', text: 'text-amber-600', accent: 'text-amber-600', badge: 'bg-amber-100 text-amber-600 border-amber-200', border: 'border-amber-500', ring: 'focus-within:ring-amber-200', buttonRing: 'focus:ring-amber-200 focus:border-amber-300', dot: 'bg-amber-400', breadcrumb: 'bg-amber-50 text-amber-600 hover:bg-amber-100', indicator: 'bg-amber-500', ringColor: 'ring-amber-400' },\\n  green: { color: '#10b981', bg: 'bg-green-50', text: 'text-green-600', accent: 'text-green-600', badge: 'bg-green-100 text-green-600 border-green-200', border: 'border-green-500', ring: 'focus-within:ring-green-200', buttonRing: 'focus:ring-green-200 focus:border-green-300', dot: 'bg-green-400', breadcrumb: 'bg-green-50 text-green-600 hover:bg-green-100', indicator: 'bg-green-500', ringColor: 'ring-green-400' },\\n  teal: { color: '#14b8a6', bg: 'bg-teal-50', text: 'text-teal-600', accent: 'text-teal-600', badge: 'bg-teal-100 text-teal-600 border-teal-200', border: 'border-teal-500', ring: 'focus-within:ring-teal-200', buttonRing: 'focus:ring-teal-200 focus:border-teal-300', dot: 'bg-teal-400', breadcrumb: 'bg-teal-50 text-teal-600 hover:bg-teal-100', indicator: 'bg-teal-500', ringColor: 'ring-teal-400' },\\n  cyan: { color: '#06b6d4', bg: 'bg-cyan-50', text: 'text-cyan-600', accent: 'text-cyan-600', badge: 'bg-cyan-100 text-cyan-600 border-cyan-200', border: 'border-cyan-500', ring: 'focus-within:ring-cyan-200', buttonRing: 'focus:ring-cyan-200 focus:border-cyan-300', dot: 'bg-cyan-400', breadcrumb: 'bg-cyan-50 text-cyan-600 hover:bg-cyan-100', indicator: 'bg-cyan-500', ringColor: 'ring-cyan-400' },\\n  sky: { color: '#0ea5e9', bg: 'bg-sky-50', text: 'text-sky-600', accent: 'text-sky-600', badge: 'bg-sky-100 text-sky-600 border-sky-200', border: 'border-sky-500', ring: 'focus-within:ring-sky-200', buttonRing: 'focus:ring-sky-200 focus:border-sky-300', dot: 'bg-sky-400', breadcrumb: 'bg-sky-50 text-sky-600 hover:bg-sky-100', indicator: 'bg-sky-500', ringColor: 'ring-sky-400' },\\n  purple: { color: '#a855f7', bg: 'bg-purple-50', text: 'text-purple-600', accent: 'text-purple-600', badge: 'bg-purple-100 text-purple-600 border-purple-200', border: 'border-purple-500', ring: 'focus-within:ring-purple-200', buttonRing: 'focus:ring-purple-200 focus:border-purple-300', dot: 'bg-purple-400', breadcrumb: 'bg-purple-50 text-purple-600 hover:bg-purple-100', indicator: 'bg-purple-500', ringColor: 'ring-purple-400' },\\n  fuchsia: { color: '#d946ef', bg: 'bg-fuchsia-50', text: 'text-fuchsia-600', accent: 'text-fuchsia-600', badge: 'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200', border: 'border-fuchsia-500', ring: 'focus-within:ring-fuchsia-200', buttonRing: 'focus:ring-fuchsia-200 focus:border-fuchsia-300', dot: 'bg-fuchsia-400', breadcrumb: 'bg-fuchsia-50 text-fuchsia-600 hover:bg-fuchsia-100', indicator: 'bg-fuchsia-500', ringColor: 'ring-fuchsia-400' },\\n  pink: { color: '#ec4899', bg: 'bg-pink-50', text: 'text-pink-600', accent: 'text-pink-600', badge: 'bg-pink-100 text-pink-600 border-pink-200', border: 'border-pink-500', ring: 'focus-within:ring-pink-200', buttonRing: 'focus:ring-pink-200 focus:border-pink-300', dot: 'bg-pink-400', breadcrumb: 'bg-pink-50 text-pink-600 hover:bg-pink-100', indicator: 'bg-pink-500', ringColor: 'ring-pink-400' },\\n  rose: { color: '#f43f5e', bg: 'bg-rose-50', text: 'text-rose-600', accent: 'text-rose-600', badge: 'bg-rose-100 text-rose-600 border-rose-200', border: 'border-rose-500', ring: 'focus-within:ring-rose-200', buttonRing: 'focus:ring-rose-200 focus:border-rose-300', dot: 'bg-rose-400', breadcrumb: 'bg-rose-50 text-rose-600 hover:bg-rose-100', indicator: 'bg-rose-500', ringColor: 'ring-rose-400' },\",\"originTextLength\":5752,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766430346019},{\"originRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":36}},\"modifyRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":36}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const APP_VERSION = \\\\\\\"v1.6.0\\\\\\\";\",\"originAcceptText\":\"export const APP_VERSION = \\\"v1.6.0\\\";\",\"originTextLength\":36,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766449956404},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":56}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":56}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const COLOR_THEMES: Record<string, TaskColor> = {\",\"originAcceptText\":\"export const COLOR_THEMES: Record<string, TaskColor> = {\",\"originTextLength\":56,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766450334610},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":22,\"character\":57}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":22,\"character\":57}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export interface ThemeColor {\\\\n    color: string;\\\\n    bg: string;\\\\n    text: string;\\\\n    accent: string;\\\\n    badge: string;\\\\n    border: string;\\\\n    ring: string;\\\\n    buttonRing: string;\\\\n    dot: string;\\\\n    breadcrumb: string;\\\\n    indicator: string;\\\\n    ringColor: string;\\\\n}\\\\n\\\\nexport const COLOR_THEMES: Record<string, ThemeColor> = {\",\"originAcceptText\":\"export interface ThemeColor {\\n    color: string;\\n    bg: string;\\n    text: string;\\n    accent: string;\\n    badge: string;\\n    border: string;\\n    ring: string;\\n    buttonRing: string;\\n    dot: string;\\n    breadcrumb: string;\\n    indicator: string;\\n    ringColor: string;\\n}\\n\\nexport const COLOR_THEMES: Record<string, ThemeColor> = {\",\"originTextLength\":331,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766450351592},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475425403},{\"originRange\":{\"start\":{\"line\":39,\"character\":0},\"end\":{\"line\":39,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":39,\"character\":0},\"end\":{\"line\":39,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475425406}]",
  "range-cache-file:///Users/leegary/ai_completion/src/utils/index.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":49,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":49,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useEffect } from \\\\'react\\\\';\\\\nimport { TaskData } from \\\\'../types\\\\';\\\\n\\\\nexport const parseSmartDate = (input: string, _referenceDate: Date): Date | null => {\\\\n  const now = new Date();\\\\n  const txt = input.toLowerCase().trim();\\\\n  if (/^\\\\\\\\d+$/.test(txt)) {\\\\n    const day = parseInt(txt, 10);\\\\n    let targetMonth = now.getMonth();\\\\n    let targetYear = now.getFullYear();\\\\n    if (day < now.getDate()) { targetMonth++; if (targetMonth > 11) { targetMonth = 0; targetYear++; } }\\\\n    const target = new Date(targetYear, targetMonth, day);\\\\n    if (target.getMonth() === targetMonth) return target;\\\\n  }\\\\n  if ([\\\\'今天\\\\', \\\\'today\\\\', \\\\'td\\\\'].includes(txt)) return now;\\\\n  if ([\\\\'明天\\\\', \\\\'tmr\\\\', \\\\'tm\\\\'].includes(txt)) return new Date(now.setDate(now.getDate() + 1));\\\\n  if ([\\\\'後天\\\\'].includes(txt)) return new Date(now.setDate(now.getDate() + 2));\\\\n  const plusMatch = txt.match(/^\\\\\\\\+(\\\\\\\\d+)$/);\\\\n  if (plusMatch) return new Date(now.setDate(now.getDate() + parseInt(plusMatch[1])));\\\\n  return null;\\\\n};\\\\n\\\\nexport const formatDate = (dateStr: string | null) => {\\\\n  if (!dateStr) return \\\\'\\\\';\\\\n  const d = new Date(dateStr);\\\\n  return d.toLocaleDateString(\\\\'zh-TW\\\\', { month: \\\\'short\\\\', day: \\\\'numeric\\\\', hour: \\\\'2-digit\\\\', minute: \\\\'2-digit\\\\' });\\\\n};\\\\n\\\\nexport const getRelativeDateString = (dateStr: string | null) => {\\\\n  if (!dateStr) return \\\\'\\\\';\\\\n  const date = new Date(dateStr);\\\\n  const now = new Date();\\\\n  now.setHours(0, 0, 0, 0);\\\\n  const target = new Date(date.getTime());\\\\n  target.setHours(0, 0, 0, 0);\\\\n\\\\n  const diffDays = Math.floor((target.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\\\\n\\\\n  if (diffDays === 0) return \\\\'今天\\\\';\\\\n  if (diffDays === 1) return \\\\'明天\\\\';\\\\n  if (diffDays === -1) return \\\\'昨天\\\\';\\\\n  if (diffDays < 0) return `${Math.abs(diffDays)} 天前`;\\\\n  return `${date.getMonth() + 1}/${date.getDate()}`;\\\\n};\\\\n\\\\nexport const isSameDay = (d1: Date, d2: Date) => d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();\\\\nexport const isToday = (dateStr: string | null) => dateStr ? isSameDay(new Date(dateStr), new Date()) : false;\\\\nexport const isOverdue = (dateStr: string | null) => dateStr ? new Date(dateStr).getTime() < new Date().setHours(0,0,0,0) : false;\\\\n\\\\nexport const isDescendant = (potentialParentId: string | null, targetId: string, allTasks: TaskData[]): boolean => {\\\\n  if (!potentialParentId) return false;\\\\n  if (potentialParentId === targetId) return true;\\\\n  const parent = allTasks.find(t => t.id === potentialParentId);\\\\n  if (!parent) return false;\\\\n  return isDescendant(parent.parent_id, targetId, allTasks);\\\\n};\\\\n\",\"originAcceptText\":\"import { useEffect } from 'react';\\nimport { TaskData } from '../types';\\n\\nexport const parseSmartDate = (input: string, _referenceDate: Date): Date | null => {\\n  const now = new Date();\\n  const txt = input.toLowerCase().trim();\\n  if (/^\\\\d+$/.test(txt)) {\\n    const day = parseInt(txt, 10);\\n    let targetMonth = now.getMonth();\\n    let targetYear = now.getFullYear();\\n    if (day < now.getDate()) { targetMonth++; if (targetMonth > 11) { targetMonth = 0; targetYear++; } }\\n    const target = new Date(targetYear, targetMonth, day);\\n    if (target.getMonth() === targetMonth) return target;\\n  }\\n  if (['今天', 'today', 'td'].includes(txt)) return now;\\n  if (['明天', 'tmr', 'tm'].includes(txt)) return new Date(now.setDate(now.getDate() + 1));\\n  if (['後天'].includes(txt)) return new Date(now.setDate(now.getDate() + 2));\\n  const plusMatch = txt.match(/^\\\\+(\\\\d+)$/);\\n  if (plusMatch) return new Date(now.setDate(now.getDate() + parseInt(plusMatch[1])));\\n  return null;\\n};\\n\\nexport const formatDate = (dateStr: string | null) => {\\n  if (!dateStr) return '';\\n  const d = new Date(dateStr);\\n  return d.toLocaleDateString('zh-TW', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });\\n};\\n\\nexport const getRelativeDateString = (dateStr: string | null) => {\\n  if (!dateStr) return '';\\n  const date = new Date(dateStr);\\n  const now = new Date();\\n  now.setHours(0, 0, 0, 0);\\n  const target = new Date(date.getTime());\\n  target.setHours(0, 0, 0, 0);\\n\\n  const diffDays = Math.floor((target.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\\n\\n  if (diffDays === 0) return '今天';\\n  if (diffDays === 1) return '明天';\\n  if (diffDays === -1) return '昨天';\\n  if (diffDays < 0) return `${Math.abs(diffDays)} 天前`;\\n  return `${date.getMonth() + 1}/${date.getDate()}`;\\n};\\n\\nexport const isSameDay = (d1: Date, d2: Date) => d1.getFullYear() === d2.getFullYear() && d1.getMonth() === d2.getMonth() && d1.getDate() === d2.getDate();\\nexport const isToday = (dateStr: string | null) => dateStr ? isSameDay(new Date(dateStr), new Date()) : false;\\nexport const isOverdue = (dateStr: string | null) => dateStr ? new Date(dateStr).getTime() < new Date().setHours(0,0,0,0) : false;\\n\\nexport const isDescendant = (potentialParentId: string | null, targetId: string, allTasks: TaskData[]): boolean => {\\n  if (!potentialParentId) return false;\\n  if (potentialParentId === targetId) return true;\\n  const parent = allTasks.find(t => t.id === potentialParentId);\\n  if (!parent) return false;\\n  return isDescendant(parent.parent_id, targetId, allTasks);\\n};\\n\",\"originTextLength\":2527,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411792474},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137866}]",
  "range-cache-file:///Users/leegary/ai_completion/src/hooks/useClickOutside.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":15,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":15,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useEffect } from \\\\'react\\\\';\\\\n\\\\nexport function useClickOutside(ref: React.RefObject<HTMLElement>, handler: () => void) {\\\\n  useEffect(() => {\\\\n    const listener = (event: MouseEvent | TouchEvent) => {\\\\n      if (!ref.current || ref.current.contains(event.target as Node)) return;\\\\n      handler();\\\\n    };\\\\n    document.addEventListener(\\\\\\\"mousedown\\\\\\\", listener);\\\\n    document.addEventListener(\\\\\\\"touchstart\\\\\\\", listener);\\\\n    return () => {\\\\n      document.removeEventListener(\\\\\\\"mousedown\\\\\\\", listener);\\\\n      document.removeEventListener(\\\\\\\"touchstart\\\\\\\", listener);\\\\n    };\\\\n  }, [ref, handler]);\\\\n}\\\\n\",\"originAcceptText\":\"import { useEffect } from 'react';\\n\\nexport function useClickOutside(ref: React.RefObject<HTMLElement>, handler: () => void) {\\n  useEffect(() => {\\n    const listener = (event: MouseEvent | TouchEvent) => {\\n      if (!ref.current || ref.current.contains(event.target as Node)) return;\\n      handler();\\n    };\\n    document.addEventListener(\\\"mousedown\\\", listener);\\n    document.addEventListener(\\\"touchstart\\\", listener);\\n    return () => {\\n      document.removeEventListener(\\\"mousedown\\\", listener);\\n      document.removeEventListener(\\\"touchstart\\\", listener);\\n    };\\n  }, [ref, handler]);\\n}\\n\",\"originTextLength\":585,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411792475}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/ThingsCheckbox.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":23,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":23,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React from \\\\'react\\\\';\\\\nimport { Check } from \\\\'lucide-react\\\\';\\\\nimport { TaskColor } from \\\\'../types\\\\';\\\\n\\\\nexport const ThingsCheckbox = ({ checked, onChange, size = 18, color = \\\\'blue\\\\', isRoot = false }: { checked: boolean, onChange: (e: React.MouseEvent) => void, size?: number, color?: TaskColor, isRoot?: boolean }) => {\\\\n    const colorStyles = {\\\\n        blue: { root: \\\\'bg-blue-500 border-blue-500 text-white\\\\', sub: \\\\'bg-blue-100 border-blue-200 text-blue-500\\\\', hover: \\\\'hover:border-blue-400\\\\' },\\\\n        green: { root: \\\\'bg-emerald-500 border-emerald-500 text-white\\\\', sub: \\\\'bg-emerald-100 border-emerald-200 text-emerald-600\\\\', hover: \\\\'hover:border-emerald-400\\\\' },\\\\n        amber: { root: \\\\'bg-amber-500 border-amber-500 text-white\\\\', sub: \\\\'bg-amber-100 border-amber-200 text-amber-600\\\\', hover: \\\\'hover:border-amber-400\\\\' },\\\\n        purple: { root: \\\\'bg-purple-500 border-purple-500 text-white\\\\', sub: \\\\'bg-purple-100 border-purple-200 text-purple-600\\\\', hover: \\\\'hover:border-purple-400\\\\' }\\\\n    };\\\\n\\\\n    const styleSet = colorStyles[color] || colorStyles.blue;\\\\n    const checkedClass = isRoot ? styleSet.root : styleSet.sub;\\\\n    const uncheckedClass = `bg-white border-slate-300 ${styleSet.hover}`;\\\\n\\\\n    return (\\\\n        <div\\\\n            onClick={onChange}\\\\n            className={`group relative cursor-pointer flex items-center justify-center transition-all duration-200 ease-out border shadow-sm ${checked ? checkedClass : uncheckedClass}`}\\\\n            style={{ width: size, height: size, borderRadius: size * 0.25 }}\\\\n        >\\\\n            <Check size={size * 0.7} className={`transition-all duration-300 ease-back-out ${checked ? \\\\'scale-100 opacity-100\\\\' : \\\\'scale-50 opacity-0\\\\'}`} strokeWidth={3} />\\\\n        </div>\\\\n    );\\\\n};\\\\n\",\"originAcceptText\":\"import React from 'react';\\nimport { Check } from 'lucide-react';\\nimport { TaskColor } from '../types';\\n\\nexport const ThingsCheckbox = ({ checked, onChange, size = 18, color = 'blue', isRoot = false }: { checked: boolean, onChange: (e: React.MouseEvent) => void, size?: number, color?: TaskColor, isRoot?: boolean }) => {\\n    const colorStyles = {\\n        blue: { root: 'bg-blue-500 border-blue-500 text-white', sub: 'bg-blue-100 border-blue-200 text-blue-500', hover: 'hover:border-blue-400' },\\n        green: { root: 'bg-emerald-500 border-emerald-500 text-white', sub: 'bg-emerald-100 border-emerald-200 text-emerald-600', hover: 'hover:border-emerald-400' },\\n        amber: { root: 'bg-amber-500 border-amber-500 text-white', sub: 'bg-amber-100 border-amber-200 text-amber-600', hover: 'hover:border-amber-400' },\\n        purple: { root: 'bg-purple-500 border-purple-500 text-white', sub: 'bg-purple-100 border-purple-200 text-purple-600', hover: 'hover:border-purple-400' }\\n    };\\n\\n    const styleSet = colorStyles[color] || colorStyles.blue;\\n    const checkedClass = isRoot ? styleSet.root : styleSet.sub;\\n    const uncheckedClass = `bg-white border-slate-300 ${styleSet.hover}`;\\n\\n    return (\\n        <div\\n            onClick={onChange}\\n            className={`group relative cursor-pointer flex items-center justify-center transition-all duration-200 ease-out border shadow-sm ${checked ? checkedClass : uncheckedClass}`}\\n            style={{ width: size, height: size, borderRadius: size * 0.25 }}\\n        >\\n            <Check size={size * 0.7} className={`transition-all duration-300 ease-back-out ${checked ? 'scale-100 opacity-100' : 'scale-50 opacity-0'}`} strokeWidth={3} />\\n        </div>\\n    );\\n};\\n\",\"originTextLength\":1713,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411877354},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":30}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":30}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    const colorStyles: any = {\",\"originAcceptText\":\"    const colorStyles: any = {\",\"originTextLength\":30,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766469755893}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/DragGhost.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":19,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":19,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React from \\\\'react\\\\';\\\\nimport { TaskData } from \\\\'../types\\\\';\\\\nimport { COLOR_THEMES } from \\\\'../constants\\\\';\\\\n\\\\nexport const DragGhost = ({ task, position, count }: { task: TaskData | null, position: { x: number; y: number }, count: number }) => {\\\\n  if (!task) return null;\\\\n  const theme = COLOR_THEMES[task.color] || COLOR_THEMES.blue;\\\\n  \\\\n  return (\\\\n    <div className=\\\\\\\"fixed pointer-events-none z-[9999]\\\\\\\" style={{ left: position.x, top: position.y, transform: \\\\'translate(-20px, -50%) rotate(-2deg) scale(1.02)\\\\' }}>\\\\n      <div className=\\\\\\\"bg-white rounded-lg shadow-2xl border border-slate-200 px-4 py-2 min-w-[200px] max-w-[300px] ring-2 ring-blue-400/30 backdrop-blur-sm\\\\\\\">\\\\n        <div className=\\\\\\\"flex items-center gap-2\\\\\\\">\\\\n          <div className={`w-3 h-3 rounded ${theme.dot}`} />\\\\n          <span className=\\\\\\\"text-sm font-medium text-slate-700 truncate\\\\\\\">{task.title || \\\\'未命名任務\\\\'}</span>\\\\n        </div>\\\\n        {count > 1 && <div className=\\\\\\\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-lg border border-white\\\\\\\">{count}</div>}\\\\n      </div>\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React from 'react';\\nimport { TaskData } from '../types';\\nimport { COLOR_THEMES } from '../constants';\\n\\nexport const DragGhost = ({ task, position, count }: { task: TaskData | null, position: { x: number; y: number }, count: number }) => {\\n  if (!task) return null;\\n  const theme = COLOR_THEMES[task.color] || COLOR_THEMES.blue;\\n  \\n  return (\\n    <div className=\\\"fixed pointer-events-none z-[9999]\\\" style={{ left: position.x, top: position.y, transform: 'translate(-20px, -50%) rotate(-2deg) scale(1.02)' }}>\\n      <div className=\\\"bg-white rounded-lg shadow-2xl border border-slate-200 px-4 py-2 min-w-[200px] max-w-[300px] ring-2 ring-blue-400/30 backdrop-blur-sm\\\">\\n        <div className=\\\"flex items-center gap-2\\\">\\n          <div className={`w-3 h-3 rounded ${theme.dot}`} />\\n          <span className=\\\"text-sm font-medium text-slate-700 truncate\\\">{task.title || '未命名任務'}</span>\\n        </div>\\n        {count > 1 && <div className=\\\"absolute -top-2 -right-2 bg-blue-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-lg border border-white\\\">{count}</div>}\\n      </div>\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":1138,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411895891},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137871}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/DropIndicator.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":14,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":14,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React from \\\\'react\\\\';\\\\nimport { TaskColor } from \\\\'../types\\\\';\\\\nimport { COLOR_THEMES } from \\\\'../constants\\\\';\\\\n\\\\nexport const DropIndicator = ({ show, top, left, width, color }: { show: boolean; top: number; left: number; width: number; depth: number; color: TaskColor; }) => {\\\\n  if (!show) return null;\\\\n  const theme = COLOR_THEMES[color] || COLOR_THEMES.blue;\\\\n  return (\\\\n    <div className=\\\\\\\"absolute pointer-events-none z-40 transition-all duration-100 ease-out\\\\\\\" style={{ top: `${top}px`, left: `${left}px`, width: `${width}px` }}>\\\\n      <div className={`h-0.5 ${theme.indicator} rounded-full shadow-sm relative`}>\\\\n        <div className={`absolute -left-1.5 -top-[3px] w-2 h-2 ${theme.indicator} rounded-full shadow-md`} />\\\\n      </div>\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React from 'react';\\nimport { TaskColor } from '../types';\\nimport { COLOR_THEMES } from '../constants';\\n\\nexport const DropIndicator = ({ show, top, left, width, color }: { show: boolean; top: number; left: number; width: number; depth: number; color: TaskColor; }) => {\\n  if (!show) return null;\\n  const theme = COLOR_THEMES[color] || COLOR_THEMES.blue;\\n  return (\\n    <div className=\\\"absolute pointer-events-none z-40 transition-all duration-100 ease-out\\\" style={{ top: `${top}px`, left: `${left}px`, width: `${width}px` }}>\\n      <div className={`h-0.5 ${theme.indicator} rounded-full shadow-sm relative`}>\\n        <div className={`absolute -left-1.5 -top-[3px] w-2 h-2 ${theme.indicator} rounded-full shadow-md`} />\\n      </div>\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":757,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411895895},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137873}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/TagChip.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":16,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":16,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useContext } from \\\\'react\\\\';\\\\nimport { X } from \\\\'lucide-react\\\\';\\\\nimport { TagData } from \\\\'../types\\\\';\\\\nimport { AppContext } from \\\\'../context/AppContext\\\\';\\\\n\\\\nexport const TagChip = ({ tag, onRemove }: { tag: TagData, onRemove: () => void }) => {\\\\n    const { themeSettings } = useContext(AppContext);\\\\n    const textSizeClass = { small: \\\\'text-[9px]\\\\', normal: \\\\'text-[10px]\\\\', large: \\\\'text-xs\\\\' }[themeSettings.fontSize];\\\\n    const fontWeightClass = themeSettings.fontWeight === \\\\'thin\\\\' ? \\\\'font-light\\\\' : \\\\'font-normal\\\\';\\\\n    return (\\\\n        <div className={`inline-flex items-center gap-1 bg-slate-50 text-slate-600 px-2 py-0.5 rounded-md border border-slate-200 ${textSizeClass} ${fontWeightClass}`}>\\\\n            <div className=\\\\\\\"w-1.5 h-1.5 rounded-full\\\\\\\" style={{backgroundColor: tag.color}}/>\\\\n            <span>{tag.name}</span>\\\\n            <button type=\\\\\\\"button\\\\\\\" onClick={onRemove} className=\\\\\\\"hover:text-slate-900\\\\\\\"><X size={10} /></button>\\\\n        </div>\\\\n    );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useContext } from 'react';\\nimport { X } from 'lucide-react';\\nimport { TagData } from '../types';\\nimport { AppContext } from '../context/AppContext';\\n\\nexport const TagChip = ({ tag, onRemove }: { tag: TagData, onRemove: () => void }) => {\\n    const { themeSettings } = useContext(AppContext);\\n    const textSizeClass = { small: 'text-[9px]', normal: 'text-[10px]', large: 'text-xs' }[themeSettings.fontSize];\\n    const fontWeightClass = themeSettings.fontWeight === 'thin' ? 'font-light' : 'font-normal';\\n    return (\\n        <div className={`inline-flex items-center gap-1 bg-slate-50 text-slate-600 px-2 py-0.5 rounded-md border border-slate-200 ${textSizeClass} ${fontWeightClass}`}>\\n            <div className=\\\"w-1.5 h-1.5 rounded-full\\\" style={{backgroundColor: tag.color}}/>\\n            <span>{tag.name}</span>\\n            <button type=\\\"button\\\" onClick={onRemove} className=\\\"hover:text-slate-900\\\"><X size={10} /></button>\\n        </div>\\n    );\\n};\\n\",\"originTextLength\":967,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411895897},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":35}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":35}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useContext } from \\\\'react\\\\';\",\"originAcceptText\":\"import { useContext } from 'react';\",\"originTextLength\":35,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137883},{\"originRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":12,\"character\":36}},\"modifyRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":12,\"character\":36}},\"action\":\"None\",\"isLine\":false,\"originText\":\"            <span>#{tag.name}</span>\",\"originAcceptText\":\"            <span>#{tag.name}</span>\",\"originTextLength\":36,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766424787368},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":130}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":130}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const TagChip = ({ tag, onRemove, size = \\\\'normal\\\\' }: { tag: TagData, onRemove?: () => void, size?: \\\\'small\\\\'|\\\\'normal\\\\' }) => {\",\"originAcceptText\":\"export const TagChip = ({ tag, onRemove, size = 'normal' }: { tag: TagData, onRemove?: () => void, size?: 'small'|'normal' }) => {\",\"originTextLength\":130,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292449},{\"originRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":19,\"character\":47}},\"modifyRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":19,\"character\":47}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    \\\\n    const sizeMap = {\\\\n        small: {\\\\n            text: { small: \\\\'text-[8px]\\\\', normal: \\\\'text-[9px]\\\\', large: \\\\'text-[10px]\\\\' },\\\\n            padding: \\\\'px-1.5 py-0.5\\\\'\\\\n        },\\\\n        normal: {\\\\n            text: { small: \\\\'text-[9px]\\\\', normal: \\\\'text-[10px]\\\\', large: \\\\'text-xs\\\\' },\\\\n            padding: \\\\'px-2 py-0.5\\\\'\\\\n        }\\\\n    };\\\\n\\\\n    const textSizeClass = sizeMap[size].text[themeSettings.fontSize as \\\\'small\\\\'|\\\\'normal\\\\'|\\\\'large\\\\'] || sizeMap[size].text.normal;\\\\n    const paddingClass = sizeMap[size].padding;\",\"originAcceptText\":\"    \\n    const sizeMap = {\\n        small: {\\n            text: { small: 'text-[8px]', normal: 'text-[9px]', large: 'text-[10px]' },\\n            padding: 'px-1.5 py-0.5'\\n        },\\n        normal: {\\n            text: { small: 'text-[9px]', normal: 'text-[10px]', large: 'text-xs' },\\n            padding: 'px-2 py-0.5'\\n        }\\n    };\\n\\n    const textSizeClass = sizeMap[size].text[themeSettings.fontSize as 'small'|'normal'|'large'] || sizeMap[size].text.normal;\\n    const paddingClass = sizeMap[size].padding;\",\"originTextLength\":508,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292452},{\"originRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":4}},\"modifyRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":4}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    \",\"originAcceptText\":\"    \",\"originTextLength\":4,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292458},{\"originRange\":{\"start\":{\"line\":10,\"character\":0},\"end\":{\"line\":10,\"character\":172}},\"modifyRange\":{\"start\":{\"line\":10,\"character\":0},\"end\":{\"line\":10,\"character\":172}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        <div className={`inline-flex items-center gap-1 bg-slate-50 text-slate-600 ${paddingClass} rounded-md border border-slate-200 ${textSizeClass} ${fontWeightClass}`}>\",\"originAcceptText\":\"        <div className={`inline-flex items-center gap-1 bg-slate-50 text-slate-600 ${paddingClass} rounded-md border border-slate-200 ${textSizeClass} ${fontWeightClass}`}>\",\"originTextLength\":172,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292460},{\"originRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":13,\"character\":124}},\"modifyRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":13,\"character\":124}},\"action\":\"None\",\"isLine\":false,\"originText\":\"            <span>{tag.name}</span>\\\\n            {onRemove && <button type=\\\\\\\"button\\\\\\\" onClick={onRemove} className=\\\\\\\"hover:text-slate-900\\\\\\\"><X size={10} /></button>}\",\"originAcceptText\":\"            <span>{tag.name}</span>\\n            {onRemove && <button type=\\\"button\\\" onClick={onRemove} className=\\\"hover:text-slate-900\\\"><X size={10} /></button>}\",\"originTextLength\":160,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292467}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/SmartDateInput.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":118,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":118,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useState, useEffect, useRef, useContext } from \\\\'react\\\\';\\\\nimport { Calendar, X, ChevronLeft, ChevronRight, Clock } from \\\\'lucide-react\\\\';\\\\nimport { AppContext } from \\\\'../context/AppContext\\\\';\\\\nimport { useClickOutside } from \\\\'../hooks/useClickOutside\\\\';\\\\nimport { parseSmartDate, formatDate, getRelativeDateString, isSameDay, isToday } from \\\\'../utils\\\\';\\\\n\\\\nexport const SmartDateInput = ({ label, value, onChange, theme, tasks, innerRef, colorClass }: any) => {\\\\n  const { themeSettings } = useContext(AppContext);\\\\n  const [text, setText] = useState(\\\\\\\"\\\\\\\");\\\\n  const [isOpen, setIsOpen] = useState(false);\\\\n  const [currentDate, setCurrentDate] = useState(new Date());\\\\n  const [hoveredDate, setHoveredDate] = useState<Date | null>(null);\\\\n  const [highlightedDate, setHighlightedDate] = useState<Date | null>(null);\\\\n  const [time, setTime] = useState(\\\\\\\"09:00\\\\\\\");\\\\n  const containerRef = useRef<HTMLDivElement>(null);\\\\n  const isMouseDownRef = useRef(false);\\\\n  const preventReopen = useRef(false);\\\\n  const localRef = useRef<HTMLButtonElement>(null);\\\\n  const resolvedRef = innerRef || localRef;\\\\n  \\\\n  useClickOutside(containerRef, () => { setIsOpen(false); setText(\\\\\\\"\\\\\\\"); setHighlightedDate(null); });\\\\n  \\\\n  useEffect(() => { if (value) { const d = new Date(value); if (!isNaN(d.getTime())) { setCurrentDate(d); setTime(`${String(d.getHours()).padStart(2, \\\\'0\\\\')}:${String(d.getMinutes()).padStart(2, \\\\'0\\\\')}`); } } }, [value]);\\\\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => { const val = e.target.value; setText(val); const parsed = parseSmartDate(val, currentDate); if (parsed) { setCurrentDate(parsed); setHighlightedDate(parsed); setHoveredDate(parsed); } else { setHighlightedDate(null); } };\\\\n  \\\\n  const confirmSelection = () => {\\\\n      const targetDate = highlightedDate || hoveredDate || currentDate;\\\\n      if (targetDate) {\\\\n          const [h, m] = time.split(\\\\':\\\\').map(Number);\\\\n          targetDate.setHours(h, m);\\\\n          onChange(targetDate.toISOString());\\\\n          setIsOpen(false);\\\\n          setText(\\\\\\\"\\\\\\\");\\\\n          \\\\n          preventReopen.current = true;\\\\n          resolvedRef.current?.focus();\\\\n          setTimeout(() => preventReopen.current = false, 200);\\\\n      }\\\\n  };\\\\n  \\\\n  const handleKeyDown = (e: React.KeyboardEvent) => {\\\\n      if (e.key === \\\\'Enter\\\\') {\\\\n          e.preventDefault();\\\\n          e.stopPropagation();\\\\n          if (isOpen) {\\\\n              confirmSelection();\\\\n          } else {\\\\n              setIsOpen(true);\\\\n          }\\\\n      } else if (e.key === \\\\'Escape\\\\') {\\\\n          e.preventDefault();\\\\n          if (isOpen) {\\\\n              e.stopPropagation();\\\\n              setIsOpen(false);\\\\n              setText(\\\\\\\"\\\\\\\");\\\\n              \\\\n              preventReopen.current = true;\\\\n              resolvedRef.current?.focus();\\\\n              setTimeout(() => preventReopen.current = false, 200);\\\\n          }\\\\n      } else if (e.key === \\\\' \\\\') {\\\\n          e.preventDefault();\\\\n          e.stopPropagation();\\\\n          setIsOpen(true);\\\\n      }\\\\n  };\\\\n\\\\n  const handleBlur = (e: React.FocusEvent) => {\\\\n    if (containerRef.current && !containerRef.current.contains(e.relatedTarget as Node)) {\\\\n        setIsOpen(false);\\\\n    }\\\\n  };\\\\n\\\\n  const handleFocus = (_e: React.FocusEvent) => {\\\\n      if (isMouseDownRef.current || preventReopen.current) return;\\\\n      setIsOpen(true);\\\\n  };\\\\n  \\\\n  const getTasksForDate = (date: Date) => tasks.filter((t:any) => { if (t.status === \\\\'completed\\\\' || t.status === \\\\'deleted\\\\') return false; const tStart = t.start_date ? new Date(t.start_date) : null; const tDue = t.due_date ? new Date(t.due_date) : null; return (tStart && isSameDay(tStart, date)) || (tDue && isSameDay(tDue, date)); });\\\\n  const handleDateClick = (day: number) => { const newDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day); setCurrentDate(newDate); setHoveredDate(newDate); setHighlightedDate(newDate); };\\\\n  const renderDays = () => {\\\\n    const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();\\\\n    const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();\\\\n    const days = [];\\\\n    for (let i = 0; i < firstDayOfMonth; i++) days.push(<div key={`empty-${i}`} className=\\\\\\\"h-8 w-8\\\\\\\" />);\\\\n    for (let d = 1; d <= daysInMonth; d++) {\\\\n      const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), d);\\\\n      const isSaved = value && isSameDay(new Date(value), date);\\\\n      const isHighlighted = highlightedDate && isSameDay(highlightedDate, date);\\\\n      const dayTasks = getTasksForDate(date);\\\\n      const count = dayTasks.length;\\\\n      let dotColor = \\\\'bg-transparent\\\\';\\\\n      if (count >= 1 && count <= 3) dotColor = \\\\'bg-green-400\\\\'; else if (count >= 4 && count <= 10) dotColor = \\\\'bg-yellow-400\\\\'; else if (count > 10) dotColor = \\\\'bg-red-500\\\\';\\\\n      days.push( <button key={d} type=\\\\\\\"button\\\\\\\" onClick={() => handleDateClick(d)} onMouseEnter={() => setHoveredDate(date)} className={`h-8 w-8 rounded-full flex items-center justify-center text-xs relative transition-all ${isHighlighted ? `bg-indigo-600/80 text-white font-bold shadow-md` : isSaved ? \\\\'bg-black text-white font-bold\\\\' : \\\\'hover:bg-gray-100\\\\'} ${isToday(date.toISOString()) && !isSaved && !isHighlighted ? \\\\'text-indigo-600 font-bold\\\\' : \\\\'\\\\'}`}> {d} {!isSaved && !isHighlighted && count > 0 && <div className={`absolute bottom-1 w-1 h-1 rounded-full ${dotColor}`}></div>} </button> );\\\\n    }\\\\n    return days;\\\\n  };\\\\n  const previewDate = highlightedDate || hoveredDate || (value ? new Date(value) : null);\\\\n  const previewTasks = previewDate ? getTasksForDate(previewDate) : [];\\\\n  \\\\n  const focusRingClass = theme?.buttonRing || \\\\'focus:ring-indigo-300 focus:border-indigo-300\\\\';\\\\n  const textColorClass = colorClass || theme?.text || \\\\'text-gray-400\\\\';\\\\n  const textSizeClass = { small: \\\\'text-[11px]\\\\', normal: \\\\'text-xs\\\\', large: \\\\'text-sm\\\\' }[themeSettings.fontSize as keyof typeof textSizeClass] || \\\\'text-xs\\\\';\\\\n  const fontWeightClass = themeSettings.fontWeight === \\\\'thin\\\\' ? \\\\'font-light\\\\' : \\\\'font-medium\\\\';\\\\n\\\\n  return (\\\\n    <div className=\\\\\\\"relative\\\\\\\" ref={containerRef} onBlur={handleBlur}>\\\\n      <button\\\\n        ref={resolvedRef}\\\\n        type=\\\\\\\"button\\\\\\\"\\\\n        onMouseDown={() => { isMouseDownRef.current = true; setTimeout(() => isMouseDownRef.current = false, 200); }}\\\\n        onClick={() => setIsOpen(!isOpen)}\\\\n        onKeyDown={handleKeyDown}\\\\n        onFocus={handleFocus}\\\\n        className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${value ? `${textColorClass} bg-white border-transparent shadow-sm ring-1 ring-gray-100` : \\\\'text-gray-400 border-transparent hover:bg-gray-100\\\\'} focus:outline-none focus:bg-white focus:ring-1 ${focusRingClass} ${textSizeClass} ${fontWeightClass}`}\\\\n      >\\\\n        <Calendar size={13} /> <span>{value ? getRelativeDateString(value) : label}</span> {value && <X size={12} className=\\\\\\\"hover:text-red-500\\\\\\\" onClick={(e) => { e.stopPropagation(); onChange(null); }} />}\\\\n      </button>\\\\n      {isOpen && ( <div className=\\\\\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-80 animate-in fade-in zoom-in duration-100\\\\\\\"> <div className=\\\\\\\"mb-3 relative\\\\\\\"> <input autoFocus type=\\\\\\\"text\\\\\\\" placeholder=\\\\\\\"輸入: 5, 明天, 下週五...\\\\\\\" className=\\\\\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\\\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\\\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\\\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\\\\\"flex justify-between items-center mb-2\\\\\\\"> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronLeft size={16} /></button> <span className=\\\\\\\"font-bold text-sm text-gray-800\\\\\\\">{currentDate.toLocaleString(\\\\'default\\\\', { month: \\\\'long\\\\', year: \\\\'numeric\\\\' })}</span> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronRight size={16} /></button> </div> <div className=\\\\\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\\\\\">{[\\\\'日\\\\',\\\\'一\\\\',\\\\'二\\\\',\\\\'三\\\\',\\\\'四\\\\',\\\\'五\\\\',\\\\'六\\\\'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\\\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\\\\\"> <span className=\\\\\\\"text-xs text-gray-500 flex items-center gap-1\\\\\\\"><Clock size={12} /> 時間</span> <input type=\\\\\\\"time\\\\\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\\\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\\\\\" /> </div> <div className=\\\\\\\"border-t border-gray-100 pt-3 mt-3\\\\\\\"> <div className=\\\\\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\\\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : \\\\'行程\\\\'}</span> <span className=\\\\\\\"bg-gray-100 px-1.5 rounded text-gray-500\\\\\\\">{previewTasks.length}</span> </div> <div className=\\\\\\\"max-h-24 overflow-y-auto space-y-1\\\\\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\\\\\"text-[10px] bg-gray-50 p-1 rounded truncate border-l-2 border-indigo-400 pl-2 text-gray-600\\\\\\\">{t.title}</div> )) : <div className=\\\\\\\"text-[10px] text-gray-300 italic text-center py-2\\\\\\\">無安排任務</div>} </div> </div> <button type=\\\\\\\"button\\\\\\\" onClick={confirmSelection} className=\\\\\\\"w-full mt-3 bg-indigo-600 text-white text-xs font-bold py-1.5 rounded hover:bg-indigo-700 transition-colors\\\\\\\">確認日期</button> </div> )}\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useState, useEffect, useRef, useContext } from 'react';\\nimport { Calendar, X, ChevronLeft, ChevronRight, Clock } from 'lucide-react';\\nimport { AppContext } from '../context/AppContext';\\nimport { useClickOutside } from '../hooks/useClickOutside';\\nimport { parseSmartDate, formatDate, getRelativeDateString, isSameDay, isToday } from '../utils';\\n\\nexport const SmartDateInput = ({ label, value, onChange, theme, tasks, innerRef, colorClass }: any) => {\\n  const { themeSettings } = useContext(AppContext);\\n  const [text, setText] = useState(\\\"\\\");\\n  const [isOpen, setIsOpen] = useState(false);\\n  const [currentDate, setCurrentDate] = useState(new Date());\\n  const [hoveredDate, setHoveredDate] = useState<Date | null>(null);\\n  const [highlightedDate, setHighlightedDate] = useState<Date | null>(null);\\n  const [time, setTime] = useState(\\\"09:00\\\");\\n  const containerRef = useRef<HTMLDivElement>(null);\\n  const isMouseDownRef = useRef(false);\\n  const preventReopen = useRef(false);\\n  const localRef = useRef<HTMLButtonElement>(null);\\n  const resolvedRef = innerRef || localRef;\\n  \\n  useClickOutside(containerRef, () => { setIsOpen(false); setText(\\\"\\\"); setHighlightedDate(null); });\\n  \\n  useEffect(() => { if (value) { const d = new Date(value); if (!isNaN(d.getTime())) { setCurrentDate(d); setTime(`${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`); } } }, [value]);\\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => { const val = e.target.value; setText(val); const parsed = parseSmartDate(val, currentDate); if (parsed) { setCurrentDate(parsed); setHighlightedDate(parsed); setHoveredDate(parsed); } else { setHighlightedDate(null); } };\\n  \\n  const confirmSelection = () => {\\n      const targetDate = highlightedDate || hoveredDate || currentDate;\\n      if (targetDate) {\\n          const [h, m] = time.split(':').map(Number);\\n          targetDate.setHours(h, m);\\n          onChange(targetDate.toISOString());\\n          setIsOpen(false);\\n          setText(\\\"\\\");\\n          \\n          preventReopen.current = true;\\n          resolvedRef.current?.focus();\\n          setTimeout(() => preventReopen.current = false, 200);\\n      }\\n  };\\n  \\n  const handleKeyDown = (e: React.KeyboardEvent) => {\\n      if (e.key === 'Enter') {\\n          e.preventDefault();\\n          e.stopPropagation();\\n          if (isOpen) {\\n              confirmSelection();\\n          } else {\\n              setIsOpen(true);\\n          }\\n      } else if (e.key === 'Escape') {\\n          e.preventDefault();\\n          if (isOpen) {\\n              e.stopPropagation();\\n              setIsOpen(false);\\n              setText(\\\"\\\");\\n              \\n              preventReopen.current = true;\\n              resolvedRef.current?.focus();\\n              setTimeout(() => preventReopen.current = false, 200);\\n          }\\n      } else if (e.key === ' ') {\\n          e.preventDefault();\\n          e.stopPropagation();\\n          setIsOpen(true);\\n      }\\n  };\\n\\n  const handleBlur = (e: React.FocusEvent) => {\\n    if (containerRef.current && !containerRef.current.contains(e.relatedTarget as Node)) {\\n        setIsOpen(false);\\n    }\\n  };\\n\\n  const handleFocus = (_e: React.FocusEvent) => {\\n      if (isMouseDownRef.current || preventReopen.current) return;\\n      setIsOpen(true);\\n  };\\n  \\n  const getTasksForDate = (date: Date) => tasks.filter((t:any) => { if (t.status === 'completed' || t.status === 'deleted') return false; const tStart = t.start_date ? new Date(t.start_date) : null; const tDue = t.due_date ? new Date(t.due_date) : null; return (tStart && isSameDay(tStart, date)) || (tDue && isSameDay(tDue, date)); });\\n  const handleDateClick = (day: number) => { const newDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day); setCurrentDate(newDate); setHoveredDate(newDate); setHighlightedDate(newDate); };\\n  const renderDays = () => {\\n    const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();\\n    const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();\\n    const days = [];\\n    for (let i = 0; i < firstDayOfMonth; i++) days.push(<div key={`empty-${i}`} className=\\\"h-8 w-8\\\" />);\\n    for (let d = 1; d <= daysInMonth; d++) {\\n      const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), d);\\n      const isSaved = value && isSameDay(new Date(value), date);\\n      const isHighlighted = highlightedDate && isSameDay(highlightedDate, date);\\n      const dayTasks = getTasksForDate(date);\\n      const count = dayTasks.length;\\n      let dotColor = 'bg-transparent';\\n      if (count >= 1 && count <= 3) dotColor = 'bg-green-400'; else if (count >= 4 && count <= 10) dotColor = 'bg-yellow-400'; else if (count > 10) dotColor = 'bg-red-500';\\n      days.push( <button key={d} type=\\\"button\\\" onClick={() => handleDateClick(d)} onMouseEnter={() => setHoveredDate(date)} className={`h-8 w-8 rounded-full flex items-center justify-center text-xs relative transition-all ${isHighlighted ? `bg-indigo-600/80 text-white font-bold shadow-md` : isSaved ? 'bg-black text-white font-bold' : 'hover:bg-gray-100'} ${isToday(date.toISOString()) && !isSaved && !isHighlighted ? 'text-indigo-600 font-bold' : ''}`}> {d} {!isSaved && !isHighlighted && count > 0 && <div className={`absolute bottom-1 w-1 h-1 rounded-full ${dotColor}`}></div>} </button> );\\n    }\\n    return days;\\n  };\\n  const previewDate = highlightedDate || hoveredDate || (value ? new Date(value) : null);\\n  const previewTasks = previewDate ? getTasksForDate(previewDate) : [];\\n  \\n  const focusRingClass = theme?.buttonRing || 'focus:ring-indigo-300 focus:border-indigo-300';\\n  const textColorClass = colorClass || theme?.text || 'text-gray-400';\\n  const textSizeClass = { small: 'text-[11px]', normal: 'text-xs', large: 'text-sm' }[themeSettings.fontSize as keyof typeof textSizeClass] || 'text-xs';\\n  const fontWeightClass = themeSettings.fontWeight === 'thin' ? 'font-light' : 'font-medium';\\n\\n  return (\\n    <div className=\\\"relative\\\" ref={containerRef} onBlur={handleBlur}>\\n      <button\\n        ref={resolvedRef}\\n        type=\\\"button\\\"\\n        onMouseDown={() => { isMouseDownRef.current = true; setTimeout(() => isMouseDownRef.current = false, 200); }}\\n        onClick={() => setIsOpen(!isOpen)}\\n        onKeyDown={handleKeyDown}\\n        onFocus={handleFocus}\\n        className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${value ? `${textColorClass} bg-white border-transparent shadow-sm ring-1 ring-gray-100` : 'text-gray-400 border-transparent hover:bg-gray-100'} focus:outline-none focus:bg-white focus:ring-1 ${focusRingClass} ${textSizeClass} ${fontWeightClass}`}\\n      >\\n        <Calendar size={13} /> <span>{value ? getRelativeDateString(value) : label}</span> {value && <X size={12} className=\\\"hover:text-red-500\\\" onClick={(e) => { e.stopPropagation(); onChange(null); }} />}\\n      </button>\\n      {isOpen && ( <div className=\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-80 animate-in fade-in zoom-in duration-100\\\"> <div className=\\\"mb-3 relative\\\"> <input autoFocus type=\\\"text\\\" placeholder=\\\"輸入: 5, 明天, 下週五...\\\" className=\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\"flex justify-between items-center mb-2\\\"> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronLeft size={16} /></button> <span className=\\\"font-bold text-sm text-gray-800\\\">{currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })}</span> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronRight size={16} /></button> </div> <div className=\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\">{['日','一','二','三','四','五','六'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\"> <span className=\\\"text-xs text-gray-500 flex items-center gap-1\\\"><Clock size={12} /> 時間</span> <input type=\\\"time\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\" /> </div> <div className=\\\"border-t border-gray-100 pt-3 mt-3\\\"> <div className=\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : '行程'}</span> <span className=\\\"bg-gray-100 px-1.5 rounded text-gray-500\\\">{previewTasks.length}</span> </div> <div className=\\\"max-h-24 overflow-y-auto space-y-1\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\"text-[10px] bg-gray-50 p-1 rounded truncate border-l-2 border-indigo-400 pl-2 text-gray-600\\\">{t.title}</div> )) : <div className=\\\"text-[10px] text-gray-300 italic text-center py-2\\\">無安排任務</div>} </div> </div> <button type=\\\"button\\\" onClick={confirmSelection} className=\\\"w-full mt-3 bg-indigo-600 text-white text-xs font-bold py-1.5 rounded hover:bg-indigo-700 transition-colors\\\">確認日期</button> </div> )}\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":9581,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411976067},{\"originRange\":{\"start\":{\"line\":102,\"character\":0},\"end\":{\"line\":102,\"character\":155}},\"modifyRange\":{\"start\":{\"line\":102,\"character\":0},\"end\":{\"line\":102,\"character\":155}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const textSizeClass = { small: \\\\'text-[11px]\\\\', normal: \\\\'text-xs\\\\', large: \\\\'text-sm\\\\' }[themeSettings.fontSize as \\\\'small\\\\' | \\\\'normal\\\\' | \\\\'large\\\\'] || \\\\'text-xs\\\\';\",\"originAcceptText\":\"  const textSizeClass = { small: 'text-[11px]', normal: 'text-xs', large: 'text-sm' }[themeSettings.fontSize as 'small' | 'normal' | 'large'] || 'text-xs';\",\"originTextLength\":155,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137862},{\"originRange\":{\"start\":{\"line\":43,\"character\":0},\"end\":{\"line\":43,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":43,\"character\":0},\"end\":{\"line\":43,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766421780788},{\"originRange\":{\"start\":{\"line\":43,\"character\":0},\"end\":{\"line\":43,\"character\":30}},\"modifyRange\":{\"start\":{\"line\":43,\"character\":0},\"end\":{\"line\":43,\"character\":30}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          e.stopPropagation();\",\"originAcceptText\":\"          e.stopPropagation();\",\"originTextLength\":30,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766423795825},{\"originRange\":{\"start\":{\"line\":118,\"character\":0},\"end\":{\"line\":118,\"character\":2661}},\"modifyRange\":{\"start\":{\"line\":118,\"character\":0},\"end\":{\"line\":118,\"character\":2661}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      {isOpen && ( <div className=\\\\\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-72 max-w-[90vw] animate-in fade-in zoom-in duration-100\\\\\\\"> <div className=\\\\\\\"mb-3 relative\\\\\\\"> <input autoFocus type=\\\\\\\"text\\\\\\\" placeholder=\\\\\\\"輸入: 5, 明天, 下週五...\\\\\\\" className=\\\\\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\\\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\\\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\\\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\\\\\"flex justify-between items-center mb-2\\\\\\\"> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronLeft size={16} /></button> <span className=\\\\\\\"font-bold text-sm text-gray-800\\\\\\\">{currentDate.toLocaleString(\\\\'default\\\\', { month: \\\\'long\\\\', year: \\\\'numeric\\\\' })}</span> <button type=\\\\\\\"button\\\\\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\\\\\"p-1 hover:bg-gray-100 rounded\\\\\\\"><ChevronRight size={16} /></button> </div> <div className=\\\\\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\\\\\">{[\\\\'日\\\\',\\\\'一\\\\',\\\\'二\\\\',\\\\'三\\\\',\\\\'四\\\\',\\\\'五\\\\',\\\\'六\\\\'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\\\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\\\\\"> <span className=\\\\\\\"text-xs text-gray-500 flex items-center gap-1\\\\\\\"><Clock size={12} /> 時間</span> <input type=\\\\\\\"time\\\\\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\\\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\\\\\" /> </div> <div className=\\\\\\\"border-t border-gray-100 pt-3 mt-3\\\\\\\"> <div className=\\\\\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\\\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : \\\\'行程\\\\'}</span> <span className=\\\\\\\"bg-gray-100 px-1.5 rounded text-gray-500\\\\\\\">{previewTasks.length}</span> </div> <div className=\\\\\\\"max-h-24 overflow-y-auto space-y-1\\\\\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\\\\\"text-[10px] bg-gray-50 p-1 rounded truncate border-l-2 border-indigo-400 pl-2 text-gray-600\\\\\\\">{t.title}</div> )) : <div className=\\\\\\\"text-[10px] text-gray-300 italic text-center py-2\\\\\\\">無安排任務</div>} </div> </div> <button type=\\\\\\\"button\\\\\\\" onClick={confirmSelection} className=\\\\\\\"w-full mt-3 bg-indigo-600 text-white text-xs font-bold py-1.5 rounded hover:bg-indigo-700 transition-colors\\\\\\\">確認日期</button> </div> )}\",\"originAcceptText\":\"      {isOpen && ( <div className=\\\"absolute top-full mt-2 left-0 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 z-50 w-72 max-w-[90vw] animate-in fade-in zoom-in duration-100\\\"> <div className=\\\"mb-3 relative\\\"> <input autoFocus type=\\\"text\\\" placeholder=\\\"輸入: 5, 明天, 下週五...\\\" className=\\\"w-full text-xs border border-gray-200 rounded p-2 focus:ring-2 focus:ring-indigo-100 outline-none pr-8\\\" value={text} onChange={handleInputChange} onKeyDown={handleKeyDown} /> {highlightedDate && <div className=\\\"absolute right-2 top-2 text-[10px] text-indigo-500 font-bold bg-indigo-50 px-1 rounded animate-pulse\\\">識別: {formatDate(highlightedDate.toISOString())}</div>} </div> <div className=\\\"flex justify-between items-center mb-2\\\"> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronLeft size={16} /></button> <span className=\\\"font-bold text-sm text-gray-800\\\">{currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })}</span> <button type=\\\"button\\\" onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className=\\\"p-1 hover:bg-gray-100 rounded\\\"><ChevronRight size={16} /></button> </div> <div className=\\\"grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400\\\">{['日','一','二','三','四','五','六'].map(d => <span key={d}>{d}</span>)}{renderDays()}</div> <div className=\\\"flex items-center justify-between border-t border-gray-100 pt-3 mt-2\\\"> <span className=\\\"text-xs text-gray-500 flex items-center gap-1\\\"><Clock size={12} /> 時間</span> <input type=\\\"time\\\" value={time} onChange={(e) => setTime(e.target.value)} className=\\\"text-sm bg-gray-50 border border-gray-200 rounded px-1 py-0.5 outline-none\\\" /> </div> <div className=\\\"border-t border-gray-100 pt-3 mt-3\\\"> <div className=\\\"text-[10px] font-bold text-gray-400 mb-2 flex justify-between items-center\\\"> <span>{previewDate ? `${previewDate.getMonth()+1}/${previewDate.getDate()} 行程` : '行程'}</span> <span className=\\\"bg-gray-100 px-1.5 rounded text-gray-500\\\">{previewTasks.length}</span> </div> <div className=\\\"max-h-24 overflow-y-auto space-y-1\\\"> {previewTasks.length > 0 ? previewTasks.map((t:any) => ( <div key={t.id} className=\\\"text-[10px] bg-gray-50 p-1 rounded truncate border-l-2 border-indigo-400 pl-2 text-gray-600\\\">{t.title}</div> )) : <div className=\\\"text-[10px] text-gray-300 italic text-center py-2\\\">無安排任務</div>} </div> </div> <button type=\\\"button\\\" onClick={confirmSelection} className=\\\"w-full mt-3 bg-indigo-600 text-white text-xs font-bold py-1.5 rounded hover:bg-indigo-700 transition-colors\\\">確認日期</button> </div> )}\",\"originTextLength\":2661,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766485175523}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/DropdownSelect.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":150,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":150,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useState, useMemo, useRef, useContext } from \\\\'react\\\\';\\\\nimport { Check, Trash2, Plus } from \\\\'lucide-react\\\\';\\\\nimport { AppContext } from \\\\'../context/AppContext\\\\';\\\\nimport { useClickOutside } from \\\\'../hooks/useClickOutside\\\\';\\\\n\\\\nexport const DropdownSelect = ({ icon: Icon, label, items, selectedIds, onSelect, onSearch, placeholder, allowAdd, onDeleteItem, innerRef, multiSelect = false, theme }: any) => {\\\\n  const { themeSettings } = useContext(AppContext);\\\\n  const [isOpen, setIsOpen] = useState(false);\\\\n  const [query, setQuery] = useState(\\\\\\\"\\\\\\\");\\\\n  const [activeIndex, setActiveIndex] = useState(-1);\\\\n  const containerRef = useRef<HTMLDivElement>(null);\\\\n  const preventReopen = useRef(false);\\\\n  const isMouseDownRef = useRef(false);\\\\n  const inputRef = useRef<HTMLInputElement>(null);\\\\n  const localRef = useRef<HTMLButtonElement>(null);\\\\n  const resolvedRef = innerRef || localRef;\\\\n  \\\\n  useClickOutside(containerRef, () => setIsOpen(false));\\\\n  \\\\n  const filteredItems = useMemo(() => {\\\\n      if (!items || !Array.isArray(items)) return [];\\\\n      return items.filter((i: any) => {\\\\n          if (!i) return false;\\\\n          const text = i.title || i.name || \\\\'\\\\';\\\\n          return text.toLowerCase().includes(query.toLowerCase());\\\\n      });\\\\n  }, [items, query]);\\\\n\\\\n  const showAddOption = allowAdd && query.trim() && !filteredItems.some((i:any) => (i.title || i.name || \\\\'\\\\').toLowerCase() === query.trim().toLowerCase());\\\\n  const totalOptions = filteredItems.length + (showAddOption ? 1 : 0);\\\\n  \\\\n  const selectedItem = useMemo(() => {\\\\n      if (selectedIds.length === 0) return null;\\\\n      return items.find((i:any) => selectedIds.includes(i.id));\\\\n  }, [items, selectedIds]);\\\\n\\\\n  const displayLabel = selectedItem ? (selectedItem.title || selectedItem.name || label) : label;\\\\n\\\\n  const handleSelect = (id: string | null, newName?: string) => {\\\\n        onSelect(id, newName);\\\\n        if (multiSelect) {\\\\n            setQuery(\\\\\\\"\\\\\\\");\\\\n            setActiveIndex(-1);\\\\n            setIsOpen(true);\\\\n            setTimeout(() => inputRef.current?.focus(), 0);\\\\n        } else {\\\\n            setQuery(\\\\\\\"\\\\\\\");\\\\n            setIsOpen(false);\\\\n            preventReopen.current = true;\\\\n            resolvedRef.current?.focus();\\\\n            setTimeout(() => preventReopen.current = false, 200);\\\\n        }\\\\n  };\\\\n\\\\n  const handleKeyDown = (e: React.KeyboardEvent) => {\\\\n      if (e.key === \\\\'ArrowDown\\\\') {\\\\n          e.preventDefault();\\\\n          setIsOpen(true);\\\\n          setActiveIndex(prev => (prev === -1 ? 0 : (prev + 1) % totalOptions));\\\\n      } else if (e.key === \\\\'ArrowUp\\\\') {\\\\n          e.preventDefault();\\\\n          setIsOpen(true);\\\\n          setActiveIndex(prev => (prev <= 0 ? totalOptions - 1 : prev - 1));\\\\n      } else if (e.key === \\\\'Enter\\\\') {\\\\n          e.preventDefault();\\\\n          e.stopPropagation();\\\\n          if (!isOpen) {\\\\n              setIsOpen(true);\\\\n          } else {\\\\n              if (activeIndex >= 0 && activeIndex < filteredItems.length) {\\\\n                  handleSelect(filteredItems[activeIndex].id);\\\\n              } else if (showAddOption && (activeIndex === filteredItems.length || activeIndex === -1)) {\\\\n                  handleSelect(null, query);\\\\n              }\\\\n          }\\\\n      } else if (e.key === \\\\'Escape\\\\') {\\\\n          e.preventDefault();\\\\n          if (isOpen) {\\\\n              e.stopPropagation();\\\\n              setIsOpen(false);\\\\n              preventReopen.current = true;\\\\n              resolvedRef.current?.focus();\\\\n              setTimeout(() => preventReopen.current = false, 200);\\\\n          }\\\\n      }\\\\n  };\\\\n\\\\n  const handleBlur = (e: React.FocusEvent) => {\\\\n    if (containerRef.current && !containerRef.current.contains(e.relatedTarget as Node)) {\\\\n        setIsOpen(false);\\\\n    }\\\\n  };\\\\n\\\\n  const handleFocus = (_e: React.FocusEvent) => {\\\\n      if (isMouseDownRef.current || preventReopen.current) return;\\\\n      setIsOpen(true);\\\\n  };\\\\n  \\\\n  const focusRingClass = theme?.buttonRing || \\\\'focus:ring-indigo-300 focus:border-indigo-300\\\\';\\\\n  const textSizeClass = { small: \\\\'text-[11px]\\\\', normal: \\\\'text-xs\\\\', large: \\\\'text-sm\\\\' }[themeSettings.fontSize as keyof typeof textSizeClass] || \\\\'text-xs\\\\';\\\\n  const fontWeightClass = themeSettings.fontWeight === \\\\'thin\\\\' ? \\\\'font-light\\\\' : \\\\'font-medium\\\\';\\\\n\\\\n  return (\\\\n    <div className=\\\\\\\"relative\\\\\\\" ref={containerRef} onBlur={handleBlur}>\\\\n      <button\\\\n        ref={resolvedRef}\\\\n        type=\\\\\\\"button\\\\\\\"\\\\n        onMouseDown={() => { isMouseDownRef.current = true; setTimeout(() => isMouseDownRef.current = false, 200); }}\\\\n        onClick={() => setIsOpen(!isOpen)}\\\\n        onKeyDown={handleKeyDown}\\\\n        onFocus={handleFocus}\\\\n        className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${selectedIds.length > 0 ? \\\\'text-indigo-600 bg-white shadow-sm ring-1 ring-indigo-50 border-transparent\\\\' : \\\\'text-gray-400 border-transparent hover:bg-gray-100\\\\'} focus:outline-none focus:bg-white focus:ring-1 ${focusRingClass} ${textSizeClass} ${fontWeightClass}`}\\\\n      >\\\\n        <Icon size={13} /> <span className=\\\\\\\"truncate max-w-[80px]\\\\\\\">{displayLabel}</span>\\\\n      </button>\\\\n      {isOpen && ( <div className=\\\\\\\"absolute top-full mt-2 left-0 bg-white rounded-lg shadow-xl border border-gray-100 z-50 w-60 p-2 animate-in fade-in zoom-in duration-100\\\\\\\">\\\\n        <input\\\\n            ref={inputRef}\\\\n            autoFocus\\\\n            type=\\\\\\\"text\\\\\\\"\\\\n            placeholder={placeholder}\\\\n            className=\\\\\\\"w-full text-xs bg-gray-50 border-none rounded p-2 mb-1 focus:ring-1 focus:ring-indigo-200 outline-none\\\\\\\"\\\\n            value={query}\\\\n            onChange={e => { setQuery(e.target.value); setActiveIndex(-1); if(onSearch) onSearch(e.target.value); }}\\\\n            onKeyDown={handleKeyDown}\\\\n        />\\\\n        <div className=\\\\\\\"max-h-48 overflow-y-auto space-y-0.5\\\\\\\">\\\\n            {filteredItems.map((item: any, idx: number) => (\\\\n                <div\\\\n                    key={item.id}\\\\n                    onMouseDown={(e) => {\\\\n                        e.preventDefault();\\\\n                        handleSelect(item.id);\\\\n                    }}\\\\n                    onMouseEnter={() => setActiveIndex(idx)}\\\\n                    className={`px-2 py-1.5 text-xs rounded cursor-pointer flex items-center justify-between group ${idx === activeIndex ? \\\\'bg-indigo-50 text-indigo-700\\\\' : \\\\'text-gray-600 hover:bg-gray-50\\\\'}`}\\\\n                >\\\\n                    <span className=\\\\\\\"truncate\\\\\\\">{item.title || item.name}</span>\\\\n                    <div className=\\\\\\\"flex items-center gap-2\\\\\\\">\\\\n                        {selectedIds.includes(item.id) && <Check size={12} className=\\\\\\\"text-indigo-600\\\\\\\" />}\\\\n                        {onDeleteItem && <Trash2 size={12} className=\\\\\\\"text-gray-300 opacity-0 group-hover:opacity-100 hover:text-red-500\\\\\\\" onClick={(e) => { e.stopPropagation(); onDeleteItem(item.id); }} />}\\\\n                    </div>\\\\n                </div>\\\\n            ))}\\\\n            {showAddOption && (\\\\n                <div\\\\n                    onMouseEnter={() => setActiveIndex(filteredItems.length)}\\\\n                    className={`px-2 py-1.5 text-xs cursor-pointer rounded flex items-center gap-1 ${activeIndex === filteredItems.length ? \\\\'bg-indigo-50 text-indigo-700\\\\' : \\\\'text-indigo-600 hover:bg-indigo-50\\\\'}`}\\\\n                    onMouseDown={(e) => { e.preventDefault(); handleSelect(null, query); }}\\\\n                >\\\\n                    <Plus size={12} /> 新增 \\\\\\\"{query}\\\\\\\"\\\\n                </div>\\\\n            )}\\\\n        </div>\\\\n      </div> )}\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useState, useMemo, useRef, useContext } from 'react';\\nimport { Check, Trash2, Plus } from 'lucide-react';\\nimport { AppContext } from '../context/AppContext';\\nimport { useClickOutside } from '../hooks/useClickOutside';\\n\\nexport const DropdownSelect = ({ icon: Icon, label, items, selectedIds, onSelect, onSearch, placeholder, allowAdd, onDeleteItem, innerRef, multiSelect = false, theme }: any) => {\\n  const { themeSettings } = useContext(AppContext);\\n  const [isOpen, setIsOpen] = useState(false);\\n  const [query, setQuery] = useState(\\\"\\\");\\n  const [activeIndex, setActiveIndex] = useState(-1);\\n  const containerRef = useRef<HTMLDivElement>(null);\\n  const preventReopen = useRef(false);\\n  const isMouseDownRef = useRef(false);\\n  const inputRef = useRef<HTMLInputElement>(null);\\n  const localRef = useRef<HTMLButtonElement>(null);\\n  const resolvedRef = innerRef || localRef;\\n  \\n  useClickOutside(containerRef, () => setIsOpen(false));\\n  \\n  const filteredItems = useMemo(() => {\\n      if (!items || !Array.isArray(items)) return [];\\n      return items.filter((i: any) => {\\n          if (!i) return false;\\n          const text = i.title || i.name || '';\\n          return text.toLowerCase().includes(query.toLowerCase());\\n      });\\n  }, [items, query]);\\n\\n  const showAddOption = allowAdd && query.trim() && !filteredItems.some((i:any) => (i.title || i.name || '').toLowerCase() === query.trim().toLowerCase());\\n  const totalOptions = filteredItems.length + (showAddOption ? 1 : 0);\\n  \\n  const selectedItem = useMemo(() => {\\n      if (selectedIds.length === 0) return null;\\n      return items.find((i:any) => selectedIds.includes(i.id));\\n  }, [items, selectedIds]);\\n\\n  const displayLabel = selectedItem ? (selectedItem.title || selectedItem.name || label) : label;\\n\\n  const handleSelect = (id: string | null, newName?: string) => {\\n        onSelect(id, newName);\\n        if (multiSelect) {\\n            setQuery(\\\"\\\");\\n            setActiveIndex(-1);\\n            setIsOpen(true);\\n            setTimeout(() => inputRef.current?.focus(), 0);\\n        } else {\\n            setQuery(\\\"\\\");\\n            setIsOpen(false);\\n            preventReopen.current = true;\\n            resolvedRef.current?.focus();\\n            setTimeout(() => preventReopen.current = false, 200);\\n        }\\n  };\\n\\n  const handleKeyDown = (e: React.KeyboardEvent) => {\\n      if (e.key === 'ArrowDown') {\\n          e.preventDefault();\\n          setIsOpen(true);\\n          setActiveIndex(prev => (prev === -1 ? 0 : (prev + 1) % totalOptions));\\n      } else if (e.key === 'ArrowUp') {\\n          e.preventDefault();\\n          setIsOpen(true);\\n          setActiveIndex(prev => (prev <= 0 ? totalOptions - 1 : prev - 1));\\n      } else if (e.key === 'Enter') {\\n          e.preventDefault();\\n          e.stopPropagation();\\n          if (!isOpen) {\\n              setIsOpen(true);\\n          } else {\\n              if (activeIndex >= 0 && activeIndex < filteredItems.length) {\\n                  handleSelect(filteredItems[activeIndex].id);\\n              } else if (showAddOption && (activeIndex === filteredItems.length || activeIndex === -1)) {\\n                  handleSelect(null, query);\\n              }\\n          }\\n      } else if (e.key === 'Escape') {\\n          e.preventDefault();\\n          if (isOpen) {\\n              e.stopPropagation();\\n              setIsOpen(false);\\n              preventReopen.current = true;\\n              resolvedRef.current?.focus();\\n              setTimeout(() => preventReopen.current = false, 200);\\n          }\\n      }\\n  };\\n\\n  const handleBlur = (e: React.FocusEvent) => {\\n    if (containerRef.current && !containerRef.current.contains(e.relatedTarget as Node)) {\\n        setIsOpen(false);\\n    }\\n  };\\n\\n  const handleFocus = (_e: React.FocusEvent) => {\\n      if (isMouseDownRef.current || preventReopen.current) return;\\n      setIsOpen(true);\\n  };\\n  \\n  const focusRingClass = theme?.buttonRing || 'focus:ring-indigo-300 focus:border-indigo-300';\\n  const textSizeClass = { small: 'text-[11px]', normal: 'text-xs', large: 'text-sm' }[themeSettings.fontSize as keyof typeof textSizeClass] || 'text-xs';\\n  const fontWeightClass = themeSettings.fontWeight === 'thin' ? 'font-light' : 'font-medium';\\n\\n  return (\\n    <div className=\\\"relative\\\" ref={containerRef} onBlur={handleBlur}>\\n      <button\\n        ref={resolvedRef}\\n        type=\\\"button\\\"\\n        onMouseDown={() => { isMouseDownRef.current = true; setTimeout(() => isMouseDownRef.current = false, 200); }}\\n        onClick={() => setIsOpen(!isOpen)}\\n        onKeyDown={handleKeyDown}\\n        onFocus={handleFocus}\\n        className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md transition-all border ${selectedIds.length > 0 ? 'text-indigo-600 bg-white shadow-sm ring-1 ring-indigo-50 border-transparent' : 'text-gray-400 border-transparent hover:bg-gray-100'} focus:outline-none focus:bg-white focus:ring-1 ${focusRingClass} ${textSizeClass} ${fontWeightClass}`}\\n      >\\n        <Icon size={13} /> <span className=\\\"truncate max-w-[80px]\\\">{displayLabel}</span>\\n      </button>\\n      {isOpen && ( <div className=\\\"absolute top-full mt-2 left-0 bg-white rounded-lg shadow-xl border border-gray-100 z-50 w-60 p-2 animate-in fade-in zoom-in duration-100\\\">\\n        <input\\n            ref={inputRef}\\n            autoFocus\\n            type=\\\"text\\\"\\n            placeholder={placeholder}\\n            className=\\\"w-full text-xs bg-gray-50 border-none rounded p-2 mb-1 focus:ring-1 focus:ring-indigo-200 outline-none\\\"\\n            value={query}\\n            onChange={e => { setQuery(e.target.value); setActiveIndex(-1); if(onSearch) onSearch(e.target.value); }}\\n            onKeyDown={handleKeyDown}\\n        />\\n        <div className=\\\"max-h-48 overflow-y-auto space-y-0.5\\\">\\n            {filteredItems.map((item: any, idx: number) => (\\n                <div\\n                    key={item.id}\\n                    onMouseDown={(e) => {\\n                        e.preventDefault();\\n                        handleSelect(item.id);\\n                    }}\\n                    onMouseEnter={() => setActiveIndex(idx)}\\n                    className={`px-2 py-1.5 text-xs rounded cursor-pointer flex items-center justify-between group ${idx === activeIndex ? 'bg-indigo-50 text-indigo-700' : 'text-gray-600 hover:bg-gray-50'}`}\\n                >\\n                    <span className=\\\"truncate\\\">{item.title || item.name}</span>\\n                    <div className=\\\"flex items-center gap-2\\\">\\n                        {selectedIds.includes(item.id) && <Check size={12} className=\\\"text-indigo-600\\\" />}\\n                        {onDeleteItem && <Trash2 size={12} className=\\\"text-gray-300 opacity-0 group-hover:opacity-100 hover:text-red-500\\\" onClick={(e) => { e.stopPropagation(); onDeleteItem(item.id); }} />}\\n                    </div>\\n                </div>\\n            ))}\\n            {showAddOption && (\\n                <div\\n                    onMouseEnter={() => setActiveIndex(filteredItems.length)}\\n                    className={`px-2 py-1.5 text-xs cursor-pointer rounded flex items-center gap-1 ${activeIndex === filteredItems.length ? 'bg-indigo-50 text-indigo-700' : 'text-indigo-600 hover:bg-indigo-50'}`}\\n                    onMouseDown={(e) => { e.preventDefault(); handleSelect(null, query); }}\\n                >\\n                    <Plus size={12} /> 新增 \\\"{query}\\\"\\n                </div>\\n            )}\\n        </div>\\n      </div> )}\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":7384,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766411976068},{\"originRange\":{\"start\":{\"line\":99,\"character\":0},\"end\":{\"line\":99,\"character\":155}},\"modifyRange\":{\"start\":{\"line\":99,\"character\":0},\"end\":{\"line\":99,\"character\":155}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const textSizeClass = { small: \\\\'text-[11px]\\\\', normal: \\\\'text-xs\\\\', large: \\\\'text-sm\\\\' }[themeSettings.fontSize as \\\\'small\\\\' | \\\\'normal\\\\' | \\\\'large\\\\'] || \\\\'text-xs\\\\';\",\"originAcceptText\":\"  const textSizeClass = { small: 'text-[11px]', normal: 'text-xs', large: 'text-sm' }[themeSettings.fontSize as 'small' | 'normal' | 'large'] || 'text-xs';\",\"originTextLength\":155,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412137858}]",
  "range-cache-file:///Users/leegary/ai_completion/nginx.conf": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"server {\\\\n    listen 80;\\\\n    server_name localhost;\\\\n\\\\n    location / {\\\\n        root /usr/share/nginx/html;\\\\n        index index.html index.htm;\\\\n        try_files $uri $uri/ /index.html;\\\\n    }\\\\n\\\\n    error_page 500 502 503 504 /50x.html;\\\\n    location = /50x.html {\\\\n        root /usr/share/nginx/html;\\\\n    }\\\\n}\\\\n\",\"originAcceptText\":\"server {\\n    listen 80;\\n    server_name localhost;\\n\\n    location / {\\n        root /usr/share/nginx/html;\\n        index index.html index.htm;\\n        try_files $uri $uri/ /index.html;\\n    }\\n\\n    error_page 500 502 503 504 /50x.html;\\n    location = /50x.html {\\n        root /usr/share/nginx/html;\\n    }\\n}\\n\",\"originTextLength\":303,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412147307}]",
  "range-cache-file:///Users/leegary/ai_completion/Dockerfile": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"# Stage 1: Build the React application\\\\nFROM node:18-alpine as build\\\\n\\\\nWORKDIR /app\\\\n\\\\nCOPY package*.json ./\\\\nRUN npm ci\\\\n\\\\nCOPY . .\\\\nRUN npm run build\\\\n\\\\n# Stage 2: Serve with Nginx\\\\nFROM nginx:alpine\\\\n\\\\nCOPY --from=build /app/dist /usr/share/nginx/html\\\\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\\\\n\\\\nEXPOSE 80\\\\n\\\\nCMD [\\\\\\\"nginx\\\\\\\", \\\\\\\"-g\\\\\\\", \\\\\\\"daemon off;\\\\\\\"]\\\\n\",\"originAcceptText\":\"# Stage 1: Build the React application\\nFROM node:18-alpine as build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\nRUN npm ci\\n\\nCOPY . .\\nRUN npm run build\\n\\n# Stage 2: Serve with Nginx\\nFROM nginx:alpine\\n\\nCOPY --from=build /app/dist /usr/share/nginx/html\\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\\n\\nEXPOSE 80\\n\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\",\"originTextLength\":336,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412147309}]",
  "range-cache-file:///Users/leegary/ai_completion/docker-compose.yml": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":9,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":9,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"version: \\\\'3.8\\\\'\\\\n\\\\nservices:\\\\n  web:\\\\n    build: .\\\\n    ports:\\\\n      - \\\\\\\"3000:80\\\\\\\"\\\\n    environment:\\\\n      - VITE_SUPABASE_URL=${VITE_SUPABASE_URL}\\\\n      - VITE_SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}\\\\n\",\"originAcceptText\":\"version: '3.8'\\n\\nservices:\\n  web:\\n    build: .\\n    ports:\\n      - \\\"3000:80\\\"\\n    environment:\\n      - VITE_SUPABASE_URL=${VITE_SUPABASE_URL}\\n      - VITE_SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}\\n\",\"originTextLength\":196,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412147311}]",
  "range-cache-file:///Users/leegary/ai_completion/.github/workflows/ci.yml": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":22,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":22,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"name: CI\\\\n\\\\non:\\\\n  push:\\\\n    branches: [ main ]\\\\n  pull_request:\\\\n    branches: [ main ]\\\\n\\\\njobs:\\\\n  build:\\\\n    runs-on: ubuntu-latest\\\\n\\\\n    steps:\\\\n    - uses: actions/checkout@v3\\\\n\\\\n    - name: Use Node.js 18.x\\\\n      uses: actions/setup-node@v3\\\\n      with:\\\\n        node-version: 18.x\\\\n        cache: \\\\'npm\\\\'\\\\n\\\\n    - name: Install dependencies\\\\n      run: npm ci\\\\n\\\\n    - name: Run Lint\\\\n      run: npm run lint\\\\n\\\\n    - name: Build\\\\n      run: npm run build\\\\n\",\"originAcceptText\":\"name: CI\\n\\non:\\n  push:\\n    branches: [ main ]\\n  pull_request:\\n    branches: [ main ]\\n\\njobs:\\n  build:\\n    runs-on: ubuntu-latest\\n\\n    steps:\\n    - uses: actions/checkout@v3\\n\\n    - name: Use Node.js 18.x\\n      uses: actions/setup-node@v3\\n      with:\\n        node-version: 18.x\\n        cache: 'npm'\\n\\n    - name: Install dependencies\\n      run: npm ci\\n\\n    - name: Run Lint\\n      run: npm run lint\\n\\n    - name: Build\\n      run: npm run build\\n\",\"originTextLength\":437,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412152427}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/Login.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":158,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":158,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useState } from \\\\'react\\\\';\\\\nimport { supabase } from \\\\'../supabaseClient\\\\';\\\\nimport { Layout, Mail, Lock, Loader2, ArrowRight } from \\\\'lucide-react\\\\';\\\\n\\\\nexport const Login = () => {\\\\n  const [loading, setLoading] = useState(false);\\\\n  const [email, setEmail] = useState(\\\\'\\\\');\\\\n  const [password, setPassword] = useState(\\\\'\\\\');\\\\n  const [mode, setMode] = useState<\\\\'signin\\\\' | \\\\'signup\\\\'>(\\\\'signin\\\\');\\\\n  const [error, setError] = useState<string | null>(null);\\\\n  const [message, setMessage] = useState<string | null>(null);\\\\n\\\\n  const handleAuth = async (e: React.FormEvent) => {\\\\n    e.preventDefault();\\\\n    setLoading(true);\\\\n    setError(null);\\\\n    setMessage(null);\\\\n\\\\n    try {\\\\n      if (mode === \\\\'signup\\\\') {\\\\n        const { error } = await supabase.auth.signUp({\\\\n          email,\\\\n          password,\\\\n        });\\\\n        if (error) throw error;\\\\n        setMessage(\\\\'請檢查您的電子郵件以進行驗證。\\\\');\\\\n      } else {\\\\n        const { error } = await supabase.auth.signInWithPassword({\\\\n          email,\\\\n          password,\\\\n        });\\\\n        if (error) throw error;\\\\n      }\\\\n    } catch (err: any) {\\\\n      setError(err.message);\\\\n    } finally {\\\\n      setLoading(false);\\\\n    }\\\\n  };\\\\n\\\\n  const handleOAuth = async (provider: \\\\'google\\\\') => {\\\\n    const { error } = await supabase.auth.signInWithOAuth({\\\\n      provider,\\\\n      options: {\\\\n        redirectTo: window.location.origin\\\\n      }\\\\n    });\\\\n    if (error) setError(error.message);\\\\n  };\\\\n\\\\n  return (\\\\n    <div className=\\\\\\\"min-h-screen flex items-center justify-center bg-gray-50 p-4\\\\\\\">\\\\n      <div className=\\\\\\\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 border border-gray-100\\\\\\\">\\\\n        <div className=\\\\\\\"flex flex-col items-center mb-8\\\\\\\">\\\\n          <div className=\\\\\\\"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white mb-4 shadow-lg shadow-indigo-200\\\\\\\">\\\\n            <Layout size={24} />\\\\n          </div>\\\\n          <h1 className=\\\\\\\"text-2xl font-bold text-gray-900 tracking-tight\\\\\\\">Things Clone</h1>\\\\n          <p className=\\\\\\\"text-sm text-gray-500 mt-2\\\\\\\">專注於您的任務</p>\\\\n        </div>\\\\n\\\\n        {error && (\\\\n          <div className=\\\\\\\"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100\\\\\\\">\\\\n            {error}\\\\n          </div>\\\\n        )}\\\\n\\\\n        {message && (\\\\n          <div className=\\\\\\\"mb-4 p-3 bg-green-50 text-green-600 text-sm rounded-lg border border-green-100\\\\\\\">\\\\n            {message}\\\\n          </div>\\\\n        )}\\\\n\\\\n        <form onSubmit={handleAuth} className=\\\\\\\"space-y-4\\\\\\\">\\\\n          <div>\\\\n            <label className=\\\\\\\"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1\\\\\\\">Email</label>\\\\n            <div className=\\\\\\\"relative\\\\\\\">\\\\n              <Mail className=\\\\\\\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\\\\\\\" size={16} />\\\\n              <input\\\\n                type=\\\\\\\"email\\\\\\\"\\\\n                required\\\\n                value={email}\\\\n                onChange={(e) => setEmail(e.target.value)}\\\\n                className=\\\\\\\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm\\\\\\\"\\\\n                placeholder=\\\\\\\"name@example.com\\\\\\\"\\\\n              />\\\\n            </div>\\\\n          </div>\\\\n\\\\n          <div>\\\\n            <label className=\\\\\\\"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1\\\\\\\">Password</label>\\\\n            <div className=\\\\\\\"relative\\\\\\\">\\\\n              <Lock className=\\\\\\\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\\\\\\\" size={16} />\\\\n              <input\\\\n                type=\\\\\\\"password\\\\\\\"\\\\n                required\\\\n                value={password}\\\\n                onChange={(e) => setPassword(e.target.value)}\\\\n                className=\\\\\\\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm\\\\\\\"\\\\n                placeholder=\\\\\\\"••••••••\\\\\\\"\\\\n                minLength={6}\\\\n              />\\\\n            </div>\\\\n          </div>\\\\n\\\\n          <button\\\\n            type=\\\\\\\"submit\\\\\\\"\\\\n            disabled={loading}\\\\n            className=\\\\\\\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 disabled:opacity-70 disabled:cursor-not-allowed\\\\\\\"\\\\n          >\\\\n            {loading ? <Loader2 className=\\\\\\\"animate-spin\\\\\\\" size={18} /> : (\\\\n              <>\\\\n                {mode === \\\\'signin\\\\' ? \\\\'登入\\\\' : \\\\'註冊帳號\\\\'}\\\\n                <ArrowRight size={16} />\\\\n              </>\\\\n            )}\\\\n          </button>\\\\n        </form>\\\\n\\\\n        <div className=\\\\\\\"mt-6\\\\\\\">\\\\n          <div className=\\\\\\\"relative\\\\\\\">\\\\n            <div className=\\\\\\\"absolute inset-0 flex items-center\\\\\\\">\\\\n              <div className=\\\\\\\"w-full border-t border-gray-200\\\\\\\"></div>\\\\n            </div>\\\\n            <div className=\\\\\\\"relative flex justify-center text-sm\\\\\\\">\\\\n              <span className=\\\\\\\"px-2 bg-white text-gray-500 text-xs\\\\\\\">或者使用</span>\\\\n            </div>\\\\n          </div>\\\\n\\\\n          <div className=\\\\\\\"mt-6 grid grid-cols-1 gap-3\\\\\\\">\\\\n            <button\\\\n              type=\\\\\\\"button\\\\\\\"\\\\n              onClick={() => handleOAuth(\\\\'google\\\\')}\\\\n              className=\\\\\\\"w-full inline-flex justify-center py-2.5 px-4 border border-gray-200 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors\\\\\\\"\\\\n            >\\\\n              <svg className=\\\\\\\"h-5 w-5 mr-2\\\\\\\" viewBox=\\\\\\\"0 0 24 24\\\\\\\">\\\\n                <path\\\\n                  d=\\\\\\\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\\\\\\\"\\\\n                  fill=\\\\\\\"#4285F4\\\\\\\"\\\\n                />\\\\n                <path\\\\n                  d=\\\\\\\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\\\\\\\"\\\\n                  fill=\\\\\\\"#34A853\\\\\\\"\\\\n                />\\\\n                <path\\\\n                  d=\\\\\\\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\\\\\\\"\\\\n                  fill=\\\\\\\"#FBBC05\\\\\\\"\\\\n                />\\\\n                <path\\\\n                  d=\\\\\\\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\\\\\\\"\\\\n                  fill=\\\\\\\"#EA4335\\\\\\\"\\\\n                />\\\\n              </svg>\\\\n              Google\\\\n            </button>\\\\n          </div>\\\\n        </div>\\\\n\\\\n        <div className=\\\\\\\"mt-6 text-center\\\\\\\">\\\\n          <button\\\\n            type=\\\\\\\"button\\\\\\\"\\\\n            onClick={() => setMode(mode === \\\\'signin\\\\' ? \\\\'signup\\\\' : \\\\'signin\\\\')}\\\\n            className=\\\\\\\"text-sm text-indigo-600 hover:text-indigo-500 font-medium\\\\\\\"\\\\n          >\\\\n            {mode === \\\\'signin\\\\' ? \\\\'還沒有帳號？立即註冊\\\\' : \\\\'已經有帳號？登入\\\\'}\\\\n          </button>\\\\n        </div>\\\\n      </div>\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useState } from 'react';\\nimport { supabase } from '../supabaseClient';\\nimport { Layout, Mail, Lock, Loader2, ArrowRight } from 'lucide-react';\\n\\nexport const Login = () => {\\n  const [loading, setLoading] = useState(false);\\n  const [email, setEmail] = useState('');\\n  const [password, setPassword] = useState('');\\n  const [mode, setMode] = useState<'signin' | 'signup'>('signin');\\n  const [error, setError] = useState<string | null>(null);\\n  const [message, setMessage] = useState<string | null>(null);\\n\\n  const handleAuth = async (e: React.FormEvent) => {\\n    e.preventDefault();\\n    setLoading(true);\\n    setError(null);\\n    setMessage(null);\\n\\n    try {\\n      if (mode === 'signup') {\\n        const { error } = await supabase.auth.signUp({\\n          email,\\n          password,\\n        });\\n        if (error) throw error;\\n        setMessage('請檢查您的電子郵件以進行驗證。');\\n      } else {\\n        const { error } = await supabase.auth.signInWithPassword({\\n          email,\\n          password,\\n        });\\n        if (error) throw error;\\n      }\\n    } catch (err: any) {\\n      setError(err.message);\\n    } finally {\\n      setLoading(false);\\n    }\\n  };\\n\\n  const handleOAuth = async (provider: 'google') => {\\n    const { error } = await supabase.auth.signInWithOAuth({\\n      provider,\\n      options: {\\n        redirectTo: window.location.origin\\n      }\\n    });\\n    if (error) setError(error.message);\\n  };\\n\\n  return (\\n    <div className=\\\"min-h-screen flex items-center justify-center bg-gray-50 p-4\\\">\\n      <div className=\\\"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 border border-gray-100\\\">\\n        <div className=\\\"flex flex-col items-center mb-8\\\">\\n          <div className=\\\"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white mb-4 shadow-lg shadow-indigo-200\\\">\\n            <Layout size={24} />\\n          </div>\\n          <h1 className=\\\"text-2xl font-bold text-gray-900 tracking-tight\\\">Things Clone</h1>\\n          <p className=\\\"text-sm text-gray-500 mt-2\\\">專注於您的任務</p>\\n        </div>\\n\\n        {error && (\\n          <div className=\\\"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100\\\">\\n            {error}\\n          </div>\\n        )}\\n\\n        {message && (\\n          <div className=\\\"mb-4 p-3 bg-green-50 text-green-600 text-sm rounded-lg border border-green-100\\\">\\n            {message}\\n          </div>\\n        )}\\n\\n        <form onSubmit={handleAuth} className=\\\"space-y-4\\\">\\n          <div>\\n            <label className=\\\"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1\\\">Email</label>\\n            <div className=\\\"relative\\\">\\n              <Mail className=\\\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\\\" size={16} />\\n              <input\\n                type=\\\"email\\\"\\n                required\\n                value={email}\\n                onChange={(e) => setEmail(e.target.value)}\\n                className=\\\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm\\\"\\n                placeholder=\\\"name@example.com\\\"\\n              />\\n            </div>\\n          </div>\\n\\n          <div>\\n            <label className=\\\"block text-xs font-bold text-gray-500 uppercase mb-1 ml-1\\\">Password</label>\\n            <div className=\\\"relative\\\">\\n              <Lock className=\\\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\\\" size={16} />\\n              <input\\n                type=\\\"password\\\"\\n                required\\n                value={password}\\n                onChange={(e) => setPassword(e.target.value)}\\n                className=\\\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-400 outline-none transition-all text-sm\\\"\\n                placeholder=\\\"••••••••\\\"\\n                minLength={6}\\n              />\\n            </div>\\n          </div>\\n\\n          <button\\n            type=\\\"submit\\\"\\n            disabled={loading}\\n            className=\\\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 disabled:opacity-70 disabled:cursor-not-allowed\\\"\\n          >\\n            {loading ? <Loader2 className=\\\"animate-spin\\\" size={18} /> : (\\n              <>\\n                {mode === 'signin' ? '登入' : '註冊帳號'}\\n                <ArrowRight size={16} />\\n              </>\\n            )}\\n          </button>\\n        </form>\\n\\n        <div className=\\\"mt-6\\\">\\n          <div className=\\\"relative\\\">\\n            <div className=\\\"absolute inset-0 flex items-center\\\">\\n              <div className=\\\"w-full border-t border-gray-200\\\"></div>\\n            </div>\\n            <div className=\\\"relative flex justify-center text-sm\\\">\\n              <span className=\\\"px-2 bg-white text-gray-500 text-xs\\\">或者使用</span>\\n            </div>\\n          </div>\\n\\n          <div className=\\\"mt-6 grid grid-cols-1 gap-3\\\">\\n            <button\\n              type=\\\"button\\\"\\n              onClick={() => handleOAuth('google')}\\n              className=\\\"w-full inline-flex justify-center py-2.5 px-4 border border-gray-200 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors\\\"\\n            >\\n              <svg className=\\\"h-5 w-5 mr-2\\\" viewBox=\\\"0 0 24 24\\\">\\n                <path\\n                  d=\\\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\\\"\\n                  fill=\\\"#4285F4\\\"\\n                />\\n                <path\\n                  d=\\\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\\\"\\n                  fill=\\\"#34A853\\\"\\n                />\\n                <path\\n                  d=\\\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\\\"\\n                  fill=\\\"#FBBC05\\\"\\n                />\\n                <path\\n                  d=\\\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\\\"\\n                  fill=\\\"#EA4335\\\"\\n                />\\n              </svg>\\n              Google\\n            </button>\\n          </div>\\n        </div>\\n\\n        <div className=\\\"mt-6 text-center\\\">\\n          <button\\n            type=\\\"button\\\"\\n            onClick={() => setMode(mode === 'signin' ? 'signup' : 'signin')}\\n            className=\\\"text-sm text-indigo-600 hover:text-indigo-500 font-medium\\\"\\n          >\\n            {mode === 'signin' ? '還沒有帳號？立即註冊' : '已經有帳號？登入'}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":6683,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412205772},{\"originRange\":{\"start\":{\"line\":19,\"character\":0},\"end\":{\"line\":19,\"character\":72}},\"modifyRange\":{\"start\":{\"line\":19,\"character\":0},\"end\":{\"line\":19,\"character\":72}},\"action\":\"None\",\"isLine\":false,\"originText\":\"      if (!supabase) throw new Error(\\\\\\\"Supabase client not initialized\\\\\\\");\",\"originAcceptText\":\"      if (!supabase) throw new Error(\\\"Supabase client not initialized\\\");\",\"originTextLength\":72,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766418099715},{\"originRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":26}},\"modifyRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":26}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (!supabase) return;\",\"originAcceptText\":\"    if (!supabase) return;\",\"originTextLength\":26,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766418099718},{\"originRange\":{\"start\":{\"line\":49,\"character\":0},\"end\":{\"line\":55,\"character\":5}},\"modifyRange\":{\"start\":{\"line\":49,\"character\":0},\"end\":{\"line\":55,\"character\":5}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (error) {\\\\n        if (error.message.includes(\\\\'Unsupported provider\\\\')) {\\\\n            setError(\\\\'Google 登入尚未在後台啟用。請聯繫管理員或使用 Email 登入。\\\\');\\\\n        } else {\\\\n            setError(error.message);\\\\n        }\\\\n    }\",\"originAcceptText\":\"    if (error) {\\n        if (error.message.includes('Unsupported provider')) {\\n            setError('Google 登入尚未在後台啟用。請聯繫管理員或使用 Email 登入。');\\n        } else {\\n            setError(error.message);\\n        }\\n    }\",\"originTextLength\":210,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766422851312},{\"originRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":27,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":12,\"character\":0},\"end\":{\"line\":27,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const [guestId, setGuestId] = useState(\\\\'\\\\');\\\\n  const [useGuest, setUseGuest] = useState(false);\\\\n\\\\n  const handleGuestLogin = (e: React.FormEvent) => {\\\\n      e.preventDefault();\\\\n      if (!guestId.trim()) return;\\\\n      \\\\n      // Validate UUID format basic check\\\\n      if (guestId.length < 10) {\\\\n          setError(\\\\'ID 格式似乎不正確，請輸入完整的 UUID\\\\');\\\\n          return;\\\\n      }\\\\n      \\\\n      localStorage.setItem(\\\\'gtd_user_id\\\\', guestId.trim());\\\\n      window.location.href = \\\\'/\\\\'; // Hard reload to pick up the new ID in AppContext\\\\n  };\\\\n\",\"originAcceptText\":\"  const [guestId, setGuestId] = useState('');\\n  const [useGuest, setUseGuest] = useState(false);\\n\\n  const handleGuestLogin = (e: React.FormEvent) => {\\n      e.preventDefault();\\n      if (!guestId.trim()) return;\\n      \\n      // Validate UUID format basic check\\n      if (guestId.length < 10) {\\n          setError('ID 格式似乎不正確，請輸入完整的 UUID');\\n          return;\\n      }\\n      \\n      localStorage.setItem('gtd_user_id', guestId.trim());\\n      window.location.href = '/'; // Hard reload to pick up the new ID in AppContext\\n  };\\n\",\"originTextLength\":522,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766487991704},{\"originRange\":{\"start\":{\"line\":163,\"character\":0},\"end\":{\"line\":195,\"character\":14}},\"modifyRange\":{\"start\":{\"line\":163,\"character\":0},\"end\":{\"line\":195,\"character\":14}},\"action\":\"None\",\"isLine\":false,\"originText\":\"          </div>\\\\n        </div>\\\\n\\\\n        <div className=\\\\\\\"mt-6\\\\\\\">\\\\n          <div className=\\\\\\\"relative\\\\\\\">\\\\n            <div className=\\\\\\\"absolute inset-0 flex items-center\\\\\\\">\\\\n              <div className=\\\\\\\"w-full border-t border-gray-200\\\\\\\"></div>\\\\n            </div>\\\\n            <div className=\\\\\\\"relative flex justify-center text-sm\\\\\\\">\\\\n              <span className=\\\\\\\"px-2 bg-white text-gray-500 text-xs\\\\\\\">開發者 / 訪客模式</span>\\\\n            </div>\\\\n          </div>\\\\n\\\\n          <div className=\\\\\\\"mt-4\\\\\\\">\\\\n            {!useGuest ? (\\\\n                <button \\\\n                    onClick={() => setUseGuest(true)}\\\\n                    className=\\\\\\\"w-full text-xs text-gray-400 hover:text-gray-600 underline text-center\\\\\\\"\\\\n                >\\\\n                    使用特定 Guest ID 登入\\\\n                </button>\\\\n            ) : (\\\\n                <form onSubmit={handleGuestLogin} className=\\\\\\\"flex gap-2\\\\\\\">\\\\n                    <input \\\\n                        type=\\\\\\\"text\\\\\\\" \\\\n                        placeholder=\\\\\\\"輸入 Guest ID (UUID)...\\\\\\\" \\\\n                        value={guestId}\\\\n                        onChange={e => setGuestId(e.target.value)}\\\\n                        className=\\\\\\\"flex-1 text-xs border border-gray-200 rounded px-2 py-1.5 focus:ring-1 focus:ring-indigo-300 outline-none\\\\\\\"\\\\n                    />\\\\n                    <button type=\\\\\\\"submit\\\\\\\" className=\\\\\\\"text-xs bg-gray-800 text-white px-3 py-1.5 rounded hover:bg-black transition-colors\\\\\\\">\\\\n                        進入\\\\n                    </button>\\\\n                </form>\\\\n            )}\",\"originAcceptText\":\"          </div>\\n        </div>\\n\\n        <div className=\\\"mt-6\\\">\\n          <div className=\\\"relative\\\">\\n            <div className=\\\"absolute inset-0 flex items-center\\\">\\n              <div className=\\\"w-full border-t border-gray-200\\\"></div>\\n            </div>\\n            <div className=\\\"relative flex justify-center text-sm\\\">\\n              <span className=\\\"px-2 bg-white text-gray-500 text-xs\\\">開發者 / 訪客模式</span>\\n            </div>\\n          </div>\\n\\n          <div className=\\\"mt-4\\\">\\n            {!useGuest ? (\\n                <button \\n                    onClick={() => setUseGuest(true)}\\n                    className=\\\"w-full text-xs text-gray-400 hover:text-gray-600 underline text-center\\\"\\n                >\\n                    使用特定 Guest ID 登入\\n                </button>\\n            ) : (\\n                <form onSubmit={handleGuestLogin} className=\\\"flex gap-2\\\">\\n                    <input \\n                        type=\\\"text\\\" \\n                        placeholder=\\\"輸入 Guest ID (UUID)...\\\" \\n                        value={guestId}\\n                        onChange={e => setGuestId(e.target.value)}\\n                        className=\\\"flex-1 text-xs border border-gray-200 rounded px-2 py-1.5 focus:ring-1 focus:ring-indigo-300 outline-none\\\"\\n                    />\\n                    <button type=\\\"submit\\\" className=\\\"text-xs bg-gray-800 text-white px-3 py-1.5 rounded hover:bg-black transition-colors\\\">\\n                        進入\\n                    </button>\\n                </form>\\n            )}\",\"originTextLength\":1492,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766487991713},{\"originRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766489070355},{\"originRange\":{\"start\":{\"line\":126,\"character\":0},\"end\":{\"line\":126,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":126,\"character\":0},\"end\":{\"line\":126,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766489070363},{\"originRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":41,\"character\":0},\"end\":{\"line\":41,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766490980338},{\"originRange\":{\"start\":{\"line\":126,\"character\":0},\"end\":{\"line\":126,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":126,\"character\":0},\"end\":{\"line\":126,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766490980348}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/JournalView.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":139,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":139,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useState, useEffect, useContext } from \\\\'react\\\\';\\\\nimport ReactMarkdown from \\\\'react-markdown\\\\';\\\\nimport { Book, Plus, Save, Trash2, Calendar } from \\\\'lucide-react\\\\';\\\\nimport { supabase } from \\\\'../supabaseClient\\\\';\\\\nimport { AppContext } from \\\\'../context/AppContext\\\\';\\\\nimport { isToday } from \\\\'../utils\\\\';\\\\n\\\\ninterface JournalEntry {\\\\n  id: string;\\\\n  user_id: string;\\\\n  date: string; // ISO date string YYYY-MM-DD\\\\n  content: string;\\\\n  created_at: string;\\\\n}\\\\n\\\\nexport const JournalView = () => {\\\\n  const { user } = useContext(AppContext);\\\\n  const [entries, setEntries] = useState<JournalEntry[]>([]);\\\\n  const [selectedId, setSelectedId] = useState<string | null>(null);\\\\n  const [content, setContent] = useState(\\\\'\\\\');\\\\n  const [isEditing, setIsEditing] = useState(false);\\\\n  const [loading, setLoading] = useState(true);\\\\n\\\\n  useEffect(() => {\\\\n    if (!user) return;\\\\n    fetchJournals();\\\\n  }, [user]);\\\\n\\\\n  useEffect(() => {\\\\n    if (selectedId) {\\\\n      const entry = entries.find(e => e.id === selectedId);\\\\n      if (entry) {\\\\n        setContent(entry.content);\\\\n        setIsEditing(false);\\\\n      }\\\\n    } else {\\\\n        setContent(\\\\'\\\\');\\\\n    }\\\\n  }, [selectedId, entries]);\\\\n\\\\n  const fetchJournals = async () => {\\\\n    if (!supabase) return;\\\\n    const { data, error } = await supabase.from(\\\\'journals\\\\').select(\\\\'*\\\\').order(\\\\'date\\\\', { ascending: false });\\\\n    if (data) setEntries(data);\\\\n    setLoading(false);\\\\n  };\\\\n\\\\n  const handleCreate = async () => {\\\\n    const today = new Date().toISOString().split(\\\\'T\\\\')[0];\\\\n    const existing = entries.find(e => e.date === today);\\\\n    if (existing) {\\\\n      setSelectedId(existing.id);\\\\n      return;\\\\n    }\\\\n\\\\n    const newEntry = {\\\\n      user_id: user.id,\\\\n      date: today,\\\\n      content: \\\\'# Today\\\\\\\\\\\\'s Journal\\\\\\\\n\\\\\\\\nWrite something...\\\\',\\\\n    };\\\\n\\\\n    const { data, error } = await supabase.from(\\\\'journals\\\\').insert([newEntry]).select();\\\\n    if (data) {\\\\n      setEntries([data[0], ...entries]);\\\\n      setSelectedId(data[0].id);\\\\n      setIsEditing(true);\\\\n    }\\\\n  };\\\\n\\\\n  const handleSave = async () => {\\\\n    if (!selectedId) return;\\\\n    const { error } = await supabase.from(\\\\'journals\\\\').update({ content }).eq(\\\\'id\\\\', selectedId);\\\\n    if (!error) {\\\\n      setEntries(entries.map(e => e.id === selectedId ? { ...e, content } : e));\\\\n      setIsEditing(false);\\\\n    }\\\\n  };\\\\n\\\\n  const handleDelete = async (id: string) => {\\\\n    if (!confirm(\\\\'Are you sure?\\\\')) return;\\\\n    await supabase.from(\\\\'journals\\\\').delete().eq(\\\\'id\\\\', id);\\\\n    setEntries(entries.filter(e => e.id !== id));\\\\n    if (selectedId === id) setSelectedId(null);\\\\n  };\\\\n\\\\n  return (\\\\n    <div className=\\\\\\\"flex h-full bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\\\\\\\">\\\\n      <div className=\\\\\\\"w-64 border-r border-gray-200 bg-gray-50 flex flex-col\\\\\\\">\\\\n        <div className=\\\\\\\"p-4 border-b border-gray-200 flex justify-between items-center\\\\\\\">\\\\n          <h2 className=\\\\\\\"font-bold text-gray-700 flex items-center gap-2\\\\\\\"><Book size={16}/> Journal</h2>\\\\n          <button onClick={handleCreate} className=\\\\\\\"p-1 hover:bg-gray-200 rounded text-indigo-600\\\\\\\"><Plus size={18} /></button>\\\\n        </div>\\\\n        <div className=\\\\\\\"flex-1 overflow-y-auto p-2 space-y-1\\\\\\\">\\\\n          {entries.map(entry => (\\\\n            <button\\\\n              key={entry.id}\\\\n              onClick={() => setSelectedId(entry.id)}\\\\n              className={`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between group transition-colors ${selectedId === entry.id ? \\\\'bg-white shadow-sm text-indigo-600 font-medium\\\\' : \\\\'text-gray-600 hover:bg-gray-100\\\\'}`}\\\\n            >\\\\n              <div className=\\\\\\\"flex items-center gap-2\\\\\\\">\\\\n                <Calendar size={14} className={selectedId === entry.id ? \\\\'text-indigo-500\\\\' : \\\\'text-gray-400\\\\'} />\\\\n                <span>{entry.date}</span>\\\\n                {isToday(entry.date) && <span className=\\\\\\\"text-[10px] bg-indigo-100 text-indigo-600 px-1 rounded\\\\\\\">Today</span>}\\\\n              </div>\\\\n              <Trash2 size={12} className=\\\\\\\"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500\\\\\\\" onClick={(e) => { e.stopPropagation(); handleDelete(entry.id); }} />\\\\n            </button>\\\\n          ))}\\\\n          {entries.length === 0 && !loading && <div className=\\\\\\\"text-xs text-gray-400 text-center py-4\\\\\\\">No entries</div>}\\\\n        </div>\\\\n      </div>\\\\n      <div className=\\\\\\\"flex-1 flex flex-col\\\\\\\">\\\\n        {selectedId ? (\\\\n          <>\\\\n            <div className=\\\\\\\"p-3 border-b border-gray-200 flex justify-between items-center bg-white\\\\\\\">\\\\n              <span className=\\\\\\\"text-sm text-gray-500 font-mono\\\\\\\">{entries.find(e => e.id === selectedId)?.date}</span>\\\\n              <div className=\\\\\\\"flex gap-2\\\\\\\">\\\\n                {isEditing ? (\\\\n                   <button onClick={handleSave} className=\\\\\\\"flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700\\\\\\\"><Save size={12} /> Save</button>\\\\n                ) : (\\\\n                   <button onClick={() => setIsEditing(true)} className=\\\\\\\"px-3 py-1 border border-gray-200 text-gray-600 text-xs rounded hover:bg-gray-50\\\\\\\">Edit</button>\\\\n                )}\\\\n              </div>\\\\n            </div>\\\\n            <div className=\\\\\\\"flex-1 overflow-y-auto p-8\\\\\\\">\\\\n              {isEditing ? (\\\\n                <textarea\\\\n                  className=\\\\\\\"w-full h-full resize-none outline-none text-gray-800 font-serif leading-relaxed\\\\\\\"\\\\n                  value={content}\\\\n                  onChange={e => setContent(e.target.value)}\\\\n                  placeholder=\\\\\\\"Start writing...\\\\\\\"\\\\n                />\\\\n              ) : (\\\\n                <div className=\\\\\\\"prose prose-sm max-w-none font-serif text-gray-800\\\\\\\">\\\\n                  <ReactMarkdown>{content}</ReactMarkdown>\\\\n                </div>\\\\n              )}\\\\n            </div>\\\\n          </>\\\\n        ) : (\\\\n          <div className=\\\\\\\"flex-1 flex items-center justify-center text-gray-300\\\\\\\">\\\\n            <div className=\\\\\\\"text-center\\\\\\\">\\\\n              <Book size={48} className=\\\\\\\"mx-auto mb-2 opacity-50\\\\\\\" />\\\\n              <p>Select or create an entry</p>\\\\n            </div>\\\\n          </div>\\\\n        )}\\\\n      </div>\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useState, useEffect, useContext } from 'react';\\nimport ReactMarkdown from 'react-markdown';\\nimport { Book, Plus, Save, Trash2, Calendar } from 'lucide-react';\\nimport { supabase } from '../supabaseClient';\\nimport { AppContext } from '../context/AppContext';\\nimport { isToday } from '../utils';\\n\\ninterface JournalEntry {\\n  id: string;\\n  user_id: string;\\n  date: string; // ISO date string YYYY-MM-DD\\n  content: string;\\n  created_at: string;\\n}\\n\\nexport const JournalView = () => {\\n  const { user } = useContext(AppContext);\\n  const [entries, setEntries] = useState<JournalEntry[]>([]);\\n  const [selectedId, setSelectedId] = useState<string | null>(null);\\n  const [content, setContent] = useState('');\\n  const [isEditing, setIsEditing] = useState(false);\\n  const [loading, setLoading] = useState(true);\\n\\n  useEffect(() => {\\n    if (!user) return;\\n    fetchJournals();\\n  }, [user]);\\n\\n  useEffect(() => {\\n    if (selectedId) {\\n      const entry = entries.find(e => e.id === selectedId);\\n      if (entry) {\\n        setContent(entry.content);\\n        setIsEditing(false);\\n      }\\n    } else {\\n        setContent('');\\n    }\\n  }, [selectedId, entries]);\\n\\n  const fetchJournals = async () => {\\n    if (!supabase) return;\\n    const { data, error } = await supabase.from('journals').select('*').order('date', { ascending: false });\\n    if (data) setEntries(data);\\n    setLoading(false);\\n  };\\n\\n  const handleCreate = async () => {\\n    const today = new Date().toISOString().split('T')[0];\\n    const existing = entries.find(e => e.date === today);\\n    if (existing) {\\n      setSelectedId(existing.id);\\n      return;\\n    }\\n\\n    const newEntry = {\\n      user_id: user.id,\\n      date: today,\\n      content: '# Today\\\\'s Journal\\\\n\\\\nWrite something...',\\n    };\\n\\n    const { data, error } = await supabase.from('journals').insert([newEntry]).select();\\n    if (data) {\\n      setEntries([data[0], ...entries]);\\n      setSelectedId(data[0].id);\\n      setIsEditing(true);\\n    }\\n  };\\n\\n  const handleSave = async () => {\\n    if (!selectedId) return;\\n    const { error } = await supabase.from('journals').update({ content }).eq('id', selectedId);\\n    if (!error) {\\n      setEntries(entries.map(e => e.id === selectedId ? { ...e, content } : e));\\n      setIsEditing(false);\\n    }\\n  };\\n\\n  const handleDelete = async (id: string) => {\\n    if (!confirm('Are you sure?')) return;\\n    await supabase.from('journals').delete().eq('id', id);\\n    setEntries(entries.filter(e => e.id !== id));\\n    if (selectedId === id) setSelectedId(null);\\n  };\\n\\n  return (\\n    <div className=\\\"flex h-full bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\\\">\\n      <div className=\\\"w-64 border-r border-gray-200 bg-gray-50 flex flex-col\\\">\\n        <div className=\\\"p-4 border-b border-gray-200 flex justify-between items-center\\\">\\n          <h2 className=\\\"font-bold text-gray-700 flex items-center gap-2\\\"><Book size={16}/> Journal</h2>\\n          <button onClick={handleCreate} className=\\\"p-1 hover:bg-gray-200 rounded text-indigo-600\\\"><Plus size={18} /></button>\\n        </div>\\n        <div className=\\\"flex-1 overflow-y-auto p-2 space-y-1\\\">\\n          {entries.map(entry => (\\n            <button\\n              key={entry.id}\\n              onClick={() => setSelectedId(entry.id)}\\n              className={`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center justify-between group transition-colors ${selectedId === entry.id ? 'bg-white shadow-sm text-indigo-600 font-medium' : 'text-gray-600 hover:bg-gray-100'}`}\\n            >\\n              <div className=\\\"flex items-center gap-2\\\">\\n                <Calendar size={14} className={selectedId === entry.id ? 'text-indigo-500' : 'text-gray-400'} />\\n                <span>{entry.date}</span>\\n                {isToday(entry.date) && <span className=\\\"text-[10px] bg-indigo-100 text-indigo-600 px-1 rounded\\\">Today</span>}\\n              </div>\\n              <Trash2 size={12} className=\\\"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500\\\" onClick={(e) => { e.stopPropagation(); handleDelete(entry.id); }} />\\n            </button>\\n          ))}\\n          {entries.length === 0 && !loading && <div className=\\\"text-xs text-gray-400 text-center py-4\\\">No entries</div>}\\n        </div>\\n      </div>\\n      <div className=\\\"flex-1 flex flex-col\\\">\\n        {selectedId ? (\\n          <>\\n            <div className=\\\"p-3 border-b border-gray-200 flex justify-between items-center bg-white\\\">\\n              <span className=\\\"text-sm text-gray-500 font-mono\\\">{entries.find(e => e.id === selectedId)?.date}</span>\\n              <div className=\\\"flex gap-2\\\">\\n                {isEditing ? (\\n                   <button onClick={handleSave} className=\\\"flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-xs rounded hover:bg-indigo-700\\\"><Save size={12} /> Save</button>\\n                ) : (\\n                   <button onClick={() => setIsEditing(true)} className=\\\"px-3 py-1 border border-gray-200 text-gray-600 text-xs rounded hover:bg-gray-50\\\">Edit</button>\\n                )}\\n              </div>\\n            </div>\\n            <div className=\\\"flex-1 overflow-y-auto p-8\\\">\\n              {isEditing ? (\\n                <textarea\\n                  className=\\\"w-full h-full resize-none outline-none text-gray-800 font-serif leading-relaxed\\\"\\n                  value={content}\\n                  onChange={e => setContent(e.target.value)}\\n                  placeholder=\\\"Start writing...\\\"\\n                />\\n              ) : (\\n                <div className=\\\"prose prose-sm max-w-none font-serif text-gray-800\\\">\\n                  <ReactMarkdown>{content}</ReactMarkdown>\\n                </div>\\n              )}\\n            </div>\\n          </>\\n        ) : (\\n          <div className=\\\"flex-1 flex items-center justify-center text-gray-300\\\">\\n            <div className=\\\"text-center\\\">\\n              <Book size={48} className=\\\"mx-auto mb-2 opacity-50\\\" />\\n              <p>Select or create an entry</p>\\n            </div>\\n          </div>\\n        )}\\n      </div>\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":6005,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412394397},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":56}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":56}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useState, useEffect, useContext } from \\\\'react\\\\';\",\"originAcceptText\":\"import { useState, useEffect, useContext } from 'react';\",\"originTextLength\":56,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766414261714},{\"originRange\":{\"start\":{\"line\":42,\"character\":0},\"end\":{\"line\":42,\"character\":101}},\"modifyRange\":{\"start\":{\"line\":42,\"character\":0},\"end\":{\"line\":42,\"character\":101}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    const { data } = await supabase.from(\\\\'journals\\\\').select(\\\\'*\\\\').order(\\\\'date\\\\', { ascending: false });\",\"originAcceptText\":\"    const { data } = await supabase.from('journals').select('*').order('date', { ascending: false });\",\"originTextLength\":101,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766414261715},{\"originRange\":{\"start\":{\"line\":61,\"character\":0},\"end\":{\"line\":61,\"character\":81}},\"modifyRange\":{\"start\":{\"line\":61,\"character\":0},\"end\":{\"line\":61,\"character\":81}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    const { data } = await supabase.from(\\\\'journals\\\\').insert([newEntry]).select();\",\"originAcceptText\":\"    const { data } = await supabase.from('journals').insert([newEntry]).select();\",\"originTextLength\":81,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766414261721},{\"originRange\":{\"start\":{\"line\":61,\"character\":0},\"end\":{\"line\":61,\"character\":26}},\"modifyRange\":{\"start\":{\"line\":61,\"character\":0},\"end\":{\"line\":61,\"character\":26}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (!supabase) return;\",\"originAcceptText\":\"    if (!supabase) return;\",\"originTextLength\":26,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417986817},{\"originRange\":{\"start\":{\"line\":71,\"character\":0},\"end\":{\"line\":71,\"character\":41}},\"modifyRange\":{\"start\":{\"line\":71,\"character\":0},\"end\":{\"line\":71,\"character\":41}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (!selectedId || !supabase) return;\",\"originAcceptText\":\"    if (!selectedId || !supabase) return;\",\"originTextLength\":41,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766418099706},{\"originRange\":{\"start\":{\"line\":81,\"character\":0},\"end\":{\"line\":81,\"character\":26}},\"modifyRange\":{\"start\":{\"line\":81,\"character\":0},\"end\":{\"line\":81,\"character\":26}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    if (!supabase) return;\",\"originAcceptText\":\"    if (!supabase) return;\",\"originTextLength\":26,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766418099711},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":65}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":65}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useState, useContext, useMemo } from \\\\'react\\\\';\\\\nimport { Plus, Book, Image as ImageIcon, X } from \\\\'lucide-react\\\\';\",\"originAcceptText\":\"import { useState, useContext, useMemo } from 'react';\\nimport { Plus, Book, Image as ImageIcon, X } from 'lucide-react';\",\"originTextLength\":120,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292406},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":7,\"character\":36}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":7,\"character\":36}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { TaskData } from \\\\'../types\\\\';\\\\nimport { TaskInput } from \\\\'./TaskInput\\\\';\\\\nimport { TagChip } from \\\\'./TagChip\\\\';\",\"originAcceptText\":\"import { TaskData } from '../types';\\nimport { TaskInput } from './TaskInput';\\nimport { TagChip } from './TagChip';\",\"originTextLength\":114,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292413},{\"originRange\":{\"start\":{\"line\":16,\"character\":0},\"end\":{\"line\":29,\"character\":26}},\"modifyRange\":{\"start\":{\"line\":16,\"character\":0},\"end\":{\"line\":29,\"character\":26}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { tasks, tags, addTask, addTag, deleteTask } = useContext(AppContext);\\\\n  const [editingTask, setEditingTask] = useState<TaskData | null>(null);\\\\n\\\\n  // Find the \\\\'Album\\\\' tag\\\\n  const albumTagId = useMemo(() => {\\\\n    const tag = tags.find(t => t.name.toLowerCase() === \\\\'album\\\\' || t.name === \\\\'相簿\\\\');\\\\n    return tag ? tag.id : null;\\\\n  }, [tags]);\\\\n\\\\n  // Filter tasks that have the Album tag\\\\n  const journalTasks = useMemo(() => {\\\\n    if (!albumTagId) return [];\\\\n    return tasks\\\\n      .filter(t => t.tags.includes(albumTagId) && t.status !== \\\\'deleted\\\\')\\\\n      .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\\\\n  }, [tasks, albumTagId]);\",\"originAcceptText\":\"  const { tasks, tags, addTask, addTag, deleteTask } = useContext(AppContext);\\n  const [editingTask, setEditingTask] = useState<TaskData | null>(null);\\n\\n  // Find the 'Album' tag\\n  const albumTagId = useMemo(() => {\\n    const tag = tags.find(t => t.name.toLowerCase() === 'album' || t.name === '相簿');\\n    return tag ? tag.id : null;\\n  }, [tags]);\\n\\n  // Filter tasks that have the Album tag\\n  const journalTasks = useMemo(() => {\\n    if (!albumTagId) return [];\\n    return tasks\\n      .filter(t => t.tags.includes(albumTagId) && t.status !== 'deleted')\\n      .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\\n  }, [tasks, albumTagId]);\",\"originTextLength\":670,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292415},{\"originRange\":{\"start\":{\"line\":48,\"character\":0},\"end\":{\"line\":73,\"character\":14}},\"modifyRange\":{\"start\":{\"line\":48,\"character\":0},\"end\":{\"line\":73,\"character\":14}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    let tagId = albumTagId;\\\\n    if (!tagId) {\\\\n      // Create \\\\'Album\\\\' tag if it doesn\\\\'t exist\\\\n      tagId = await addTag(\\\\'Album\\\\');\\\\n    }\\\\n    \\\\n    if (tagId) {\\\\n      const newTaskId = await addTask({\\\\n        title: \\\\'\\\\',\\\\n        tags: [tagId],\\\\n        is_project: false,\\\\n        status: \\\\'active\\\\' // or \\\\'inbox\\\\'?\\\\n      });\\\\n      // We need to find the new task object to edit it\\\\n      // Since addTask returns ID, we might need to wait for state update or just set a temporary object\\\\n      // But AppContext updates tasks state optimistically usually.\\\\n      // Let\\\\'s just set the ID to focus or something.\\\\n      // Actually addTask returns ID.\\\\n      // We can use a timeout to wait for the task to appear in \\\\'tasks\\\\' or just use the ID.\\\\n      // Better: AppContext.addTask pushes to history and updates state.\\\\n      // But we need the full object to pass to TaskInput if we want to edit immediately.\\\\n      // Let\\\\'s try to find it.\\\\n      setTimeout(() => {\\\\n          // This is a bit hacky but ensuring state propagation\\\\n          setEditingTask({ id: newTaskId } as any); \\\\n      }, 100);\",\"originAcceptText\":\"    let tagId = albumTagId;\\n    if (!tagId) {\\n      // Create 'Album' tag if it doesn't exist\\n      tagId = await addTag('Album');\\n    }\\n    \\n    if (tagId) {\\n      const newTaskId = await addTask({\\n        title: '',\\n        tags: [tagId],\\n        is_project: false,\\n        status: 'active' // or 'inbox'?\\n      });\\n      // We need to find the new task object to edit it\\n      // Since addTask returns ID, we might need to wait for state update or just set a temporary object\\n      // But AppContext updates tasks state optimistically usually.\\n      // Let's just set the ID to focus or something.\\n      // Actually addTask returns ID.\\n      // We can use a timeout to wait for the task to appear in 'tasks' or just use the ID.\\n      // Better: AppContext.addTask pushes to history and updates state.\\n      // But we need the full object to pass to TaskInput if we want to edit immediately.\\n      // Let's try to find it.\\n      setTimeout(() => {\\n          // This is a bit hacky but ensuring state propagation\\n          setEditingTask({ id: newTaskId } as any); \\n      }, 100);\",\"originTextLength\":1081,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292421},{\"originRange\":{\"start\":{\"line\":89,\"character\":0},\"end\":{\"line\":93,\"character\":27}},\"modifyRange\":{\"start\":{\"line\":89,\"character\":0},\"end\":{\"line\":93,\"character\":27}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const handleEdit = (task: TaskData) => {\\\\n      setEditingTask(task);\\\\n  };\\\\n\\\\n  const handleCloseEdit = () => {\\\\n      setEditingTask(null);\",\"originAcceptText\":\"  const handleEdit = (task: TaskData) => {\\n      setEditingTask(task);\\n  };\\n\\n  const handleCloseEdit = () => {\\n      setEditingTask(null);\",\"originTextLength\":138,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292424},{\"originRange\":{\"start\":{\"line\":98,\"character\":0},\"end\":{\"line\":105,\"character\":44}},\"modifyRange\":{\"start\":{\"line\":98,\"character\":0},\"end\":{\"line\":105,\"character\":44}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    <div className=\\\\\\\"h-full flex flex-col bg-white overflow-hidden relative\\\\\\\">\\\\n        <div className=\\\\\\\"p-4 border-b border-gray-100 flex justify-between items-center bg-white z-10\\\\\\\">\\\\n            <h2 className=\\\\\\\"font-bold text-gray-700 flex items-center gap-2\\\\\\\"><Book size={18}/> Journal / Album</h2>\\\\n            <button \\\\n                onClick={handleCreate} \\\\n                className=\\\\\\\"flex items-center gap-1 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium transition-colors shadow-sm\\\\\\\"\\\\n            >\\\\n                <Plus size={16} /> New Entry\",\"originAcceptText\":\"    <div className=\\\"h-full flex flex-col bg-white overflow-hidden relative\\\">\\n        <div className=\\\"p-4 border-b border-gray-100 flex justify-between items-center bg-white z-10\\\">\\n            <h2 className=\\\"font-bold text-gray-700 flex items-center gap-2\\\"><Book size={18}/> Journal / Album</h2>\\n            <button \\n                onClick={handleCreate} \\n                className=\\\"flex items-center gap-1 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm font-medium transition-colors shadow-sm\\\"\\n            >\\n                <Plus size={16} /> New Entry\",\"originTextLength\":582,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292430},{\"originRange\":{\"start\":{\"line\":118,\"character\":0},\"end\":{\"line\":118,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":118,\"character\":0},\"end\":{\"line\":118,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292432},{\"originRange\":{\"start\":{\"line\":121,\"character\":0},\"end\":{\"line\":173,\"character\":23}},\"modifyRange\":{\"start\":{\"line\":121,\"character\":0},\"end\":{\"line\":173,\"character\":23}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\\\\n        <div className=\\\\\\\"flex-1 overflow-y-auto p-6 bg-gray-50/50\\\\\\\">\\\\n            {journalTasks.length === 0 ? (\\\\n                <div className=\\\\\\\"flex flex-col items-center justify-center h-full text-gray-400\\\\\\\">\\\\n                    <ImageIcon size={48} className=\\\\\\\"mb-4 opacity-20\\\\\\\" />\\\\n                    <p className=\\\\\\\"text-sm\\\\\\\">No album entries yet.</p>\\\\n                    <p className=\\\\\\\"text-xs mt-1\\\\\\\">Create a task with the \\\\\\\"Album\\\\\\\" tag to see it here.</p>\\\\n                </div>\\\\n            ) : (\\\\n                <div className=\\\\\\\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\\\\\\\">\\\\n                    {journalTasks.map(task => (\\\\n                        <div \\\\n                            key={task.id} \\\\n                            onClick={() => handleEdit(task)}\\\\n                            className=\\\\\\\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer group hover:shadow-md transition-all hover:-translate-y-1\\\\\\\"\\\\n                        >\\\\n                            {/* Photo Area */}\\\\n                            <div className=\\\\\\\"aspect-[4/3] bg-gray-100 relative overflow-hidden\\\\\\\">\\\\n                                {task.images && task.images.length > 0 ? (\\\\n                                    <img \\\\n                                        src={task.images[0]} \\\\n                                        alt={task.title} \\\\n                                        className=\\\\\\\"w-full h-full object-cover transition-transform group-hover:scale-105\\\\\\\"\\\\n                                    />\\\\n                                ) : (\\\\n                                    <div className=\\\\\\\"w-full h-full flex items-center justify-center text-gray-300 bg-gray-50\\\\\\\">\\\\n                                        <ImageIcon size={24} />\\\\n                                    </div>\\\\n                                )}\\\\n                                {/* Date Badge */}\\\\n                                <div className=\\\\\\\"absolute top-2 right-2 bg-black/50 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded-full\\\\\\\">\\\\n                                    {new Date(task.created_at).toLocaleDateString()}\\\\n                                </div>\\\\n                            </div>\\\\n\\\\n                            {/* Content Area */}\\\\n                            <div className=\\\\\\\"p-4\\\\\\\">\\\\n                                <h3 className={`font-bold text-gray-800 mb-2 line-clamp-2 ${!task.title ? \\\\'italic text-gray-400\\\\' : \\\\'\\\\'}`}>\\\\n                                    {task.title || \\\\'Untitled\\\\'}\\\\n                                </h3>\\\\n                                \\\\n                                {/* Tags */}\\\\n                                <div className=\\\\\\\"flex flex-wrap gap-1 mt-auto\\\\\\\">\\\\n                                    {task.tags\\\\n                                        .filter(tid => tid !== albumTagId) // Don\\\\'t show the Album tag itself\\\\n                                        .map(tid => {\\\\n                                            const tag = tags.find(t => t.id === tid);\\\\n                                            return tag ? <TagChip key={tid} tag={tag} size=\\\\\\\"small\\\\\\\" /> : null;\\\\n                                        })\\\\n                                    }\\\\n                                </div>\\\\n                            </div>\\\\n                        </div>\\\\n                    ))}\",\"originAcceptText\":\"\\n        <div className=\\\"flex-1 overflow-y-auto p-6 bg-gray-50/50\\\">\\n            {journalTasks.length === 0 ? (\\n                <div className=\\\"flex flex-col items-center justify-center h-full text-gray-400\\\">\\n                    <ImageIcon size={48} className=\\\"mb-4 opacity-20\\\" />\\n                    <p className=\\\"text-sm\\\">No album entries yet.</p>\\n                    <p className=\\\"text-xs mt-1\\\">Create a task with the \\\"Album\\\" tag to see it here.</p>\\n                </div>\\n            ) : (\\n                <div className=\\\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\\\">\\n                    {journalTasks.map(task => (\\n                        <div \\n                            key={task.id} \\n                            onClick={() => handleEdit(task)}\\n                            className=\\\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer group hover:shadow-md transition-all hover:-translate-y-1\\\"\\n                        >\\n                            {/* Photo Area */}\\n                            <div className=\\\"aspect-[4/3] bg-gray-100 relative overflow-hidden\\\">\\n                                {task.images && task.images.length > 0 ? (\\n                                    <img \\n                                        src={task.images[0]} \\n                                        alt={task.title} \\n                                        className=\\\"w-full h-full object-cover transition-transform group-hover:scale-105\\\"\\n                                    />\\n                                ) : (\\n                                    <div className=\\\"w-full h-full flex items-center justify-center text-gray-300 bg-gray-50\\\">\\n                                        <ImageIcon size={24} />\\n                                    </div>\\n                                )}\\n                                {/* Date Badge */}\\n                                <div className=\\\"absolute top-2 right-2 bg-black/50 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded-full\\\">\\n                                    {new Date(task.created_at).toLocaleDateString()}\\n                                </div>\\n                            </div>\\n\\n                            {/* Content Area */}\\n                            <div className=\\\"p-4\\\">\\n                                <h3 className={`font-bold text-gray-800 mb-2 line-clamp-2 ${!task.title ? 'italic text-gray-400' : ''}`}>\\n                                    {task.title || 'Untitled'}\\n                                </h3>\\n                                \\n                                {/* Tags */}\\n                                <div className=\\\"flex flex-wrap gap-1 mt-auto\\\">\\n                                    {task.tags\\n                                        .filter(tid => tid !== albumTagId) // Don't show the Album tag itself\\n                                        .map(tid => {\\n                                            const tag = tags.find(t => t.id === tid);\\n                                            return tag ? <TagChip key={tid} tag={tag} size=\\\"small\\\" /> : null;\\n                                        })\\n                                    }\\n                                </div>\\n                            </div>\\n                        </div>\\n                    ))}\",\"originTextLength\":3302,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292438},{\"originRange\":{\"start\":{\"line\":147,\"character\":0},\"end\":{\"line\":165,\"character\":18}},\"modifyRange\":{\"start\":{\"line\":147,\"character\":0},\"end\":{\"line\":165,\"character\":18}},\"action\":\"None\",\"isLine\":false,\"originText\":\"            )}\\\\n        </div>\\\\n\\\\n        {/* Edit Modal */}\\\\n        {editingTask && (\\\\n            <div className=\\\\\\\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm\\\\\\\" onClick={handleCloseEdit}>\\\\n                <div className=\\\\\\\"bg-white w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto\\\\\\\" onClick={e => e.stopPropagation()}>\\\\n                    <div className=\\\\\\\"p-2 border-b border-gray-100 flex justify-end\\\\\\\">\\\\n                        <button onClick={handleCloseEdit} className=\\\\\\\"p-2 hover:bg-gray-100 rounded-full text-gray-500\\\\\\\">\\\\n                            <X size={20} />\\\\n                        </button>\\\\n                    </div>\\\\n                    <div className=\\\\\\\"p-4\\\\\\\">\\\\n                        <TaskInput \\\\n                            initialData={tasks.find(t => t.id === editingTask.id)} // Fetch fresh data\\\\n                            onClose={handleCloseEdit}\\\\n                        />\\\\n                    </div>\\\\n                </div>\\\\n            </div>\",\"originAcceptText\":\"            )}\\n        </div>\\n\\n        {/* Edit Modal */}\\n        {editingTask && (\\n            <div className=\\\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm\\\" onClick={handleCloseEdit}>\\n                <div className=\\\"bg-white w-full max-w-2xl rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto\\\" onClick={e => e.stopPropagation()}>\\n                    <div className=\\\"p-2 border-b border-gray-100 flex justify-end\\\">\\n                        <button onClick={handleCloseEdit} className=\\\"p-2 hover:bg-gray-100 rounded-full text-gray-500\\\">\\n                            <X size={20} />\\n                        </button>\\n                    </div>\\n                    <div className=\\\"p-4\\\">\\n                        <TaskInput \\n                            initialData={tasks.find(t => t.id === editingTask.id)} // Fetch fresh data\\n                            onClose={handleCloseEdit}\\n                        />\\n                    </div>\\n                </div>\\n            </div>\",\"originTextLength\":1011,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292440},{\"originRange\":{\"start\":{\"line\":158,\"character\":0},\"end\":{\"line\":158,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":158,\"character\":0},\"end\":{\"line\":158,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766425292443},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":66}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":66}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  const { tasks, tags, addTask, addTag } = useContext(AppContext);\",\"originAcceptText\":\"  const { tasks, tags, addTask, addTag } = useContext(AppContext);\",\"originTextLength\":66,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475425411}]",
  "range-cache-file:///Users/leegary/ai_completion/vitest.config.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":10,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":10,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { defineConfig } from \\\\'vitest/config\\\\';\\\\nimport react from \\\\'@vitejs/plugin-react\\\\';\\\\n\\\\nexport default defineConfig({\\\\n  plugins: [react()],\\\\n  test: {\\\\n    environment: \\\\'jsdom\\\\',\\\\n    setupFiles: \\\\'./vitest.setup.ts\\\\',\\\\n    globals: true,\\\\n  },\\\\n});\\\\n\",\"originAcceptText\":\"import { defineConfig } from 'vitest/config';\\nimport react from '@vitejs/plugin-react';\\n\\nexport default defineConfig({\\n  plugins: [react()],\\n  test: {\\n    environment: 'jsdom',\\n    setupFiles: './vitest.setup.ts',\\n    globals: true,\\n  },\\n});\\n\",\"originTextLength\":242,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412469508},{\"originRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":63}},\"modifyRange\":{\"start\":{\"line\":9,\"character\":0},\"end\":{\"line\":9,\"character\":63}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    exclude: [\\\\'**/node_modules/**\\\\', \\\\'**/dist/**\\\\', \\\\'**/e2e/**\\\\'],\",\"originAcceptText\":\"    exclude: ['**/node_modules/**', '**/dist/**', '**/e2e/**'],\",\"originTextLength\":63,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412841366}]",
  "range-cache-file:///Users/leegary/ai_completion/vitest.setup.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import \\\\'@testing-library/jest-dom\\\\';\\\\n\",\"originAcceptText\":\"import '@testing-library/jest-dom';\\n\",\"originTextLength\":36,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412469510}]",
  "range-cache-file:///Users/leegary/ai_completion/src/utils/index.test.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":26,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":26,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { describe, it, expect } from \\\\'vitest\\\\';\\\\nimport { isSameDay, isToday, isOverdue } from \\\\'./index\\\\';\\\\n\\\\ndescribe(\\\\'Date Utils\\\\', () => {\\\\n  it(\\\\'isSameDay should correctly identify same days\\\\', () => {\\\\n    const d1 = new Date(\\\\'2023-01-01\\\\');\\\\n    const d2 = new Date(\\\\'2023-01-01\\\\');\\\\n    const d3 = new Date(\\\\'2023-01-02\\\\');\\\\n    expect(isSameDay(d1, d2)).toBe(true);\\\\n    expect(isSameDay(d1, d3)).toBe(false);\\\\n  });\\\\n\\\\n  it(\\\\'isToday should correctly identify today\\\\', () => {\\\\n    const today = new Date();\\\\n    const yesterday = new Date();\\\\n    yesterday.setDate(yesterday.getDate() - 1);\\\\n    expect(isToday(today.toISOString())).toBe(true);\\\\n    expect(isToday(yesterday.toISOString())).toBe(false);\\\\n  });\\\\n\\\\n  it(\\\\'isOverdue should correctly identify overdue dates\\\\', () => {\\\\n    const yesterday = new Date();\\\\n    yesterday.setDate(yesterday.getDate() - 1);\\\\n    const tomorrow = new Date();\\\\n    tomorrow.setDate(tomorrow.getDate() + 1);\\\\n    expect(isOverdue(yesterday.toISOString())).toBe(true);\\\\n    expect(isOverdue(tomorrow.toISOString())).toBe(false);\\\\n  });\\\\n});\\\\n\",\"originAcceptText\":\"import { describe, it, expect } from 'vitest';\\nimport { isSameDay, isToday, isOverdue } from './index';\\n\\ndescribe('Date Utils', () => {\\n  it('isSameDay should correctly identify same days', () => {\\n    const d1 = new Date('2023-01-01');\\n    const d2 = new Date('2023-01-01');\\n    const d3 = new Date('2023-01-02');\\n    expect(isSameDay(d1, d2)).toBe(true);\\n    expect(isSameDay(d1, d3)).toBe(false);\\n  });\\n\\n  it('isToday should correctly identify today', () => {\\n    const today = new Date();\\n    const yesterday = new Date();\\n    yesterday.setDate(yesterday.getDate() - 1);\\n    expect(isToday(today.toISOString())).toBe(true);\\n    expect(isToday(yesterday.toISOString())).toBe(false);\\n  });\\n\\n  it('isOverdue should correctly identify overdue dates', () => {\\n    const yesterday = new Date();\\n    yesterday.setDate(yesterday.getDate() - 1);\\n    const tomorrow = new Date();\\n    tomorrow.setDate(tomorrow.getDate() + 1);\\n    expect(isOverdue(yesterday.toISOString())).toBe(true);\\n    expect(isOverdue(tomorrow.toISOString())).toBe(false);\\n  });\\n});\\n\",\"originTextLength\":1048,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412472027}]",
  "range-cache-file:///Users/leegary/ai_completion/playwright.config.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":24,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":24,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { defineConfig, devices } from \\\\'@playwright/test\\\\';\\\\n\\\\nexport default defineConfig({\\\\n  testDir: \\\\'./e2e\\\\',\\\\n  fullyParallel: true,\\\\n  forbidOnly: !!process.env.CI,\\\\n  retries: process.env.CI ? 2 : 0,\\\\n  workers: process.env.CI ? 1 : undefined,\\\\n  reporter: \\\\'html\\\\',\\\\n  use: {\\\\n    baseURL: \\\\'http://localhost:5173\\\\',\\\\n    trace: \\\\'on-first-retry\\\\',\\\\n  },\\\\n  projects: [\\\\n    {\\\\n      name: \\\\'chromium\\\\',\\\\n      use: { ...devices[\\\\'Desktop Chrome\\\\'] },\\\\n    },\\\\n  ],\\\\n  webServer: {\\\\n    command: \\\\'npm run dev\\\\',\\\\n    url: \\\\'http://localhost:5173\\\\',\\\\n    reuseExistingServer: !process.env.CI,\\\\n  },\\\\n});\\\\n\",\"originAcceptText\":\"import { defineConfig, devices } from '@playwright/test';\\n\\nexport default defineConfig({\\n  testDir: './e2e',\\n  fullyParallel: true,\\n  forbidOnly: !!process.env.CI,\\n  retries: process.env.CI ? 2 : 0,\\n  workers: process.env.CI ? 1 : undefined,\\n  reporter: 'html',\\n  use: {\\n    baseURL: 'http://localhost:5173',\\n    trace: 'on-first-retry',\\n  },\\n  projects: [\\n    {\\n      name: 'chromium',\\n      use: { ...devices['Desktop Chrome'] },\\n    },\\n  ],\\n  webServer: {\\n    command: 'npm run dev',\\n    url: 'http://localhost:5173',\\n    reuseExistingServer: !process.env.CI,\\n  },\\n});\\n\",\"originTextLength\":572,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412472030}]",
  "range-cache-file:///Users/leegary/ai_completion/e2e/example.spec.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":7,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { test, expect } from \\\\'@playwright/test\\\\';\\\\n\\\\ntest(\\\\'has title\\\\', async ({ page }) => {\\\\n  await page.goto(\\\\'/\\\\');\\\\n  // Expect a title \\\\\\\"to contain\\\\\\\" a substring.\\\\n  // Since we have a redirect to /login if not authenticated\\\\n  await expect(page).toHaveURL(/.*login/);\\\\n});\\\\n\",\"originAcceptText\":\"import { test, expect } from '@playwright/test';\\n\\ntest('has title', async ({ page }) => {\\n  await page.goto('/');\\n  // Expect a title \\\"to contain\\\" a substring.\\n  // Since we have a redirect to /login if not authenticated\\n  await expect(page).toHaveURL(/.*login/);\\n});\\n\",\"originTextLength\":268,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766412472031}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20240523000000_add_journals_and_profiles.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":63,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":63,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Create profiles table\\\\ncreate table public.profiles (\\\\n  id uuid not null references auth.users(id) on delete cascade,\\\\n  email text,\\\\n  full_name text,\\\\n  avatar_url text,\\\\n  preferences jsonb default \\\\'{}\\\\'::jsonb,\\\\n  updated_at timestamp with time zone,\\\\n  \\\\n  constraint profiles_pkey primary key (id)\\\\n);\\\\n\\\\n-- Enable RLS for profiles\\\\nalter table public.profiles enable row level security;\\\\n\\\\ncreate policy \\\\\\\"Users can view their own profile\\\\\\\" \\\\non public.profiles for select \\\\nusing (auth.uid() = id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own profile\\\\\\\" \\\\non public.profiles for update \\\\nusing (auth.uid() = id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own profile\\\\\\\" \\\\non public.profiles for insert \\\\nwith check (auth.uid() = id);\\\\n\\\\n-- Create journals table\\\\ncreate table public.journals (\\\\n  id uuid not null default uuid_generate_v4(),\\\\n  user_id uuid not null default auth.uid(),\\\\n  date date not null,\\\\n  content text default \\\\'\\\\',\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  updated_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  \\\\n  constraint journals_pkey primary key (id)\\\\n);\\\\n\\\\n-- Enable RLS for journals\\\\nalter table public.journals enable row level security;\\\\n\\\\ncreate policy \\\\\\\"Users can view their own journals\\\\\\\" \\\\non public.journals for select \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own journals\\\\\\\" \\\\non public.journals for insert \\\\nwith check (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own journals\\\\\\\" \\\\non public.journals for update \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can delete their own journals\\\\\\\" \\\\non public.journals for delete \\\\nusing (auth.uid() = user_id);\\\\n\\\\n-- Enable Realtime\\\\nalter publication supabase_realtime add table public.profiles;\\\\nalter publication supabase_realtime add table public.journals;\\\\n\\\\n-- Function to handle new user signup\\\\ncreate or replace function public.handle_new_user() \\\\nreturns trigger as $$\\\\nbegin\\\\n  insert into public.profiles (id, email, full_name, avatar_url)\\\\n  values (new.id, new.email, new.raw_user_meta_data->>\\\\'full_name\\\\', new.raw_user_meta_data->>\\\\'avatar_url\\\\');\\\\n  return new;\\\\nend;\\\\n$$ language plpgsql security definer;\\\\n\\\\n-- Trigger for new user signup\\\\ncreate or replace trigger on_auth_user_created\\\\n  after insert on auth.users\\\\n  for each row execute procedure public.handle_new_user();\\\\n\",\"originAcceptText\":\"-- Create profiles table\\ncreate table public.profiles (\\n  id uuid not null references auth.users(id) on delete cascade,\\n  email text,\\n  full_name text,\\n  avatar_url text,\\n  preferences jsonb default '{}'::jsonb,\\n  updated_at timestamp with time zone,\\n  \\n  constraint profiles_pkey primary key (id)\\n);\\n\\n-- Enable RLS for profiles\\nalter table public.profiles enable row level security;\\n\\ncreate policy \\\"Users can view their own profile\\\" \\non public.profiles for select \\nusing (auth.uid() = id);\\n\\ncreate policy \\\"Users can update their own profile\\\" \\non public.profiles for update \\nusing (auth.uid() = id);\\n\\ncreate policy \\\"Users can insert their own profile\\\" \\non public.profiles for insert \\nwith check (auth.uid() = id);\\n\\n-- Create journals table\\ncreate table public.journals (\\n  id uuid not null default uuid_generate_v4(),\\n  user_id uuid not null default auth.uid(),\\n  date date not null,\\n  content text default '',\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  \\n  constraint journals_pkey primary key (id)\\n);\\n\\n-- Enable RLS for journals\\nalter table public.journals enable row level security;\\n\\ncreate policy \\\"Users can view their own journals\\\" \\non public.journals for select \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can insert their own journals\\\" \\non public.journals for insert \\nwith check (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can update their own journals\\\" \\non public.journals for update \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can delete their own journals\\\" \\non public.journals for delete \\nusing (auth.uid() = user_id);\\n\\n-- Enable Realtime\\nalter publication supabase_realtime add table public.profiles;\\nalter publication supabase_realtime add table public.journals;\\n\\n-- Function to handle new user signup\\ncreate or replace function public.handle_new_user() \\nreturns trigger as $$\\nbegin\\n  insert into public.profiles (id, email, full_name, avatar_url)\\n  values (new.id, new.email, new.raw_user_meta_data->>'full_name', new.raw_user_meta_data->>'avatar_url');\\n  return new;\\nend;\\n$$ language plpgsql security definer;\\n\\n-- Trigger for new user signup\\ncreate or replace trigger on_auth_user_created\\n  after insert on auth.users\\n  for each row execute procedure public.handle_new_user();\\n\",\"originTextLength\":2339,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766413923744}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20251222120000_add_profiles_journals.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":50,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":50,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Create profiles table\\\\ncreate table if not exists public.profiles (\\\\n  id uuid references auth.users not null primary key,\\\\n  email text,\\\\n  full_name text,\\\\n  avatar_url text,\\\\n  preferences jsonb default \\\\'{}\\\\'::jsonb,\\\\n  updated_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null\\\\n);\\\\n\\\\n-- Enable RLS for profiles\\\\nalter table public.profiles enable row level security;\\\\n\\\\ncreate policy \\\\\\\"Users can view their own profile\\\\\\\" \\\\non public.profiles for select \\\\nusing (auth.uid() = id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own profile\\\\\\\" \\\\non public.profiles for update \\\\nusing (auth.uid() = id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own profile\\\\\\\" \\\\non public.profiles for insert \\\\nwith check (auth.uid() = id);\\\\n\\\\n-- Create journals table\\\\ncreate table if not exists public.journals (\\\\n  id uuid default uuid_generate_v4() primary key,\\\\n  user_id uuid references auth.users not null,\\\\n  date date not null,\\\\n  content text,\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  updated_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  unique(user_id, date)\\\\n);\\\\n\\\\n-- Enable RLS for journals\\\\nalter table public.journals enable row level security;\\\\n\\\\ncreate policy \\\\\\\"Users can view their own journals\\\\\\\" \\\\non public.journals for select \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own journals\\\\\\\" \\\\non public.journals for insert \\\\nwith check (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own journals\\\\\\\" \\\\non public.journals for update \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can delete their own journals\\\\\\\" \\\\non public.journals for delete \\\\nusing (auth.uid() = user_id);\\\\n\\\\n-- Add realtime for journals\\\\nalter publication supabase_realtime add table public.journals;\\\\n\\\\n-- Add indexes\\\\ncreate index if not exists journals_user_id_date_idx on public.journals (user_id, date);\\\\ncreate index if not exists tasks_user_id_idx on public.tasks (user_id);\\\\ncreate index if not exists tasks_parent_id_idx on public.tasks (parent_id);\\\\n\",\"originAcceptText\":\"-- Create profiles table\\ncreate table if not exists public.profiles (\\n  id uuid references auth.users not null primary key,\\n  email text,\\n  full_name text,\\n  avatar_url text,\\n  preferences jsonb default '{}'::jsonb,\\n  updated_at timestamp with time zone default timezone('utc'::text, now()) not null\\n);\\n\\n-- Enable RLS for profiles\\nalter table public.profiles enable row level security;\\n\\ncreate policy \\\"Users can view their own profile\\\" \\non public.profiles for select \\nusing (auth.uid() = id);\\n\\ncreate policy \\\"Users can update their own profile\\\" \\non public.profiles for update \\nusing (auth.uid() = id);\\n\\ncreate policy \\\"Users can insert their own profile\\\" \\non public.profiles for insert \\nwith check (auth.uid() = id);\\n\\n-- Create journals table\\ncreate table if not exists public.journals (\\n  id uuid default uuid_generate_v4() primary key,\\n  user_id uuid references auth.users not null,\\n  date date not null,\\n  content text,\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  unique(user_id, date)\\n);\\n\\n-- Enable RLS for journals\\nalter table public.journals enable row level security;\\n\\ncreate policy \\\"Users can view their own journals\\\" \\non public.journals for select \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can insert their own journals\\\" \\non public.journals for insert \\nwith check (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can update their own journals\\\" \\non public.journals for update \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can delete their own journals\\\" \\non public.journals for delete \\nusing (auth.uid() = user_id);\\n\\n-- Add realtime for journals\\nalter publication supabase_realtime add table public.journals;\\n\\n-- Add indexes\\ncreate index if not exists journals_user_id_date_idx on public.journals (user_id, date);\\ncreate index if not exists tasks_user_id_idx on public.tasks (user_id);\\ncreate index if not exists tasks_parent_id_idx on public.tasks (parent_id);\\n\",\"originTextLength\":2011,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766414292150}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20251222130000_add_images_to_tasks.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":21,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":21,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Add images column to tasks table if it doesn\\\\'t exist\\\\nalter table public.tasks add column if not exists images text[] default array[]::text[];\\\\n\\\\n-- Create storage bucket for task attachments if it doesn\\\\'t exist\\\\ninsert into storage.buckets (id, name, public)\\\\nvalues (\\\\'attachments\\\\', \\\\'attachments\\\\', true)\\\\non conflict (id) do nothing;\\\\n\\\\n-- Set up storage policies\\\\ncreate policy \\\\\\\"Authenticated users can upload\\\\\\\"\\\\non storage.objects for insert\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Public Access\\\\\\\"\\\\non storage.objects for select\\\\nusing ( bucket_id = \\\\'attachments\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Authenticated users can update\\\\\\\"\\\\non storage.objects for update\\\\nwith check ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\\\\n\\\\ncreate policy \\\\\\\"Authenticated users can delete\\\\\\\"\\\\non storage.objects for delete\\\\nusing ( bucket_id = \\\\'attachments\\\\' and auth.role() = \\\\'authenticated\\\\' );\\\\n\\\\n-- Force schema cache reload for PostgREST\\\\nNOTIFY pgrst, \\\\'reload config\\\\';\\\\n\",\"originAcceptText\":\"-- Add images column to tasks table if it doesn't exist\\nalter table public.tasks add column if not exists images text[] default array[]::text[];\\n\\n-- Create storage bucket for task attachments if it doesn't exist\\ninsert into storage.buckets (id, name, public)\\nvalues ('attachments', 'attachments', true)\\non conflict (id) do nothing;\\n\\n-- Set up storage policies\\ncreate policy \\\"Authenticated users can upload\\\"\\non storage.objects for insert\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\\n\\ncreate policy \\\"Public Access\\\"\\non storage.objects for select\\nusing ( bucket_id = 'attachments' );\\n\\ncreate policy \\\"Authenticated users can update\\\"\\non storage.objects for update\\nwith check ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\\n\\ncreate policy \\\"Authenticated users can delete\\\"\\non storage.objects for delete\\nusing ( bucket_id = 'attachments' and auth.role() = 'authenticated' );\\n\\n-- Force schema cache reload for PostgREST\\nNOTIFY pgrst, 'reload config';\\n\",\"originTextLength\":989,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415507954}]",
  "range-cache-file:///Users/leegary/ai_completion/e2e/comprehensive.spec.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":61,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":61,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { test, expect } from \\\\'@playwright/test\\\\';\\\\n\\\\ntest.describe(\\\\'Task Management System E2E\\\\', () => {\\\\n  \\\\n  test.beforeEach(async ({ page }) => {\\\\n    // Navigate to the app\\\\n    await page.goto(\\\\'/\\\\');\\\\n  });\\\\n\\\\n  test(\\\\'User can login\\\\', async ({ page }) => {\\\\n    // Should be redirected to login page\\\\n    await expect(page).toHaveURL(/\\\\\\\\/login/);\\\\n    \\\\n    // Fill in credentials (assuming test user exists or mock)\\\\n    await page.fill(\\\\'input[type=\\\\\\\"email\\\\\\\"]\\\\', \\\\'test@example.com\\\\');\\\\n    await page.fill(\\\\'input[type=\\\\\\\"password\\\\\\\"]\\\\', \\\\'password123\\\\');\\\\n    \\\\n    // Click login\\\\n    await page.click(\\\\'button[type=\\\\\\\"submit\\\\\\\"]\\\\');\\\\n    \\\\n    // Should navigate to dashboard\\\\n    // Note: In a real test, we might need to mock Supabase auth response\\\\n  });\\\\n\\\\n  test(\\\\'User can create a task\\\\', async ({ page }) => {\\\\n    // Assume logged in state (requires setup)\\\\n    \\\\n    // Click inbox\\\\n    await page.click(\\\\'text=Inbox\\\\');\\\\n    \\\\n    // Type new task\\\\n    await page.keyboard.type(\\\\'New E2E Task\\\\');\\\\n    await page.keyboard.press(\\\\'Enter\\\\');\\\\n    \\\\n    // Verify task appears\\\\n    await expect(page.locator(\\\\'text=New E2E Task\\\\')).toBeVisible();\\\\n  });\\\\n\\\\n  test(\\\\'User can create a journal entry\\\\', async ({ page }) => {\\\\n    // Navigate to journal\\\\n    await page.click(\\\\'text=Journal\\\\');\\\\n    \\\\n    // Click add button\\\\n    await page.click(\\\\'button:has-text(\\\\\\\"plus\\\\\\\")\\\\'); // Adjust selector as needed\\\\n    \\\\n    // Verify editor opens\\\\n    await expect(page.locator(\\\\'textarea\\\\')).toBeVisible();\\\\n    \\\\n    // Type content\\\\n    await page.fill(\\\\'textarea\\\\', \\\\'# My Journal\\\\\\\\n\\\\\\\\nTesting journal entry.\\\\');\\\\n    \\\\n    // Click save\\\\n    await page.click(\\\\'text=Save\\\\');\\\\n    \\\\n    // Verify entry in list\\\\n    await expect(page.locator(\\\\'text=My Journal\\\\')).toBeVisible();\\\\n  });\\\\n\\\\n  test(\\\\'User can use Calendar\\\\', async ({ page }) => {\\\\n    // Navigate to calendar\\\\n    await page.click(\\\\'text=Calendar\\\\');\\\\n    \\\\n    // Verify calendar view\\\\n    await expect(page.locator(\\\\'.grid-cols-7\\\\')).toBeVisible();\\\\n  });\\\\n});\\\\n\",\"originAcceptText\":\"import { test, expect } from '@playwright/test';\\n\\ntest.describe('Task Management System E2E', () => {\\n  \\n  test.beforeEach(async ({ page }) => {\\n    // Navigate to the app\\n    await page.goto('/');\\n  });\\n\\n  test('User can login', async ({ page }) => {\\n    // Should be redirected to login page\\n    await expect(page).toHaveURL(/\\\\/login/);\\n    \\n    // Fill in credentials (assuming test user exists or mock)\\n    await page.fill('input[type=\\\"email\\\"]', 'test@example.com');\\n    await page.fill('input[type=\\\"password\\\"]', 'password123');\\n    \\n    // Click login\\n    await page.click('button[type=\\\"submit\\\"]');\\n    \\n    // Should navigate to dashboard\\n    // Note: In a real test, we might need to mock Supabase auth response\\n  });\\n\\n  test('User can create a task', async ({ page }) => {\\n    // Assume logged in state (requires setup)\\n    \\n    // Click inbox\\n    await page.click('text=Inbox');\\n    \\n    // Type new task\\n    await page.keyboard.type('New E2E Task');\\n    await page.keyboard.press('Enter');\\n    \\n    // Verify task appears\\n    await expect(page.locator('text=New E2E Task')).toBeVisible();\\n  });\\n\\n  test('User can create a journal entry', async ({ page }) => {\\n    // Navigate to journal\\n    await page.click('text=Journal');\\n    \\n    // Click add button\\n    await page.click('button:has-text(\\\"plus\\\")'); // Adjust selector as needed\\n    \\n    // Verify editor opens\\n    await expect(page.locator('textarea')).toBeVisible();\\n    \\n    // Type content\\n    await page.fill('textarea', '# My Journal\\\\n\\\\nTesting journal entry.');\\n    \\n    // Click save\\n    await page.click('text=Save');\\n    \\n    // Verify entry in list\\n    await expect(page.locator('text=My Journal')).toBeVisible();\\n  });\\n\\n  test('User can use Calendar', async ({ page }) => {\\n    // Navigate to calendar\\n    await page.click('text=Calendar');\\n    \\n    // Verify calendar view\\n    await expect(page.locator('.grid-cols-7')).toBeVisible();\\n  });\\n});\\n\",\"originTextLength\":1921,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766415709691}]",
  "range-cache-file:///Users/leegary/ai_completion/.env": "[{\"originRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":231}},\"modifyRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":231}},\"action\":\"None\",\"isLine\":false,\"originText\":\"VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjcmtjbG1kZXJxZXdjd3Vnc25sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNTc0MzAsImV4cCI6MjA4MTgzMzQzMH0.UT2vJTXpPO5tR9sUD8YU0gJ_47Zpe3yJiLzllUljPDw\",\"originAcceptText\":\"VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjcmtjbG1kZXJxZXdjd3Vnc25sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNTc0MzAsImV4cCI6MjA4MTgzMzQzMH0.UT2vJTXpPO5tR9sUD8YU0gJ_47Zpe3yJiLzllUljPDw\",\"originTextLength\":231,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416182696}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/ErrorScreen.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":21,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":21,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React from \\\\'react\\\\';\\\\nimport { AlertCircle } from \\\\'lucide-react\\\\';\\\\n\\\\ninterface ErrorScreenProps {\\\\n  message?: string;\\\\n}\\\\n\\\\nexport const ErrorScreen: React.FC<ErrorScreenProps> = ({ message = \\\\'服务不可用\\\\' }) => {\\\\n  return (\\\\n    <div className=\\\\\\\"min-h-screen flex items-center justify-center bg-gray-100 p-4\\\\\\\">\\\\n      <div className=\\\\\\\"bg-[#1c1c1e] rounded-2xl shadow-2xl p-12 flex flex-col items-center justify-center min-w-[320px] max-w-md\\\\\\\">\\\\n        <div className=\\\\\\\"bg-red-500/20 p-4 rounded-full mb-6\\\\\\\">\\\\n            <div className=\\\\\\\"bg-red-500 w-2 h-8 rounded-full mb-1 mx-auto\\\\\\\"></div>\\\\n            <div className=\\\\\\\"bg-red-500 w-2 h-2 rounded-full mx-auto\\\\\\\"></div>\\\\n        </div>\\\\n        {/* Or use Lucide icon if preferred, but custom shape described was specific */}\\\\n        {/* <AlertCircle size={48} className=\\\\\\\"text-red-500 mb-6\\\\\\\" /> */}\\\\n        \\\\n        <h1 className=\\\\\\\"text-white text-xl font-bold tracking-wide\\\\\\\">{message}</h1>\\\\n      </div>\\\\n    </div>\\\\n  );\\\\n};\\\\n\",\"originAcceptText\":\"import React from 'react';\\nimport { AlertCircle } from 'lucide-react';\\n\\ninterface ErrorScreenProps {\\n  message?: string;\\n}\\n\\nexport const ErrorScreen: React.FC<ErrorScreenProps> = ({ message = '服务不可用' }) => {\\n  return (\\n    <div className=\\\"min-h-screen flex items-center justify-center bg-gray-100 p-4\\\">\\n      <div className=\\\"bg-[#1c1c1e] rounded-2xl shadow-2xl p-12 flex flex-col items-center justify-center min-w-[320px] max-w-md\\\">\\n        <div className=\\\"bg-red-500/20 p-4 rounded-full mb-6\\\">\\n            <div className=\\\"bg-red-500 w-2 h-8 rounded-full mb-1 mx-auto\\\"></div>\\n            <div className=\\\"bg-red-500 w-2 h-2 rounded-full mx-auto\\\"></div>\\n        </div>\\n        {/* Or use Lucide icon if preferred, but custom shape described was specific */}\\n        {/* <AlertCircle size={48} className=\\\"text-red-500 mb-6\\\" /> */}\\n        \\n        <h1 className=\\\"text-white text-xl font-bold tracking-wide\\\">{message}</h1>\\n      </div>\\n    </div>\\n  );\\n};\\n\",\"originTextLength\":951,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416182699},{\"originRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":1,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766416324496},{\"originRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":12}},\"modifyRange\":{\"start\":{\"line\":18,\"character\":0},\"end\":{\"line\":20,\"character\":12}},\"action\":\"None\",\"isLine\":false,\"originText\":\"        <p className=\\\\\\\"text-gray-500 text-xs mt-4 max-w-xs text-center break-all\\\\\\\">\\\\n            {message === \\\\'服务不可用\\\\' ? \\\\'Check .env file and console logs.\\\\' : \\\\'\\\\'}\\\\n        </p>\",\"originAcceptText\":\"        <p className=\\\"text-gray-500 text-xs mt-4 max-w-xs text-center break-all\\\">\\n            {message === '服务不可用' ? 'Check .env file and console logs.' : ''}\\n        </p>\",\"originTextLength\":171,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417775620}]",
  "range-cache-file:///Users/leegary/ai_completion/vite.config.ts": "[{\"originRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":9,\"character\":4}},\"modifyRange\":{\"start\":{\"line\":7,\"character\":0},\"end\":{\"line\":9,\"character\":4}},\"action\":\"None\",\"isLine\":false,\"originText\":\"  server: {\\\\n    port: 5174,\\\\n  },\",\"originAcceptText\":\"  server: {\\n    port: 5174,\\n  },\",\"originTextLength\":32,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417139611},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":15}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":15}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    port: 5175,\",\"originAcceptText\":\"    port: 5175,\",\"originTextLength\":15,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766417775624},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":15}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":15}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    port: 5176,\",\"originAcceptText\":\"    port: 5176,\",\"originTextLength\":15,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766418137186}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20251223140000_add_tag_order.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":1,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"alter table public.tags add column order_index numeric default 0;\\\\n\",\"originAcceptText\":\"alter table public.tags add column order_index numeric default 0;\\n\",\"originTextLength\":66,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766420225996}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20251223143000_fix_rls.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":13,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Drop existing restrictive policies on tags\\\\ndrop policy if exists \\\\\\\"Users can view their own tags\\\\\\\" on public.tags;\\\\ndrop policy if exists \\\\\\\"Users can insert their own tags\\\\\\\" on public.tags;\\\\ndrop policy if exists \\\\\\\"Users can update their own tags\\\\\\\" on public.tags;\\\\ndrop policy if exists \\\\\\\"Users can delete their own tags\\\\\\\" on public.tags;\\\\n\\\\n-- Drop existing restrictive policies on tasks (just in case)\\\\ndrop policy if exists \\\\\\\"Users can view their own tasks\\\\\\\" on public.tasks;\\\\ndrop policy if exists \\\\\\\"Users can insert their own tasks\\\\\\\" on public.tasks;\\\\ndrop policy if exists \\\\\\\"Users can update their own tasks\\\\\\\" on public.tasks;\\\\ndrop policy if exists \\\\\\\"Users can delete their own tasks\\\\\\\" on public.tasks;\\\\n\\\\n-- Create permissive policies for development (Allow all operations)\\\\ncreate policy \\\\\\\"Enable all access to tags\\\\\\\" on public.tags for all using (true) with check (true);\\\\ncreate policy \\\\\\\"Enable all access to tasks\\\\\\\" on public.tasks for all using (true) with check (true);\\\\n\",\"originAcceptText\":\"-- Drop existing restrictive policies on tags\\ndrop policy if exists \\\"Users can view their own tags\\\" on public.tags;\\ndrop policy if exists \\\"Users can insert their own tags\\\" on public.tags;\\ndrop policy if exists \\\"Users can update their own tags\\\" on public.tags;\\ndrop policy if exists \\\"Users can delete their own tags\\\" on public.tags;\\n\\n-- Drop existing restrictive policies on tasks (just in case)\\ndrop policy if exists \\\"Users can view their own tasks\\\" on public.tasks;\\ndrop policy if exists \\\"Users can insert their own tasks\\\" on public.tasks;\\ndrop policy if exists \\\"Users can update their own tasks\\\" on public.tasks;\\ndrop policy if exists \\\"Users can delete their own tasks\\\" on public.tasks;\\n\\n-- Create permissive policies for development (Allow all operations)\\ncreate policy \\\"Enable all access to tags\\\" on public.tags for all using (true) with check (true);\\ncreate policy \\\"Enable all access to tasks\\\" on public.tasks for all using (true) with check (true);\\n\",\"originTextLength\":955,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766420798613}]",
  "range-cache-file:///Users/leegary/ai_completion/supabase/migrations/20251223150000_create_journals.sql": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":29,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":29,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"-- Create journals table\\\\ncreate table if not exists public.journals (\\\\n  id uuid not null default uuid_generate_v4(),\\\\n  user_id uuid not null default auth.uid(),\\\\n  date date not null,\\\\n  content text default \\\\'\\\\',\\\\n  created_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  updated_at timestamp with time zone default timezone(\\\\'utc\\\\'::text, now()) not null,\\\\n  \\\\n  constraint journals_pkey primary key (id),\\\\n  constraint journals_user_date_key unique (user_id, date)\\\\n);\\\\n\\\\n-- Enable RLS\\\\nalter table public.journals enable row level security;\\\\n\\\\n-- Policies\\\\ncreate policy \\\\\\\"Users can view their own journals\\\\\\\" \\\\non public.journals for select \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can insert their own journals\\\\\\\" \\\\non public.journals for insert \\\\nwith check (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can update their own journals\\\\\\\" \\\\non public.journals for update \\\\nusing (auth.uid() = user_id);\\\\n\\\\ncreate policy \\\\\\\"Users can delete their own journals\\\\\\\" \\\\non public.journals for delete \\\\nusing (auth.uid() = user_id);\\\\n\\\\n-- Also ensure development policy exists if needed (for immediate testing without auth strictness)\\\\ncreate policy \\\\\\\"Enable all access to journals\\\\\\\" on public.journals for all using (true) with check (true);\\\\n\",\"originAcceptText\":\"-- Create journals table\\ncreate table if not exists public.journals (\\n  id uuid not null default uuid_generate_v4(),\\n  user_id uuid not null default auth.uid(),\\n  date date not null,\\n  content text default '',\\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,\\n  \\n  constraint journals_pkey primary key (id),\\n  constraint journals_user_date_key unique (user_id, date)\\n);\\n\\n-- Enable RLS\\nalter table public.journals enable row level security;\\n\\n-- Policies\\ncreate policy \\\"Users can view their own journals\\\" \\non public.journals for select \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can insert their own journals\\\" \\non public.journals for insert \\nwith check (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can update their own journals\\\" \\non public.journals for update \\nusing (auth.uid() = user_id);\\n\\ncreate policy \\\"Users can delete their own journals\\\" \\non public.journals for delete \\nusing (auth.uid() = user_id);\\n\\n-- Also ensure development policy exists if needed (for immediate testing without auth strictness)\\ncreate policy \\\"Enable all access to journals\\\" on public.journals for all using (true) with check (true);\\n\",\"originTextLength\":1240,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766421780784}]",
  "range-cache-file:///Users/leegary/ai_completion/src/components/AdvancedFilterBar.tsx": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":92,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":92,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import React, { useContext } from \\\\'react\\\\';\\\\nimport { AppContext } from \\\\'../context/AppContext\\\\';\\\\nimport { DropdownSelect } from \\\\'./DropdownSelect\\\\';\\\\nimport { SmartDateInput } from \\\\'./SmartDateInput\\\\';\\\\nimport { Tag, Calendar, Palette, X } from \\\\'lucide-react\\\\';\\\\nimport { COLOR_THEMES } from \\\\'../constants\\\\';\\\\n\\\\nexport const AdvancedFilterBar = () => {\\\\n    const { advancedFilters, setAdvancedFilters, tags, tagFilter } = useContext(AppContext);\\\\n\\\\n    if (!tagFilter) return null;\\\\n\\\\n    const handleTagSelect = (id: string | null) => {\\\\n        if (!id) return;\\\\n        setAdvancedFilters(prev => ({\\\\n            ...prev,\\\\n            additionalTags: prev.additionalTags.includes(id) \\\\n                ? prev.additionalTags.filter(tid => tid !== id)\\\\n                : [...prev.additionalTags, id]\\\\n        }));\\\\n    };\\\\n\\\\n    const handleStartDateChange = (date: string | null) => {\\\\n        setAdvancedFilters(prev => ({ ...prev, startDate: date }));\\\\n    };\\\\n\\\\n    const handleDueDateChange = (date: string | null) => {\\\\n        setAdvancedFilters(prev => ({ ...prev, dueDate: date }));\\\\n    };\\\\n\\\\n    const handleColorSelect = (color: string | null) => {\\\\n        setAdvancedFilters(prev => ({ ...prev, color }));\\\\n    };\\\\n\\\\n    const clearFilters = () => {\\\\n        setAdvancedFilters({ additionalTags: [], startDate: null, dueDate: null, color: null });\\\\n    };\\\\n\\\\n    const hasFilters = advancedFilters.additionalTags.length > 0 || advancedFilters.startDate || advancedFilters.dueDate || advancedFilters.color;\\\\n\\\\n    return (\\\\n        <div className=\\\\\\\"px-8 py-3 border-b border-gray-50 bg-gray-50/30 flex items-center gap-4 overflow-x-auto no-scrollbar\\\\\\\">\\\\n            <div className=\\\\\\\"flex items-center gap-2\\\\\\\">\\\\n                <span className=\\\\\\\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\\\\\\\">Filters:</span>\\\\n            </div>\\\\n\\\\n            {/* Additional Tags Filter */}\\\\n            <DropdownSelect\\\\n                icon={Tag}\\\\n                label=\\\\\\\"Tags\\\\\\\"\\\\n                items={tags.filter(t => t.id !== tagFilter)} // Exclude current tag\\\\n                selectedIds={advancedFilters.additionalTags}\\\\n                onSelect={handleTagSelect}\\\\n                multiSelect={true}\\\\n                placeholder=\\\\\\\"Filter by tags...\\\\\\\"\\\\n            />\\\\n\\\\n            {/* Start Date Filter */}\\\\n            <SmartDateInput\\\\n                label=\\\\\\\"Start Date\\\\\\\"\\\\n                value={advancedFilters.startDate}\\\\n                onChange={handleStartDateChange}\\\\n            />\\\\n\\\\n            {/* Due Date Filter */}\\\\n            <SmartDateInput\\\\n                label=\\\\\\\"Due Date\\\\\\\"\\\\n                value={advancedFilters.dueDate}\\\\n                onChange={handleDueDateChange}\\\\n            />\\\\n\\\\n            {/* Color Filter */}\\\\n            <div className=\\\\\\\"relative group\\\\\\\">\\\\n                <button className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border text-xs transition-colors ${advancedFilters.color ? \\\\'bg-white border-transparent shadow-sm ring-1 ring-gray-100 text-gray-800\\\\' : \\\\'text-gray-400 border-transparent hover:bg-gray-100\\\\'}`}>\\\\n                    <Palette size={13} />\\\\n                    <span>{advancedFilters.color ? \\\\'Color\\\\' : \\\\'Color\\\\'}</span>\\\\n                    {advancedFilters.color && (\\\\n                        <div className=\\\\\\\"w-2 h-2 rounded-full ml-1\\\\\\\" style={{ backgroundColor: COLOR_THEMES[advancedFilters.color as keyof typeof COLOR_THEMES]?.color || advancedFilters.color }} />\\\\n                    )}\\\\n                </button>\\\\n                <div className=\\\\\\\"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-100 p-2 hidden group-hover:block z-50 min-w-[150px]\\\\\\\">\\\\n                    <div className=\\\\\\\"grid grid-cols-4 gap-2\\\\\\\">\\\\n                        {Object.keys(COLOR_THEMES).map(colorKey => (\\\\n                            <button\\\\n                                key={colorKey}\\\\n                                onClick={() => handleColorSelect(advancedFilters.color === colorKey ? null : colorKey)}\\\\n                                className={`w-6 h-6 rounded-full border-2 ${advancedFilters.color === colorKey ? \\\\'border-gray-400 scale-110\\\\' : \\\\'border-transparent hover:scale-110\\\\'} transition-transform`}\\\\n                                style={{ backgroundColor: COLOR_THEMES[colorKey as keyof typeof COLOR_THEMES].color }}\\\\n                                title={colorKey}\\\\n                            />\\\\n                        ))}\\\\n                    </div>\\\\n                </div>\\\\n            </div>\\\\n\\\\n            {hasFilters && (\\\\n                <button \\\\n                    onClick={clearFilters}\\\\n                    className=\\\\\\\"ml-auto flex items-center gap-1 text-[10px] text-gray-400 hover:text-red-500 transition-colors\\\\\\\"\\\\n                >\\\\n                    <X size={12} /> Clear\\\\n                </button>\\\\n            )}\\\\n        </div>\\\\n    );\\\\n};\\\\n\",\"originAcceptText\":\"import React, { useContext } from 'react';\\nimport { AppContext } from '../context/AppContext';\\nimport { DropdownSelect } from './DropdownSelect';\\nimport { SmartDateInput } from './SmartDateInput';\\nimport { Tag, Calendar, Palette, X } from 'lucide-react';\\nimport { COLOR_THEMES } from '../constants';\\n\\nexport const AdvancedFilterBar = () => {\\n    const { advancedFilters, setAdvancedFilters, tags, tagFilter } = useContext(AppContext);\\n\\n    if (!tagFilter) return null;\\n\\n    const handleTagSelect = (id: string | null) => {\\n        if (!id) return;\\n        setAdvancedFilters(prev => ({\\n            ...prev,\\n            additionalTags: prev.additionalTags.includes(id) \\n                ? prev.additionalTags.filter(tid => tid !== id)\\n                : [...prev.additionalTags, id]\\n        }));\\n    };\\n\\n    const handleStartDateChange = (date: string | null) => {\\n        setAdvancedFilters(prev => ({ ...prev, startDate: date }));\\n    };\\n\\n    const handleDueDateChange = (date: string | null) => {\\n        setAdvancedFilters(prev => ({ ...prev, dueDate: date }));\\n    };\\n\\n    const handleColorSelect = (color: string | null) => {\\n        setAdvancedFilters(prev => ({ ...prev, color }));\\n    };\\n\\n    const clearFilters = () => {\\n        setAdvancedFilters({ additionalTags: [], startDate: null, dueDate: null, color: null });\\n    };\\n\\n    const hasFilters = advancedFilters.additionalTags.length > 0 || advancedFilters.startDate || advancedFilters.dueDate || advancedFilters.color;\\n\\n    return (\\n        <div className=\\\"px-8 py-3 border-b border-gray-50 bg-gray-50/30 flex items-center gap-4 overflow-x-auto no-scrollbar\\\">\\n            <div className=\\\"flex items-center gap-2\\\">\\n                <span className=\\\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\\\">Filters:</span>\\n            </div>\\n\\n            {/* Additional Tags Filter */}\\n            <DropdownSelect\\n                icon={Tag}\\n                label=\\\"Tags\\\"\\n                items={tags.filter(t => t.id !== tagFilter)} // Exclude current tag\\n                selectedIds={advancedFilters.additionalTags}\\n                onSelect={handleTagSelect}\\n                multiSelect={true}\\n                placeholder=\\\"Filter by tags...\\\"\\n            />\\n\\n            {/* Start Date Filter */}\\n            <SmartDateInput\\n                label=\\\"Start Date\\\"\\n                value={advancedFilters.startDate}\\n                onChange={handleStartDateChange}\\n            />\\n\\n            {/* Due Date Filter */}\\n            <SmartDateInput\\n                label=\\\"Due Date\\\"\\n                value={advancedFilters.dueDate}\\n                onChange={handleDueDateChange}\\n            />\\n\\n            {/* Color Filter */}\\n            <div className=\\\"relative group\\\">\\n                <button className={`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border text-xs transition-colors ${advancedFilters.color ? 'bg-white border-transparent shadow-sm ring-1 ring-gray-100 text-gray-800' : 'text-gray-400 border-transparent hover:bg-gray-100'}`}>\\n                    <Palette size={13} />\\n                    <span>{advancedFilters.color ? 'Color' : 'Color'}</span>\\n                    {advancedFilters.color && (\\n                        <div className=\\\"w-2 h-2 rounded-full ml-1\\\" style={{ backgroundColor: COLOR_THEMES[advancedFilters.color as keyof typeof COLOR_THEMES]?.color || advancedFilters.color }} />\\n                    )}\\n                </button>\\n                <div className=\\\"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-100 p-2 hidden group-hover:block z-50 min-w-[150px]\\\">\\n                    <div className=\\\"grid grid-cols-4 gap-2\\\">\\n                        {Object.keys(COLOR_THEMES).map(colorKey => (\\n                            <button\\n                                key={colorKey}\\n                                onClick={() => handleColorSelect(advancedFilters.color === colorKey ? null : colorKey)}\\n                                className={`w-6 h-6 rounded-full border-2 ${advancedFilters.color === colorKey ? 'border-gray-400 scale-110' : 'border-transparent hover:scale-110'} transition-transform`}\\n                                style={{ backgroundColor: COLOR_THEMES[colorKey as keyof typeof COLOR_THEMES].color }}\\n                                title={colorKey}\\n                            />\\n                        ))}\\n                    </div>\\n                </div>\\n            </div>\\n\\n            {hasFilters && (\\n                <button \\n                    onClick={clearFilters}\\n                    className=\\\"ml-auto flex items-center gap-1 text-[10px] text-gray-400 hover:text-red-500 transition-colors\\\"\\n                >\\n                    <X size={12} /> Clear\\n                </button>\\n            )}\\n        </div>\\n    );\\n};\\n\",\"originTextLength\":4763,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427585944},{\"originRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":99}},\"modifyRange\":{\"start\":{\"line\":8,\"character\":0},\"end\":{\"line\":8,\"character\":99}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    const { advancedFilters, setAdvancedFilters, tags, tagFilter, tasks } = useContext(AppContext);\",\"originAcceptText\":\"    const { advancedFilters, setAdvancedFilters, tags, tagFilter, tasks } = useContext(AppContext);\",\"originTextLength\":99,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427768993},{\"originRange\":{\"start\":{\"line\":62,\"character\":0},\"end\":{\"line\":62,\"character\":29}},\"modifyRange\":{\"start\":{\"line\":62,\"character\":0},\"end\":{\"line\":62,\"character\":29}},\"action\":\"None\",\"isLine\":false,\"originText\":\"                tasks={tasks}\",\"originAcceptText\":\"                tasks={tasks}\",\"originTextLength\":29,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427768997},{\"originRange\":{\"start\":{\"line\":69,\"character\":0},\"end\":{\"line\":69,\"character\":29}},\"modifyRange\":{\"start\":{\"line\":69,\"character\":0},\"end\":{\"line\":69,\"character\":29}},\"action\":\"None\",\"isLine\":false,\"originText\":\"                tasks={tasks}\",\"originAcceptText\":\"                tasks={tasks}\",\"originTextLength\":29,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427769005},{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":35}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":0,\"character\":35}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { useContext } from \\\\'react\\\\';\",\"originAcceptText\":\"import { useContext } from 'react';\",\"originTextLength\":35,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475425436},{\"originRange\":{\"start\":{\"line\":4,\"character\":0},\"end\":{\"line\":4,\"character\":47}},\"modifyRange\":{\"start\":{\"line\":4,\"character\":0},\"end\":{\"line\":4,\"character\":47}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { Tag, Palette, X } from \\\\'lucide-react\\\\';\",\"originAcceptText\":\"import { Tag, Palette, X } from 'lucide-react';\",\"originTextLength\":47,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475425439}]",
  "range-cache-file:///Users/leegary/ai_completion/src/constants.ts": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":17,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":17,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"export const DRAG_GHOST_IMG = \\\\'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\\\';\\\\n\\\\nexport const COLOR_THEMES = {\\\\n  gray: { color: \\\\'#6b7280\\\\', bg: \\\\'bg-gray-50\\\\', text: \\\\'text-gray-600\\\\', badge: \\\\'bg-gray-100 text-gray-600 border-gray-200\\\\' },\\\\n  blue: { color: \\\\'#3b82f6\\\\', bg: \\\\'bg-blue-50\\\\', text: \\\\'text-blue-600\\\\', badge: \\\\'bg-blue-100 text-blue-600 border-blue-200\\\\' },\\\\n  indigo: { color: \\\\'#6366f1\\\\', bg: \\\\'bg-indigo-50\\\\', text: \\\\'text-indigo-600\\\\', badge: \\\\'bg-indigo-100 text-indigo-600 border-indigo-200\\\\' },\\\\n  red: { color: \\\\'#ef4444\\\\', bg: \\\\'bg-red-50\\\\', text: \\\\'text-red-600\\\\', badge: \\\\'bg-red-100 text-red-600 border-red-200\\\\' },\\\\n  orange: { color: \\\\'#f97316\\\\', bg: \\\\'bg-orange-50\\\\', text: \\\\'text-orange-600\\\\', badge: \\\\'bg-orange-100 text-orange-600 border-orange-200\\\\' },\\\\n  amber: { color: \\\\'#f59e0b\\\\', bg: \\\\'bg-amber-50\\\\', text: \\\\'text-amber-600\\\\', badge: \\\\'bg-amber-100 text-amber-600 border-amber-200\\\\' },\\\\n  green: { color: \\\\'#10b981\\\\', bg: \\\\'bg-green-50\\\\', text: \\\\'text-green-600\\\\', badge: \\\\'bg-green-100 text-green-600 border-green-200\\\\' },\\\\n  teal: { color: \\\\'#14b8a6\\\\', bg: \\\\'bg-teal-50\\\\', text: \\\\'text-teal-600\\\\', badge: \\\\'bg-teal-100 text-teal-600 border-teal-200\\\\' },\\\\n  cyan: { color: \\\\'#06b6d4\\\\', bg: \\\\'bg-cyan-50\\\\', text: \\\\'text-cyan-600\\\\', badge: \\\\'bg-cyan-100 text-cyan-600 border-cyan-200\\\\' },\\\\n  sky: { color: \\\\'#0ea5e9\\\\', bg: \\\\'bg-sky-50\\\\', text: \\\\'text-sky-600\\\\', badge: \\\\'bg-sky-100 text-sky-600 border-sky-200\\\\' },\\\\n  purple: { color: \\\\'#a855f7\\\\', bg: \\\\'bg-purple-50\\\\', text: \\\\'text-purple-600\\\\', badge: \\\\'bg-purple-100 text-purple-600 border-purple-200\\\\' },\\\\n  fuchsia: { color: \\\\'#d946ef\\\\', bg: \\\\'bg-fuchsia-50\\\\', text: \\\\'text-fuchsia-600\\\\', badge: \\\\'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200\\\\' },\\\\n  pink: { color: \\\\'#ec4899\\\\', bg: \\\\'bg-pink-50\\\\', text: \\\\'text-pink-600\\\\', badge: \\\\'bg-pink-100 text-pink-600 border-pink-200\\\\' },\\\\n  rose: { color: \\\\'#f43f5e\\\\', bg: \\\\'bg-rose-50\\\\', text: \\\\'text-rose-600\\\\', badge: \\\\'bg-rose-100 text-rose-600 border-rose-200\\\\' },\\\\n};\\\\n\",\"originAcceptText\":\"export const DRAG_GHOST_IMG = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\\n\\nexport const COLOR_THEMES = {\\n  gray: { color: '#6b7280', bg: 'bg-gray-50', text: 'text-gray-600', badge: 'bg-gray-100 text-gray-600 border-gray-200' },\\n  blue: { color: '#3b82f6', bg: 'bg-blue-50', text: 'text-blue-600', badge: 'bg-blue-100 text-blue-600 border-blue-200' },\\n  indigo: { color: '#6366f1', bg: 'bg-indigo-50', text: 'text-indigo-600', badge: 'bg-indigo-100 text-indigo-600 border-indigo-200' },\\n  red: { color: '#ef4444', bg: 'bg-red-50', text: 'text-red-600', badge: 'bg-red-100 text-red-600 border-red-200' },\\n  orange: { color: '#f97316', bg: 'bg-orange-50', text: 'text-orange-600', badge: 'bg-orange-100 text-orange-600 border-orange-200' },\\n  amber: { color: '#f59e0b', bg: 'bg-amber-50', text: 'text-amber-600', badge: 'bg-amber-100 text-amber-600 border-amber-200' },\\n  green: { color: '#10b981', bg: 'bg-green-50', text: 'text-green-600', badge: 'bg-green-100 text-green-600 border-green-200' },\\n  teal: { color: '#14b8a6', bg: 'bg-teal-50', text: 'text-teal-600', badge: 'bg-teal-100 text-teal-600 border-teal-200' },\\n  cyan: { color: '#06b6d4', bg: 'bg-cyan-50', text: 'text-cyan-600', badge: 'bg-cyan-100 text-cyan-600 border-cyan-200' },\\n  sky: { color: '#0ea5e9', bg: 'bg-sky-50', text: 'text-sky-600', badge: 'bg-sky-100 text-sky-600 border-sky-200' },\\n  purple: { color: '#a855f7', bg: 'bg-purple-50', text: 'text-purple-600', badge: 'bg-purple-100 text-purple-600 border-purple-200' },\\n  fuchsia: { color: '#d946ef', bg: 'bg-fuchsia-50', text: 'text-fuchsia-600', badge: 'bg-fuchsia-100 text-fuchsia-600 border-fuchsia-200' },\\n  pink: { color: '#ec4899', bg: 'bg-pink-50', text: 'text-pink-600', badge: 'bg-pink-100 text-pink-600 border-pink-200' },\\n  rose: { color: '#f43f5e', bg: 'bg-rose-50', text: 'text-rose-600', badge: 'bg-rose-100 text-rose-600 border-rose-200' },\\n};\\n\",\"originTextLength\":1922,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766427923108}]",
  "range-cache-file:///Users/leegary/ai_completion/test-ai.js": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":23,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":23,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"import { GoogleGenerativeAI } from \\\\\\\"@google/generative-ai\\\\\\\";\\\\n\\\\nconst API_KEY = \\\\\\\"AIzaSyBbGFzQkwhEmNQduYxaZnnxxHR-DlQjj98\\\\\\\";\\\\nconst genAI = new GoogleGenerativeAI(API_KEY);\\\\n\\\\nasync function listModels() {\\\\n  try {\\\\n    const model = genAI.getGenerativeModel({ model: \\\\\\\"gemini-1.5-flash\\\\\\\" });\\\\n    console.log(\\\\\\\"Checking gemini-1.5-flash...\\\\\\\");\\\\n    // Just try to generate something simple\\\\n    const result = await model.generateContent(\\\\\\\"Hello\\\\\\\");\\\\n    console.log(\\\\\\\"Success! Response:\\\\\\\", result.response.text());\\\\n  } catch (error) {\\\\n    console.error(\\\\\\\"Error with gemini-1.5-flash:\\\\\\\", error.message);\\\\n  }\\\\n\\\\n  try {\\\\n    console.log(\\\\\\\"Checking gemini-pro...\\\\\\\");\\\\n    const model2 = genAI.getGenerativeModel({ model: \\\\\\\"gemini-pro\\\\\\\" });\\\\n    const result2 = await model2.generateContent(\\\\\\\"Hello\\\\\\\");\\\\n    console.log(\\\\\\\"Success! Response:\\\\\\\", result2.response.text());\\\\n  } catch (error) {\\\\n    console.error(\\\\\\\"Error with gemini-pro:\\\\\\\", error.message);\\\\n  }\\\\n}\\\\n\\\\nlistModels();\\\\n\",\"originAcceptText\":\"import { GoogleGenerativeAI } from \\\"@google/generative-ai\\\";\\n\\nconst API_KEY = \\\"AIzaSyBbGFzQkwhEmNQduYxaZnnxxHR-DlQjj98\\\";\\nconst genAI = new GoogleGenerativeAI(API_KEY);\\n\\nasync function listModels() {\\n  try {\\n    const model = genAI.getGenerativeModel({ model: \\\"gemini-1.5-flash\\\" });\\n    console.log(\\\"Checking gemini-1.5-flash...\\\");\\n    // Just try to generate something simple\\n    const result = await model.generateContent(\\\"Hello\\\");\\n    console.log(\\\"Success! Response:\\\", result.response.text());\\n  } catch (error) {\\n    console.error(\\\"Error with gemini-1.5-flash:\\\", error.message);\\n  }\\n\\n  try {\\n    console.log(\\\"Checking gemini-pro...\\\");\\n    const model2 = genAI.getGenerativeModel({ model: \\\"gemini-pro\\\" });\\n    const result2 = await model2.generateContent(\\\"Hello\\\");\\n    console.log(\\\"Success! Response:\\\", result2.response.text());\\n  } catch (error) {\\n    console.error(\\\"Error with gemini-pro:\\\", error.message);\\n  }\\n}\\n\\nlistModels();\\n\",\"originTextLength\":931,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766429131289}]",
  "range-cache-file:///Users/leegary/ai_completion/wrangler.toml": "[{\"originRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":5,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":0,\"character\":0},\"end\":{\"line\":5,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"name = \\\\\\\"ai-completion\\\\\\\"\\\\ncompatibility_date = \\\\\\\"2024-09-23\\\\\\\"\\\\n\\\\n[assets]\\\\ndirectory = \\\\\\\"./dist\\\\\\\"\\\\nbinding = \\\\\\\"ASSETS\\\\\\\"\\\\n\",\"originAcceptText\":\"name = \\\"ai-completion\\\"\\ncompatibility_date = \\\"2024-09-23\\\"\\n\\n[assets]\\ndirectory = \\\"./dist\\\"\\nbinding = \\\"ASSETS\\\"\\n\",\"originTextLength\":107,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766475931178},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":0}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":0}},\"action\":\"None\",\"isLine\":false,\"originText\":\"\",\"originAcceptText\":\"\",\"originTextLength\":0,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766476195925},{\"originRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":18}},\"modifyRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":2,\"character\":18}},\"action\":\"None\",\"isLine\":false,\"originText\":\"main = \\\\\\\"worker.js\\\\\\\"\",\"originAcceptText\":\"main = \\\"worker.js\\\"\",\"originTextLength\":18,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766484377503},{\"originRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":18}},\"modifyRange\":{\"start\":{\"line\":5,\"character\":0},\"end\":{\"line\":5,\"character\":18}},\"action\":\"None\",\"isLine\":false,\"originText\":\"binding = \\\\\\\"ASSETS\\\\\\\"\",\"originAcceptText\":\"binding = \\\"ASSETS\\\"\",\"originTextLength\":18,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766484377517}]",
  "range-cache-file:///Users/leegary/ai_completion/worker.js": "[{\"originRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":11,\"character\":20}},\"modifyRange\":{\"start\":{\"line\":2,\"character\":0},\"end\":{\"line\":11,\"character\":20}},\"action\":\"None\",\"isLine\":false,\"originText\":\"    const url = new URL(request.url);\\\\n    \\\\n    // First, try to serve the requested static asset\\\\n    let response = await env.ASSETS.fetch(request);\\\\n\\\\n    // If the asset is not found (404), and it\\\\'s not a request for a specific file extension (like .css, .js, .png)\\\\n    // assume it\\\\'s a navigation route and serve index.html (SPA Fallback)\\\\n    if (response.status === 404 && !url.pathname.includes(\\\\'.\\\\')) {\\\\n      response = await env.ASSETS.fetch(new URL(\\\\\\\"/index.html\\\\\\\", request.url));\\\\n    }\\\\n\\\\n    return response;\",\"originAcceptText\":\"    const url = new URL(request.url);\\n    \\n    // First, try to serve the requested static asset\\n    let response = await env.ASSETS.fetch(request);\\n\\n    // If the asset is not found (404), and it's not a request for a specific file extension (like .css, .js, .png)\\n    // assume it's a navigation route and serve index.html (SPA Fallback)\\n    if (response.status === 404 && !url.pathname.includes('.')) {\\n      response = await env.ASSETS.fetch(new URL(\\\"/index.html\\\", request.url));\\n    }\\n\\n    return response;\",\"originTextLength\":511,\"aiScene\":\"builder\",\"behaviorType\":\"accept\",\"updateTime\":1766484816709}]"
}